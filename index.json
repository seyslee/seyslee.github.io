[{"content":"ê°œìš” # ì§€ì •í•œ ë¦¬ì „ì˜ gp2 ë³¼ë¥¨ì„ gp3ë¡œ ëª¨ë‘ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.\nAWS Management Consoleì—ì„œë„ ìˆ˜ì‘ì—…ìœ¼ë¡œ ê°€ëŠ¥í•˜ì§€ë§Œ ì´ ê¸€ì—ì„œëŠ” AWS CLIë¥¼ í™œìš©í•œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€ê²½ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.\ngp3ë¡œ ë³€ê²½í•´ì•¼í•  EBS ë³¼ë¥¨ì´ 200ê°œì¸ë° AWS Management Consoleë¡œ í•˜ë‚˜ì”© ì‘ì—…í•˜ëŠ” ì¼ì€ ì§€ì˜¥ì…ë‹ˆë‹¤.\nì „ì œì¡°ê±´ # jq ì„¤ì¹˜\nìŠ¤í¬ë¦½íŠ¸ ì•ˆì—ì„œ json ì‘ë‹µì„ íŒŒì‹±í•´ì„œ Volume IDì™€ Volume ìƒíƒœë¥¼ ì¶”ì¶œí•˜ë„ë¡ ë™ì‘í•˜ê¸° ë•Œë¬¸ì—, ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì— jq ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.\nmacOSì˜ ê²½ìš° íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ brewë¥¼ í†µí•´ ì‰½ê²Œ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n$ brew install jq ì„¤ì¹˜ í›„ jq ëª…ë ¹ì–´ì˜ ë™ì‘ì„ í™•ì¸í•©ë‹ˆë‹¤.\n$ jq --version jq-1.6 AWS CLI\nAWS CLI ì„¤ì¹˜ì™€ ì¸ì¦ì´ ë¯¸ë¦¬ êµ¬ì„±ëœ ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤.\n$ aws --version aws-cli/2.7.5 Python/3.9.13 Darwin/21.5.0 source/arm64 prompt/off ì‚¬ìš©ë²• # jq ì„¤ì¹˜ í™•ì¸ # ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì „ì— jq ëª…ë ¹ì–´ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\n$ which jq /opt/homebrew/bin/jq ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„ # gp3-migration.sh\nê·¸ëŒ€ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ì•ˆë˜ê³ , region ë³€ìˆ˜ëŠ” ìì‹ ì˜ í™˜ê²½ì— ë§ê²Œ ë³€ê²½í•©ë‹ˆë‹¤.\nregion=\u0026#39;ap-northeast-2\u0026#39; ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ # $ sh gp3-migration.sh ì£¼ì˜ì‚¬í•­ # ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ ì§€ì •í•œ AWS ë¦¬ì „ì— ìœ„ì¹˜í•œ ëª¨ë“  gp2 ë³¼ë¥¨ì´ gp3ë¡œ ë³€ê²½ ì‹œì‘ë©ë‹ˆë‹¤.\në³¼ë¥¨ íƒ€ì… ë³€ê²½ ê³¼ì •ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¬´ì¤‘ë‹¨ìœ¼ë¡œ ì§„í–‰ë˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ë”ë¼ë„ ì„œë¹„ìŠ¤ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ì•ˆì „í•˜ê²Œ ì™„ë£Œë©ë‹ˆë‹¤.\nìƒí™©ì— ë”°ë¼ EBS ë³¼ë¥¨ íƒ€ì… ë³€ê²½ì´ ìµœëŒ€ 24ì‹œê°„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•œ ë²ˆ ìŠ¤í™ì„ ë³€ê²½í•œ EBS ë³¼ë¥¨ì€ 6ì‹œê°„ì´ ì§€ë‚œ í›„ì— ë‹¤ì‹œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.\níƒ€ì… ë³€ê²½ì´ ì§„í–‰ ì¤‘ì¸ EBS ë³¼ë¥¨ì˜ ìƒíƒœëŠ” ì½˜ì†”ì—ì„œ í™•ì¸í•  ë•Œ In-use - optimizing (n%)ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.\nAmazon EKSElastic Kubernetes Service ë…¸ë“œì—ì„œ gp3, io2 íƒ€ì…ì˜ EBS ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ë ¤ë©´ EBS CSI Driver êµ¬ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤.1 2\në°ëª¨ # í„°ë¯¸ë„ # gp3-migration.sh ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ í„°ë¯¸ë„ì— ê²°ê³¼ê°’ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\nì´ ì˜ˆì œì—ì„œëŠ” 7ê°œì˜ gp2 íƒ€ì…ì´ ì„œìš¸ ë¦¬ì „ì— ì¡´ì¬í•˜ê³ , ì´ë¥¼ ì¼ê´„ ë³€ê²½í•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤ì…ë‹ˆë‹¤.\n$ sh gp3-migration.sh [i] Start finding all gp2 volumes in ap-northeast-2 [i] List up all gp2 volume in ap-northeast-2 vol-11111111111111111 vol-22222222222222222 vol-33333333333333333 vol-44444444444444444 vol-55555555555555555 vol-66666666666666666 vol-77777777777777777 [i] ============================= [i] Migrating all gp2 volumes to gp3 [i] OK: volume vol-11111111111111111 changed to state \u0026#39;modifying\u0026#39; [i] OK: volume vol-22222222222222222 changed to state \u0026#39;modifying\u0026#39; [i] OK: volume vol-33333333333333333 changed to state \u0026#39;modifying\u0026#39; [i] OK: volume vol-44444444444444444 changed to state \u0026#39;modifying\u0026#39; [i] OK: volume vol-55555555555555555 changed to state \u0026#39;modifying\u0026#39; [i] OK: volume vol-66666666666666666 changed to state \u0026#39;modifying\u0026#39; [i] OK: volume vol-77777777777777777 changed to state \u0026#39;modifying\u0026#39; AWS Management Console # gp3-migration.shÂ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•œ í›„ AWS Management Console â†’ EC2 â†’ Volume í˜ì´ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\níƒ€ì… ë³€ê²½ì´ ì§„í–‰ì¤‘ì¸ EBS ë³¼ë¥¨ì˜ ìƒíƒœëŠ” in-use - optimizingìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.\ngp2 â†’ gp3 íƒ€ì… ë³€ê²½ì€ EBSì˜ ì‚¬ìš©ì¤‘ì¸ ìš©ëŸ‰, ì¸í”„ë¼ í™˜ê²½ì— ë”°ë¼ ìµœëŒ€ 24ì‹œê°„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì ì‹œ ê¸°ë‹¤ë¦¬ë©´ ë³¼ë¥¨ ìƒíƒœê°€ in-useë¡œ ë°”ë€Œë©° ë³¼ë¥¨ íƒ€ì…ì´ ë³€ê²½ ì™„ë£Œë©ë‹ˆë‹¤.\nì‘ì—… ì™„ë£Œ!\nAWS ë¸”ë¡œê·¸ ê²Œì‹œê¸€ gp2 to gp3 migration\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nAWS ê³µì‹ë¬¸ì„œ EBS CSI Driver\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"Jun 3, 2022","permalink":"/blog/script-gp2-volumes-to-gp3-migration/","section":"Blogs","summary":"ê°œìš” # ì§€ì •í•œ ë¦¬ì „ì˜ gp2 ë³¼ë¥¨ì„ gp3ë¡œ ëª¨ë‘ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.","title":"gp2 to gp3 ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸"},{"content":"ê°œìš” # EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ í‘œì¤€ì‹œë¥¼ ë³€ê²½í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.\nì¢…ì¢… EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì‹œê°„ì„ í•œêµ­ í‘œì¤€ì‹œë¡œ ë³€ê²½í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\nì œ ìµœê·¼ ì‚¬ë¡€ë¡œëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ ë¡œì»¬ì—ì„œ ëŒë¦¬ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì¸í•´ ìƒì„±ë˜ëŠ” ë¡œê·¸ ì‹œê°„ì´ í˜‘ì • ì„¸ê³„ì‹œUTC, Universal Time Coordinatedê°€ ì•„ë‹Œ í•œêµ­ í‘œì¤€ì‹œKST, Korea Standard Timeë¡œ ì°íˆë„ë¡ í•´ì•¼í•˜ëŠ” ìƒí™© ë“±ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\ní™˜ê²½ # OS : Amazon Linux 2 Shell : bash ì„¤ì •ë°©ë²• # Amazon Linux 2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ UTCí˜‘ì • ì„¸ê³„ì‹œ í‘œì¤€ ì‹œê°„ëŒ€ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.\nOS ë²„ì „ í™•ì¸ # í˜„ì¬ ì ‘ì†í•œ ì¸ìŠ¤í„´ìŠ¤ì˜ ìš´ì˜ì²´ì œê°€ Amazon Linux 2 ì„ì„ í™•ì¸í•©ë‹ˆë‹¤.\n$ id uid=1000(ec2-user) gid=1000(ec2-user) groups=1000(ec2-user),4(adm),10(wheel),190(systemd-journal) $ cat /etc/os-release NAME=\u0026#34;Amazon Linux\u0026#34; VERSION=\u0026#34;2\u0026#34; ID=\u0026#34;amzn\u0026#34; ID_LIKE=\u0026#34;centos rhel fedora\u0026#34; VERSION_ID=\u0026#34;2\u0026#34; PRETTY_NAME=\u0026#34;Amazon Linux 2\u0026#34; ... ì¸ìŠ¤í„´ìŠ¤ì˜ OS ë²„ì „ì´ Amazon Linux 2ì…ë‹ˆë‹¤.\ní˜„ì¬ íƒ€ì„ì¡´ í™•ì¸ # $ timedatectl Local time: Tue 2022-05-31 08:58:34 UTC Universal time: Tue 2022-05-31 08:58:34 UTC RTC time: Tue 2022-05-31 08:58:35 Time zone: n/a (UTC, +0000) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a í˜„ì¬ ì„¤ì •ëœ Time zone ê°’ì´ n/aì´ë©´ í˜‘ì • ì„¸ê³„ì‹œUTCë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\níƒ€ì„ì¡´ ë³€ê²½ # ì´ ì˜ˆì œì—ì„œëŠ” íƒ€ì„ì¡´ì„ ì„œìš¸ Asia/Seoulë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.\níƒ€ì„ì¡´ ëª©ë¡ í™•ì¸\nì „ì²´ íƒ€ì„ì¡´ ëª©ë¡ ì¤‘ Seoulë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.\n$ timedatectl list-timezones | grep -i seoul Asia/Seoul íƒ€ì„ì¡´ ë³€ê²½\níƒ€ì„ì¡´ì„ Asia/Seoulë¡œ ë³€ê²½í•©ë‹ˆë‹¤.\n$ sudo timedatectl set-timezone Asia/Seoul íƒ€ì„ì¡´ ì„¤ì • ì¬í™•ì¸ # Time zone ê°’ì´ n/a (UTC, +0000)ì—ì„œ Asia/Seoul (KST, +0900)ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\n$ timedatectl Local time: Tue 2022-05-31 17:58:59 KST Universal time: Tue 2022-05-31 08:58:59 UTC RTC time: Tue 2022-05-31 08:59:00 Time zone: Asia/Seoul (KST, +0900) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a date ëª…ë ¹ì–´ë¡œ í˜„ì¬ ì‹œê°„ì„ í™•ì¸í•©ë‹ˆë‹¤.\n$ date Tue May 31 17:59:01 KST 2022 date ê²°ê³¼ë„ í•œêµ­ í‘œì¤€ì‹œKSTë¡œ ì¶œë ¥ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\níƒ€ì„ì¡´ ì„¤ì •ì˜ ìœ ì§€ # ìœ„ ê³¼ì •ì—ì„œ ì¡°ì¹˜í•œ EC2 íƒ€ì„ì¡´ ì„¤ì •ì€ ì˜êµ¬ì ìš©ì´ê¸° ë•Œë¬¸ì— EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ë¦¬ë¶€íŒ…ëœ í›„ì—ë„ ê³„ì† ìœ ì§€ë©ë‹ˆë‹¤.\n$ uptime 19:49:56 up 0 min, 0 users, load average: 0.13, 0.03, 0.01 í˜„ì¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ì—…íƒ€ì„ì„ ë³´ë©´ ë°©ê¸ˆ ì „ ë¦¬ë¶€íŒ…ëœ ìƒíƒœì…ë‹ˆë‹¤.\në¦¬ë¶€íŒ…ì´ ì™„ë£Œëœ í›„ íƒ€ì„ì¡´ì„ í™•ì¸í•©ë‹ˆë‹¤.\n$ timedatectl Local time: Tue 2022-05-31 19:49:58 KST Universal time: Tue 2022-05-31 10:49:58 UTC RTC time: Tue 2022-05-31 10:49:59 Time zone: Asia/Seoul (KST, +0900) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¦¬ë¶€íŒ…í•œ ë’¤ì—ë„ ì—¬ì „íˆ Time zone ê°’ì´ Asia/Seoul (KST, +0900) ë¡œ ì„¤ì •ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì°¸ê³ ìë£Œ # AWS ê³µì‹ë¬¸ì„œ\nAmazon Linuxì˜ í‘œì¤€ ì‹œê°„ëŒ€ ë³€ê²½\n","date":"May 31, 2022","permalink":"/blog/change-ec2-timezone/","section":"Blogs","summary":"ê°œìš” # EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ í‘œì¤€ì‹œë¥¼ ë³€ê²½í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.","title":"EC2 íƒ€ì„ì¡´ ë³€ê²½"},{"content":"ê°œìš” # eksctlì„ ì‚¬ìš©í•´ì„œ ìì‹ ë§Œì˜ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\nì£¼ì˜ì‚¬í•­\nì´ ì‹¤ìŠµ ê³¼ì •ìœ¼ë¡œ ì¸í•´ AWS ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì‹¤ìŠµì´ ëë‚œ í›„ì—ëŠ” ì‹¤ìŠµí™˜ê²½ ì „ì²´ ì •ë¦¬ë¥¼ ì°¸ê³ í•´ì„œ ë°˜ë“œì‹œ ìƒì„±í•œ AWS ì „ì²´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•´ì£¼ì„¸ìš”.\nê³„ì† EKS Clusterë¥¼ ì¼œë‘ë©´ ê±°ì•¡ì˜ AWS ë¹„ìš©ì´ ë°œìƒí•©ë‹ˆë‹¤.\nì „ì œì¡°ê±´ # ì´ ê°€ì´ë“œì— í¬í•¨ëœ ì‹¤ìŠµì„ ì§„í–‰í•˜ê¸° ì „ì— ì•„ë˜ì˜ ëª‡ ê°€ì§€ ì¤€ë¹„ì‚¬í•­ì´ í•„ìš”í•©ë‹ˆë‹¤.\nAWS CLI íˆ´ì´ ì„¤ì¹˜ëœ ìƒíƒœ kubectl íˆ´ì´ ì„¤ì¹˜ëœ ìƒíƒœ eksctl íˆ´ì´ ì„¤ì¹˜ëœ ìƒíƒœ ì´ ê¸€ì—ì„œëŠ” aws-cli, kubectl, eksctlì˜ ì„¤ì¹˜ë°©ë²•ê¹Œì§€ëŠ” ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤.\ní™˜ê²½ # EKS Cluster # EKS Clusterë¥¼ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í•  ì˜ˆì •ì…ë‹ˆë‹¤.\në¦¬ì „: ap-northeast-2 (Seoul) í´ëŸ¬ìŠ¤í„° ì´ë¦„: eks-course-cluster ë…¸ë“œê·¸ë£¹ ì´ë¦„: ng-1 1 nodegroup 3 worker node (t3.small) ì‹¤ìŠµë¹„ìš© ì ˆì•½ì„ ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì€ t3.smallë¡œ ì •í•©ë‹ˆë‹¤.\nClient # OS: macOS Monterey 12.4 (M1 Pro) Shell: zsh + oh-my-zsh kubectl: v1.24.1 aws-cli: 2.7.4 eksctl: 0.100.0 ì‹¤ìŠµ # EKS ìƒì„±ìš© IAM User ìƒì„± # toy-adminì´ë¼ëŠ” ì´ë¦„ì˜ AWS IAM Userë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\nê¶Œí•œì€ AWS ê´€ë¦¬í˜• ì •ì±…ì¸ AdministratorAccessë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.\ntoy-admin ìœ ì €ì˜ ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ ë°œê¸‰ ë°›ì€ ë‹¤ìŒ, AWS CLIì—ì„œ Credentialì„ êµ¬ì„±í•©ë‹ˆë‹¤.\n$ aws configure --profile toy-admin EC2 í‚¤í˜ì–´ ìƒì„± # AWS Management Consoleì—ì„œ EC2 í‚¤ í˜ì–´ë¥¼ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.\ní‚¤ í˜ì–´ ì´ë¦„ì€ eks-courseë¡œ ì •í•©ë‹ˆë‹¤.\nì—¬ê¸°ì„œ ë§Œë“  SSH í‚¤í˜ì–´ëŠ” EKS Clusterì˜ EC2 ë…¸ë“œë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©ë˜ë©°, ì „ì²´ EC2 ë…¸ë“œì— í•´ë‹¹ í‚¤ê°€ ì£¼ì…ë©ë‹ˆë‹¤.\nAWS CLI ì¸ì¦ # toy-admin í”„ë¡œí•„ì˜ Credential ì„¤ì •ì„ í™•ì¸í•©ë‹ˆë‹¤.\n$ aws configure list --profile toy-admin Name Value Type Location ---- ----- ---- -------- profile toy-admin manual --profile access_key ****************X4XX shared-credentials-file secret_key ****************8xxx shared-credentials-file region ap-northeast-2 config-file ~/.aws/config AWS_PROFILE í™˜ê²½ë³€ìˆ˜ëŠ” AWS CLIì—ì„œ í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ í”„ë¡œí•„ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤.\ní”„ë¡œí•„ì„ defaultì—ì„œ toy-adminìœ¼ë¡œ ì „í™˜í•˜ê¸° ìœ„í•´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n$ export AWS_PROFILE=toy-admin í”„ë¡œí•„ì„ ë³€ê²½í•œ í›„ì—ëŠ” AWS CLIì—ì„œ í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ IAM ê¶Œí•œì„ í™•ì¸í•©ë‹ˆë‹¤.\n$ aws sts get-caller-identity { \u0026#34;UserId\u0026#34;: \u0026#34;XXXXXQOVWG0FYM0OXXXXX\u0026#34;, \u0026#34;Account\u0026#34;: \u0026#34;123456789012\u0026#34;, \u0026#34;Arn\u0026#34;: \u0026#34;arn:aws:iam::123456789012:user/toy-admin\u0026#34; } ê²°ê³¼ê°’ì„ ë³´ë©´ toy-admin IAM Userë¡œ ì¸ì¦ë˜ì–´ ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.\në§¤ë‹ˆí˜ìŠ¤íŠ¸ ì‘ì„± # EKS í´ëŸ¬ìŠ¤í„° ë°°í¬ì— ì‚¬ìš©í•  í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\níŒŒì¼ëª…ì€ eks-cluster.yamlë¡œ ì •í•˜ê² ìŠµë‹ˆë‹¤.\nì•„ë˜ í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” eksctl ê³µì‹ë¬¸ì„œ ìƒ˜í”Œì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\n$ cat eks-cluster.yaml apiVersion: eksctl.io/v1alpha5 kind: ClusterConfig metadata: name: eks-course-cluster region: ap-northeast-2 nodeGroups: - name: ng-1 instanceType: t3.small desiredCapacity: 3 ssh: # use existing EC2 key pair publicKeyName: eks-course ì‹¤ìŠµë¹„ìš©ì„ ì ˆì•½í•˜ê¸° ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì€ t3.smallë¡œ ì„¤ì •í•©ë‹ˆë‹¤. publicKeyName ê°’ì€ ì´ì „ ê³¼ì •ì—ì„œ AWS ì½˜ì†”ì—ì„œ ìƒì„±í•œ EC2 Key Pairì˜ ì´ë¦„ê³¼ ë™ì¼í•´ì•¼ í•©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„° ìƒì„± # $ ls eks-cluster.yaml ì‘ì„±í•œ eks-cluster.yaml íŒŒì¼ì„ ì‚¬ìš©í•´ì„œ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\ntime ëª…ë ¹ì–´ëŠ” ëª…ë ¹ì–´ ì™„ë£Œ ì‹œê°„ ì¸¡ì •ì„ ìœ„í•´ ì¡°í•©í–ˆìŠµë‹ˆë‹¤.\n$ time eksctl create cluster -f eks-cluster.yaml EKS í´ëŸ¬ìŠ¤í„° ìƒì„±ì€ AWS CloudFormationì„ í†µí•´ ëª¨ë“  êµ¬ì„±ì´ ìë™ ì§„í–‰ë©ë‹ˆë‹¤.\nAWS Management Console â†’ CloudFormation â†’ Stackì— ë“¤ì–´ê°€ì„œ ì§ì ‘ ì§„í–‰ì‚¬í•­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nVPC, Subnet, EC2, EBS, ë³´ì•ˆê·¸ë£¹Security Group, ASGAuto Scaling Group, NAT Gateway ë“± í´ëŸ¬ìŠ¤í„° ìš´ì˜ì— í•„ìš”í•œ ëª¨ë“  AWS ë¦¬ì†ŒìŠ¤ë¥¼ CloudFormationìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ê±¸ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n$ time eksctl create cluster -f eks-cluster.yaml ... 2022-05-29 19:25:42 [â„¹] using EC2 key pair \u0026#34;eks-course\u0026#34; ... ì¤‘ê°„ì— ì¶œë ¥ëœ ë¡œê·¸ë¥¼ ë³´ë©´ eks-courseë¼ëŠ” ì´ë¦„ì˜ SSH key pairë„ ì˜ ë°›ì•„ì˜¤ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n... 2022-05-29 19:43:41 [âœ”] EKS cluster \u0026#34;eks-course-cluster\u0026#34; in \u0026#34;ap-northeast-2\u0026#34; region is ready eksctl create cluster -f eks-cluster.yaml 0.41s user 0.25s system 0% cpu 17:58.99 total EKS í´ëŸ¬ìŠ¤í„° ìƒì„± ì™„ë£Œê¹Œì§€ 17ë¶„ 58ì´ˆê°€ ê±¸ë¦° ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nEKS í´ëŸ¬ìŠ¤í„°ì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ê°€ êµ‰ì¥íˆ ë§ê¸° ë•Œë¬¸ì— ìƒì„± ì™„ë£Œê¹Œì§€ ê¸´ ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.\nEKS í´ëŸ¬ìŠ¤í„° ìƒì„±ì´ ì™„ë£Œë˜ë©´ kubectl contextê°€ ìë™ìœ¼ë¡œ ìƒˆ í´ëŸ¬ìŠ¤í„°ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.\ní˜„ì¬ kubectl contextë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n$ kubectl config current-context toy-admin@eks-course-cluster.ap-northeast-2.eksctl.io í´ëŸ¬ìŠ¤í„° í™•ì¸ # $ eksctl get cluster NAME REGION EKSCTL CREATED eks-course-cluster\tap-northeast-2\tTrue ì„œìš¸ ë¦¬ì „ì— eks-course-clusterë¼ëŠ” ì´ë¦„ì˜ EKS í´ëŸ¬ìŠ¤í„°ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\nEKS í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œê·¸ë£¹ ng-1ë„ í™•ì¸í•´ë´…ë‹ˆë‹¤.\n$ eksctl get nodegroup --cluster eks-course-cluster CLUSTER NODEGROUP\tSTATUS CREATED\tMIN SIZE\tMAX SIZE\tDESIRED CAPACITY\tINSTANCE TYPE\tIMAGE ID ASG NAME TYPE eks-course-cluster\tng-1\tCREATE_COMPLETE\t2022-05-29T10:38:46Z\t3 3 3 t3.small ami-06512ccb913a9d11d\teksctl-eks-course-cluster-nodegroup-ng-1-NodeGroup-UQ0GUDZPSXUD\tunmanaged ì €í¬ê°€ êµ¬ì„±í•œëŒ€ë¡œ t3.small 3ëŒ€ë¡œ êµ¬ì„±ë˜ì–´ ìš´ì˜ì¤‘ì¸ ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nkubectlëª…ë ¹ì–´ë¡œ ë…¸ë“œ ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•´ë„ ê²°ê³¼ëŠ” ë™ì¼í•©ë‹ˆë‹¤.\n$ kubectl get node NAME STATUS ROLES AGE VERSION ip-192-168-12-158.ap-northeast-2.compute.internal Ready \u0026lt;none\u0026gt; 7m58s v1.22.6-eks-7d68063 ip-192-168-38-166.ap-northeast-2.compute.internal Ready \u0026lt;none\u0026gt; 7m54s v1.22.6-eks-7d68063 ip-192-168-80-123.ap-northeast-2.compute.internal Ready \u0026lt;none\u0026gt; 7m58s v1.22.6-eks-7d68063 AWS Management Console â†’ EC2 ì—ì„œë„ ì¸ìŠ¤í„´ìŠ¤ 3ëŒ€ê°€ ìƒì„±ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ì œ EKS í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ì´ ëë‚¬ìŠµë‹ˆë‹¤.\nEKS ë¹„ìš© # EKS ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì˜ ë¹„ìš©ì€ 1ì‹œê°„ë‹¹ 0.1USD ì…ë‹ˆë‹¤. ë…¸ë“œê·¸ë£¹ì€ ì˜¨ë””ë§¨ë“œ EC2 ë¹„ìš©ìœ¼ë¡œ ì‚°ì •ë©ë‹ˆë‹¤. ìœ„ ì˜ˆì œì˜ ê²½ìš°ëŠ” t3.small on-demand x 3ëŒ€ ì…ë‹ˆë‹¤. ê·¸ ë°–ì— NAT Gateway, EBS ë¹„ìš©ë„ ì¶”ê°€ë¡œ ë‚˜ê°‘ë‹ˆë‹¤. ë” ìì„¸í•œ ì‚¬í•­ì€ AWS ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”. ì‹¤ìŠµí™˜ê²½ ì „ì²´ ì •ë¦¬ # EKS ì „ì²´ ë¹„ìš©ì´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤ë©´ í•„ìš”í•  ë•Œë§Œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•´ì„œ ì‹¤ìŠµí•˜ë„ë¡ í•©ë‹ˆë‹¤.\nEKS í´ëŸ¬ìŠ¤í„° ì‚­ì œëŠ” eks delete cluster ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.\nì´ì „ ê³¼ì •ì—ì„œ ìƒì„±í•œ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n$ eksctl delete cluster \\ -f eks-cluster.yaml \\ --approve eksctlë¡œ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ë©´ CloudFormation ìŠ¤íƒìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.\ní´ëŸ¬ìŠ¤í„° ì‚­ì œë„ ë§ˆì°¬ê°€ì§€ë¡œ ìŠ¤íƒë§Œ ì œê±°í•˜ë©´ í¬í•¨ëœ ì „ì²´ AWS ë¦¬ì†ŒìŠ¤ê°€ ì‚¬ë¼ì§€ë¯€ë¡œ ê¹”ë”í•˜ê²Œ EKS ê´€ë ¨ ë¦¬ì†ŒìŠ¤ ì „ì²´ë¥¼ ì •ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në§ˆì¹˜ë©° # ë¹„ìš©ì´ ì¢€ ë‚˜ê°€ì§€ë§Œ ê·¸ë˜ë„ ê°œì¸ ì†Œìœ ì˜ EKS Clusterë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.\nì´ì œ ìì‹ ì´ ì›í•˜ëŠ” ëŒ€ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê³  ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në‹¤ë“¤ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ë” ì‰½ê³  ì¬ë°Œê²Œ ì¦ê¸°ê¸¸ ë°”ë¼ë©´ì„œ ì´ë§Œ ê¸€ ë§ˆì¹©ë‹ˆë‹¤.\nBon voyage!\n","date":"May 30, 2022","permalink":"/blog/k8s/create-eks-cluster-using-eksctl/","section":"Blogs","summary":"ê°œìš” # eksctlì„ ì‚¬ìš©í•´ì„œ ìì‹ ë§Œì˜ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.","title":"EKS Cluster ìƒì„±"},{"content":"ê°œìš” # ConsoleMeì—ì„œ Spoke Accountì— ìˆëŠ” IAM ë¦¬ì†ŒìŠ¤ë“¤ì„ ìˆ˜ì§‘í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤.\nì„¤ì •ë°©ë²• # 1. IAM êµ¬ì„± # ConsoleMe ì•„í‚¤í…ì³ì—ì„œ Central Accountì™€ Spoke Accountë¥¼ ì´í•´í•˜ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤.\nCentral Account : ConsoleMe ì¸ìŠ¤í„´ìŠ¤ê°€ ìœ„ì¹˜í•œ ì¤‘ì•™ ê³„ì • Spoke Accounts : ConsoleMeë¡œ ê´€ë¦¬í•´ì•¼í•˜ëŠ” AWS ê³„ì •ë“¤ ìœ„ì™€ ê°™ì´ IAM Roleì„ êµ¬ì„±í•œë‹¤.\nCentral Accountì™€ Spoke Accoun ì–‘ìª½ì— IAM Role, Policy ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.\nCentral Accountì™€ Spoke Accountì—ì„œ í•„ìš”í•œ IAM ì‘ì—…ì„ ê°ê° ë‚˜ì—´í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\nCentral Account # Central Role ìƒì„± Central Policy ìƒì„± ìƒì„±í•œ Central Policyë¥¼ Central Roleì— ë¶€ì—¬Attach Spoke Accounts # Spoke Accountê°€ 1ê°œ ì´ìƒì¼ ê²½ìš°, ê° AWS ê³„ì •ë§ˆë‹¤ ì•„ë˜ IAM ì‘ì—… ê³¼ì • ì „ì²´ë¥¼ ë°˜ë³µí•œë‹¤.\nSpoke Worker Role ìƒì„± Spoke Policy ìƒì„± ìƒì„±í•œ Spoke Policyë¥¼ Spoke Worker Roleì— ë¶€ì—¬Attach Spoke Worker Roleì— ì‹ ë¢°ê´€ê³„ ì„¤ì • Spoke Roleì˜ Policy ì„¤ì • # Spoke Roleì—ì„œ ì‚¬ìš©í•  PolicyëŠ” ConsoleMe ê³µì‹ë¬¸ì„œì˜ ì„¤ì •ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ìƒì„±í–ˆë‹¤.\n{ \u0026#34;Statement\u0026#34;: [ { \u0026#34;Action\u0026#34;: [ \u0026#34;autoscaling:Describe*\u0026#34;, \u0026#34;cloudwatch:Get*\u0026#34;, \u0026#34;cloudwatch:List*\u0026#34;, \u0026#34;config:BatchGet*\u0026#34;, \u0026#34;config:List*\u0026#34;, \u0026#34;config:Select*\u0026#34;, \u0026#34;ec2:describeregions\u0026#34;, \u0026#34;ec2:DescribeSubnets\u0026#34;, \u0026#34;ec2:describevpcendpoints\u0026#34;, \u0026#34;ec2:DescribeVpcs\u0026#34;, \u0026#34;iam:*\u0026#34;, \u0026#34;s3:GetBucketPolicy\u0026#34;, \u0026#34;s3:GetBucketTagging\u0026#34;, \u0026#34;s3:ListAllMyBuckets\u0026#34;, \u0026#34;s3:ListBucket\u0026#34;, \u0026#34;s3:PutBucketPolicy\u0026#34;, \u0026#34;s3:PutBucketTagging\u0026#34;, \u0026#34;sns:GetTopicAttributes\u0026#34;, \u0026#34;sns:ListTagsForResource\u0026#34;, \u0026#34;sns:ListTopics\u0026#34;, \u0026#34;sns:SetTopicAttributes\u0026#34;, \u0026#34;sns:TagResource\u0026#34;, \u0026#34;sns:UnTagResource\u0026#34;, \u0026#34;sqs:GetQueueAttributes\u0026#34;, \u0026#34;sqs:GetQueueUrl\u0026#34;, \u0026#34;sqs:ListQueues\u0026#34;, \u0026#34;sqs:ListQueueTags\u0026#34;, \u0026#34;sqs:SetQueueAttributes\u0026#34;, \u0026#34;sqs:TagQueue\u0026#34;, \u0026#34;sqs:UntagQueue\u0026#34; ], \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Resource\u0026#34;: [\u0026#34;*\u0026#34;], \u0026#34;Sid\u0026#34;: \u0026#34;iam\u0026#34; } ], \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34; } Spoke Roleì— Policyë¥¼ ìƒì„±í•´ì„œ ë¶€ì—¬í—€ìœ¼ë©´ ë‹¤ìŒì€ Spoke Roleì— ì‹ ë¢°ê´€ê³„ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì¤€ë‹¤.\nSpoke Roleì˜ ì‹ ë¢°ê´€ê³„ ì„¤ì • # Spoke Roleì— ì‹ ë¢°ê´€ê³„Trust Relationshipì„ ì„¤ì •í•´ì¤€ë‹¤.\nCentral Roleì´ Spoke Roleì„ AssumeRole í•  ìˆ˜ ìˆë„ë¡ ì‹ ë¢°í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ì‘ì—…ì´ë‹¤.\n{ \u0026#34;Statement\u0026#34;: [ { \u0026#34;Action\u0026#34;: [ \u0026#34;sts:AssumeRole\u0026#34;, \u0026#34;sts:TagSession\u0026#34; ], \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;AWS\u0026#34;: \u0026#34;arn:aws:iam::1243456789012:role/YOUR_CONSOLEME_CENTRAL_ROLE_NAME_HERE\u0026#34; } } ], \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34; } ì‹ ë¢°ê´€ê³„ì—ì„œ 123456789012ëŠ” ë³¸ì¸ì˜ Central Account IDë¡œ ë³€ê²½í•˜ê³  (Spoke Accountì˜ IDê°€ ì•„ë‹ˆë¼ëŠ” ì ì„ ëª…ì‹¬í•˜ì), YOUR_CONSOLEME_CENTRAL_ROLE_NAME_HEREì€ ìì‹ ì˜ Central Roleì˜ ì´ë¦„ìœ¼ë¡œ ì•Œë§ê²Œ ë³€ê²½í•œë‹¤.\n2. ConsoleMe ì„¤ì • ë³€ê²½ # ë³€ê²½ ì „ ì„¤ì •íŒŒì¼ # role_name ê°’ì˜ ì˜ë¯¸: AWS Config ì¿¼ë¦¬ ë˜ëŠ” Spoke Accountì˜ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì •ì±… ì—…ë°ì´íŠ¸ì™€ ê°™ì€ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— ê° Spoke Accounì— ìˆëŠ” ì–´ë–¤ Roleì„ Assume Role í•´ì•¼í•˜ëŠ”ì§€ ConsoleMeì—ê²Œ ì•Œë ¤ì¤€ë‹¤.\nbase.yaml íŒŒì¼ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ policies ê°’ì´ ì£¼ì„ì²˜ë¦¬ë˜ì–´ ìˆë‹¤.\nì£¼ì„ì„ ì œê±°í•´ì„œ Spoke Accountì˜ Roleì„ AssumeRole í•  ìˆ˜ ìˆê²Œ í™œì„±í™”í•œë‹¤.\n$ cat base.yaml ... #policies: # role_name: ConsoleMeRole ... policies ê°’ì˜ role_nameì€ ì´ì „ ê³¼ì •ì—ì„œ êµ¬ì„±í•œ AssumeRoleí•  Spoek Accountì˜ Role ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•´ì£¼ë©´ ëœë‹¤.\në³€ê²½ í›„ ì„¤ì •íŒŒì¼ # $ cat base.yaml ... policies: role_name: consoleme-spoke-account-worker-role ... ì„¤ì • ì‹œ ì°¸ê³ í•˜ê¸° # role_nameì€ í•œ ê°œë§Œ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.\nì¦‰, ê°ê°ì˜ Spoke Accountë§ˆë‹¤ ìˆëŠ” Worker Role ì´ë¦„ì„ ëª¨ë‘ ë˜‘ê°™ì´ ìƒì„±í•´ì¤˜ì•¼ í•œë‹¤.\nSpoke Accountì˜ Role ì´ë¦„ì„ ì—¬ëŸ¬ê°œ ì„¤ì •í•  ê²½ìš°, ConsoleMe ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ ë§ˆì§€ë§‰ ë¼ì¸ì˜ Role ì´ë¦„ë§Œ ì¸ì‹í•´ì„œ IAM ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n$ cat base.yaml ... policies: role_name: consoleme-spoke-account-worker-role-A role_name: consoleme-spoke-account-worker-role-B ... ìœ„ ì˜ˆì œì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¼ì¸ì¸ consoleme-spoke-account-worker-role-Bë¼ëŠ” ì´ë¦„ì˜ IAM Roleë§Œ AssumeRoleí•´ì„œ ë¦¬ì†ŒìŠ¤ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.\n3. ConsoleMe ì¬ì‹œì‘ # ë³€ê²½ëœ ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ ConsoleMe ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘í•œë‹¤.\n4. IAM ìˆ˜ì§‘ê²°ê³¼ í™•ì¸ # ConsoleMe ì„œë¹„ìŠ¤ ì¬ì‹œì‘ í›„ì—ëŠ” ConsoleMe ì»¨í…Œì´ë„ˆì— ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì„ ê±¸ì–´ë†“ëŠ”ë‹¤.\nConsoleMe í”„ë¡œì„¸ìŠ¤ê°€ ì˜¬ë¼ì˜¤ë©´ì„œ ì„¤ì •ëœ Spoke Roleì„ AssumeRole í•´ì„œ IAM ë¦¬ì†ŒìŠ¤ë“¤ì„ ì˜ ê°€ì ¸ì˜¤ëŠ”ì§€ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ëª©ì ì´ë‹¤.\n$ docker logs -f consoleme ConsoleMe ì›¹í˜ì´ì§€ â†’ Policies ë©”ë‰´ë¡œ ë“¤ì–´ê°„ë‹¤.\nPolicies í™”ë©´ì—ì„œ Spoke Accountì— ìˆëŠ” IAM Role, Policyê°€ ì˜ ìˆ˜ì§‘ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.\nì‘ì—… ë!\nê²°ë¡  # Central Accountì™€ Spoke Accountì˜ ì´í•´ì™€ AssumeRoleì´ ì •ìƒ ë™ì‘í•˜ë„ë¡ IAM Role, Policy êµ¬ì„±ì„ ì˜ ì²´í¬í•˜ëŠ”ê²Œ í•µì‹¬ í¬ì¸íŠ¸ë¼ê³  ìƒê°ëœë‹¤.\nConsoleMe ìì²´ê°€ AssumeRoleì— Cross Account í™˜ê²½ê¹Œì§€ ì ‘ëª©ë˜ì–´ ìˆì–´ì„œ AWS ì´ˆì‹¬ìì—ê²ŒëŠ” êµ¬ì„±í•˜ëŠ” ê³¼ì •ì´ í—·ê°ˆë¦¬ê³  ì–´ë ¤ì›Œë³´ì¼ ìˆ˜ë„ ìˆë‹¤.\ní•˜ì§€ë§Œ ê²ë¨¹ì§€ ë§ì. ê²‰ìœ¼ë¡œ ë³´ê¸°ë§Œ ì–´ë µì§€ ìƒê°ë³´ë‹¤ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì´ë‹¤.\nì°¸ê³ ìë£Œ # ì•„ë˜ 3ê°œì˜ ConsoleMe ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì„œ êµ¬ì„±í–ˆë‹¤.\nSpoke Accounts\nAccount Syncing\nResource Syncing\n","date":"May 25, 2022","permalink":"/blog/consoleme-resource-syncing/","section":"Blogs","summary":"ê°œìš” # ConsoleMeì—ì„œ Spoke Accountì— ìˆëŠ” IAM ë¦¬ì†ŒìŠ¤ë“¤ì„ ìˆ˜ì§‘í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤.","title":"ConsoleMe ë¦¬ì†ŒìŠ¤ ë™ê¸°í™”"},{"content":"ê°œìš” # ConsoleMeëŠ” ê¸°ë³¸ì ìœ¼ë¡œ AWS SESë¥¼ ì—°ë™ì„ í†µí•´ ë©”ì¼ ì•Œë¦¼Email Notification ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.\në©”ì¼ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ì„ ê²½ìš°, ConsoleMeì™€ AWS SESê°„ì— ì—°ë™ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤.\nConsoleMeê°€ AWS SESë¥¼ í†µí•´ ë©”ì¼ì„ ë³´ë‚´ëŠ” ì•„í‚¤í…ì³ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\nì„¤ì •ë°©ë²• # SES ìƒì„± # ë¨¼ì € ë„ë©”ì¸ ì£¼ì†Œì˜ SES Identityë¥¼ ìƒì„±í•œë‹¤.\nì´ë¯¸ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” SES Identityê°€ ìˆì„ ê²½ìš°, AWS SES ìƒì„± ê³¼ì •ì€ ê±´ë„ˆ ë›°ë©´ ëœë‹¤.\nìœ„ ì‚¬ì§„ì²˜ëŸ¼ ë°˜ë“œì‹œ Identity typeì„ Domainìœ¼ë¡œ ì„¤ì •í•´ì„œ ìƒì„±í•´ì•¼í•œë‹¤.\nìƒì„±í•œ ë„ë©”ì¸ ê¸°ë°˜ì˜ SES IdentityëŠ” ì¸ì¦ì„ ë°›ì€ ìƒíƒœì—¬ì•¼ í•œë‹¤.\nIAM ì„¤ì • # ConsoleME EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ IAM Roleì„ Instance Profileë¡œ ì‚¬ìš©í•˜ëŠ” êµ¬ì„±ì´ë‹¤.\nì•„ë˜ëŠ” ConsoleMe EC2ê°€ ì‚¬ìš©í•˜ëŠ” IAM Roleì˜ ì „ì²´ ê¶Œí•œ ì¤‘ SESì™€ ê´€ë ¨ëœ ì¼ë¶€ ê¶Œí•œë§Œ ë½‘ì•„ë‚¸ ë‚´ìš©ì´ë‹¤.\n{ \u0026#34;Statement\u0026#34;: [ { ... TRUNCATED ... }, { \u0026#34;Sid\u0026#34;: \u0026#34;SendEmailNotificationFromConsoleMe\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ses:SendEmail\u0026#34;, \u0026#34;ses:SendRawEmail\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:ses:us-east-1:123456789012:identity/company-name.com\u0026#34;, \u0026#34;Condition\u0026#34;: { \u0026#34;StringLike\u0026#34;: { \u0026#34;ses:FromAddress\u0026#34;: [ \u0026#34;*@company-name.com\u0026#34; ] } } }, { ... TRUNCATED ... } ], \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34; } ConsoleMe EC2ëŠ” ë©”ì¼ ë°œì†¡ì„ ìœ„í•´ ses:SendEmailê³¼ ses:SendRawEmail ê¶Œí•œì´ í•„ìš”í•˜ë‹¤.\nResource ê°’ì—ëŠ” ì´ì „ ê³¼ì •ì—ì„œ ìƒì„±í•œ ë„ë©”ì¸ ê¸°ë°˜ì˜ SES Identityì˜ ì•„ë§ˆì¡´ ë¦¬ì†ŒìŠ¤ ì£¼ì†Œ(ARN)ë¥¼ ì…ë ¥í•œë‹¤.\nConfig ìˆ˜ì • # SES ì„¤ì • # # SES configuration is necessary for ConsoleMe to send e-mails to your users. ConsoleMe sends e-mails to notify # administrators and requesters about policy requests applicable to them. ses: support_reference: \u0026#34;Please contact us at consoleme@example.com if you have any questions or concerns.\u0026#34; arn: arn:aws:ses:us-east-1:123456789012:identity/company-name.com region: us-east-1 consoleme: name: ConsoleMe sender: bob@company-name.com SES ì„¤ì • íŒŒë¼ë¯¸í„° # support_reference : ë©”ì¼ ë‚´ìš© ë§¨ ì•„ë˜ì— í‘œì‹œë˜ëŠ” ì¶”ê°€ ì•ˆë‚´ ë©˜íŠ¸. arn : SES Identityì˜ ì•„ë§ˆì¡´ ë¦¬ì†ŒìŠ¤ ì£¼ì†Œ. region : AWS SES Identityì˜ ë¦¬ì „ ì´ë¦„. region ì„¤ì •ê°’ì„ ìƒëµí•  ê²½ìš°, ConsoleMeì—ì„œ ê¸°ë³¸ê°’ì¸ us-east-1ë¡œ ìë™ì§€ì •í•œë‹¤. consoleme.name : ë³´ë‚´ëŠ” ì‚¬ëŒì˜ ì´ë¦„. ì´ë©”ì¼ ì œëª©ì˜ ë§¨ ì•ì— í‘œì‹œëœë‹¤. consoleme.sender : ConsoleMeê°€ ì´ë©”ì¼ì„ ë³´ë‚¼ ë•Œ ì°íˆëŠ” ë°œì‹ ìì˜ ë©”ì¼ ì£¼ì†Œ. sender ê°’ì— ì…ë ¥í•œ ë©”ì¼ ì£¼ì†ŒëŠ” AWS SESì˜ ì¸ì¦ì„ ë°›ì€ ìƒíƒœì—¬ì•¼ í•œë‹¤. ê´€ë¦¬ì ë©”ì¼ë§ ë¦¬ìŠ¤íŠ¸ ì„¤ì • # ConsoleMe ì„¤ì •íŒŒì¼ì—ì„œ fallback_policy_request_reviewers ê·¸ë£¹ì— í¬í•¨ëœ ë©”ì¼ ëª©ë¡ì€ ConsoleMe ë©”ì¼ ì•ŒëŒì„ ë°›ì„ ê´€ë¦¬ì ë©”ì¼ë§ ë¦¬ìŠ¤íŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤.\ngroups: ... fallback_policy_request_reviewers: - alice@company-name.com - bob@company-name.com - carol@company-name.com ì„¤ì •íŒŒì¼ì˜ fallback_policy_request_reviewers ê°’ì€ policies.py ì½”ë“œì—ì„œ ì°¸ì¡°í•œë‹¤.\n# lib/policies.py async def send_communications_new_comment( extended_request: ExtendedRequestModel, user: str, to_addresses=None ): \u0026#34;\u0026#34;\u0026#34; Send an email for a new comment. Note: until ABAC work is completed, if to_addresses is empty, we will send an email to fallback reviewers :param extended_request: ExtendedRequestModel :param user: user making the comment :param to_addresses: List of addresses to send the email to :return: \u0026#34;\u0026#34;\u0026#34; if not to_addresses: to_addresses = config.get(\u0026#34;groups.fallback_policy_request_reviewers\u0026#34;, []) request_uri = await get_policy_request_uri_v2(extended_request) await send_new_comment_notification( extended_request, to_addresses, user, request_uri ) policies.py ì½”ë“œì—ì„œ send_communications_new_comment í•¨ìˆ˜ëŠ” ìƒˆ ì½”ë©˜íŠ¸ ë“±ë¡ì— ëŒ€í•œ ì•Œë¦¼ ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” í•¨ìˆ˜ë‹¤.\në©”ì¼ í…ŒìŠ¤íŠ¸ # ConsoleMeëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì´ ë°œìƒí•  ë•Œ ë©”ì¼ì„ ë°œì†¡í•œë‹¤.\nê¶Œí•œ ì‹ ì²­request í˜ì´ì§€ì—ì„œ ìƒˆ ëŒ“ê¸€commentì´ ë“±ë¡ëœ ê²½ìš° ê¶Œí•œ ì‹ ì²­requestì˜ ìƒíƒœê°€ ì·¨ì†Œcancel, ê±°ë¶€reject, ìŠ¹ì¸approve ì¤‘ í•˜ë‚˜ë¡œ ë³€ê²½ëœ ê²½ìš° ê¶Œí•œ ìš”ì²­ í˜ì´ì§€All Policy Requestsì—ì„œ í…ŒìŠ¤íŠ¸ìš© Commentë¥¼ ë‚¨ê¸°ê±°ë‚˜ í…ŒìŠ¤íŠ¸ìš© ê¶Œí•œ ë¦¬í€˜ìŠ¤íŠ¸ì˜ ìƒíƒœë¥¼ ë³€ê²½í•´ë³´ë©° ì•Œë¦¼ ë©”ì¼ì´ ì˜ ë³´ë‚´ì§€ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë³¸ë‹¤.\nConsoleMeê°€ AWS SESë¥¼ í†µí•´ ë©”ì¼ì„ ë°œì†¡í•  ë•Œ ConsoleMe ì»¨í…Œì´ë„ˆê°€ ê´€ë ¨ ë¡œê·¸ë¥¼ ì°ëŠ”ë‹¤.\ní…ŒìŠ¤íŠ¸ ë©”ì¼ ë°œì†¡í•˜ê¸° ì „ì— ConsoleMe ë„ì»¤ ì»¨í…Œì´ë„ˆì— ë¡œê·¸ ëª¨ë‹ˆí„°ë§ì„ ê±¸ì–´ë†“ê³  ë°œì†¡ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì.\n$ docker logs -f consoleme | grep ses ë‚´ ê²½ìš° ConsoleMe EC2ì—ì„œ ì‚¬ìš©í•˜ëŠ” Instance Profile(IAM Role)ì— SES ë©”ì¼ ë°œì†¡ses:SendEmail ê¶Œí•œì´ ì˜ëª» ì„¤ì •ë˜ì–´ ìˆì–´ì„œ ì—ëŸ¬ë¥¼ ê²½í—˜í–ˆë‹¤.\nses:SendEmail ê¶Œí•œ ì—ëŸ¬ ë°œìƒì‹œ ConsoleMe ì»¨í…Œì´ë„ˆê°€ ì¶œë ¥í•˜ëŠ” ì—ëŸ¬ ë¡œê·¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n{ \u0026#34;asctime\u0026#34;: \u0026#34;2022-05-19T09:14:43Z+0000\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;consoleme\u0026#34;, \u0026#34;processName\u0026#34;: \u0026#34;MainProcess\u0026#34;, \u0026#34;filename\u0026#34;: \u0026#34;ses.py\u0026#34;, \u0026#34;funcName\u0026#34;: \u0026#34;send_email\u0026#34;, \u0026#34;levelname\u0026#34;: \u0026#34;ERROR\u0026#34;, \u0026#34;lineno\u0026#34;: 83, \u0026#34;module\u0026#34;: \u0026#34;ses\u0026#34;, \u0026#34;threadName\u0026#34;: \u0026#34;MainThread\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Exception sending email\u0026#34;, \u0026#34;to_user\u0026#34;: [\u0026#34;bob@company-name.com\u0026#34;], \u0026#34;region\u0026#34;: \u0026#34;us-east-1\u0026#34;, \u0026#34;function\u0026#34;: \u0026#34;consoleme.lib.ses.send_email\u0026#34;, \u0026#34;sender\u0026#34;: \u0026#34;alice@company-name.com\u0026#34;, \u0026#34;subject\u0026#34;: \u0026#34;ConsoleMe: Policy change request for arn:aws:s3:::example-bucket has been updated to approved and committed\u0026#34;, \u0026#34;exc_info\u0026#34;: \u0026#34;Traceback (most recent call last):\\n File \\\u0026#34;/apps/consoleme/consoleme/lib/ses.py\\\u0026#34;, line 67, in send_email\\n response = await sync_to_async(client.send_email)(\\n File \\\u0026#34;/usr/local/lib/python3.8/site-packages/asgiref/sync.py\\\u0026#34;, line 444, in __call__\\n ret = await asyncio.wait_for(future, timeout=None)\\n File \\\u0026#34;/usr/local/lib/python3.8/asyncio/tasks.py\\\u0026#34;, line 455, in wait_for\\n return await fut\\n File \\\u0026#34;/usr/local/lib/python3.8/concurrent/futures/thread.py\\\u0026#34;, line 57, in run\\n result = self.fn(*self.args, **self.kwargs)\\n File \\\u0026#34;/usr/local/lib/python3.8/site-packages/asgiref/sync.py\\\u0026#34;, line 486, in thread_handler\\n return func(*args, **kwargs)\\n File \\\u0026#34;/usr/local/lib/python3.8/site-packages/botocore/client.py\\\u0026#34;, line 386, in _api_call\\n return self._make_api_call(operation_name, kwargs)\\n File \\\u0026#34;/usr/local/lib/python3.8/site-packages/botocore/client.py\\\u0026#34;, line 705, in _make_api_call\\n raise error_class(parsed_response, operation_name)\\nbotocore.exceptions.ClientError: An error occurred (AccessDenied) when calling the SendEmail operation: User `arn:aws:sts::123456789012:assumed-role/consoleme-instance-profile/i-0a123bcd4e5678901\u0026#39; is not authorized to perform `ses:SendEmail\u0026#39; on resource `arn:aws:ses:us-east-1:123456789012:identity/company-name.com\u0026#39;\u0026#34;, \u0026#34;eventTime\u0026#34;: \u0026#34;2022-05-19T02:12:29.940004-07:00\u0026#34;, \u0026#34;hostname\u0026#34;: \u0026#34;12a34567bc89\u0026#34;, \u0026#34;timestamp\u0026#34;: \u0026#34;2022-05-19T09:14:43Z+0000\u0026#34; } ì „ì²´ ì—ëŸ¬ ë¡œê·¸ ë‚´ìš© ì¤‘ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ConsoleMe EC2ì—ì„œ ì‚¬ìš©í•˜ëŠ” IAM Roleì— ses:SendEmail ê¶Œí•œì´ ë¶€ì—¬ë˜ì–´ ìˆì§€ ì•Šì•„ì„œ ë©”ì¼ ë°œì†¡ì´ ì•ˆë˜ì—ˆë‹¤ëŠ” ë‚´ìš©ì´ë‹¤.\nUser `arn:aws:sts::123456789012:assumed-role/consoleme-instance-profile/i-0a123bcd4e5678901\u0026#39; is not authorized to perform `ses:SendEmail\u0026#39; on resource `arn:aws:ses:us-east-1:123456789012:identity/company-name.com\u0026#39; ë©”ì¼ ìƒ˜í”Œ\nConsoleMeê°€ ë³´ë‚´ëŠ” ê¸°ë³¸ ë©”ì¼ í…œí”Œë¦¿ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nRequest ìƒíƒœ ë³€ê²½ ì‹œ ì•Œë¦¼ ë©”ì¼ ìƒ˜í”Œ\n#====[ë©”ì¼ ì œëª©]====# ConsoleMe: Policy change request for arn:aws:s3:::example-bucket has been updated to approved and committed #====[ë©”ì¼ ë‚´ìš©]====# A policy change request for arn:aws:s3:::example-bucket has been updated to approved and committed See the request here: https://www.company.com/policies/request/1234567b-a10f-1234-a12a-1e2ece345678. Please contact us at consoleme@example.com if you have any questions or concerns. #=================# ìƒˆ ì½”ë©˜íŠ¸ ë“±ë¡ ì‹œ ì•Œë¦¼ ë©”ì¼ ìƒ˜í”Œ\n#====[ë©”ì¼ ì œëª©]====# ConsoleMe: A new comment has been added to Policy Change request for arn:aws:s3:::example-bucket #====[ë©”ì¼ ë‚´ìš©]====# A new comment has been added to the policy change request for arn:aws:s3:::example-bucket by bob@company-name.com See the request here: https://www.company.com/policies/request/1234567b-a10f-1234-a12a-1e2ece345678. Please contact us at consoleme@example.com if you have any questions or concerns. #=================# ì°¸ê³ ìë£Œ # [ê³µì‹ë¬¸ì„œ] ConsoleMe SES ì—°ë™ ì„¤ì •\n[ê³µì‹ë¬¸ì„œ] ConsoleMe EC2ì—ì„œ ì‚¬ìš©í•˜ëŠ” IAM ê¶Œí•œ ì„¤ì •\nê´€ë ¨ ì½”ë“œ # ConsoleMe ì•Œë¦¼ ë©”ì¼ ë°œì†¡ê³¼ ê´€ë ¨ëœ ì½”ë“œë“¤.\nlib/v2/requests.py\nê¶Œí•œì‹ ì²­ ìƒíƒœ ë³€ê²½ ì‹œ ë©”ì¼ë°œì†¡ ì½”ë“œ ìƒˆ ì½”ë©˜íŠ¸ ë“±ë¡ ì‹œ ë©”ì¼ë°œì†¡ ì½”ë“œ lib/policies.py\nê¶Œí•œì‹ ì²­ ìƒíƒœ ë³€ê²½ ì‹œ ë©”ì¼ë°œì†¡ ì½”ë“œ ìƒˆ ì½”ë©˜íŠ¸ ë“±ë¡ ì‹œ ë©”ì¼ë°œì†¡ ì½”ë“œ ","date":"May 20, 2022","permalink":"/blog/consoleme-ses-integration/","section":"Blogs","summary":"ê°œìš” # ConsoleMeëŠ” ê¸°ë³¸ì ìœ¼ë¡œ AWS SESë¥¼ ì—°ë™ì„ í†µí•´ ë©”ì¼ ì•Œë¦¼Email Notification ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.","title":"ConsoleMe SES ì—°ë™"},{"content":"ê°œìš” # IAM Roleì´ ë‹¤ë¥¸ IAM Roleì„ AssumeRole í•˜ë„ë¡ í—ˆìš©í•˜ë ¤ë©´ Assumeë  IAM Roleì˜ ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì •ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.\nì¤‘ìš”: 2ê°œì˜ IAM Roleì´ ë™ì¼í•œ AWS ê³„ì • ë‚´ì— ìˆëŠ”ì§€, ì•„ë‹ˆë©´ ì„œë¡œ ë‹¤ë¥¸ AWS ê³„ì •ì— ìˆëŠ”ì§€ì— ë”°ë¼ IAM ì„¤ì • ë°©ë²•ì€ ë‹¤ë¥´ë‹¤.\ní•´ê²°ë°©ë²• # IAM Roleì´ ê°™ì€ AWS ê³„ì •ì— ìˆì„ ë•Œ # Role_Aì™€ Role_Bë¼ëŠ” 2ê°œì˜ IAM Roleì´ ìˆë‹¤ê³  ê°€ì •í•´ ë³´ì.\nRole_Aê°€ Role_Bë¥¼ AssumeRole í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ë ¤ë©´ ë¨¼ì € Role_Bì˜ ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì •ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•´ì•¼ í•œë‹¤.\nRole_Bì— ì„¤ì •ëœ ì‹ ë¢° ê´€ê³„ # { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;AWS\u0026#34;: \u0026#34;arn:aws:iam::111111111111:role/Role_A\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34; } ] } ë™ì¼í•œ AWS ê³„ì • ë‚´ì—ì„œ IAM Roleì´ ë˜ë‹¤ë¥¸ IAM Roleì„ AssumeRole í•  ìˆ˜ ìˆê²Œ í—ˆìš©í•˜ë ¤ë©´ ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì •ë§Œ ì¶”ê°€í•´ì£¼ë©´ ëë‚œë‹¤.\nPrincipal # ê¶Œí•œì„ ë¶€ì—¬í•  IAM Roleì„ ì§€ì •í•˜ëŠ” ë³´ì•ˆ ì£¼ì²´Principal ìš”ì†Œì— ìœ ì˜í•œë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ ë³´ì•ˆ ì£¼ì²´Principal ìš”ì†ŒëŠ” ì •ì±…ì—ì„œ IAM User, IAM Role, AWS Serviceì— ë‹¤ë¥¸ AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.\nAWS IAM ê³µì‹ë¬¸ì„œì—ì„œ ë³´ì•ˆì£¼ì²´Principal ìš”ì†Œì— ëŒ€í•´ ë” ìì„¸í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\nIAM Roleì´ ì„œë¡œ ë‹¤ë¥¸ AWS ê³„ì •ì— ìˆì„ ë•Œ # Role_Aì™€ Role_Bê°€ ì„œë¡œ ë‹¤ë¥¸ AWS ê³„ì •ì— ìˆë‹¤ê³  ê°€ì •í•´ë³¸ë‹¤.\nì´ ê²½ìš°, ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì •ì€ ë‘ IAM Roleì´ ë™ì¼í•œ AWS ê³„ì •ì— ìˆì„ ë•Œì²˜ëŸ¼ ë˜‘ê°™ì´ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤.\nRole_Bì˜ ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì •ì— Role_Aê°€ AssumeRole í• ìˆ˜ ìˆë„ë¡ í—ˆìš©í•´ì¤€ë‹¤.\nì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì°¨ì´ì ì€ Role_Aì— sts:AssumeRole ê¶Œí•œì´ ìˆëŠ” ì¶”ê°€ ì •ì±…Policyì´ í•„ìš”í•˜ë‹¤ëŠ” ì ì´ë‹¤.\në”°ë¼ì„œ ìµœì¢… IAM ì„¤ì • ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\nRole_Bì— ì„¤ì •ëœ ì‹ ë¢° ê´€ê³„ # { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;AWS\u0026#34;: \u0026#34;arn:aws:iam::111111111111:role/Role_A\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34; } ] } 2ê°œì˜ IAM Roleì´ ê°™ì€ AWS ê³„ì •ì— ì†í•œ ê²½ìš°ì™€ ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì • ë‚´ìš©ì€ ë™ì¼í•˜ë‹¤.\nRole_Aì— ì„¤ì •ëœ Policy # ê·¸ë¦¬ê³  Role_Aì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ì±…Policyê°€ ë¶€ì—¬ë˜ì–´ì•¼ í•œë‹¤.\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:iam::222222222222:role/Role_B\u0026#34; } } ì´ì œ Role_AëŠ” ë‹¤ë¥¸ ê³„ì •ì— ìˆëŠ” Role_Bë¥¼ AssumeRole í•  ìˆ˜ ìˆë‹¤.\nê²°ë¡  # IAM Roleì´ ë‹¤ë¥¸ AWS ê³„ì •ì˜ IAM Roleì„ AssumeRole í•˜ëŠ” ê²½ìš°ê°€ ê·¸ë ‡ê²Œ í”í•œ ì¼€ì´ìŠ¤ëŠ” ì•„ë‹ˆë‹¤.\nê·¸ë˜ì„œ ë‚˜ë„ ì²˜ìŒì— AssuemRoleì´ ê±°ë¶€ë˜ëŠ” ì—ëŸ¬ë¥¼ ë§ˆì£¼í–ˆì„ ë•Œ ì‰½ê²Œ í•´ê²°ì±…ì„ ì°¾ì„ ìˆ˜ ì—†ì—ˆë‹¤.\nì¤‘ìš”: ê²°ê³¼ì ìœ¼ë¡œ ë‹¤ë¥¸ AWS ê³„ì •ì— ìˆëŠ” IAM Roleì„ AssumeRole í•˜ê¸° ìœ„í•´ì„œëŠ” ìˆ˜í–‰í•˜ëŠ” Role ìª½ì— Policy ì¶”ê°€ê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤.\nì°¸ê³ ìë£Œ # [ì˜ë¬¸] AWS IAM: Allowing a Role to Assume Another Role\n","date":"May 17, 2022","permalink":"/blog/aws-iam-allowing-a-role-to-assume-another-role/","section":"Blogs","summary":"ê°œìš” # IAM Roleì´ ë‹¤ë¥¸ IAM Roleì„ AssumeRole í•˜ë„ë¡ í—ˆìš©í•˜ë ¤ë©´ Assumeë  IAM Roleì˜ ì‹ ë¢° ê´€ê³„Trust Relationship ì„¤ì •ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.","title":"Role to Role AssumeRole ì„¤ì •"},{"content":"ê°œìš” # AWS CLI ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ íŠ¹ì • EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì´ ì–´ë”” ê°€ìš©ì˜ì—­AZ, Availiability Zoneì—ì„œ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.\nì „ì œì¡°ê±´ # AWS CLIê°€ ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.\nAWS CLI ì„¤ì¹˜\nAWS CLIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì„ ê²½ìš°, macOS íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ brewë¥¼ í†µí•´ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n$ brew install awscli ì„¤ì¹˜ í›„ AWS CLI ëª…ë ¹ì–´ê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n$ aws --version aws-cli/2.7.0 Python/3.9.12 Darwin/21.4.0 source/arm64 prompt/off í™•ì¸ë°©ë²• # ëª…ë ¹ì–´ í˜•ì‹ # $ aws ec2 describe-instance-type-offerings \\ --filters Name=instance-type,Values=\u0026lt;INSTANCE-TYPE\u0026gt; \\ --location-type availability-zone \\ --region \u0026lt;REGION\u0026gt; INSTANCE-TYPEê³¼ REGION ê°’ì€ ê°ì ìƒí™©ì— ë§ê²Œ ë³€ê²½í•´ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.\nëª…ë ¹ì–´ ì˜ˆì‹œ # ì˜ˆì œ 1\ng4dn.xlarge ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…(GPU)ì´ ë„ì¿„ ë¦¬ì „ap-northeast-1ì˜ ì–´ë–¤ ê°€ìš©ì˜ì—­AZ, Availiability Zoneì—ì„œ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´\n$ aws ec2 describe-instance-type-offerings \\ --filters Name=instance-type,Values=g4dn.xlarge \\ --location-type availability-zone \\ --region ap-northeast-1 { \u0026#34;InstanceTypeOfferings\u0026#34;: [ { \u0026#34;InstanceType\u0026#34;: \u0026#34;g4dn.xlarge\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-1b\u0026#34; }, { \u0026#34;InstanceType\u0026#34;: \u0026#34;g4dn.xlarge\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-1d\u0026#34; }, { \u0026#34;InstanceType\u0026#34;: \u0026#34;g4dn.xlarge\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-1c\u0026#34; } ] } g4dn.xlarge ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì€ ë„ì¿„ ë¦¬ì „ap-northeast-1ì˜ ê°€ìš©ì˜ì—­ b, c, dì—ì„œë§Œ ì§€ì›í•˜ê³  ìˆë‹¤.\nì˜ˆì œ 2\nt3.medium ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì´ ì„œìš¸ ë¦¬ì „ap-northeast-2ì˜ ì–´ë–¤ ê°€ìš©ì˜ì—­AZ, Availiability Zoneì—ì„œ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´\n$ aws ec2 describe-instance-type-offerings \\ --filters Name=instance-type,Values=t3.medium \\ --location-type availability-zone \\ --region ap-northeast-2 { \u0026#34;InstanceTypeOfferings\u0026#34;: [ { \u0026#34;InstanceType\u0026#34;: \u0026#34;t3.medium\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-2b\u0026#34; }, { \u0026#34;InstanceType\u0026#34;: \u0026#34;t3.medium\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-2d\u0026#34; }, { \u0026#34;InstanceType\u0026#34;: \u0026#34;t3.medium\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-2c\u0026#34; }, { \u0026#34;InstanceType\u0026#34;: \u0026#34;t3.medium\u0026#34;, \u0026#34;LocationType\u0026#34;: \u0026#34;availability-zone\u0026#34;, \u0026#34;Location\u0026#34;: \u0026#34;ap-northeast-2a\u0026#34; } ] } t3.medium ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì€ ì„œìš¸ ë¦¬ì „ap-northeast-2ì˜ ê°€ìš©ì˜ì—­ ì „ì²´(a, b, c, d)ì—ì„œ ì§€ì›í•˜ê³  ìˆë‹¤.\nt2ë‚˜ t3ê°€ ì†í•œ ë²”ìš© ì¸ìŠ¤í„´ìŠ¤ íŒ¨ë°€ë¦¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“  ê°€ìš©ì˜ì—­ì—ì„œ ì§€ì›í•˜ê³  ìˆë‹¤.\nì°¸ê³ ìë£Œ # Example 3: To check whether an instance type is supported ì„¹ì…˜ì„ ì°¸ê³ \nAWS CLI Command Reference - describe-instance-type-offerings\n","date":"May 9, 2022","permalink":"/blog/checking-ec2-type-support-in-az/","section":"Blogs","summary":"ê°œìš” # AWS CLI ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ íŠ¹ì • EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì´ ì–´ë”” ê°€ìš©ì˜ì—­AZ, Availiability Zoneì—ì„œ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.","title":"EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì´ ì§€ì›í•˜ëŠ” AZ í™•ì¸"},{"content":"ê°œìš” # EC2ì—ì„œ ECR Private ë ˆí¬ì§€í„°ë¦¬ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í‘¸ì‹œí•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤.\nêµ¬ì„±ë„ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\ní™˜ê²½ # OS : Ubuntu 20.04.3 LTS Shell : bash AWS CLI : 1.18.69 Docker : 20.10.7 ì „ì œì¡°ê±´ # EC2ì— ì—°ê²°ëœ IAM RoleInstance Profileì— ECR ì—…ë¡œë“œ ê¶Œí•œì´ ë¶€ì—¬ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:Describe*\u0026#34;, \u0026#34;ecr:Get*\u0026#34;, \u0026#34;ecr:BatchCheckLayerAvailability\u0026#34;, \u0026#34;ecr:BatchGetImage\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; }, { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:PutImage\u0026#34;, \u0026#34;ecr:InitiateLayerUpload\u0026#34;, \u0026#34;ecr:UploadLayerPart\u0026#34;, \u0026#34;ecr:CompleteLayerUpload\u0026#34;, \u0026#34;ecr:BatchDeleteImage\u0026#34; ], \u0026#34;Resource\u0026#34;: [ \u0026#34;arn:aws:ecr:REGION:AWS_ACCOUNT_ID:repository/REPOSITORY_NAME\u0026#34; ] } ] } REGION, AWS_ACCOUNT_ID, REPOSITORY_NAME ê°’ì€ ê°œì¸ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥´ë‹¤. ê¼­ ë³€ê²½í•´ì„œ ì‚¬ìš©í•œë‹¤.\në³¸ë¬¸ # ECR ë¡œê·¸ì¸ # í˜„ì¬ ì‹œìŠ¤í…œì— AWS CLIê°€ ì„¤ì¹˜ëœ ê±¸ í™•ì¸í•œë‹¤.\nAmazon Linux 2 ë˜ëŠ” Ubuntu 20.04.3 LTS ê¸°ì¤€ìœ¼ë¡œ, OSì— AWS CLIê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤.\n$ aws --version aws-cli/1.18.69 Python/3.8.10 Linux/5.13.0-1017-aws botocore/1.16.19 AWS CLI 1.18.69 ë²„ì „ì´ ì„¤ì¹˜ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì´ë¯¸ì§€ë¥¼ í‘¸ì‹œí•˜ë ¤ëŠ” Amazon ECRElastic Container Registry ë ˆí¬ì§€í„°ë¦¬ì— ëŒ€í•´ Docker í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•œë‹¤.\nì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ECR ë ˆí¬ì§€í„°ë¦¬ê°€ ì—¬ëŸ¬ê°œì¼ ê²½ìš°, ì¸ì¦ í† í°ì„ ê°ê° ë°›ì•„ì•¼ í•œë‹¤. ì¸ì¦ í† í°ì€ 12ì‹œê°„ ë™ì•ˆë§Œ ìœ íš¨í•˜ë‹¤. $ aws ecr get-login-password --region REGION | docker login --username AWS --password-stdin AWS_ACCOUNT_ID.dkr.ecr.REGION.amazonaws.com ... Login Succeeded Login Succeeded ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ ë¡œê·¸ì¸ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœ ê²ƒì´ë‹¤.\nECR ë ˆí¬ì§€í„°ë¦¬ ìƒì„± # AWS Management Consoleì— ë¡œê·¸ì¸í•œë‹¤.\nì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê¸° ìœ„í•´ ECR Private ë ˆí¬ì§€í„°ë¦¬ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ë†“ëŠ”ë‹¤.\ní˜„ì¬ëŠ” ì´ë¯¸ì§€ê°€ ì—†ì´ ë¹„ì–´ìˆëŠ” ECR ë ˆí¬ì§€í„°ë¦¬ì´ë‹¤.\nì´ë¯¸ì§€ Push # ECR ë ˆí¬ì§€í„°ë¦¬ì— ì—…ë¡œë“œí•  ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•œë‹¤.\n$ docker images REPOSITORY TAG IMAGE ID CREATED SIZE test-user/nginx 0.0.7 00ffc0fd000a 9 days ago 1.35GB test-user/nginx 0.0.6 b0a00d000b00 9 days ago 1.35GB ë‚´ ê²½ìš° Image IDê°€ 00ffc0fd000aì¸ ì´ë¯¸ì§€ë¥¼ ECR ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—…ë¡œë“œí•˜ë ¤ê³  í•œë‹¤.\nECR ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—…ë¡œë“œ í•  ì´ë¯¸ì§€ì— íƒœê·¸ë¥¼ ë¶™ì¸ë‹¤.\ntag ëª…ë ¹ì–´ í˜•ì‹ # $ docker tag IMAGE_ID AWS_ACCOUNT_ID.dkr.ecr.REGION.amazonaws.com/ECR_REPOSITORY_NAME:TAG tag ëª…ë ¹ì–´ ì˜ˆì‹œ # $ docker tag 00ffc0fd000a 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/repository:latest íƒœê·¸ë¥¼ ë¶™ì¸ ì´ë¯¸ì§€ê°€ ìƒˆë¡œ ì¶”ê°€ëœ ê±¸ í™•ì¸í•œë‹¤.\n$ docker images REPOSITORY TAG IMAGE ID CREATED SIZE 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/repository latest 00ffc0fd000a 9 days ago 1.35GB test-user/nginx 0.0.7 00ffc0fd000a 9 days ago 1.35GB test-user/nginx 0.0.6 b0a00d000b00 9 days ago 1.35GB ë˜‘ê°™ì€ ì´ë¯¸ì§€ë¥¼ íƒœê·¸ë§Œ ë°”ê¿”ì„œ ë“±ë¡í—€ê¸° ë–„ë¬¸ì— IMAGE IDê°€ 34ffc1fd958aë¡œ ë™ì¼í•˜ë‹¤ëŠ” ì ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì´ë¯¸ì§€ë¥¼ ECR ë ˆí¬ì§€í„°ë¦¬ì— í‘¸ì‹œí•œë‹¤.\npush ëª…ë ¹ì–´ í˜•ì‹ # $ docker push AWS_ACCOUNT_ID.dkr.ecr.REGION.amazonaws.com/ECR_REPISOTRY_NAME:TAG AWS_ACCOUNT_ID, REGION, ECR_REPOSITORY_NAME, TAG ê°’ì€ ê°ìì˜ í™˜ê²½ì— ë§ê²Œ ë°”ê¿”ì¤€ë‹¤.\npush ëª…ë ¹ì–´ ì˜ˆì‹œ # $ docker push 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/repository:latest ... latest: digest: sha256:18fxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx size: 5584 ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ECR ë ˆí¬ì§€í„°ë¦¬ì— ì—…ë¡œë“œ ì™„ë£Œí–ˆë‹¤.\nê²°ê³¼ í™•ì¸ # AWS Console ë¡œê·¸ì¸ í›„ ECR Registryì—ì„œ ì´ë¯¸ì§€ê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì´ê±¸ë¡œ ì‘ì—…ì™„ë£Œ.\nì°¸ê³ ìë£Œ # ECR ì—…ë¡œë“œ ì‘ì—… ê°™ì€ ê²½ìš°ëŠ” AWS ê³µì‹ë¬¸ì„œì—ë„ ì¹œì ˆíˆ ì„¤ëª…ë˜ì–´ ìˆë‹¤.\nAWS ê³µì‹ë¬¸ì„œ\nDocker ì´ë¯¸ì§€ í‘¸ì‹œ\n","date":"May 5, 2022","permalink":"/blog/docker-push-ecr-image/","section":"Blogs","summary":"ê°œìš” # EC2ì—ì„œ ECR Private ë ˆí¬ì§€í„°ë¦¬ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í‘¸ì‹œí•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤.","title":"EC2ì—ì„œ ECRë¡œ ë„ì»¤ ì´ë¯¸ì§€ í‘¸ì‹œ"},{"content":"ê°œìš” # minikubeë¥¼ í†µí•´ Tekton Pipelineê³¼ Tekton Dashboardë¥¼ ì„¤ì¹˜í•˜ê³  ë°ëª¨ë¥¼ êµ¬ì„±í•´ë³¸ë‹¤.\ní™˜ê²½ # OS: macOS Monterey 12.3.1 Shell: zsh minikube v1.25.2 Homebrew 3.4.9 ì „ì œì¡°ê±´ # minikubeê°€ ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ì‹œì‘í•˜ê¸° # 1. Task ë°ëª¨ # ë¯¸ë‹ˆíë¸Œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œë‹¤.\n$ minikube start ğŸ˜„ Darwin 12.3.1 (arm64) ì˜ minikube v1.25.2 âœ¨ ìë™ì ìœ¼ë¡œ docker ë“œë¼ì´ë²„ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ‘ minikube í´ëŸ¬ìŠ¤í„°ì˜ minikube ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì‹œì‘í•˜ëŠ” ì¤‘ ğŸšœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ... ğŸ’¾ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.23.3 ì„ ë‹¤ìš´ë¡œë“œ ì¤‘ ... \u0026gt; preloaded-images-k8s-v17-v1...: 419.07 MiB / 419.07 MiB 100.00% 2.37 MiB \u0026gt; gcr.io/k8s-minikube/kicbase: 343.12 MiB / 343.12 MiB 100.00% 1.87 MiB p/ ğŸ”¥ Creating docker container (CPUs=2, Memory=1988MB) ... ğŸ³ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.23.3 ì„ Docker 20.10.12 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘ â–ª kubelet.housekeeping-interval=5m â–ª ì¸ì¦ì„œ ë° í‚¤ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ ... â–ª ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ë¶€íŒ…... â–ª RBAC ê·œì¹™ì„ êµ¬ì„±í•˜ëŠ” ì¤‘ ... ğŸ” Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸... â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5 ğŸŒŸ ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass ğŸ„ ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ \u0026#34;minikube\u0026#34; í´ëŸ¬ìŠ¤í„°ì™€ \u0026#34;default\u0026#34; ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. kubectlì„ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ kubectl cluster-info Kubernetes control plane is running at https://127.0.0.1:57074 CoreDNS is running at https://127.0.0.1:57074/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use \u0026#39;kubectl cluster-info dump\u0026#39;. tekton pipelineì„ ì„¤ì¹˜í•œë‹¤.\n$ kubectl apply --filename \\ https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml $ kubectl get pod -n tekton-pipelines NAME READY STATUS RESTARTS AGE tekton-pipelines-controller-55487dcfb8-vww2f 1/1 Running 0 31s tekton-pipelines-webhook-794864555f-g9fnm 1/1 Running 0 31s hello-world.yaml íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.\napiVersion: tekton.dev/v1beta1 kind: Task metadata: name: hello spec: steps: - name: echo image: alpine script: | #!/bin/sh echo \u0026#34;Hello World\u0026#34; ì‘ì„±í•œ hello-world.yaml íŒŒì¼ì„ ë°°í¬í•œë‹¤.\n$ kubectl apply -f hello-world.yaml task.tekton.dev/hello created True, SucceededëŠ” Taskê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\n$ kubectl get taskrun hello-task-run NAME SUCCEEDED REASON STARTTIME COMPLETIONTIME hello-task-run True Succeeded 29s 5s ì‹¤í–‰ëœ Taskì˜ ê²°ê³¼(ë¡œê·¸)ë¥¼ í™•ì¸í•´ë³¸ë‹¤.\n$ kubectl logs --selector=tekton.dev/taskRun=hello-task-run Hello World ì‹¤í–‰í•œ Task ë¡œê·¸ì— Hello Worldê°€ ì¶œë ¥ëë‹¤.\nTaskê°€ ì •ìƒ ì‹¤í–‰ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n2. Pipeline ë°ëª¨ # ë‘ ë²ˆì§¸ í…ŒìŠ¤í¬ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ê¸°\nHello World Taskê°€ ì´ë¯¸ ìˆë‹¤. ì´ì œ ë‘ ë²ˆì§¸ Taskì¸ Goodbye Worldë¥¼ ë§Œë“¤ì–´ë³¸ë‹¤.\níŒŒì¼ëª…ì€ goodbye-world.yaml ì´ë‹¤.\napiVersion: tekton.dev/v1beta1 kind: Task metadata: name: goodbye spec: steps: - name: goodbye image: ubuntu script: | #!/bin/bash echo \u0026#34;Goodbye World!\u0026#34; ì‘ì„±í•œ goodbye-world.yaml íŒŒì¼ì„ ë°°í¬í•œë‹¤.\n$ kubectl apply --filename goodbye-world.yaml task.tekton.dev/goodbye created Pipeline ìƒì„±\nhello-goodbye-pipeline.yaml íŒŒì¼ì„ ì‘ì„±í•œë‹¤.\napiVersion: tekton.dev/v1beta1 kind: Pipeline metadata: name: hello-goodbye spec: tasks: - name: hello taskRef: name: hello - name: goodbye runAfter: - hello taskRef: name: goodbye ì‘ì„±í•œ íŒŒì¼ì„ ë°°í¬í•œë‹¤.\n$ kubectl apply --filename hello-goodbye-pipeline.yaml PipelineRun ê°œì²´ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì¸ìŠ¤í„´ìŠ¤í™”í•œë‹¤.\nhello-goodbye-pipeline-run.yamlì´ë¼ëŠ” ìƒˆ íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.\napiVersion: tekton.dev/v1beta1 kind: PipelineRun metadata: name: hello-goodbye-run spec: pipelineRef: name: hello-goodbye ì‘ì„±í•œ íŒŒì¼ì„ ë°°í¬í•œë‹¤.\n$ kubectl apply --filename hello-goodbye-pipeline-run.yaml pipelinerun.tekton.dev/hello-goodbye-run created Tekton CLIë¥¼ ì‚¬ìš©í•´ì„œ hello-goodbye-run Pipelien Runì˜ ë¡œê·¸ë¥¼ í™•ì¸í•œë‹¤.\n$ tkn pipelinerun logs hello-goodbye-run -f -n default tektoncd-cli ì„¤ì¹˜ # ì°¸ê³ ë¡œ tkn ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ tektoncd-cli ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤.\nbrew ëª…ë ¹ì–´ë¡œ tektoncd-clië¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.\n$ brew install tektoncd-cli ì‹¤í–‰ëœ íŒŒì´í”„ë¼ì¸ ë¡œê·¸ì—ì„œ hello taskì™€ goodbye taskê°€ ëª¨ë‘ ì •ìƒ ì‹¤í–‰ëœ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ tkn pipelinerun logs hello-goodbye-run -f -n default [hello : echo] Hello World [goodbye : goodbye] Goodbye World! 3. Tekton Dashboard ì„¤ì¹˜ # Tekton DashboardëŠ” Tektonì„ ê´€ë¦¬í•˜ê¸° í¸í•˜ê²Œ í•´ì£¼ëŠ” Web UIì´ë‹¤.\nìµœì‹  ë²„ì „ì˜ Tekton Dashboardë¥¼ ì„¤ì¹˜í•˜ë ¤ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\n$ kubectl apply --filename https://github.com/tektoncd/dashboard/releases/latest/download/tekton-dashboard-release.yaml tekton-dashboard-xxx Podê°€ ìƒˆë¡œ ìƒì„±ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ kubectl get pods --namespace tekton-pipelines NAME READY STATUS RESTARTS AGE tekton-dashboard-6c66f85968-f42h5 1/1 Running 0 34s tekton-pipelines-controller-55487dcfb8-vww2f 1/1 Running 0 8m21s tekton-pipelines-webhook-794864555f-g9fnm 1/1 Running 0 8m21s Tekton Dashboardì— ì ‘ì†í•˜ê¸° ìœ„í•´ í¬íŠ¸ë¥¼ ì„¤ì •í•œë‹¤.\n$ kubectl proxy --port=8080 ê·¸ ë‹¤ìŒ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì•„ë˜ ì£¼ì†Œë¥¼ ì…ë ¥í•´ Tekton Dashboardë¡œ ì ‘ì† ê°€ëŠ¥í•˜ë‹¤.\nhttp://localhost:8080/api/v1/namespaces/tekton-pipelines/services/tekton-dashboard:http/proxy/#/clustertasks ë˜ëŠ” ì´ ë°©ë²•ë„ ê°€ëŠ¥í•˜ë‹¤.\n$ kubectl --namespace tekton-pipelines port-forward svc/tekton-dashboard 9097:9097 ìœ„ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ëœ í›„ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  http://localhost:9097ë¡œ ì ‘ì†í•˜ë©´ Tekton Dashboard í™”ë©´ì´ ë‚˜íƒ€ë‚œë‹¤.\në!\nì°¸ê³ ìë£Œ # Tekton ê³µì‹ë¬¸ì„œ\n","date":"May 2, 2022","permalink":"/blog/installing-tekton-on-minikube/","section":"Blogs","summary":"ê°œìš” # minikubeë¥¼ í†µí•´ Tekton Pipelineê³¼ Tekton Dashboardë¥¼ ì„¤ì¹˜í•˜ê³  ë°ëª¨ë¥¼ êµ¬ì„±í•´ë³¸ë‹¤.","title":"Tekton ì„¤ì¹˜"},{"content":"ì¦ìƒ # Lambda functionì„ ìƒì„±í•  ë•Œ ECR ê¶Œí•œ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©° ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•œ ì¦ìƒ.\nì—ëŸ¬ ë©”ì„¸ì§€\nëŒë‹¤ê°€ ECR Imageì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìœ¼ë‹ˆ, ë¨¼ì € ECRElastic Container Registryì˜ ê¶Œí•œì„ í™•ì¸í•´ë³´ë¼ê³  ì•Œë ¤ì£¼ê³  ìˆë‹¤.\nLambda does not have permission to access the ECR image. Check the ECR permissions. ì›ì¸ # ì—ëŸ¬ ë©”ì„¸ì§€ì— ì´ë¯¸ ì •ë‹µì´ ìˆì—ˆë‹¤. ì´ë˜ì„œ ë¡œê·¸ì˜ ì¤‘ìš”ì„±ì„ ì ˆëŒ€ ê°„ê³¼í•´ì„œë„ ì˜ì‹¬í•´ì„œë„ ì•ˆëœë‹¤.\nECRElastic Container Registryì— Lambda function ì ‘ê·¼ì„ í—ˆìš©í•´ì£¼ëŠ” Permissionì´ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šì•˜ë‹¤.\nLambda functionì´ ECRì— ì ‘ê·¼í•´ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¬ ë•Œ, ê¶Œí•œì´ ê±°ë¶€ë˜ì–´ ì‹¤íŒ¨í•˜ëŠ” ê²ƒì´ë‹¤.\ní•´ê²°ë°©ë²• # ëŒë‹¤ ì „ìš© IAM Role ìƒì„± # Lambda functionì— ë¶€ì—¬í•  IAM Roleì„ ìƒì„±í•œë‹¤.\nì´ IAM Roleì—ëŠ” Lambda functionì´ ECRì— ì¸ì¦ì„ ë°›ê³ , Repositoryì— ì ‘ê·¼í•´ì„œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ê³  ì´ë¯¸ì§€ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ë¶€ì—¬ë˜ì–´ ìˆë‹¤.\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;LambdaToECR1\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:SetRepositoryPolicy\u0026#34;, \u0026#34;ecr:BatchGetImage\u0026#34;, \u0026#34;ecr:CompleteLayerUpload\u0026#34;, \u0026#34;ecr:Get*\u0026#34;, \u0026#34;ecr:Describe*\u0026#34;, \u0026#34;ecr:UploadLayerPart\u0026#34;, \u0026#34;ecr:ListImages\u0026#34;, \u0026#34;ecr:InitiateLayerUpload\u0026#34;, \u0026#34;ecr:BatchCheckLayerAvailability\u0026#34;, \u0026#34;ecr:PutImage\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:ecr:ap-northeast-2:ACCOUNT_ID:repository/REPOSITORY_NAME\u0026#34; }, { \u0026#34;Sid\u0026#34;: \u0026#34;LambdaToECR2\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;ecr:GetAuthorizationToken\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; } ] } Resource ê°’ì˜ ë¦¬ì „ ap-northeast-2, ACCOUNT_ID, REPOSITORY_NAME ê°’ì€ ìì‹ ì˜ í™˜ê²½ì— ë§ê²Œ ë°”ê¾¸ì.\nECR ê¶Œí•œ ì„¤ì • # AWS Management Consoleì— ë¡œê·¸ì¸ í•œ ë‹¤ìŒ, ECRElastic Container Registry ì„œë¹„ìŠ¤ë¡œ ë“¤ì–´ê°„ë‹¤.\nê·¸í›„ Lambda functionë¥¼ ì—°ê²°í•  ECR ë ˆí¬ì§€í„°ë¦¬ë¥¼ ì„ íƒí•œë‹¤.\nAmaozn ECRì˜ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ë™ì¼í•œ ê³„ì •ì— ìˆëŠ” Lambda Functionì˜ ê²½ìš° Amazon ECR ë ˆí¬ì§€í† ë¦¬ì— ê¶Œí•œì„ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤. ë‹¤ìŒ ì˜ˆëŠ” ECR ë ˆí¬ì§€í„°ë¦¬ì˜ ìµœì†Œ ê¶Œí•œ ì •ì±…ì„ ë³´ì—¬ì¤€ë‹¤.\n{ \u0026#34;Version\u0026#34;: \u0026#34;2008-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;LambdaECRImageRetrievalPolicy\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Service\u0026#34;: \u0026#34;lambda.amazonaws.com\u0026#34; }, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:BatchGetImage\u0026#34;, \u0026#34;ecr:DeleteRepositoryPolicy\u0026#34;, \u0026#34;ecr:GetDownloadUrlForLayer\u0026#34;, \u0026#34;ecr:GetRepositoryPolicy\u0026#34;, \u0026#34;ecr:SetRepositoryPolicy\u0026#34; ], \u0026#34;Condition\u0026#34;: { \u0026#34;StringLike\u0026#34;: { \u0026#34;aws:sourceArn\u0026#34;: \u0026#34;arn:aws:lambda:ap-northeast-2:ACCOUNT_ID:function:*\u0026#34; } } } ] } ìœ„ ì •ì±… ê°’ì„ ECRì˜ Permissionsì— ë„£ì–´ì£¼ë©´, Lambda functionì´ í•´ë‹¹ ECR ë ˆí¬ì§€í„°ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤.\nê·¸ëŸ¬ë©´ ECR ë ˆí¬ì§€í„°ë¦¬ì˜ Permissions ë©”ë‰´ì—ëŠ” ì´ë ‡ê²Œ ë³€í™˜ë˜ì–´ ë³´ì¸ë‹¤.\nECRì— ê¶Œí•œì„ ë¶€ì—¬í•œ ë‹¤ìŒ, Lambda functionì— ë¡¤ì„ ë¶€ì—¬í•´ì„œ ë‹¤ì‹œ ìƒì„±í•´ë³´ë©´ ë¬¸ì œì—†ì´ ìƒì„±ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì´ê²ƒìœ¼ë¡œ ê¶Œí•œ ë¬¸ì œëŠ” ì¡°ì¹˜ ì™„ë£Œ.\nì°¸ê³ ìë£Œ # AWS ê³µì‹ë¬¸ì„œ\nDeploying Lambda functions as container images\n","date":"Apr 26, 2022","permalink":"/blog/lambda-to-ecr-error/","section":"Blogs","summary":"ì¦ìƒ # Lambda functionì„ ìƒì„±í•  ë•Œ ECR ê¶Œí•œ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©° ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•œ ì¦ìƒ.","title":"Check the ECR permission"},{"content":"ê°œìš” # Celery workerì˜ Queueë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.\ní™˜ê²½ # Celery : 5.2.3 (dawn-chorus) Python : 3.8.13 Shell : bash ë³¸ë¬¸ # í…ŒìŠ¤í¬ ì´ë¦„ìœ¼ë¡œ í ë¶„ë¥˜ # Task íŒŒì¼ ìˆ˜ì •\napp.conf.task_queues ì„¤ì •ì„ í†µí•´ í…ŒìŠ¤í¬ ì´ë¦„ì— ë”°ë¼ íë¥¼ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.\n# celery_tasks.py from celery import Celery from kombu import Queue import time app = Celery(\u0026#39;tasks\u0026#39;, broker=\u0026#39;redis://localhost:6379\u0026#39;, backend=\u0026#39;redis://localhost:6379\u0026#39;) app.conf.task_default_queue = \u0026#39;default\u0026#39; app.conf.task_queues = ( Queue(\u0026#39;normal_tasks\u0026#39;, routing_key=\u0026#39;normal.#\u0026#39;), Queue(\u0026#39;urgent_tasks\u0026#39;, routing_key=\u0026#39;urgent.#\u0026#39;), ) @app.task def normal_task(x): time.sleep(x) return x @app.task def urgent_task(x): return x Celery worker ë„ìš°ê¸°\ncelery_tasks.py íŒŒì¼ì„ ì‘ì„±í–ˆë‹¤. ì´ì œ ì‰˜ì—ì„œ ì›Œì»¤ë¥¼ ë„ìš°ë©´ ëœë‹¤.\nìœ„ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” Queueê°€ ì´ 2ê°œ(slow_tasks, quick_tasks)ì´ê¸° ë•Œë¬¸ì—, Celery Workerë„ ê°ê° íë§ˆë‹¤ ë„ì›Œì£¼ì–´ì•¼ í•œë‹¤.\n$ celery -A celery_tasks worker -Q normal_tasks -l INFO $ celery -A celery_tasks worker -Q urgent_tasks -l INFO ëª…ë ¹ì–´ ì˜µì…˜ ì„¤ëª…\n-A: Celery Workerê°€ ìˆ˜í–‰í•  App ì´ë¦„(íŒŒì¼ëª…)ì„ ì§€ì •í•˜ëŠ” ì˜µì…˜\n-Q: Queue ì´ë¦„ì„ ì§€ì •í•˜ëŠ” ì˜µì…˜\n-l(--loglevel): ì¶œë ¥í•  ë¡œê·¸ë ˆë²¨ ì˜µì…˜. Celery workerì˜ ë¡œê·¸ ë ˆë²¨ì—ëŠ” DEBUG(ë””ë²„ê·¸), INFO(ì •ë³´ì„±), WARNING(ê²½ê³ ), ERROR(ì˜¤ë¥˜), CRITICAL(ì¹˜ëª…), FATAL(ì‹¬ê°)ì´ ìˆë‹¤.\níŠ¹ì • í…ŒìŠ¤í¬ì—ë§Œ í ì§€ì •í•˜ê¸° # @app.task ë°ì½”ë ˆì´í„°ì— queue='QUEUE_NAME' íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.\n@app.task(queue=\u0026#39;normal_tasks\u0026#39;) def normal_task(x): time.sleep(x) return x Celery worker ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ë°©ë²•ì€ ìœ„ì— ë‚´ìš©ì„ ì°¸ê³ í•˜ë©´ ëœë‹¤.\nì°¸ê³ ìë£Œ # How to route tasks to different queues with Celery and Django\níŠ¹ì • í…ŒìŠ¤í¬ì—ë§Œ í ì§€ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•˜ëŠ” ê¸€.\n","date":"Apr 21, 2022","permalink":"/blog/routing-celery-tasks/","section":"Blogs","summary":"ê°œìš” # Celery workerì˜ Queueë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.","title":"Celery taskì˜ queue ë¼ìš°íŒ…"},{"content":"ê°œìš” # íŠ¹ì • ë ˆí¬ì§€í„°ë¦¬ì˜ ì „ì²´ ì»¤ë°‹ë¡œê·¸ë¥¼ ì‚­ì œ(ì´ˆê¸°í™”)í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.\në‚´ Public Repositoryì— í¬ë¦¬í‹°ì»¬í•œ ë³´ì•ˆ ì´ìŠˆë¥¼ ì¼ìœ¼í‚¬ë§Œí•œ ì´ë¯¸ì§€ íŒŒì¼ì´ë‚˜ ì¸ì¦ ì •ë³´ ë“±ì´ ë…¸ì¶œë˜ì—ˆì„ ê²½ìš° ì´ ë°©ë²•ì„ ì“°ì.\nì›ë¦¬ # ì „ì²´ ì»¤ë°‹ë¡œê·¸ ì‚­ì œ(ì´ˆê¸°í™”) ì›ë¦¬ëŠ” ê°„ë‹¨í•˜ë‹¤.\nmain ë¸Œëœì¹˜ë¥¼ ë³µì œí•´ì„œ latest_branch ë¸Œëœì¹˜ë¥¼ ë§Œë“ ë‹¤. main ë¸Œë Œì¹˜ë¥¼ ì‚­ì œí•œë‹¤. main ë¸Œëœì¹˜ê°€ ì‚­ì œë  ë•Œ ê·¸ ì•ˆì— í¬í•¨ëœ Commit log ì „ì²´ë„ ê°™ì´ ì‚­ì œëœë‹¤. latest_branchì˜ ì´ë¦„ì„ mainìœ¼ë¡œ ë³€ê²½í•œë‹¤. ë. ì£¼ì˜ì‚¬í•­\nì´ ë°©ë²•ì„ ì“¸ ê²½ìš°, ì§€ê¸ˆê¹Œì§€ì˜ main ë¸Œëœì¹˜ì˜ ì „ì²´ ì»¤ë°‹ ë¡œê·¸(íˆìŠ¤í† ë¦¬)ê°€ ì‚¬ë¼ì§„ë‹¤.\nì‚­ì œëœ ì»¤ë°‹ë¡œê·¸ëŠ” ë³µêµ¬í•  ë°©ë²•ì´ ì—†ë‹¤ëŠ” ì‚¬ì‹¤ì„ ëª…ì‹¬í•œë‹¤.\ní•´ê²°ë²• # Checkout # # [\u0026gt;] main $ git checkout --orphan latest_branch checkoutì€ ìƒˆë¡œìš´ ë¸Œëœì¹˜ë¥¼ ë§Œë“œëŠ” ëª…ë ¹ì–´ì´ë‹¤.\nlatest_branchë¼ëŠ” ì´ë¦„ì˜ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•œë‹¤.\nì „ì²´ íŒŒì¼ Add # # [ ] main # [\u0026gt;] latest_branch $ git add -A -AëŠ” ì „ì²´ íŒŒì¼ì„ ì¶”ê°€í•˜ëŠ” ì˜µì…˜ì´ë‹¤.\nì „ì²´ íŒŒì¼ì„ ìƒˆë¡œ ë§Œë“  `latest_branchì— ì¶”ê°€í•œë‹¤.\n# [ ] main # [\u0026gt;] latest_branch $ git commit -am \u0026#34;Initial commit\u0026#34; ì „ì²´ íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ìƒˆë¡œ ë§Œë“  ë¸Œëœì¹˜ latest_branchì— Commit í•œë‹¤.\në¸Œëœì¹˜ ì‚­ì œ # # [X] main # [\u0026gt;] latest_branch $ git branch -D main ê¸°ì¡´ main ë¸Œëœì¹˜ë¥¼ ì‚­ì œí•œë‹¤. main ë¸Œëœì¹˜ë¥¼ ì—†ì• ëŠ” ì´ìœ ëŠ” í•µì‹¬ ëª©ì ì¸ Commit Log ì „ì²´ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•´ì„œì´ë‹¤.\ní˜„ì¬ ë¸Œëœì¹˜ ì´ë¦„ì„ mainìœ¼ë¡œ ë³€ê²½ # # [\u0026gt;] latest_branch --\u0026gt; main $ git branch -m main -mì€ ë¸Œëœì¹˜ì˜ ì´ë¦„ì„ ë³€ê²½í•˜ëŠ” ì˜µì…˜ì´ë‹¤.\nê°•ì œ ì—…ë°ì´íŠ¸ # # [\u0026gt;] main $ git push -f origin main ë§ˆì§€ë§‰ìœ¼ë¡œ ì»¤ë°‹í•œ ì „ì²´ íŒŒì¼ì„ ê°•ì œë¡œ main ë¸Œëœì¹˜ì— ì˜¬ë¦°ë‹¤.\nê²°ê³¼í™•ì¸ # $ git log --graph * commit c2af2fd2490bd4bdaeea9daaa5193deb2927a7d1 (HEAD -\u0026gt; main, origin/main, origin/HEAD) | Author: seyslee \u0026lt;username@xxxxx.com\u0026gt; | Date: Fri Apr 15 22:09:51 2022 +0900 | | rebuilding site 2022ë…„ 4ì›” 15ì¼ ê¸ˆìš”ì¼ 22ì‹œ 09ë¶„ 51ì´ˆ KST | * commit 265451476ff6acb4e9998940f8c90acbf03225cf | Author: seyslee \u0026lt;username@xxxxx.com\u0026gt; | Date: Fri Apr 15 22:08:28 2022 +0900 | | rebuilding site 2022ë…„ 4ì›” 15ì¼ ê¸ˆìš”ì¼ 22ì‹œ 08ë¶„ 28ì´ˆ KST | * commit 9dc438a22eddd7a6074170a0201bba0fa632c107 Author: seyslee \u0026lt;username@xxxxx.com\u0026gt; Date: Fri Apr 15 22:03:35 2022 +0900 Initial commit --graph ì˜µì…˜ì€ ì»¤ë°‹ ë¡œê·¸ ì „ì²´ë¥¼ íŠ¸ë¦¬ í˜•íƒœë¡œ ê·¸ë ¤ì¤€ë‹¤.\nì§€ê¸ˆê¹Œì§€ì˜ ì „ì²´ ì»¤ë°‹ë¡œê·¸ê°€ ì‚¬ë¼ì¡Œë‹¤. ì´ì œ ì¤‘ìš” ì •ë³´ê°€ ë…¸ì¶œëœ ì»¤ë°‹ë¡œê·¸ëŠ” ì´ ì„¸ìƒì—ì„œ ì‚¬ë¼ì¡Œë‹¤.\nì¡°ì¹˜ ë!\nê²°ë¡  # rm -rf .git ëª…ë ¹ì–´ë¡œ .git ë””ë ‰í† ë¦¬ë¥¼ ì§€ìš°ëŠ” ê±´ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.\nì„œë¸Œëª¨ë“ˆ ì„¤ì • ë“±ë„ .git ì•ˆì— ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆëŠ”ë°, ì´ê²ƒë“¤ ë‹¤ì‹œ ì„¤ì • ì¡ëŠ” ê²ƒë„ ë²ˆê±°ë¡­ê³  ì „ì²´ ë ˆí¬ì§€í„°ë¦¬ ì„¤ì •ì„ ë‚ ë¦¬ëŠ”ê²Œ ìœ„í—˜í•˜ê¸°ë„ í•˜ë‹ˆê¹Œ.\nì• ì´ˆì— ì‘ì—… ëª©ì ì„ ì˜ ìƒê°í•´ë³´ë©´ ìš°ë¦¬ëŠ” ë ˆí¬ì§€í„°ë¦¬ì˜ ì»¤ë°‹ ë¡œê·¸ ì „ì²´ë¥¼ ë‚ ë¦¬ê³  ì‹¶ì—ˆë˜ ê²ƒì´ë‹¤.\nmain ë¸Œëœì¹˜ë¥¼ ê·¸ëŒ€ë¡œ ë‹¤ë¥¸ ë¸Œëœì¹˜ì— ë³µì œ ë– ì„œ ë°±ì—…í•œ í›„ main ë¸Œëœì¹˜ ìì²´ë¥¼ ë‚ ë¦¬ëŠ”ê²Œ í›¨ì”¬ ê°„ë‹¨í•˜ê³  ì•ˆì „í•˜ë‹¤. ë¸Œëœì¹˜ê°€ ì‚­ì œë  ë•Œ ê·¸ ì•ˆì˜ ëª¨ë“  ì»¤ë°‹ ë¡œê·¸ë„ ê°™ì´ ì‚­ì œë˜ë‹ˆê¹Œ.\n","date":"Apr 15, 2022","permalink":"/blog/initialize-entire-commit-log/","section":"Blogs","summary":"ê°œìš” # íŠ¹ì • ë ˆí¬ì§€í„°ë¦¬ì˜ ì „ì²´ ì»¤ë°‹ë¡œê·¸ë¥¼ ì‚­ì œ(ì´ˆê¸°í™”)í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","title":"git ì»¤ë°‹ë¡œê·¸ ì „ì²´ ì‚­ì œ"},{"content":"ê°œìš” # EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ë””ìŠ¤í¬ ê³µê°„ì´ ë¶€ì¡±í•œ ìƒí™©ì—ì„œëŠ” EBS ë³¼ë¥¨ ìš©ëŸ‰ì„ ëŠ˜ë¦¬ê±°ë‚˜ íŒŒì¼ì‹œìŠ¤í…œì— ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•´ì„œ ì—¬ìœ ê³µê°„ì„ ë‹¤ì‹œ í™•ë³´í•˜ëŠ” ì¡°ì¹˜ê°€ í•„ìš”í•˜ë‹¤.\nì´ ë¬¸ì„œì—ì„œëŠ” Linux EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ EBSElastic Block Storage Volumeì˜ ìš©ëŸ‰ì„ ëŠ˜ë¦¬ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤.\ní™˜ê²½ # OS : Amazon Linux 2 Type : t2.micro EBS Volume Type: gp3 Size: 10GiB â†’ gp3 30GiB (xfs íƒ€ì…) Shell : bash ID : ec2-user gp3\në°°ê²½ì§€ì‹ìœ¼ë¡œ ì„¤ëª…í•˜ìë©´ EBS ë³¼ë¥¨ì€ ë˜ë„ë¡ì´ë©´ gp2 íƒ€ì…ì˜ ë‹¤ìŒ ì„¸ëŒ€ì¸ gp3 íƒ€ì…ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì. ë¹„ìš©ì´ë‚˜ ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ëª¨ë‘ ì›”ë“±í•˜ë‹¤.\nì°¸ê³ ë¡œ gp2 íƒ€ì…ì€ 2014ë…„ì— ì²˜ìŒ ì¶œì‹œë˜ì—ˆë‹¤.\nAWS ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì— ë”°ë¥´ë©´ gp3ì˜ ìµœê³  ì„±ëŠ¥ì€ gp2 ë³¼ë¥¨ì˜ ìµœëŒ€ ì²˜ë¦¬ëŸ‰ë³´ë‹¤ 4ë°° ë¹ ë¥´ë‹¤ê³  í•œë‹¤. ê°€ê²©ë„ ê¸°ì¡´ gp2 ë³¼ë¥¨ íƒ€ì…ë³´ë‹¤ 20% ì €ë ´í•˜ë‹¤.\nAWS ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…\nì „ì œì¡°ê±´ # AWS Management Consoleì— ë¯¸ë¦¬ ë¡œê·¸ì¸ë˜ì–´ ìˆì–´ì•¼ í•¨ SSHë‚˜ Session Manager ë“±ìœ¼ë¡œ EC2 Instanceì— ì›ê²©ì ‘ì† ê°€ëŠ¥í•œ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ í•´ê²°ë°©ë²• # AWS Management Console # EBSElastic Block Storage Volumeì˜ ìš©ëŸ‰ì„ ëŠ˜ë¦¬ëŠ” ì‘ì—…ì€ AWS Management Consoleì—ì„œ ì§„í–‰í•´ì•¼í•œë‹¤.\nì¶©ë¶„í•œ ê¶Œí•œì„ ê°€ì§„ AWS ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í–ˆë‹¤ëŠ” ì „ì œí•˜ì— ë‹¤ìŒ ê³¼ì •ì„ ì§„í–‰í•œë‹¤.\nEC2 ì„œë¹„ìŠ¤ ë©”ë‰´ â†’ ì™¼ìª½ ì‚¬ì´ë“œë°” ë©”ë‰´ â†’ Volumes í´ë¦­\nì´í›„ ì‘ì—…ëŒ€ìƒ EC2ì— ë¶€ì°©ëœ EBS Volumeì„ ì²´í¬í•´ì¤€ë‹¤.\nìš°ì¸¡ ìƒë‹¨ì— Actions â†’ Modify volume í´ë¦­.\nEBS ë³¼ë¥¨ì˜ ìš©ëŸ‰ ê°’(Size (GiB))ì„ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ëŠ˜ë¦°ë‹¤.\ní˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” 10GBë¥¼ 30GBë¡œ ë³€ê²½í—€ë‹¤.\nìœ„ ì•ˆë‚´ë¬¸ì„ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\nAWS Consoleì—ì„œ ëŠ˜ë¦¬ë©´ ì‘ì—…ì´ ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼, EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•´ì„œ ì¼ë ¨ì˜ ì¶”ê°€ ëª…ë ¹ì–´ ì‹¤í–‰ì„ í•´ì•¼ ì™„ë²½íˆ ì ìš©ëœë‹¤. AWS Console ì˜ì—­ì—ì„œ EBS Volume ìš©ëŸ‰ ë³€ê²½ì´ ì™„ë£Œë˜ëŠ” ë°ì—ëŠ” ëª‡ ë¶„ ì •ë„ ì†Œìš”ë  ìˆ˜ ìˆë‹¤. EBS Volume ìš©ëŸ‰ ë³€ê²½ì´ ì‹œì‘ë  ë•Œë¶€í„° EBS Volumeì˜ ë¹„ìš©ì€ ë°”ë€ ìš©ëŸ‰ ê¸°ì¤€ìœ¼ë¡œ ì²­êµ¬ëœë‹¤. ì•ˆë‚´ë¬¸ ë‚´ìš©ì„ ì´í•´í–ˆë‹¤ë©´ [Modify] ë²„íŠ¼ì„ í´ë¦­í•œë‹¤.\nEC2 # 1. EC2 ì ‘ì† # EC2ì— SSH ë˜ëŠ” Session Managerë¥¼ í†µí•´ ì ‘ì†í•œë‹¤.\nê°ì í™˜ê²½ì—ì„œ ì ‘ì† ê°€ëŠ¥í•œ ë°©ë²•ìœ¼ë¡œ EC2ì— ì—°ê²°í•˜ë©´ ëœë‹¤.\n2. ë””ìŠ¤í¬ êµ¬ì„± ë° íƒ€ì… í™•ì¸ # root íŒŒì¼ì‹œìŠ¤í…œì˜ íƒ€ì…ì´ xfsì¸ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n[ec2-user@test-ec2 ~]$ df -hT Filesystem Type Size Used Avail Use% Mounted on devtmpfs devtmpfs 474M 0 474M 0% /dev tmpfs tmpfs 483M 0 483M 0% /dev/shm tmpfs tmpfs 483M 404K 483M 1% /run tmpfs tmpfs 483M 0 483M 0% /sys/fs/cgroup /dev/xvda1 xfs 10G 1.6G 8.5G 16% / tmpfs tmpfs 97M 0 97M 0% /run/user/0 3. lsblk í™•ì¸ # [ec2-user@test-ec2 ~]$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT xvda 202:0 0 30G 0 disk â””â”€xvda1 202:1 0 10G 0 part / ë£¨íŠ¸ ë³¼ë¥¨ /dev/xvdaëŠ” /dev/xvda1 íŒŒí‹°ì…˜ í•˜ë‚˜ë¡œë§Œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.\nxvda ë³¼ë¥¨ ì „ì²´ìš©ëŸ‰ì€ 30Gì´ì§€ë§Œ xvda1 íŒŒí‹°ì…˜ì˜ ìš©ëŸ‰ì€ 10Gë§Œ í• ë‹¹ë˜ì–´ ìˆìœ¼ë¯€ë¡œ í™•ì¥ì´ í•„ìš”í•˜ë‹¤.\n4. ë³¼ë¥¨ í™•ì¥ # xvda1 íŒŒí‹°ì…˜ì˜ ìš©ëŸ‰ì„ í™•ì¥ì‹œí‚¨ë‹¤.\n[ec2-user@test-ec2 ~]$ sudo growpart /dev/xvda 1 CHANGED: partition=1 start=4096 old: size=20967391 end=20971487 new: size=62910431 end=62914527 xvda1 íŒŒí‹°ì…˜ì˜ ìš©ëŸ‰ì´ ì •ìƒì ìœ¼ë¡œ ë³€ê²½(CHANGED)ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n5. lsblk ì¬í™•ì¸ # lsblk ëª…ë ¹ì–´ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.\n[ec2-user@test-ec2 ~]$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT xvda 202:0 0 30G 0 disk â””â”€xvda1 202:1 0 30G 0 part / xvda1 íŒŒí‹°ì…˜ì´ 10Gì—ì„œ 30Gë¡œ í™•ì¥ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ(/)ì˜ ë””ìŠ¤í¬ ì‚¬ìš©ë¥ ì„ í™•ì¸í–ˆì„ ë•ŒëŠ” 16%ë¡œ ê·¸ëŒ€ë¡œì´ë‹¤.\nì•„ì§ ë§ˆì§€ë§‰ ëª…ë ¹ì–´ê°€ ë‚¨ì•„ìˆë‹¤.\n[ec2-user@test-ec2 ~]$ df -h Filesystem Size Used Avail Use% Mounted on devtmpfs 474M 0 474M 0% /dev tmpfs 483M 0 483M 0% /dev/shm tmpfs 483M 436K 483M 1% /run tmpfs 483M 0 483M 0% /sys/fs/cgroup /dev/xvda1 10G 1.6G 8.5G 16% / tmpfs 97M 0 97M 0% /run/user/0 6. íŒŒì¼ì‹œìŠ¤í…œ í™•ì¥ (xfs) # ê° ë³¼ë¥¨ì—ì„œ íŒŒì¼ ì‹œìŠ¤í…œì„ í™•ì¥í•˜ë ¤ë©´ xfs_growfs ëª…ë ¹ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\nì•„ë˜ ëª…ë ¹ì–´ëŠ” ë£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ(/)ì„ í™•ì¥ì‹œí‚¨ë‹¤.\n[ec2-user@test-ec2 ~]$ sudo xfs_growfs -d / meta-data=/dev/xvda1 isize=512 agcount=6, agsize=524159 blks = sectsz=512 attr=2, projid32bit=1 = crc=1 finobt=1 spinodes=0 data = bsize=4096 blocks=2620923, imaxpct=25 = sunit=0 swidth=0 blks naming =version 2 bsize=4096 ascii-ci=0 ftype=1 log =internal bsize=4096 blocks=2560, version=2 = sectsz=512 sunit=0 blks, lazy-count=1 realtime =none extsz=4096 blocks=0, rtextents=0 data blocks changed from 2620923 to 7863803 ë§Œì•½ EC2ì— XFS íˆ´ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì€ ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì´ xfsprogs íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë©´ ëœë‹¤.\nxfsprogs íŒ¨í‚¤ì§€ì—ëŠ” XFS íŒŒì¼ ì‹œìŠ¤í…œì„ ìœ„í•œ ê´€ë¦¬ ë„êµ¬ì™€ ë””ë²„ê¹… ë„êµ¬ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.\n[ec2-user@test-ec2 ~]$ sudo yum install xfsprogs df -h ëª…ë ¹ì–´ë¡œ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì„ í™•ì¸í•œë‹¤.\në£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ(/)ì˜ ìš©ëŸ‰ì´ 10Gì—ì„œ 30Gë¡œ ì¦ê°€í–ˆë‹¤.\në£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ(/)ì˜ ì‚¬ìš©ë¥ ë„ 16%ì—ì„œ 6%ë¡œ ê°ì†Œë˜ì—ˆë‹¤.\n[ec2-user@test-ec2 ~]$ df -h Filesystem Size Used Avail Use% Mounted on devtmpfs 474M 0 474M 0% /dev tmpfs 483M 0 483M 0% /dev/shm tmpfs 483M 436K 483M 1% /run tmpfs 483M 0 483M 0% /sys/fs/cgroup /dev/xvda1 30G 1.7G 29G 6% / tmpfs 97M 0 97M 0% /run/user/0 ì´ì œ EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ë””ìŠ¤í¬EBS Volume ì¦ì„¤ ì‘ì—…ì€ ì •ìƒ ì™„ë£Œëë‹¤.\nê²°ë¡  # EC2 ë””ìŠ¤í¬ ì¦ì„¤ ì‘ì—…ì€ ì¢…ì¢… ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ìµí˜€ë‘ë©´ ì¢‹ë‹¤.\nEBS ë³¼ë¥¨ì˜ íŒŒì¼ ì‹œìŠ¤í…œ íƒ€ì…ì´ xfsì¸ì§€ ext4ì— ë”°ë¼ ì„¤ì • ë°©ë²•ì´ ì‚´ì§ ë‹¬ë¼ì§„ë‹¤ëŠ” ì ì„ ëª…ì‹¬í•˜ì.\nì°¸ê³ ìë£Œ # AWS ê³µì‹ë¬¸ì„œ\nExtend a Linux file system after resizing a volume\n","date":"Apr 15, 2022","permalink":"/blog/extending-linux-fs-after-resizing-ebs-volume/","section":"Blogs","summary":"ê°œìš” # EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ë””ìŠ¤í¬ ê³µê°„ì´ ë¶€ì¡±í•œ ìƒí™©ì—ì„œëŠ” EBS ë³¼ë¥¨ ìš©ëŸ‰ì„ ëŠ˜ë¦¬ê±°ë‚˜ íŒŒì¼ì‹œìŠ¤í…œì— ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•´ì„œ ì—¬ìœ ê³µê°„ì„ ë‹¤ì‹œ í™•ë³´í•˜ëŠ” ì¡°ì¹˜ê°€ í•„ìš”í•˜ë‹¤.","title":"EC2 ë””ìŠ¤í¬ ì¦ì„¤"},{"content":"ê°œìš” # Hugo ë¸”ë¡œê·¸ë¥¼ ìš´ì˜í•˜ë©´ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” found no layout file for ... ì—ëŸ¬ë¥¼ í•´ê²°í•œë‹¤.\ní™˜ê²½ # Hardware : MacBookÂ Pro(14\u0026quot;, 2021, M1 Pro) OS : macOS Monterey 12.3 Shell : zsh Hugo : v0.95.0 (Brewë¡œ ì„¤ì¹˜í•¨) Browser : Chrome 99.0.4844.83 ì¦ìƒ # ê¸°ì¡´ì— ì‚¬ìš©ì¤‘ì´ë˜ ë§¥ë¶ì—ì„œ ì‹ ê·œ ë§¥ë¶ìœ¼ë¡œ ì˜®ê²¨ì„œ ë¸”ë¡œê·¸ ë ˆí¬ì§€í„°ë¦¬ë¥¼ í´ë¡ í–ˆë‹¤.\nì´ì œ ì‹ ê·œ ë§¥ë¶ì—ì„œ Github ë¸”ë¡œê·¸ë¥¼ ê´€ë¦¬í•˜ë ¤ëŠ” ëª©ì ì´ì—ˆë‹¤.\n$ git clone https://github.com/seyslee/blog.git í˜„ì¬ ë‚´ê°€ ìœ„ì¹˜í•œ ê²½ë¡œë¥¼ í™•ì¸í•œë‹¤.\n$ pwd /Users/ive/github/personal/blog Hugo í…ŒìŠ¤íŠ¸ ì›¹ì„œë²„ë¥¼ ì‹¤í–‰í–ˆë‹¤.\nì—¬ê¸°ì„œ -D ì˜µì…˜ì€ ìˆ¨ê¹€ ì²˜ë¦¬(draft: true)ë˜ì–´ ìˆëŠ” ê²Œì‹œê¸€ë„ ëª¨ë‘ í‘œì‹œí•˜ê² ë‹¤ëŠ” ì„¤ì •ì´ë‹¤.\n$ hugo server -D ... WARN 2022/03/22 18:48:28 found no layout file for \u0026#34;HTML\u0026#34; for kind \u0026#34;term\u0026#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination. WARN 2022/03/22 18:48:28 found no layout file for \u0026#34;HTML\u0026#34; for kind \u0026#34;term\u0026#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination. WARN 2022/03/22 18:48:28 found no layout file for \u0026#34;HTML\u0026#34; for kind \u0026#34;term\u0026#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination. WARN 2022/03/22 18:48:28 found no layout file for \u0026#34;HTML\u0026#34; for kind \u0026#34;term\u0026#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination. WARN 2022/03/22 18:48:28 found no layout file for \u0026#34;HTML\u0026#34; for kind \u0026#34;term\u0026#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination. | EN -------------------+------ Pages | 29 Paginator pages | 0 Non-page files | 114 Static files | 3 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Built in 103 ms Watching for changes in /Users/xxxxx/github/personal/blog/{archetypes,content,layouts,static} Watching for config changes in /Users/xxxxx/github/personal/blog/config.toml Environment: \u0026#34;development\u0026#34; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì•„ë˜ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì£¼ëª©í•˜ì.\nfile for \u0026#34;HTML\u0026#34; for kind \u0026#34;term\u0026#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination. template fileì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.\ní…ŒìŠ¤íŠ¸ìš© ì›¹í˜ì´ì§€ ì£¼ì†Œì¸ http://localhost:1313/ì— ì ‘ì†í•´ë„ ë¹ˆ í˜ì´ì§€ê°€ ëœ¬ë‹¤.\nì›ì¸ # ë³µì œí•´ì˜¨ ë ˆí¬ì§€í„°ë¦¬ ì•ˆì— í¬í•¨ëœ hugo-theme-codex Submoduleì´ ë¹„ì–´ ìˆì—ˆë‹¤.\nBlog repositoryëŠ” ì œëŒ€ë¡œ ë³µì‚¬Cloneí•´ì„œ ê°€ì ¸ì™”ì§€ë§Œ, ì•ˆì— í¬í•¨ëœ Submoduleì„ ê°€ì ¸ì˜¤ì§€ ëª»í•œ ë¬¸ì œì˜€ë‹¤.\nblog/ [Blog repository] â””â”€â”€ themes/ â””â”€â”€ hugo-theme-codex/ [Submodule] â””â”€â”€ . ìœ„ hugo-theme-codex ë””ë ‰í† ë¦¬ëŠ” ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” í…Œë§ˆëª…ì´ë‹¤. ì´ ê¸€ì„ ë³´ëŠ” ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ë‹¤ë¥¸ í…Œë§ˆëª…ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì.\nì‹¤ì œë¡œ Submodule ì•ˆì— íŒŒì¼ë“¤ì„ í™•ì¸í•´ë³¸ ê²°ê³¼ì´ë‹¤.\n$ cd themes $ ls hugo-theme-codex $ cd hugo-theme-codex $ ls -al total 0 drwxr-xr-x 2 xxxxx staff 64 3 22 18:53 . drwxr-xr-x 4 xxxxx staff 128 3 22 18:53 .. hugo-theme-codex ë””ë ‰í† ë¦¬ ì•ˆì— íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.\ní•´ê²°ë°©ë²• # git clone # ë ˆí¬ì§€í„°ë¦¬ë¥¼ ë³µì œí•  ë•Œ í•´ë‹¹ ë ˆí¬ì§€í„°ë¦¬ì— ì•ˆì— í¬í•¨ëœ Submoduleë„ í•¨ê»˜ ë³µì œí•´ì„œ ê°€ì ¸ì˜¤ë„ë¡ --recursive ì˜µì…˜ì„ ì£¼ë©´ í•´ê²°ëœë‹¤.\nê¸°ì¡´ì— ë¡œì»¬ë¡œ ë³µì œí•´ì˜¨ ë ˆí¬ì§€í„°ë¦¬ë¥¼ rm -rf blogìœ¼ë¡œ ì‚­ì œí•œ ë‹¤ìŒ, ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ ë‹¤ì‹œ ë³µì œí•´ì„œ ê°€ì ¸ì˜¤ë„ë¡ í•œë‹¤.\n$ git clone https://github.com/\u0026lt;USERNAME\u0026gt;/\u0026lt;REPONAME\u0026gt;.git --recursive ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n$ git clone https://github.com/seyslee/blog.git --recursive Cloning into \u0026#39;blog\u0026#39;... remote: Enumerating objects: 1909, done. remote: Counting objects: 100% (1909/1909), done. remote: Compressing objects: 100% (1334/1334), done. remote: Total 1909 (delta 1116), reused 1316 (delta 523), pack-reused 0 Receiving objects: 100% (1909/1909), 81.07 MiB | 3.20 MiB/s, done. Resolving deltas: 100% (1116/1116), done. Submodule \u0026#39;public\u0026#39; (https://github.com/seyslee/seyslee.github.io.git) registered for path \u0026#39;public\u0026#39; Submodule \u0026#39;themes/hugo-theme-codex\u0026#39; (https://github.com/jakewies/hugo-theme-codex.git) registered for path \u0026#39;themes/hugo-theme-codex\u0026#39; Cloning into \u0026#39;/Users/xxxxx/github/personal/blog/public\u0026#39;... remote: Enumerating objects: 1054, done. remote: Counting objects: 100% (1054/1054), done. remote: Compressing objects: 100% (609/609), done. remote: Total 1054 (delta 576), reused 814 (delta 339), pack-reused 0 Receiving objects: 100% (1054/1054), 79.73 MiB | 3.15 MiB/s, done. Resolving deltas: 100% (576/576), done. Cloning into \u0026#39;/Users/xxxxx/github/personal/blog/themes/hugo-theme-codex\u0026#39;... remote: Enumerating objects: 1391, done. remote: Counting objects: 100% (49/49), done. remote: Compressing objects: 100% (48/48), done. remote: Total 1391 (delta 20), reused 9 (delta 1), pack-reused 1342 Receiving objects: 100% (1391/1391), 604.03 KiB | 839.00 KiB/s, done. Resolving deltas: 100% (701/701), done. Submodule path \u0026#39;public\u0026#39;: checked out \u0026#39;af91d944400180ec2afdb85205dfef19f3a8556c\u0026#39; Submodule path \u0026#39;themes/hugo-theme-codex\u0026#39;: checked out \u0026#39;9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da\u0026#39; --recursive ì˜µì…˜ìœ¼ë¡œ ì¸í•´ themes/hugo-theme-codex ì™€ public ì„œë¸Œëª¨ë“ˆë„ í•¨ê»˜ ë°›ì•„ì˜¤ëŠ” ê±¸cloning í™•ì¸í•  ìˆ˜ ìˆë‹¤.\ní…ŒìŠ¤íŠ¸ # ë¸”ë¡œê·¸ í…ŒìŠ¤íŠ¸ ì›¹í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë„ì›Œë³´ì.\n$ hugo server -D Start building sites â€¦ hugo v0.95.0+extended darwin/arm64 BuildDate=unknown | EN -------------------+------ Pages | 114 Paginator pages | 0 Non-page files | 114 Static files | 14 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Built in 112 ms Watching for changes in /Users/xxxxx/github/personal/blog/{archetypes,content,layouts,static,themes} Watching for config changes in /Users/xxxxx/github/personal/blog/config.toml Environment: \u0026#34;development\u0026#34; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop ì•„ê¹Œì™€ ê°™ì€ ì—ëŸ¬ ë©”ì„¸ì§€ëŠ” ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.\nChrome ë¸Œë¼ìš°ì €ë¥¼ ì—´ì–´ì„œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ http://localhost:1313ì— ì ‘ì†í•´ë³¸ë‹¤.\nHugo ë¸”ë¡œê·¸ê°€ ë¬¸ì œì—†ì´ ì˜ ë³´ì¸ë‹¤.\ní•µì‹¬ ì›ì¸ì€ ìµœì´ˆì— í´ë¡ í•´ì„œ ê°€ì ¸ì˜¬ ë•Œ, ë¸”ë¡œê·¸ ì•ˆì— í¬í•¨ëœ í…Œë§ˆ ì„œë¸Œëª¨ë“ˆì„ ì œëŒ€ë¡œ ê°€ì ¸ì˜¤ì§€ ëª»í•œ ë¬¸ì œì˜€ë‹¤.\ngit clone í•  ë•Œ submoduleì´ í¬í•¨ë˜ì–´ ìˆëŠ” ë ˆí¬ì§€í„°ë¦¬ë¼ë©´, --recursive ì˜µì…˜ì„ ì£¼ë„ë¡ í•˜ì.\nì°¸ê³ ìë£Œ # https://nochoco-lee.tistory.com/87\nhttps://discourse.gohugo.io/t/found-no-layout-file-for/36512\n","date":"Mar 22, 2022","permalink":"/blog/found-no-layout-file-in-hugo/","section":"Blogs","summary":"ê°œìš” # Hugo ë¸”ë¡œê·¸ë¥¼ ìš´ì˜í•˜ë©´ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” found no layout file for .","title":"hugo found no layout file ì—ëŸ¬"},{"content":"ê°œìš” # ë©€í‹° í´ëŸ¬ìŠ¤í„° ê¸°ë°˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ê´€ë¦¬í•  ë•Œ ìƒì‚°ì„±Productivityì„ ë†’ì—¬ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•˜ëŠ” ë¬¸ì„œì´ë‹¤.\ní™˜ê²½ # OS : macOS Monterey 12.3 (M1 Pro) Shell : zsh + oh-my-zsh Terminal : iTerm 2 macìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.4.3 ì „ì œì¡°ê±´ # brew\nmacOS íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ brewê°€ ì´ë¯¸ ì„¤ì¹˜ëœ í™˜ê²½ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” brew ì„¤ì¹˜ë°©ë²•ì„ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤.\ní”ŒëŸ¬ê·¸ì¸ ëª©ë¡ # 1. k9s # ì„¤ëª… # ì¿ ë²„ë„¤í‹°ìŠ¤ ì „ì²´ ê´€ë¦¬ íˆ´. ì•Œë¡ë‹¬ë¡í•œ ì»¬ëŸ¬ í‘œì‹œ, í‘œì‹œëœ ì •ë³´ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€ŒëŠ” Interactive ê¸°ëŠ¥, TUITerminal User Interface ê¸°ë°˜ì´ë¼ kubectl ëª…ë ¹ì–´ ì…ë ¥ ì—†ì´ ë°©í–¥í‚¤ì™€ ë‹¨ì¶•í‚¤ë§Œìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì™€ ê´€ë ¨ëœ ëª¨ë“  ì‘ì—…ì´ ê°€ëŠ¥í•´ì§„ë‹¤.\nì„¤ì¹˜ë°©ë²• # homebrewë¡œ ì„¤ì¹˜í•œë‹¤.\n$ brew install k9s ì‚¬ìš©ë²• ì˜ˆì‹œ # ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼ ê°€ëŠ¥í•œ í™˜ê²½ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ k9s ê´€ë¦¬ ì°½ì´ ëœ¬ë‹¤.\n$ k9s ìœ„ ìŠ¤í¬ë¦°ìƒ·ì€ k9sì—ì„œ ì „ì²´ íŒŒë“œë¥¼ ë³´ê³  ìˆëŠ” í™”ë©´ì´ë‹¤.\nìì„¸í•œ k9s ì¡°ì‘ë²•ì€ k9s ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í„°ë¦¬ë¥¼ ì°¸ê³ í•œë‹¤.\n2. kubecolor # ì„¤ëª… # ê°€ë…ì„± í–¥ìƒ í”ŒëŸ¬ê·¸ì¸. kubectl ëª…ë ¹ì–´ ê²°ê³¼ì˜ ê° ì»¬ëŸ¼ì— ìƒ‰ê¹”ì„ í‘œì‹œí•´ì„œ ì¶œë ¥í•´ì¤€ë‹¤. kubectl ëª…ë ¹ì–´ ê²°ê³¼ê°’ì— ê°€ë…ì„±ì„ ë†’ì—¬ì¤Œ.\n2022ë…„ 3ì›” ê¸°ì¤€ìœ¼ë¡œ, ë§Œë“  ì‚¬ëŒì´ í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ë¥¼ ì˜ ì•ˆí•˜ê³  ìˆëŠ” ê²ƒìœ¼ë¡œ í™•ì¸ë¨.\nì„¤ì¹˜ë°©ë²• # homebrewë¡œ ì„¤ì¹˜í•œë‹¤.\n$ brew install kubecolor ì‚¬ìš©ë²• ì˜ˆì‹œ # $ kubecolor get pod kubectl ëª…ë ¹ì–´ì— ì»¬ëŸ¬ í‘œì‹œë¥¼ í•­ìƒ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´, ì‰˜ ì„¤ì •íŒŒì¼ ì•ˆì— alias ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ ë” í¸í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ì•„ë˜ëŠ” zsh ê¸°ì¤€ì˜ ì„¤ì •ë°©ë²•.\n$ vi ~/.zshrc ... # kubecolor alias kubectl=kubecolor ... 3. krew # ì„¤ëª… # íŒ¨í‚¤ì§€ ê´€ë¦¬ì. krewëŠ” kubectl í”ŒëŸ¬ê·¸ì¸ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì´ë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ì „ìš© homebrewë¼ê³  ì´í•´í•˜ë©´ ëœë‹¤.\nì„¤ì¹˜ë°©ë²• # homebrewë¡œ ì„¤ì¹˜í•œë‹¤.\n$ brew install krew ì‚¬ìš©ë²• ì˜ˆì‹œ # $ kubectl krew list PLUGIN VERSION ctx v0.9.4 krew v0.4.3 ns v0.9.4 tree v0.4.1 krewë¡œ ì„¤ì¹˜í•œ í”ŒëŸ¬ê·¸ì¸ ëª©ë¡ì„ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤.\n$ kubectl krew update krewë¡œ ì„¤ì¹˜í•œ í”ŒëŸ¬ê·¸ì¸ ì „ì²´ì˜ ìµœì‹  ë²„ì „ì„ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´.\n4. stern # ì„¤ëª… # ì—¬ëŸ¬ ëŒ€ì˜ íŒŒë“œ, ì»¨í…Œì´ë„ˆ ë™ì‹œ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥. sternê³¼ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œëŠ” kailì´ ìˆë‹¤.\nì„¤ì¹˜ë°©ë²• # homebrewë¡œ ì„¤ì¹˜í•œë‹¤.\n$ brew install stern ì‚¬ìš©ë²• # $ stern -n prometheus sample-prom-pod -n : ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì§€ì •\nsample-prom-pod : (ì˜ˆì‹œ) íŒŒë“œ ì´ë¦„ì— sample-prom-podê°€ í¬í•¨ëœ íŒŒë“œë“¤ì˜ ë¡œê·¸ë§Œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§tailí•œë‹¤.\n5. tree # ì„¤ëª… # kubernetes ë¦¬ì†ŒìŠ¤ ê°„ì˜ ê´€ê³„ë¥¼ íŠ¸ë¦¬í˜•íƒœë¡œ ì‰½ê²Œ í‘œí˜„í•´ì¤€ë‹¤.\nì„¤ì¹˜ë°©ë²• # krewë¡œ ì„¤ì¹˜í•œë‹¤.\n$ kubectl krew install tree ì‚¬ìš©ë²• ì˜ˆì‹œ # $ kubectl tree deploy sample-redis NAMESPACE NAME READY REASON AGE sample Deployment/sample-redis - 138d sample â”œâ”€ReplicaSet/sample-redis-000df0b0 - 138d sample â”œâ”€ReplicaSet/sample-redis-x00x0c000 - 125d sample â””â”€ReplicaSet/sample-redis-xx0b00xxc - 67d sample â””â”€Pod/sample-redis-xx5x00xxc-zqbrk True 2d12h íŠ¹ì • Deploymentì— ì†í•œ ReplicaSetê³¼ Pod ì •ë³´ë¥¼ íŠ¸ë¦¬ í˜•íƒœë¡œ í‘œí˜„í•´ì¤€ë‹¤.\n6. kubectx \u0026amp; kubens # ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ê°œ ì‚¬ìš©í•˜ê³  ìˆê±°ë‚˜, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ê°œ ì‚¬ìš©í•˜ê³  ìˆì„ ë•Œ í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë“¤ì´ë‹¤. ëª‡ ê¸€ì ì•ˆë˜ëŠ” ì§§ì€ ëª…ë ¹ì–´ë¡œ í´ëŸ¬ìŠ¤í„° ê°„ì˜ ì´ë™, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê°„ì˜ ì´ë™ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ë©€í‹° í´ëŸ¬ìŠ¤í„° í™˜ê²½ì„ ê´€ë¦¬í•˜ëŠ” ì—”ì§€ë‹ˆì–´ë¼ë©´ ë°˜ë“œì‹œ ì‚¬ìš©í•˜ëŠ” ê±¸ ì¶”ì²œí•œë‹¤.\nì„¤ëª… # kubectxëŠ” ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì¤€ë‹¤. kubectl config use-context dev-cluster ê°™ì€ ê¸´ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\nkubensëŠ” ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤. ì´ ë‘ ë„êµ¬ ëª¨ë“œ [Tab] ì™„ì„±ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. ê·¸ ë¿ë§Œ ì•„ë‹ˆë¼, fzffuzzy finderë¥¼ ì„¤ì¹˜í•˜ë©´ ëŒ€í™”ì‹ ë©”ë‰´ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ë” í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nì„¤ì¹˜ë°©ë²• # krewë¡œ ì„¤ì¹˜í•œë‹¤.\n$ kubectl krew install kubectx $ kubectl krew install kubens ì„¤ì¹˜ í›„ íˆ´ì€ kubectl ctx ë° kubectl ns ëª…ë ¹ì–´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nkubectl ëª…ë ¹ì–´ê°€ kë¡œ alias ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ k ctx, k nsë¡œ ë” ì¶•ì•½í•´ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.\nì‚¬ìš©ë²• ì˜ˆì‹œ # fzf í”ŒëŸ¬ê·¸ì¸ì´ ê°™ì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ìƒíƒœì—ì„œ ì‹¤í–‰í•˜ë©´, ì•„ë˜ì²˜ëŸ¼ ë°©í–¥í‚¤ë¥¼ í†µí•´ ì´ë™í•´ì„œ ì„ íƒ ê°€ëŠ¥í•œ ëŒ€í™”ì‹ ë©”ë‰´ë¡œ ë™ì‘í•œë‹¤.\n$ kubectl ctx \u0026gt; docker-desktop dev-cluster qa-cluster prod-cluster 4/4 $ kubectl ns default redis \u0026gt; prometheus grafana nginx 5/5 7. kubectl ìë™ì™„ì„± # ì„¤ëª… # kubectl ìë™ì™„ì„±ì€ í”ŒëŸ¬ê·¸ì¸ì€ ì•„ë‹ˆê³ , kubectlì—ì„œ ê¸°ë³¸ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ì¶”ê°€ ì„¤ì¹˜ëŠ” í•„ìš”ì—†ë‹¤.\nì„¤ì •ë°©ë²• # ì•„ë˜ëŠ” kubectl ìë™ì™„ì„± ê¸°ëŠ¥ ì„¤ì • ë°©ë²•ì´ë‹¤. (zsh ê¸°ì¤€)\n$ vi ~/.zshrc ... # kubectl autocompletion source \u0026lt;(kubectl completion zsh) ... zsh ì‹œì‘ ì‹œ kubectlì˜ ìë™ì™„ì„± ê¸°ëŠ¥ì„ ê¸°ë³¸ í™œì„±í™”í•œë‹¤.\n$ source ~/.zshrc ë³€ê²½í•œ ì„¤ì •ë‚´ìš©ì„ ë°”ë¡œ ì ìš©í•œë‹¤.\nì´ì œ kubectl ëª…ë ¹ì–´ ì…ë ¥ í›„ [tab] í‚¤ë¥¼ ëˆŒëŸ¬ë³¸ë‹¤.\n$ kubectl [tab] [tab] í‚¤ë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì´ kubectl ëª…ë ¹ì–´ ë‹¤ìŒì— ì˜¬ ìˆ˜ ìˆëŠ” í•˜ìœ„ ëª…ë ¹ì–´ ë¦¬ìŠ¤íŠ¸ê°€ ì¶œë ¥ëœë‹¤. ì´ ìƒíƒœì—ì„œ [tab] í‚¤ë¥¼ í•œ ë²ˆ ë” ëˆ„ë¥´ë©´ ëŒ€í™”í˜• ë©”ë‰´ì²˜ëŸ¼ ë°©í–¥í‚¤ì™€ ì—”í„°ë¡œ ì„ íƒ ê°€ëŠ¥í•˜ë‹¤.\n$ kubectl alpha -- Commands for features in alpha annotate -- ìì›ì— ëŒ€í•œ ì£¼ì„ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤ api-resources -- Print the supported API resources on the server api-versions -- Print the supported API versions on the server, in the form of \u0026#34;group/version\u0026#34; apply -- Apply a configuration to a resource by file name or stdin attach -- Attach to a running container ... ì°¸ê³ ì‚¬í•­ # ë‚´ ê²½ìš°ëŠ” kubecolorë‘ kubectl ìë™ì™„ì„±autocompleteì„ ë™ì‹œì— ì‚¬ìš©í•˜ë©´ ë²„ê·¸ê°€ ë°œìƒí–ˆë‹¤. ë”°ë¼ì„œ ë‘ ê¸°ëŠ¥ì„ ê°™ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.\ní˜„ì¬ ì´ ì´ìŠˆëŠ” 3ì›” 28ì¼ ê¸°ì¤€ìœ¼ë¡œ ì•„ì§ í•´ê²°ë˜ì§€ ì•Šì€ ìƒíƒœì´ë‹¤. í•´ë‹¹ ê¹ƒí—ˆë¸Œ ì´ìŠˆëŠ” autocompletion bug #78ì— ë“±ë¡ë˜ì–´ ìˆë‹¤.\në§ˆì¹˜ë©° # ìœ ìš©í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€ë¡œ ë°œê²¬í•  ë•Œë§ˆë‹¤ ê¸€ì„ ì—…ë°ì´íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nì´ ì™¸ì— ê³µìœ í•˜ê³  ì‹¶ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í”ŒëŸ¬ê·¸ì¸ì´ ìˆë‹¤ë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”.\n","date":"Mar 21, 2022","permalink":"/blog/k8s/setup-k8s-tools/","section":"Blogs","summary":"ê°œìš” # ë©€í‹° í´ëŸ¬ìŠ¤í„° ê¸°ë°˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ê´€ë¦¬í•  ë•Œ ìƒì‚°ì„±Productivityì„ ë†’ì—¬ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•˜ëŠ” ë¬¸ì„œì´ë‹¤.","title":"í•„ìˆ˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ê´€ë¦¬ íˆ´"},{"content":"ê°œìš” # ì¿ ë²„ë„¤í‹°ìŠ¤ ì›Œì»¤ ë…¸ë“œê°€ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì´ ë†’ì„ ë•Œ, docker system prune ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ Docker ì˜¤ë¸Œì íŠ¸ë¥¼ ì •ë¦¬í•˜ì—¬ íŒŒì¼ì‹œìŠ¤í…œ ê³µê°„ì„ í™•ë³´í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : Amazon Linux 2 Shell : bash ID : ec2-user í•´ê²°ë°©ë²• # $ id uid=1000(ec2-user) gid=1000(ec2-user) groups=1000(ec2-user),4(adm),10(wheel),190(systemd-journal),1950(docker) EC2 Instanceì— ec2-userë¡œ ë¡œê·¸ì¸í•œë‹¤.\níŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì„ í™•ì¸í•œë‹¤.\n$ df -h Filesystem Size Used Avail Use% Mounted on devtmpfs 7.7G 0 7.7G 0% /dev tmpfs 7.7G 0 7.7G 0% /dev/shm tmpfs 7.7G 1.4M 7.7G 1% /run tmpfs 7.7G 0 7.7G 0% /sys/fs/cgroup /dev/nvme0n1p1 100G 81G 20G 81% / tmpfs 1.6G 0 1.6G 0% /run/user/0 100GB EBSElastic Block Storageê°€ ë¶™ì–´ìˆëŠ” ë…¸ë“œì´ë‹¤.\nroot íŒŒì¼ì‹œìŠ¤í…œ(/)ì˜ ì‚¬ìš©ë¥ ì´ 81%ë¡œ ë†’ë‹¤.\në„ì»¤ì—ì„œ ì‚¬ìš©ì¤‘ì¸ íŒŒì¼ ì‹œìŠ¤í…œ í˜„í™©ì„ í™•ì¸í•œë‹¤.\nì •ë¦¬í•˜ì—¬ í™•ë³´í•  ìˆ˜ ìˆëŠ” ìš©ëŸ‰(RECLAIMABLE)ì´ ì´ë¯¸ì§€ë§Œ 59.56GBì´ë‹¤.\n$ docker system df TYPE TOTAL ACTIVE SIZE RECLAIMABLE Images 107 20 67.56GB 59.56GB (88%) Containers 46 21 2.952GB 2.763GB (93%) Local Volumes 16 10 4.433MB 230.9kB (5%) Build Cache 0 0 0B 0B ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“  Docker objectë“¤ì„ ì •ë¦¬í•œë‹¤.\n$ docker system prune -af ëª…ë ¹ì–´ ì˜µì…˜ ì„¤ëª…\n-a : Dangling ì´ë¯¸ì§€ ë§ê³ ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë“¤ì„ ëª¨ë‘ ì‚­ì œ\n-f : ì‹¤í–‰í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ì—¬ë¶€ë¥¼ ë¬»ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰í•œë‹¤.\n$ docker system prune -af Deleted Containers: b2da4de9da8e92a0000068846aec0000e7f4b82df4dde011408cac40499a4769 a1d989685169fb1eb0000000ab00000f041c77e0cbea0155e5da24a494bb86f4 ... Total reclaimed space: 63.92GB ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Docker ì˜¤ë¸Œì íŠ¸ ì¼ê´„ ì‚­ì œí•œ ê²°ê³¼, 63.92GB ê³µê°„ì„ í™•ë³´í–ˆë‹¤.\nì •ë¦¬ í›„ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì„ ë‹¤ì‹œ í™•ì¸í•´ë³´ë‹ˆ, 81% â†’ 11% ë¡œ í¬ê²Œ ë–¨ì–´ì¡Œë‹¤.\n$ df -h Filesystem Size Used Avail Use% Mounted on devtmpfs 7.7G 0 7.7G 0% /dev tmpfs 7.7G 0 7.7G 0% /dev/shm tmpfs 7.7G 1.4M 7.7G 1% /run tmpfs 7.7G 0 7.7G 0% /sys/fs/cgroup /dev/nvme0n1p1 100G 11G 90G 11% / tmpfs 1.6G 0 1.6G 0% /run/user/0 $ docker system df TYPE TOTAL ACTIVE SIZE RECLAIMABLE Images 16 16 6.589GB 590.3MB (8%) Containers 30 21 273.7MB 2B (0%) Local Volumes 19 7 4.435MB 622.6kB (14%) Build Cache 0 0 0B 0B ê²°ë¡  # ì„œë²„ì˜ ì£¼ê¸°ì ì¸ íŒŒì¼ì‹œìŠ¤í…œ ì •ë¦¬ëŠ” ì¸í”„ë¼ ê´€ë¦¬ì˜ í•µì‹¬ ì—…ë¬´ ì¤‘ í•˜ë‚˜ì´ë‹ˆ ì˜ ì•Œì•„ë‘ê³  ì‹¤ë¬´ì— ì¨ë¨¹ì.\níŒŒì¼ì‹œìŠ¤í…œ ì •ë¦¬ì™€ ê°™ì€ ì—…ë¬´ëŠ” ë°˜ë³µì ì´ê³  ë‹¨ìˆœí•˜ê¸° ë•Œë¬¸ì— ìë™í™”í•˜ê¸° ì¢‹ì€ ì‚¬ë¡€ì´ë‹¤. OSì—ì„œ cron ì„¤ì •ì„ ê±¸ê±°ë‚˜, AWS ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ ì´ì œ ìë™í™”ë¥¼ ê³ ë¯¼í•´ë³´ì.\në§Œì•½ OS ì˜ì—­ì—ì„œ cronì„ í™œìš©í•´ ìë™í™”ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´, ì´ ê¸€ì„ ì°¸ê³ í•˜ë©´ ì¢‹ë‹¤.\nì°¸ê³ ìë£Œ # Dockerì˜ prune ì‚¬ìš©ë²•: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Docker ì˜¤ë¸Œì íŠ¸ ì¼ê´„ ì‚­ì œ\n","date":"Mar 16, 2022","permalink":"/blog/cleaning-docker-filesystem/","section":"Blogs","summary":"ê°œìš” # ì¿ ë²„ë„¤í‹°ìŠ¤ ì›Œì»¤ ë…¸ë“œê°€ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì´ ë†’ì„ ë•Œ, docker system prune ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ Docker ì˜¤ë¸Œì íŠ¸ë¥¼ ì •ë¦¬í•˜ì—¬ íŒŒì¼ì‹œìŠ¤í…œ ê³µê°„ì„ í™•ë³´í•  ìˆ˜ ìˆë‹¤.","title":"ë„ì»¤ íŒŒì¼ì‹œìŠ¤í…œ ì •ë¦¬"},{"content":"ê°œìš” # í…Œë¼í¼ì„ í†µí•´ ì¸í”„ë¼ ìë™í™”, ì½”ë“œë¡œì„œ ì¸í”„ë¼IaC, Infrastructure as Codeë¥¼ ë§›ë³´ê¸°ë¡œ ì²´í—˜í•´ë³´ê² ìŠµë‹ˆë‹¤.\ní…Œë¼í¼ íŒŒì¼ì„ ì ìš©í•´ì„œ 1ëŒ€ì˜ EC2 Instanceë¥¼ ìë™ ìƒì„±í•˜ê³  ì‚­ì œí•´ë³´ê² ìŠµë‹ˆë‹¤.\në°°ê²½ì§€ì‹ # í…Œë¼í¼Terraform\ní•˜ì‹œì½”í”„Hashicorpì—ì„œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê°œë°œì¤‘ì¸ í´ë¼ìš°ë“œ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ìë™í™”ë¥¼ ì§€í–¥í•˜ëŠ” ì½”ë“œë¡œì„œì˜ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜Infrastructure as Code, IaC ë„êµ¬ì…ë‹ˆë‹¤.\nIaCëŠ” ì½”ë“œë¡œ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ë¥¼ ê´€ë¦¬í•œë‹¤ëŠ” ê°œë…ìœ¼ë¡œ í…Œë¼í¼ì—ì„œëŠ” í•˜ì‹œì½”í”„ ì„¤ì • ì–¸ì–´HCL, Hashicorp Configuration Languageì„ ì‚¬ìš©í•´ í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.\nì „ì œì¡°ê±´ # macOSìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewê°€ ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\nHomebrew ì„¤ì¹˜ë°©ë²•\ní™˜ê²½ # Hardware : MacBook Pro 13\u0026quot;, M1, 2020 OS : macOS Monterey 12.2.1 Shell : zsh Terraform : v1.1.6 Homebrew : 3.3.16 ë°©ë²• # 1. í…Œë¼í¼ ì„¤ì¹˜ # macOS íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ brewë¥¼ ì´ìš©í•´ terraformì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n$ brew install terraform ==\u0026gt; Auto-updated Homebrew! Updated 1 tap (homebrew/core). ==\u0026gt; Updated Formulae Updated 2 formulae. ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/terraform/manifests/1.1.6 Already downloaded: /Users/ive/Library/Caches/Homebrew/downloads/27878bff7eadcac8864a00be6ce343a4540476ed6fc8d7dfc576944971ebdf51--terraform-1.1.6.bottle_manifest.json ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/terraform/blobs/sha256:f6 Already downloaded: /Users/ive/Library/Caches/Homebrew/downloads/097e36e15ba08ef7554c666a971b9989a99e6a9ac84bcaf96b51ad43bed62804--terraform--1.1.6.arm64_monterey.bottle.tar.gz ==\u0026gt; Pouring terraform--1.1.6.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/terraform/1.1.6: 6 files, 69.5MB ==\u0026gt; Running `brew cleanup terraform`... Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP. Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`). terraform ëª…ë ¹ì–´ ë™ì‘ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n$ terraform version Terraform v1.1.6 on darwin_arm64 arm64ìš© Terraform v1.1.6ì´ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.\n2. IAM User ìƒì„± # AWS Management Consoleì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.\nIAMìœ¼ë¡œ ë“¤ì–´ê°€ì„œ í…Œë¼í¼ ì „ìš© IAM Userë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\nUserì— Policyë¡œ AdministratorAccessë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.\nTerraformì„ ì´ìš©í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë ¤ë©´ Access Keyì™€ Secrey Keyê°€ í•„ìš”í•˜ë¯€ë¡œ, 2ê°œì˜ í‚¤ ê°’ì„ ë°˜ë“œì‹œ ë©”ëª¨í•´ë‘¡ë‹ˆë‹¤.\n3. í…Œë¼í¼ íŒŒì¼ ì‘ì„± # terraform ì½”ë“œë¥¼ 2ê°œ ì‘ì„±í•©ë‹ˆë‹¤.\ní…Œë¼í¼ íŒŒì¼ì˜ í™•ì¥ìëŠ” .tf ì…ë‹ˆë‹¤.\nterraform-study â”œâ”€â”€ instance.tf â””â”€â”€ version.tf instance.tf : ì„œìš¸ ë¦¬ì „ap-northeast-2ì— 1ê°œì˜ EC2 Instanceë¥¼ ìƒì„±í•˜ëŠ” íŒŒì¼. instance.tfì—ëŠ” Providerì˜ ë¦¬ì „ ì •ë³´, Access Key, Secret Keyê°€ ì„ ì–¸ë©ë‹ˆë‹¤. version.tf : í…Œë¼í¼ ë²„ì „ì˜ ì œí•œì„ ê±°ëŠ” íŒŒì¼ì…ë‹ˆë‹¤. instance.tf # $ cat instance.tf provider \u0026#34;aws\u0026#34; { access_key = \u0026#34;ACCESS_KEY_HERE\u0026#34; secret_key = \u0026#34;SECRET_KEY_HERE\u0026#34; region = \u0026#34;ap-northeast-2\u0026#34; } resource \u0026#34;aws_instance\u0026#34; \u0026#34;example\u0026#34; { ami = \u0026#34;ami-0dd97ebb907cf9366\u0026#34; instance_type = \u0026#34;t2.micro\u0026#34; } IAM ìœ ì €ë¥¼ ìƒˆë¡œ ë§Œë“¤ë©´ì„œ ë°œê¸‰ëœ access_key, secret_key ê°’ì„ ë„£ì–´ì¤ë‹ˆë‹¤.\nì£¼ì˜ì‚¬í•­\naccess_keyì™€ secret_key ê°’ì€ AWS ê³„ì •, íŒ¨ìŠ¤ì›Œë“œì™€ ë™ì¼í•œ ì—­í• ì„ í•˜ê¸° ë•Œë¬¸ì— ì ˆëŒ€ ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í„°ë¦¬ì— ì˜¬ë ¤ì„œë„ ì•ˆë˜ê³ , ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ê³µìœ í•´ì„œë„ ì•ˆë©ë‹ˆë‹¤.\në§Œì•½ ë‹¤ë¥¸ ì‚¬ëŒì´ í•´ë‹¹ í‚¤ ê°’ë“¤ì„ íšë“í•˜ë©´ AWSì˜ ëª¨ë“  ê¶Œí•œì„ íƒˆì·¨í•´ì„œ ì „ì²´ ë¦¬ì „ì— ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•˜ëŠ” ì‚¬ê³ ê°€ ë°œìƒí•´ì„œ ëª‡ë§Œ ë‹¬ëŸ¬ë¼ëŠ” ê±°ì•¡ì„ ì²­êµ¬ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. êµ¬ê¸€ë§ì„ í•´ë³´ë©´ ì•Œê² ì§€ë§Œ ì´ëŸ° ì‚¬ê³ ê°€ ìƒê°ë³´ë‹¤ ë§ì´ ë°œìƒí•©ë‹ˆë‹¤.\naccess_keyì™€ secret_key í‚¤ ê°’ì€ ë³¸ì¸ë§Œ ê°–ê³  ìˆì–´ì•¼ í•œë‹¤ëŠ” ì ì„ ê¼­ ëª…ì‹¬í•˜ì„¸ìš”!\nìœ„ ì½”ë“œì—ì„œ amiëŠ” AMIAmazon Machine Imageì˜ IDë¥¼ ì˜ë¯¸í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤.\nUbuntu OSê°€ ì„¤ì¹˜ëœ AMIAmazon Machine Image IDëŠ” Amazon EC2 AMI Locator ì‚¬ì´íŠ¸ì—ì„œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nversion.tf # version.tf íŒŒì¼ì€ í…Œë¼í¼ ë²„ì „ 0.12 ì´ìƒì—ì„œë§Œ í•´ë‹¹ í…Œë¼í¼ ì½”ë“œê°€ ì‹¤í–‰ë˜ë„ë¡ ì œí•œí•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.\ní…Œë¼í¼ ë²„ì „ê³¼ í”„ë¡œë°”ì´ë” ë²„ì „ì— ë”°ë¼ì„œ í…Œë¼í¼ ì½”ë“œ ì‹¤í–‰ê²°ê³¼ê°€ ë‹¤ë¥¼ ìˆ˜ê°€ ìˆì–´ì„œ ì¼ê´€ëœ ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ ë²„ì „ ì œí•œì„ ê±¸ì—ˆìŠµë‹ˆë‹¤.\n$ cat versions.tf terraform { required_version = \u0026#34;\u0026gt;= 0.12\u0026#34; } 4. í…Œë¼í¼ ì´ˆê¸°í™” # $ terraform init terraform init ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ í´ë¼ìš°ë“œ ì œê³µì í”ŒëŸ¬ê·¸ì¸Provier pluginì„ íƒìƒ‰í•œ í›„ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n$ terraform init Initializing the backend... Initializing provider plugins... - Finding latest version of hashicorp/aws... - Installing hashicorp/aws v4.2.0... - Installed hashicorp/aws v4.2.0 (signed by HashiCorp) Terraform has created a lock file .terraform.lock.hcl to record the provider selections it made above. Include this file in your version control repository so that Terraform can guarantee to make the same selections by default when you run \u0026#34;terraform init\u0026#34; in the future. Terraform has been successfully initialized! You may now begin working with Terraform. Try running \u0026#34;terraform plan\u0026#34; to see any changes that are required for your infrastructure. All Terraform commands should now work. If you ever set or change modules or backend configuration for Terraform, rerun this command to reinitialize your working directory. If you forget, other terraform ì´ˆê¸°í™”ê°€ ì‹œì‘ë˜ë©´ì„œ ìë™ìœ¼ë¡œ ìµœì‹  ë²„ì „ì˜ AWS í”ŒëŸ¬ê·¸ì¸ v4.2.0ì´ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.\n... - Installing hashicorp/aws v4.2.0... - Installed hashicorp/aws v4.2.0 (signed by HashiCorp) ... 5. í…Œë¼í¼ ì ìš© # ë¯¸ë¦¬ ìƒì„±ë  ë¦¬ì†ŒìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\nì‘ì„±í•œ ì½”ë“œì— ë¬¸ì œê°€ ìˆìœ¼ë©´ terraform planì´ ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n$ terraform plan ë³€ê²½ë  ë‚´ìš©ì„ ë¯¸ë¦¬ í™•ì¸í•œ í›„ì—ëŠ” ì‹¤ì œ ì ìš©í•©ë‹ˆë‹¤.\n$ terraform apply $ terraform apply Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols: + create Terraform will perform the following actions: # aws_instance.example will be created + resource \u0026#34;aws_instance\u0026#34; \u0026#34;example\u0026#34; { + ami = \u0026#34;ami-0dd97ebb907cf9366\u0026#34; + arn = (known after apply) + associate_public_ip_address = (known after apply) + availability_zone = (known after apply) + cpu_core_count = (known after apply) + cpu_threads_per_core = (known after apply) + disable_api_termination = (known after apply) + ebs_optimized = (known after apply) + get_password_data = false + host_id = (known after apply) + id = (known after apply) + instance_initiated_shutdown_behavior = (known after apply) + instance_state = (known after apply) + instance_type = \u0026#34;t2.micro\u0026#34; + ipv6_address_count = (known after apply) + ipv6_addresses = (known after apply) + key_name = (known after apply) + monitoring = (known after apply) + outpost_arn = (known after apply) + password_data = (known after apply) + placement_group = (known after apply) + placement_partition_number = (known after apply) + primary_network_interface_id = (known after apply) + private_dns = (known after apply) + private_ip = (known after apply) + public_dns = (known after apply) + public_ip = (known after apply) + secondary_private_ips = (known after apply) + security_groups = (known after apply) + source_dest_check = true + subnet_id = (known after apply) + tags_all = (known after apply) + tenancy = (known after apply) + user_data = (known after apply) + user_data_base64 = (known after apply) + vpc_security_group_ids = (known after apply) + capacity_reservation_specification { + capacity_reservation_preference = (known after apply) + capacity_reservation_target { + capacity_reservation_id = (known after apply) } } + ebs_block_device { + delete_on_termination = (known after apply) + device_name = (known after apply) + encrypted = (known after apply) + iops = (known after apply) + kms_key_id = (known after apply) + snapshot_id = (known after apply) + tags = (known after apply) + throughput = (known after apply) + volume_id = (known after apply) + volume_size = (known after apply) + volume_type = (known after apply) } + enclave_options { + enabled = (known after apply) } + ephemeral_block_device { + device_name = (known after apply) + no_device = (known after apply) + virtual_name = (known after apply) } + metadata_options { + http_endpoint = (known after apply) + http_put_response_hop_limit = (known after apply) + http_tokens = (known after apply) + instance_metadata_tags = (known after apply) } + network_interface { + delete_on_termination = (known after apply) + device_index = (known after apply) + network_interface_id = (known after apply) } + root_block_device { + delete_on_termination = (known after apply) + device_name = (known after apply) + encrypted = (known after apply) + iops = (known after apply) + kms_key_id = (known after apply) + tags = (known after apply) + throughput = (known after apply) + volume_id = (known after apply) + volume_size = (known after apply) + volume_type = (known after apply) } } Plan: 1 to add, 0 to change, 0 to destroy. Do you want to perform these actions? Terraform will perform the actions described above. Only \u0026#39;yes\u0026#39; will be accepted to approve. Enter a value: ì—„ì²­ë‚œ ì–‘ì˜ ìƒì„±ê³„íš(Plan) ì •ë³´ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.\nì—¬ê¸°ì„œ (known after apply)ëŠ” ë§ê·¸ëŒ€ë¡œ ì‹¤ì œ ì ìš© í›„ì— í™•ì¸ ê°€ëŠ¥í•œ ê°’ì„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\nê·¸ë˜ì„œ ì‹¤ë¬´ì—ì„œëŠ” planì—ì„œ ì´ìƒì´ ë°œê²¬ë˜ì§€ ì•Šì•„ë„ apply í›„ì—ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì¼ì´ ê°„í˜¹ ìˆìŠµë‹ˆë‹¤.\nì‹¤í–‰ ì—¬ë¶€ë¥¼ ë¬»ëŠ” ì§ˆë¬¸ì— yes ë¥¼ ì…ë ¥í•˜ê³  [Enter]ë¥¼ ì¹©ë‹ˆë‹¤.\nEnter a value: yes aws_instance.example: Creating... aws_instance.example: Still creating... [10s elapsed] aws_instance.example: Still creating... [20s elapsed] aws_instance.example: Creation complete after 21s [id=i-082bf1d8b3de239c8] Apply complete! Resources: 1 added, 0 changed, 0 destroyed. ë§ˆì§€ë§‰ ë¼ì¸ì— 1ê°œì˜ ë¦¬ì†ŒìŠ¤ê°€ ì •ìƒ ìƒì„±ë˜ì—ˆë‹¤(1 added)ê³  ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.\nAWS Management Consoleì—ì„œë„ EC2 Instance 1ëŒ€ê°€ ìƒˆë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì„œìš¸ ë¦¬ì „ì— EC2 Instance 1ëŒ€ê°€ ìƒì„±ëœ í›„ ì •ìƒ ë™ì‘ì¤‘(Running)ì…ë‹ˆë‹¤.\n6. ì‚­ì œ # EC2 Instanceë¥¼ ê³„ì† ì¼œë†“ìœ¼ë©´ ë¹„ìš©ì´ ë°œìƒí•©ë‹ˆë‹¤.\nì´ì œ Terraformìœ¼ë¡œ ìƒì„±í•œ EC2 Instanceë¥¼ ë‹¤ì‹œ ì‚­ì œí•´ë³´ê² ìŠµë‹ˆë‹¤.\n$ terraform destroy $ terraform destroy aws_instance.example: Refreshing state... [id=i-082bf1d8b3de239c8] Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols: - destroy Terraform will perform the following actions: # aws_instance.example will be destroyed - resource \u0026#34;aws_instance\u0026#34; \u0026#34;example\u0026#34; { - ami = \u0026#34;ami-0dd97ebb907cf9366\u0026#34; -\u0026gt; null - arn = \u0026#34;arn:aws:ec2:ap-northeast-2:111111111111:instance/i-082bf1d8b3de239c8\u0026#34; -\u0026gt; null - associate_public_ip_address = true -\u0026gt; null - availability_zone = \u0026#34;ap-northeast-2a\u0026#34; -\u0026gt; null - cpu_core_count = 1 -\u0026gt; null - cpu_threads_per_core = 1 -\u0026gt; null - disable_api_termination = false -\u0026gt; null - ebs_optimized = false -\u0026gt; null - get_password_data = false -\u0026gt; null - hibernation = false -\u0026gt; null - id = \u0026#34;i-082bf1d8b3de239c8\u0026#34; -\u0026gt; null - instance_initiated_shutdown_behavior = \u0026#34;stop\u0026#34; -\u0026gt; null - instance_state = \u0026#34;running\u0026#34; -\u0026gt; null - instance_type = \u0026#34;t2.micro\u0026#34; -\u0026gt; null - ipv6_address_count = 0 -\u0026gt; null - ipv6_addresses = [] -\u0026gt; null - monitoring = false -\u0026gt; null - primary_network_interface_id = \u0026#34;eni-0ca186f601dfde6d4\u0026#34; -\u0026gt; null - private_dns = \u0026#34;ip-172-31-0-60.ap-northeast-2.compute.internal\u0026#34; -\u0026gt; null - private_ip = \u0026#34;172.31.0.60\u0026#34; -\u0026gt; null - public_dns = \u0026#34;ec2-3-35-219-159.ap-northeast-2.compute.amazonaws.com\u0026#34; -\u0026gt; null - public_ip = \u0026#34;3.35.219.159\u0026#34; -\u0026gt; null - secondary_private_ips = [] -\u0026gt; null - security_groups = [ - \u0026#34;default\u0026#34;, ] -\u0026gt; null - source_dest_check = true -\u0026gt; null - subnet_id = \u0026#34;subnet-8d7ec4e6\u0026#34; -\u0026gt; null - tags = {} -\u0026gt; null - tags_all = {} -\u0026gt; null - tenancy = \u0026#34;default\u0026#34; -\u0026gt; null - vpc_security_group_ids = [ - \u0026#34;sg-58799024\u0026#34;, ] -\u0026gt; null - capacity_reservation_specification { - capacity_reservation_preference = \u0026#34;open\u0026#34; -\u0026gt; null } - credit_specification { - cpu_credits = \u0026#34;standard\u0026#34; -\u0026gt; null } - enclave_options { - enabled = false -\u0026gt; null } - metadata_options { - http_endpoint = \u0026#34;enabled\u0026#34; -\u0026gt; null - http_put_response_hop_limit = 1 -\u0026gt; null - http_tokens = \u0026#34;optional\u0026#34; -\u0026gt; null - instance_metadata_tags = \u0026#34;disabled\u0026#34; -\u0026gt; null } - root_block_device { - delete_on_termination = true -\u0026gt; null - device_name = \u0026#34;/dev/sda1\u0026#34; -\u0026gt; null - encrypted = false -\u0026gt; null - iops = 100 -\u0026gt; null - tags = {} -\u0026gt; null - throughput = 0 -\u0026gt; null - volume_id = \u0026#34;vol-01302622a80fb4b39\u0026#34; -\u0026gt; null - volume_size = 8 -\u0026gt; null - volume_type = \u0026#34;gp2\u0026#34; -\u0026gt; null } } Plan: 0 to add, 0 to change, 1 to destroy. Do you really want to destroy all resources? Terraform will destroy all your managed infrastructure, as shown above. There is no undo. Only \u0026#39;yes\u0026#39; will be accepted to confirm. Enter a value: ì‚­ì œë¥¼ ì‹¤í–‰í•˜ë©´ ëŒ€ëŸ‰ì˜ ìƒíƒœ ì •ë³´ê°€ ë°”ë€” ê²ƒì„ ë¯¸ë¦¬ ì•Œë ¤ì£¼ë©´ì„œ, ì •ë§ë¡œ ì‹¤í–‰í•  ê²ƒì¸ì§€ ë¬»ìŠµë‹ˆë‹¤.\nyes ì…ë ¥ í›„ [Enter] í‚¤ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.\nEC2 Instance 1ëŒ€ë¥¼ ì œê±°í•˜ëŠ” ë° ì•½ 40ì´ˆ ê±¸ë ¸ìŠµë‹ˆë‹¤.\nEC2 Instanceë¥¼ ë§Œë“¤ë©´ì„œ ì¶”ê°€ì ìœ¼ë¡œ ìƒì„±ëœ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ë“¤ì´ ë§ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. (EBS, Security Group, ENI ë“±)\nEnter a value: yes aws_instance.example: Destroying... [id=i-082bf1d8b3de239c8] aws_instance.example: Still destroying... [id=i-082bf1d8b3de239c8, 10s elapsed] aws_instance.example: Still destroying... [id=i-082bf1d8b3de239c8, 20s elapsed] aws_instance.example: Still destroying... [id=i-082bf1d8b3de239c8, 30s elapsed] aws_instance.example: Destruction complete after 40s Destroy complete! Resources: 1 destroyed. ë§ˆì§€ë§‰ ì¤„ì— 1ê°œì˜ ë¦¬ì†ŒìŠ¤ê°€ ì •ìƒ ì‚­ì œë˜ì—ˆë‹¤ê³  ë‚˜ì˜µë‹ˆë‹¤. (1 destroyed.)\nAWS Management Consoleì—ì„œ í™•ì¸í•´ë´ë„ EC2 Instanceê°€ ì‚­ì œ(Terminated)ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê²°ë¡  # ì½”ë“œë¡œ ì¸í”„ë¼ë¥¼ ê´€ë¦¬í•˜ë©´ ì¼ê´€ì„± ìˆëŠ” ìƒíƒœë¥¼ ìœ ì§€í•˜ê³ , ì´ë ¥ ê´€ë¦¬ë„ í¸í•˜ë©°, ì¸í”„ë¼ ë°°í¬/ê´€ë¦¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní¸í•˜ê²Œ ì¼í•˜ê³  ì‹¶ì€ Cloud Engineerë¼ë©´ ì¸í”„ë¼ êµ¬ì¶• ìë™í™” íˆ´ì¸ Terraformì„ ê¼­ ë°°ì›Œë†“ë„ë¡ í•©ì‹œë‹¤.\n","date":"Feb 22, 2022","permalink":"/blog/terraform-demo/","section":"Blogs","summary":"ê°œìš” # í…Œë¼í¼ì„ í†µí•´ ì¸í”„ë¼ ìë™í™”, ì½”ë“œë¡œì„œ ì¸í”„ë¼IaC, Infrastructure as Codeë¥¼ ë§›ë³´ê¸°ë¡œ ì²´í—˜í•´ë³´ê² ìŠµë‹ˆë‹¤.","title":"í…Œë¼í¼ìœ¼ë¡œ EC2 Instance ìƒì„±í•˜ê¸° ë°ëª¨"},{"content":"ê°œìš” # EC2 Instanceì— CloudWatch Agentë¥¼ ì„¤ì¹˜í•˜ê³  ëª¨ë‹ˆí„°ë§, ë¡œê·¸ ìˆ˜ì§‘, System Managerì˜ parameter storeì— CloudAgent ì„¤ì •íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.\ní™˜ê²½ # EC2 Instance\nType : t2.micro OS : Amazon Linux release 2 (Karoo) Shell : bash ID : ec2-user ì „ì œì¡°ê±´ # EC2 Instanceê°€ ìƒì„±ëœ ìƒíƒœ ì„¤ì •ë°©ë²• # IAM ì„¤ì • # ìƒì„±í•œ EC2 Instanceì— CloudWatch Agentë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ IAM ê¶Œí•œì„ ë¶€ì—¬í•˜ì.\nEC2 Instanceì— ë¶™í Roleì„ ìƒˆë¡œ ë§Œë“ ë‹¤.\nRole ì´ë¦„ : AWSCloudWatchRoleForEC2 ëª¨ë‹ˆí„°ë§í•  ëŒ€ìƒ(EC2 Instance)ì— CloudWatch Agent ê´€ë ¨ ê¶Œí•œ 2ê°œê°€ ë¶€ì—¬ë˜ì–´ ìˆì–´ì•¼ ëª¨ë‹ˆí„°ë§ì´ ê°€ëŠ¥í•˜ë‹¤.\nRoleì— ì¶”ê°€ê°€ í•„ìš”í•œ Policy 2ê°œ (Parameter storeì— CloudWatch agent ì„¤ì •ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ IAM ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤)\nCloudWatchAgentServerPolicy CloudWatchAgentAdminPolicy : ssm:PutParameter Action ë•Œë¬¸ì— í•„ìš”í•˜ë‹¤. ì´ ëª¨ë“  êµ¬ì„±ì„ ëë‚´ê³  ê°€ì¥ ì¤‘ìš”í•œ ì‘ì—…ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ìš°ë¦¬ê°€ êµ¬ì„±í•œ IAM Roleì„ ë¶™ì´ëŠ”(ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ”) ê²ƒì´ë‹¤.\ní…ŒìŠ¤íŠ¸ìš© Apache(httpd) ì„¤ì¹˜ # EC2 Instanceì— SSHë¡œ ë¡œê·¸ì¸í•˜ì.\nCloudWatch Log ìˆ˜ì§‘ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ EC2 Instanceì— Apachehttpdë¥¼ ì„¤ì¹˜í•œë‹¤.\nLast login: Thu Jan 13 13:11:39 2022 from 117.111.22.231 __| __|_ ) _| ( / Amazon Linux 2 AMI ___|\\___|___| https://aws.amazon.com/amazon-linux-2/ [ec2-user@ip-xxx-xx-xx-xxx ~]$ $ sudo su $ id uid=0(root) gid=0(root) groups=0(root) ec2-userì—ì„œ root ê³„ì •ìœ¼ë¡œ ë³€ê²½í•œë‹¤.\nApache ì„¤ì¹˜ ì‘ì—… ê³¼ì •ì—ì„œëŠ” root ê¶Œí•œì„ ì–»ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤.\nhttpd íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤.\n$ yum install -y httpd ... Installed: httpd.x86_64 0:2.4.51-1.amzn2 Dependency Installed: apr.x86_64 0:1.7.0-9.amzn2 apr-util.x86_64 0:1.6.1-5.amzn2.0.2 apr-util-bdb.x86_64 0:1.6.1-5.amzn2.0.2 generic-logos-httpd.noarch 0:18.0.0-4.amzn2 httpd-filesystem.noarch 0:2.4.51-1.amzn2 httpd-tools.x86_64 0:2.4.51-1.amzn2 mailcap.noarch 0:2.1.41-2.amzn2 mod_http2.x86_64 0:1.15.19-1.amzn2.0.1 Complete! ì •ìƒì ìœ¼ë¡œ httpdë¥¼ ì„¤ì¹˜ ì™„ë£Œí–ˆë‹¤.\n$ yum list installed httpd Loaded plugins: extras_suggestions, langpacks, priorities, update-motd Installed Packages httpd.x86_64 2.4.51-1.amzn2 @amzn2-core httpd 2.4.51 ë²„ì „ì´ ì„¤ì¹˜ë˜ì—ˆë‹¤.\nê¸°ë³¸ ë©”ì¸í˜ì´ì§€ë¥¼ ìƒì„±í•˜ê³ , httpd ë°ëª¬ì„ ì‹œì‘í•˜ì.\n$ echo \u0026#34;Hello world from $(hostname -f)\u0026#34; \u0026gt; /var/www/html/index.html $ systemctl start httpd $ exit $ whoami ec2-user httpd êµ¬ì„± ì‘ì—…ì´ ëë‚œ í›„ì—ëŠ” exit ëª…ë ¹ì–´ë¡œ ec2-user ê³„ì •ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¨ë‹¤.\nAWSì—ì„œ ì œê³µí•˜ëŠ” CloudWatch Agentì˜ ì„¤ì¹˜íŒŒì¼ì„ ë°›ì•„ì˜¨ë‹¤.\n$ wget https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm --2022-01-13 13:22:09-- https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm Resolving s3.amazonaws.com (s3.amazonaws.com)... 52.216.104.13 Connecting to s3.amazonaws.com (s3.amazonaws.com)|52.216.104.13|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 46891760 (45M) [application/octet-stream] Saving to: â€˜amazon-cloudwatch-agent.rpmâ€™ 100%[======================================\u0026gt;] 46,891,760 3.79MB/s in 14s 2022-01-13 13:22:24 (3.23 MB/s) - â€˜amazon-cloudwatch-agent.rpmâ€™ saved [46891760/46891760] 45MB í¬ê¸°ì˜ CloudWatch íŒ¨í‚¤ì§€ íŒŒì¼ì´ ìƒì„±ë˜ì—ˆë‹¤.\n$ ls -lh total 45M -rw-rw-r-- 1 ec2-user ec2-user 45M Aug 5 01:07 amazon-cloudwatch-agent.rpm íŒ¨í‚¤ì§€ íŒŒì¼ì„ ì„¤ì¹˜í•œë‹¤.\n$ sudo rpm -U ./amazon-cloudwatch-agent.rpm create group cwagent, result: 0 create user cwagent, result: 0 Cloud Watch ì„¤ì¹˜ ë§ˆë²•ì‚¬ë¥¼ ì´ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ CloudWatch Agentë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.\n$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard ============================================================= = Welcome to the AWS CloudWatch Agent Configuration Manager = ============================================================= On which OS are you planning to use the agent? 1. linux 2. windows 3. darwin default choice: [1]: 1 ... ë³´í†µ ê¸°ë³¸ê°’ì¼ ê²½ìš°, Enter í‚¤ë¥¼ ì…ë ¥í•´ì„œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ê³„ì† ë„˜ì–´ê°„ë‹¤.\nì„¤ì • ë‹¨ê³„ë¥¼ ë„˜ê¸°ë‹¤ë³´ë©´ ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ìª½ ì„¤ì • ë‹¨ê³„ê°€ ë‚˜ì˜¨ë‹¤.\në¡œê·¸ ëª¨ë‹ˆí„°ë§ ì„¤ì • # CloudWatch Agentê°€ /var/log/httpd/access_log ì™€ /var/log/httpd/error_logë¥¼ ìˆ˜ì§‘í•˜ë„ë¡ ì„¤ì •í•œë‹¤.\naccess_log ìˆ˜ì§‘ ì„¤ì •\naccess_logì˜ ì ˆëŒ€ê²½ë¡œëŠ” /var/log/httpd/access_log ì´ë‹¤.\në¡œê·¸ íŒŒì¼ì˜ ì ˆëŒ€ê²½ë¡œLog file pathë¥¼ ì…ë ¥í•  ë•Œ ì˜¤íƒ€ì— ì£¼ì˜í•œë‹¤.\n... Do you want to monitor any log files? 1. yes 2. no default choice: [1]: 1 Log file path: /var/log/httpd/access_log Log group name: default choice: [access_log] Log stream name: default choice: [{instance_id}] error_log ìˆ˜ì§‘ ì„¤ì •\nerror_logì˜ ì ˆëŒ€ê²½ë¡œëŠ” /var/log/httpd/error_log ì´ë‹¤.\n... Do you want to specify any additional log files to monitor? 1. yes 2. no default choice: [1]: 1 Log file path: /var/log/httpd/error_log Log group name: default choice: [error_log] Log stream name: default choice: [{instance_id}] Do you want to specify any additional log files to monitor? 1. yes 2. no default choice: [1]: 2 Saved config file to /opt/aws/amazon-cloudwatch-agent/bin/config.json successfully. ë§ˆì§€ë§‰ì—ëŠ” CloudWatch Agentì˜ ì„¤ì •íŒŒì¼ ê²½ë¡œë¥¼ ì•Œë ¤ì¤€ë‹¤.\nPlease check the above content of the config. The config file is also located at /opt/aws/amazon-cloudwatch-agent/bin/config.json. Edit it manually if needed. CloudAgent ì„¤ì •íŒŒì¼ì˜ ê²½ë¡œì¸ /opt/aws/amazon-cloudwatch-agent/bin/config.json ë¥¼ í™•ì¸í•œë‹¤.\nì‹¤ì œë¡œ í•´ë‹¹ ê²½ë¡œì˜ CloudWatch Agent ì„¤ì •íŒŒì¼ì„ í™•ì¸í•´ë³´ì.\n$ cat /opt/aws/amazon-cloudwatch-agent/bin/config.json { \u0026#34;agent\u0026#34;: { \u0026#34;metrics_collection_interval\u0026#34;: 60, \u0026#34;run_as_user\u0026#34;: \u0026#34;root\u0026#34; }, \u0026#34;logs\u0026#34;: { \u0026#34;logs_collected\u0026#34;: { \u0026#34;files\u0026#34;: { \u0026#34;collect_list\u0026#34;: [ { \u0026#34;file_path\u0026#34;: \u0026#34;/var/log/httpd/access_log\u0026#34;, \u0026#34;log_group_name\u0026#34;: \u0026#34;access_log\u0026#34;, \u0026#34;log_stream_name\u0026#34;: \u0026#34;{instance_id}\u0026#34; }, { \u0026#34;file_path\u0026#34;: \u0026#34;/var/log/httpd/error_log\u0026#34;, \u0026#34;log_group_name\u0026#34;: \u0026#34;error_log\u0026#34;, \u0026#34;log_stream_name\u0026#34;: \u0026#34;{instance_id}\u0026#34; } ] } } }, \u0026#34;metrics\u0026#34;: { \u0026#34;append_dimensions\u0026#34;: { \u0026#34;AutoScalingGroupName\u0026#34;: \u0026#34;${aws:AutoScalingGroupName}\u0026#34;, \u0026#34;ImageId\u0026#34;: \u0026#34;${aws:ImageId}\u0026#34;, \u0026#34;InstanceId\u0026#34;: \u0026#34;${aws:InstanceId}\u0026#34;, \u0026#34;InstanceType\u0026#34;: \u0026#34;${aws:InstanceType}\u0026#34; }, \u0026#34;metrics_collected\u0026#34;: { \u0026#34;collectd\u0026#34;: { \u0026#34;metrics_aggregation_interval\u0026#34;: 60 }, \u0026#34;disk\u0026#34;: { \u0026#34;measurement\u0026#34;: [ \u0026#34;used_percent\u0026#34; ], \u0026#34;metrics_collection_interval\u0026#34;: 60, \u0026#34;resources\u0026#34;: [ \u0026#34;*\u0026#34; ] }, \u0026#34;mem\u0026#34;: { \u0026#34;measurement\u0026#34;: [ \u0026#34;mem_used_percent\u0026#34; ], \u0026#34;metrics_collection_interval\u0026#34;: 60 }, \u0026#34;statsd\u0026#34;: { \u0026#34;metrics_aggregation_interval\u0026#34;: 60, \u0026#34;metrics_collection_interval\u0026#34;: 10, \u0026#34;service_address\u0026#34;: \u0026#34;:8125\u0026#34; } } } } CloudWatch Agentì˜ ì„¤ì¹˜ ëª©ì \ní•µì‹¬ ëª©ì ì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì— CloudWatch Agentë¥¼ ì„¤ì¹˜í•˜ë©´, ë” ë§ì€ ì§€í‘œë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤.\nCloudWatch ì›¹ì—ì„œëŠ” ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ì€ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ, CloudWatch Agentì—ì„œëŠ” ë©”ëª¨ë¦¬ë¥¼ ëª¨ë‹ˆí„°ë§í•´ì„œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ë³¼ ìˆ˜ ìˆë‹¤.\nCloudWatch Agent ì‹œì‘ # ssm:AmazonCloudWatch-linux ëŠ” Parameter Storeì˜ ê¸°ë³¸default ì´ë¦„ì´ë‹¤.\nssmì€ AWS System Managerë¥¼ ì˜ë¯¸í•œë‹¤.\nëª…ë ¹ì–´ ì„¤ëª…\n$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c ssm:AmazonCloudWatch-linux -s -a fetch-config : ì—ì´ì „íŠ¸ê°€ ìµœì‹  ë²„ì „ì˜ CloudWatch ì—ì´ì „íŠ¸ êµ¬ì„± íŒŒì¼ì„ ë¡œë“œí•œë‹¤.\n-c ssm:AmazonCloudWatch-linux : CloudAgent êµ¬ì„± íŒŒì¼ì€ AWS System Managerssmì˜ AmazonCloudWatch-linux ë¼ëŠ” ì´ë¦„ì˜ íŒŒë¼ë¯¸í„° ìŠ¤í† ì–´ì—ì„œ ê°€ì ¸ì˜¨ë‹¤.\n-s : ì—ì´ì „íŠ¸ ì„¤ì •ì´ ëë‚œ í›„ CloudWatch ì—ì´ì „íŠ¸ë¥¼ ì¬ì‹œì‘í•˜ëŠ” ì˜µì…˜\nëª…ë ¹ì–´ ì‹¤í–‰ê²°ê³¼\n$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c ssm:AmazonCloudWatch-linux -s ****** processing amazon-cloudwatch-agent ****** /opt/aws/amazon-cloudwatch-agent/bin/config-downloader --output-dir /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d --download-source ssm:AmazonCloudWatch-linux --mode ec2 --config /opt/aws/amazon-cloudwatch-agent/etc/common-config.toml --multi-config default Region: ap-northeast-2 credsConfig: map[] Successfully fetched the config and saved in /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d/ssm_AmazonCloudWatch-linux.tmp Start configuration validation... /opt/aws/amazon-cloudwatch-agent/bin/config-translator --input /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json --input-dir /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d --output /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.toml --mode ec2 --config /opt/aws/amazon-cloudwatch-agent/etc/common-config.toml --multi-config default 2022/01/13 03:16:55 Reading json config file path: /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d/ssm_AmazonCloudWatch-linux.tmp ... Valid Json input schema. I! Detecting run_as_user... No csm configuration found. Configuration validation first phase succeeded /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent -schematest -config /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.toml Configuration validation second phase failed ======== Error Log ======== 2022-01-13T03:16:55Z E! [telegraf] Error running agent: Error parsing /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.toml, open /usr/share/collectd/types.db: no such file or directory ë§ˆì§€ë§‰ ë¼ì¸ì—ì„œ /usr/share/collectd/types.db: no such file or directory ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.\ntypes.db íŒŒì¼ì´ í•´ë‹¹ ê²½ë¡œì— ì •ë§ë¡œ ì—†ëŠ”ì§€ ì²´í¬í•´ë³´ì.\n$ ls -l /usr/share/collectd/types.db ls: cannot access /usr/share/collectd/types.db: No such file or directory í™•ì¸í•´ë³´ë‹ˆ í•´ë‹¹ ê²½ë¡œì— types.db íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì´ë‹¤.\nì§ì ‘ í•´ë‹¹ ê²½ë¡œì— types.db íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì.\n$ sudo mkdir -p /usr/share/collectd/ -p : ì¤‘ê°„ì— ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ í•´ë‹¹ ìƒìœ„ ë””ë ‰í† ë¦¬ë„ ê°™ì´ ìƒì„±í•˜ëŠ” ì˜µì…˜\n$ sudo touch /usr/share/collectd/types.db types.db íŒŒì¼ë„ ìƒì„±í•œë‹¤.\n$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c ssm:AmazonCloudWatch-linux -s ****** processing amazon-cloudwatch-agent ****** /opt/aws/amazon-cloudwatch-agent/bin/config-downloader --output-dir /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d --download-source ssm:AmazonCloudWatch-linux --mode ec2 --config /opt/aws/amazon-cloudwatch-agent/etc/common-config.toml --multi-config default Region: ap-northeast-2 credsConfig: map[] Successfully fetched the config and saved in /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d/ssm_AmazonCloudWatch-linux.tmp Start configuration validation... /opt/aws/amazon-cloudwatch-agent/bin/config-translator --input /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json --input-dir /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d --output /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.toml --mode ec2 --config /opt/aws/amazon-cloudwatch-agent/etc/common-config.toml --multi-config default 2022/01/13 03:19:19 Reading json config file path: /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.d/ssm_AmazonCloudWatch-linux.tmp ... Valid Json input schema. I! Detecting run_as_user... No csm configuration found. Configuration validation first phase succeeded /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent -schematest -config /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.toml Configuration validation second phase succeeded Configuration validation succeeded amazon-cloudwatch-agent has already been stopped Created symlink from /etc/systemd/system/multi-user.target.wants/amazon-cloudwatch-agent.service to /etc/systemd/system/amazon-cloudwatch-agent.service. Redirecting to /bin/systemctl restart amazon-cloudwatch-agent.service types.db íŒŒì¼ì„ ìƒì„±í•œ ë’¤ë¶€í„° ì •ìƒì ìœ¼ë¡œ CloudWatch Agentê°€ ì‹¤í–‰ëœë‹¤.\n$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a status -m ec2 { \u0026#34;status\u0026#34;: \u0026#34;running\u0026#34;, \u0026#34;starttime\u0026#34;: \u0026#34;2022-01-13T13:34:11+0000\u0026#34;, \u0026#34;configstatus\u0026#34;: \u0026#34;configured\u0026#34;, \u0026#34;cwoc_status\u0026#34;: \u0026#34;stopped\u0026#34;, \u0026#34;cwoc_starttime\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;cwoc_configstatus\u0026#34;: \u0026#34;not configured\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.247349.0b251399\u0026#34; } AWS CloudWatch Agentê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì¤‘(running)ì´ë©°, ì—ì´ì „íŠ¸ê°€ ì„¤ì •ëœ ìƒíƒœ(configured)ì´ë‹¤.\në¡œê·¸ ìˆ˜ì§‘ ê²°ê³¼ í™•ì¸ # ì´ì œ AWS Consoleë¡œ ì´ë™í•œ í›„ CloudWatch ì„œë¹„ìŠ¤ í™”ë©´ìœ¼ë¡œ ì ‘ì†í•œë‹¤.\nEC2 Instanceì˜ access_logì™€ error_logë¥¼ ìˆ˜ì§‘ëœ ê²Œ ë³´ì¸ë‹¤.\nOSìƒì˜ ë¡œê·¸ì™€ ë™ì¼í•œ ë‚´ìš©ìœ¼ë¡œ ë¡œê·¸ê°€ ì˜ ìˆ˜ì§‘ë˜ì—ˆë‹¤.\nê²°ë¡  # ì´ í¬ìŠ¤íŒ…ì€ CloudWatch Agentì˜ ìˆ˜ë™ ì„¤ì¹˜ë¥¼ ë‹¤ë£¬ë‹¤.\nìˆ˜ë™ ì„¤ì¹˜ëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ì˜ í•µì‹¬ ê°€ì¹˜ì¸ ìë™í™”Automationì™€ëŠ” ê±°ë¦¬ê°€ ë©€ë‹¤.\në§Œì•½ CloudWatch Agentë¥¼ ì„¤ì¹˜í•´ì•¼í•  EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ 200ëŒ€ë¼ë©´, 200ëŒ€ ê°ì ë“¤ì–´ê°€ì„œ CloudWatch Agentë¥¼ ì„¤ì¹˜í•˜ëŠ”ê±´ ë¹„íš¨ìœ¨ì ì´ê³ (ì‚¬ëŒì„ ê°ˆì•„ë„£ìœ¼ë©´ ë­ë“  ê°€ëŠ¥í•˜ê² ì§€ë§Œ) ì¸ì  ì‹¤ìˆ˜Human faultë¥¼ ìœ ë°œí•  í™•ë¥ ì´ ë†’ë‹¤.\nì¡°ë§Œê°„ ë‚˜ë„ ìë™ì„¤ì¹˜ ê´€ë ¨í•´ì„œ ì§ì ‘ ê¸€ì„ ì“¸ ì˜ˆì •ì´ë‹¤.\nCloudWatch Agent ìë™ ì„¤ì¹˜ ë°©ë²•ì´ ê¶ê¸ˆí•˜ë‹¤ë©´ OpsNow Techblogì˜ CloudWatch ì—ì´ì „íŠ¸ë¥¼ ì†ì‰½ê²Œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²• â€“ OpsNow Tech Blog í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ë©´ ì¢‹ë‹¤. ì„¤ëª…ì„ ì˜í•´ë†“ì€ ì¢‹ì€ ê¸€ì´ë‹¤.\n","date":"Jan 13, 2022","permalink":"/blog/installing-unified-cloud-watch-agent/","section":"Blogs","summary":"ê°œìš” # EC2 Instanceì— CloudWatch Agentë¥¼ ì„¤ì¹˜í•˜ê³  ëª¨ë‹ˆí„°ë§, ë¡œê·¸ ìˆ˜ì§‘, System Managerì˜ parameter storeì— CloudAgent ì„¤ì •íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.","title":"CloudWatch Agent ì„¤ì¹˜ ë° êµ¬ì„±"},{"content":" # ì¦ìƒ # Jenkins íŒŒì´í”„ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì§œê³  íŒŒì´í”„ë¼ì¸ì„ ìƒˆë¡œ ë§Œë“¤ì—ˆë‹¤.\n// Testing jenkins slave node node(label: \u0026#39;builder\u0026#39;) { stage(\u0026#39;Preparation\u0026#39;) { git branch: \u0026#39;main\u0026#39;, url: \u0026#39;\u0026lt;https://github.com/seyslee/nodejs-with-docker-toyproj.git\u0026gt;\u0026#39; } stage(\u0026#39;Build\u0026#39;) { def myTestContainer = docker.image(\u0026#39;node:4.6\u0026#39;) myTestContainer.pull() myTestContainer.inside() { sh \u0026#39;npm install\u0026#39; } } } Pipeline script ì„¤ëª… (í…ŒìŠ¤íŠ¸ìš©ì˜ ì—„ì²­ ë‹¨ìˆœí•œ ì½”ë“œë‹¤) Git ì›ë³¸\nbuilder ë¼ë²¨ì´ ë¶™ì€ Jenkins ë…¸ë“œì—ì„œë§Œ ì‹¤í–‰í•œë‹¤. ì°¸ê³ ë¡œ ì´ ì½”ë“œëŠ” Jenkins slaveì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ì½”ë“œë‹¤. [Preparation ë‹¨ê³„] ë‚´ Docker ë°ëª¨ ë ˆí¬ì§€í„°ë¦¬ì˜ main branchë¥¼ Pull í•œë‹¤. [Build ë‹¨ê³„] docker ì´ë¯¸ì§€ node:4.6ë¥¼ ë¹Œë“œí•œë‹¤. [Build ë‹¨ê³„] docker ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ npm install ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. Jenkins ì›¹í˜ì´ì§€ì—ì„œ ë§Œë“  íŒŒì´í”„ë¼ì¸ì„ ë¹Œë“œë¥¼ ëŒë ¤ë³´ë‹ˆ dockerë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¨ê³„Stageì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ì¶œë ¥ëœë‹¤.\ndial unix /var/run/docker.sock: connect: permission denied\nìì„¸í•œ Stages Logs\n+ docker pull node:4.6 Warning: failed to get default registry endpoint from daemon (Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.26/info: dial unix /var/run/docker.sock: connect: permission denied). Using system default: \u0026lt;https://index.docker.io/v1/\u0026gt; Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post http://%2Fvar%2Frun%2Fdocker.sock/v1.26/images/create?fromImage=node\u0026amp;tag=4.6: dial unix /var/run/docker.sock: connect: permission denied Jenkins ì—ëŸ¬ ë©”ì„¸ì§€ í™”ë©´\ndocker ì—ëŸ¬ë¡œ ì¸í•´ ë‚´ê°€ ë§Œë“  Pipelineì„ ì œëŒ€ë¡œ ë¹Œë“œí•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ë‹¤.\ní™˜ê²½ # í˜¸ìŠ¤íŠ¸ í™˜ê²½ì •ë³´\nOS : Ubuntu 20.04.3 LTS Shell : bash ID : root Docker : Docker version 20.10.12, build e91ed57 Jenkins Server : Jenkins 2.319.1 (ë„ì»¤ ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ ë°°í¬ë¨) í˜¸ìŠ¤íŠ¸ì˜ Docker êµ¬ì„±\n$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 170a33da3a09 wardviaene/jenkins-slave \u0026#34;/entrypoint.sh\u0026#34; 2 hours ago Up 2 hours 0.0.0.0:2222-\u0026gt;22/tcp, :::2222-\u0026gt;22/tcp suspicious_goldstine í˜„ì¬ ë‚´ ê²½ìš°ëŠ” jenkinsë¥¼ docker ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ ë„ì›Œì„œ ì‚¬ìš©ì¤‘ì´ë‹¤.\n$ docker run -p 2222:22 -v /var/jenkins_home:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock --restart always -d wardviaene/jenkins-slave í˜¸ìŠ¤íŠ¸ ì„œë²„ì˜ /var/run/docker.sock íŒŒì¼ì„ ì»¨í…Œì´ë„ˆì— ê³µìœ í•´ì„œ ì‚¬ìš© ì¤‘ì´ë‹¤.\n$ ls -lh /var/run/docker.sock srw-rw---- 1 root systemd-coredump 0 Jan 11 10:35 /var/run/docker.sock í˜¸ìŠ¤íŠ¸ ì„œë²„ì—ì„œ í™•ì¸í•œ /var/run/docker.sock íŒŒì¼. í˜„ì¬ ë‚´ êµ¬ì„±ì€ ì´ docker.sock íŒŒì¼ì„ ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆì™€ ê³µìœ í•˜ë„ë¡ ë³¼ë¥¨ ë§¤í•‘ë˜ì–´ ìˆë‹¤.\nì›ì¸ # jenkins ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•˜ëŠ” docker.sockÂ íŒŒì¼ì˜ ê¶Œí•œ ì„¤ì • ë¬¸ì œ\ní•´ê²°ë°©ë²• # ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ /var/run/docker.sock íŒŒì¼ì— ì•Œë§ì€ ê·¸ë£¹ ê¶Œí•œ dockerì„ ë¶€ì—¬í•œë‹¤.\nìƒì„¸ í•´ê²°ë°©ë²• # í˜¸ìŠ¤íŠ¸ ì„œë²„ # Jenkins ì»¨í…Œì´ë„ˆê°€ êµ¬ë™ë˜ê³  ìˆëŠ” í˜¸ìŠ¤íŠ¸ ì„œë²„ì— ì ‘ì†í•œë‹¤.\n$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 170a33da3a09 wardviaene/jenkins-slave \u0026#34;/entrypoint.sh\u0026#34; 2 hours ago Up 2 hours 0.0.0.0:2222-\u0026gt;22/tcp, :::2222-\u0026gt;22/tcp suspicious_goldstine í˜„ì¬ êµ¬ì„±ì€ í˜¸ìŠ¤íŠ¸ ì„œë²„ ìœ„ì—ì„œ jenkinsê°€ ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ ìš´ì˜ì¤‘ì¸ êµ¬ì„±ì´ë‹¤.\njenkins ì»¨í…Œì´ë„ˆì— bash ì‰˜ë¡œ ì ‘ì†í•œë‹¤.\n$ docker exec -it 170a33da3a09 bash Jenkins ì»¨í…Œì´ë„ˆ ë‚´ë¶€ # $ id uid=0(root) gid=0(root) groups=0(root) bash ëª…ë ¹ì–´ë¡œ Jenkins ì»¨í…Œì´ë„ˆì— root IDë¡œ ë“¤ì–´ì™”ë‹¤.\nì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ docker.sock íŒŒì¼ì˜ ì¡´ì¬ì—¬ë¶€ì™€ ê¶Œí•œì„ í™•ì¸í•œë‹¤.\n$ ls -al /var/run/ total 20 drwxr-xr-x 1 root root 4096 Jan 11 10:36 . drwxr-xr-x 1 root root 4096 Jan 11 10:36 .. srw-rw---- 1 root 998 0 Jan 11 10:35 docker.sock drwxrwxrwt 2 root root 4096 May 8 2017 lock drwxr-xr-x 2 root root 4096 Jun 9 2017 sshd -rw-r--r-- 1 root root 4 Jan 11 10:36 sshd.pid -rw-rw-r-- 1 root utmp 0 May 8 2017 utmp docker.sock íŒŒì¼ì˜ ê·¸ë£¹ ê¶Œí•œì´ ì´ë¦„ì´ ì—†ê³  GID 998ë§Œ ì í˜€ìˆë‹¤.\n$ cat /etc/group | grep 998 $ ## ê²°ê³¼ê°€ ì¶œë ¥ë˜ì§€ ì•ŠìŒ = 998ë²ˆ ê·¸ë£¹ì´ ì—†ë‹¤ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ GID 998ì— í•´ë‹¹í•˜ëŠ” Groupì´ ì—†ê¸° ë•Œë¬¸ì— ê·¸ë£¹ ì´ë¦„ì´ ì•„ë‹Œ 998ë¡œë§Œ í‘œì‹œë˜ëŠ” ê²ƒì´ë‹¤.\n$ cat /etc/group | grep docker dockerâŒ999:jenkins ì»¨í…Œì´ë„ˆì˜ ê¸°ì¤€ì—ì„œ jenkins ìœ ì €ê°€ ì†í•´ìˆëŠ” docker ê·¸ë£¹ì˜ GIDëŠ” 999ì´ë‹¤.\nì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ìœ„ì¹˜í•œ docker.sock íŒŒì¼ì˜ ê·¸ë£¹ ê¶Œí•œì´ ì´ìƒí•˜ê¸° ë•Œë¬¸ì— GID 999ë¥¼ ê°€ì§„ docker ê·¸ë£¹ì— ë‹¤ì‹œ ì—°ê²°í•´ì£¼ë„ë¡ í•˜ì.\n$ sudo chown root:docker /var/run/docker.sock bash: sudo: command not found sudo ëª…ë ¹ì–´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆë„ ìˆìœ¼ë‹ˆ ë‹¹í™©í•˜ì§€ ë§ì.\ndocker.sock íŒŒì¼ì˜ ì†Œìœ ì ê¶Œí•œì„ root, ì†Œìœ  ê·¸ë£¹ì„ dockerë¡œ ë³€ê²½í•œë‹¤.\n$ chown root:docker /var/run/docker.sock $ ls -lh /var/run/ total 12K srw-rw---- 1 root docker 0 Jan 11 10:35 docker.sock drwxrwxrwt 2 root root 4.0K May 8 2017 lock drwxr-xr-x 2 root root 4.0K Jun 9 2017 sshd -rw-r--r-- 1 root root 4 Jan 11 10:36 sshd.pid -rw-rw-r-- 1 root utmp 0 May 8 2017 utmp docker.sock íŒŒì¼ì˜ ê·¸ë£¹ ê¶Œí•œì´ dockerë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\në„ì»¤ ì†Œì¼“íŒŒì¼ì˜ ê¶Œí•œì— ëŒ€í•œ ì¡°ì¹˜ëŠ” ì™„ë£Œëë‹¤.\nJenkins ì›¹í˜ì´ì§€ë¡œ ëŒì•„ê°„ë‹¤.\n[Build Now] ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì²˜ìŒì— build ì‹¤íŒ¨í•œ Pipelineì„ ë‹¤ì‹œ ë¹Œë“œí•´ë³´ì.\nì»¨í…Œì´ë„ˆì˜ docker.sock íŒŒì¼ì˜ ì†Œìœ  ê·¸ë£¹ì„ docker ë¡œ ë§ì¶°ì¤€ í›„ë¶€í„° ë¹Œë“œê°€ ì˜ ì™„ë£Œëœë‹¤.\n..... [Pipeline] // stage [Pipeline] stage [Pipeline] { (Build) [Pipeline] isUnix [Pipeline] sh + docker pull node:4.6 4.6: Pulling from library/node Digest: sha256:a1cc6d576734c331643f9c4e0e7f572430e8baf9756dc24dab11d87b34bd202e Status: Image is up to date for node:4.6 [Pipeline] isUnix [Pipeline] sh ..... [Pipeline] } [Pipeline] // node [Pipeline] End of Pipeline Finished: SUCCESS Jenkins ë¹Œë“œ ë¡œê·¸ì—ì„œ ë³¼ ë•Œë„ ë¬¸ì œê°€ ë°œìƒí–ˆë˜ docker pull node:4.6 ë¶€ë¶„ì—ì„œë„ ì •ìƒì ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\nê²°ë¡  # ì´ ì´ìŠˆëŠ” ì¡°ì¹˜ëŠ” ê°„ë‹¨í•œë° ìƒê°ë³´ë‹¤ ê·€ì°®ê³  ë‹¹í™©ìŠ¤ëŸ½ë‹¤.\nPermission denied ì—ëŸ¬ë¥¼ ì²˜ìŒ ë§ˆì£¼í–ˆì„ ë•ŒëŠ” ë‚¯ì„¤ê³  ë¬´ì„œì› ì§€ë§Œ ì´ì œëŠ” ê°í¥ë„ ì—†ê³  ì¡°ì¹˜ê°€ ìµìˆ™í•˜ë‹¤.\n","date":"Jan 11, 2022","permalink":"/blog/var-run-docker-sock-permission-denied/","section":"Blogs","summary":"# ì¦ìƒ # Jenkins íŒŒì´í”„ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì§œê³  íŒŒì´í”„ë¼ì¸ì„ ìƒˆë¡œ ë§Œë“¤ì—ˆë‹¤.","title":"docker ê¶Œí•œ ë¬¸ì œ í•´ê²°: /var/run/docker.sock permission denied"},{"content":"ê°œìš” # DD4500 ë°±ì—…ì¥ì¹˜ì˜ í´íŠ¸ ë””ìŠ¤í¬ êµì²´ ì‘ì—… ì‹œ, ì¸ì ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê³  ì•ˆì „í•˜ê²Œ êµì²´í•˜ëŠ” ì •ì‹ ì ˆì°¨ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.\ní™˜ê²½ # Hardware : EMC DD4500\nì‘ì—…í˜•íƒœ : ë°ì´í„°ì„¼í„° í˜„ì¥ì˜ í•˜ë“œì›¨ì–´ ì‘ì—…ê³¼ CLI ì‘ì—…ì´ í˜¼í•©ëœ ì‹œë‚˜ë¦¬ì˜¤\nì „ì œì¡°ê±´ # í´íŠ¸ ë°œìƒ ë””ìŠ¤í¬ë¥¼ ì œê±°í•˜ê³  ì‹ ê·œë¡œ íˆ¬ì…í•  êµì²´ìš© ë””ìŠ¤í¬ íŒŒíŠ¸\nì‘ì—…ì ˆì°¨ # failed disk êµì²´ # 1. Login # ì‘ì—… ëŒ€ìƒì¸ Data Domain 4500ì— SSHë¡œ ë¡œê·¸ì¸í•œë‹¤.\nData Domain 2500, Data Domain 4500 ëª¨ë¸ ê¸°ì¤€ìœ¼ë¡œ SSH ê¸°ë³¸ í¬íŠ¸ëŠ” TCP 22ë²ˆì´ë‹¤. ì°¸ê³ ë¡œ Data Domainì˜ ê´€ë¦¬ìê°€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ SSH í¬íŠ¸ë¥¼ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤.\n2. Failed Disk í™•ì¸ # $ disk show state Enclosure Disk 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 --------- ---------------------------------------------- [...] 14 . . . f . . . . . . . . . . . f ëŠ” Failed Disks ë¥¼ ì˜ë¯¸í•œë‹¤. 14ë²ˆ Enclosureì˜ 4ë²ˆ ë””ìŠ¤í¬ê°€ ê³ ì¥ë‚œ ìƒí™©ì´ë‹¤.\n3. êµì²´ ëŒ€ìƒ ë””ìŠ¤í¬ LED í‘œì‹œ # ëª…ë ¹ì–´ í˜•ì‹\n$ disk beacon \u0026lt;enclosure-id\u0026gt;.\u0026lt;disk-id\u0026gt; ì •ìƒ ë””ìŠ¤í¬ë¥¼ ì˜ëª» ë¶„ë¦¬í•˜ëŠ” ì¸ì  ì‹¤ìˆ˜(Human Fault)ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ê³ ì¥ë‚œ Diskì˜ ì „ë©´ë¶€ LEDë¥¼ ê¹œë¹¡ê±°ë¦¬ë„ë¡ í‘œì‹œí•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤.\nì œì¡°ì‚¬ì¸ EMCê°€ ì‘ì„±í•œ ë¬¸ì„œì—ì„œë„ disk beacon ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œ ìƒíƒœì—ì„œ ë””ìŠ¤í¬ë¥¼ êµì²´í•˜ê¸°ë¥¼ ê¶Œì¥í•˜ê³  ìˆë‹¤.\nì‹¤ì œ ìˆ˜í–‰ ëª…ë ¹ì–´\n$ disk beacon 14.4 14ë²ˆ ì¸í´ë¡œì €ì˜ 4ë²ˆ ë””ìŠ¤í¬ì˜ LEDë¥¼ ì ë©¸(Blinking)ì‹œí‚¨ë‹¤.\nCtrl + Cë¥¼ ëˆ„ë¥´ë©´ LED ê¹œë¹¡ì„ì„ ë©ˆì¶œ ìˆ˜ ìˆë‹¤.\nì°¸ê³ ì‚¬í•­\níŠ¹ì • ë””ìŠ¤í¬ì˜ LEDê°€ ì¼œì§€ì§€ ì•Šì„ ê²½ìš°, enclosure beacon ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ëª¨ë“  ë””ìŠ¤í¬ì—ì„œ ìƒíƒœ í‘œì‹œë“±ì´ ê¹œë°•ì´ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n4. ë””ìŠ¤í¬ êµì²´ # Enclosure ì „ë©´ë¶€ ì•ìœ¼ë¡œ ì´ë™í•œë‹¤.\nê³ ì¥ë‚œ ë””ìŠ¤í¬ë¥¼ ì œê±°(eject)í•œ í›„ ì‹ ê·œ ë””ìŠ¤í¬ë¥¼ ì¥ì°©(insert)í•œë‹¤. ì•½ 5ë¶„ ì •ë„ ê¸°ë‹¤ë¦°ë‹¤.\nìƒˆë¡œ ì¥ì°©ëœ ë””ìŠ¤í¬ ìŠ¬ë¡¯ì´ failed ìƒíƒœì—ì„œ ì •ìƒ ìƒíƒœì¸ spare ë˜ëŠ” In-use ë¡œ ë³€í™”í•˜ëŠ” ë° ê¹Œì§€ ì•½ê°„ì˜ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.\në””ìŠ¤í¬ êµì²´ ì‹œ Data Domainì´ ë™ì‘í•˜ëŠ” ê³¼ì •\nExamine the newly inserted disk for any partitions that exist.\nIf there are no partitions on the disk, then a number of partitions will be created. In one partition, specifically partition 3, will we create a DataDomain superblock. This disk will then become a spare disk as indicated by the \u0026rsquo;s\u0026rsquo; state above.\nIf partition 3 exists, it is checked for the presence of a superblock. If a superblock exists and the superblock shows the information from another system, the disk will become a foreign or unknown.\nIf partition 3 exists but there is no superblock, the disk will become a \u0026lsquo;v\u0026rsquo; available disk.\n5. Disk ìƒíƒœ í™•ì¸ # $ disk show state Enclosure Disk 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 --------- ---------------------------------------------- [...] 14 . . . v . . . . . . . . . . . ë””ìŠ¤í¬ ìƒíƒœ í‘œì‹œ ì •ë³´\n. : In-use Disks. ì„œë¹„ìŠ¤ ì¤‘ì¸ ì •ìƒ ë””ìŠ¤í¬. v : Available Disks. ì‚¬ìš© ê°€ëŠ¥í•˜ë‚˜ íˆ¬ì…ë˜ì§€ ì•Šì€ ë””ìŠ¤í¬. f : Failed Disks. ê³ ì¥ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ìƒíƒœì˜ ë””ìŠ¤í¬ s(spare) ìƒíƒœë¡œ ë³€ê²½ë˜ì–´ì•¼ ì •ìƒì ìœ¼ë¡œ ì¸ì‹í•œ ê²ƒì´ë‹¤. êµì²´ í›„ Disk ìƒíƒœê°€ ì •ìƒ í‘œê¸°ë˜ì§€ ì•Šì„ ê²½ìš° # êµì²´í•œ ë””ìŠ¤í¬ì˜ ìƒíƒœê°€ . (In-use) ì´ê±°ë‚˜ s (Spare)ì¼ ê²½ìš° ì•„ë˜ ê³¼ì •ì€ ìˆ˜í–‰í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\n6. Disk ìƒíƒœ ë³€ê²½ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ # ëª…ë ¹ì–´ í˜•ì‹\nDisk ìƒíƒœë¥¼ Unknownì—ì„œ Online ìƒíƒœë¡œ ë³€ê²½í•´ì£¼ëŠ” ëª…ë ¹ì–´.\n$ disk unfail \u0026lt;enclosure-id\u0026gt;.\u0026lt;disk-id\u0026gt; ì‹¤ì œ ìˆ˜í–‰ ëª…ë ¹ì–´\n$ disk unfail 14.4 The \u0026#39;disk unfail\u0026#39; command will add the disk to the active stroage tier and mari it as a space. Any existing data on this disk will be lost. Are you sure? (yes|no|?) [no] yes ok, proceeding yes ë¥¼ ì…ë ¥í•´ì„œ Disk ìƒíƒœë¥¼ Unknownì—ì„œ Online ìƒíƒœë¡œ ë³€ê²½í•´ì¤€ë‹¤.\nok, proceeding ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ ìƒˆë¡œ ì¥ì°©í•œ ë””ìŠ¤í¬ê°€ í™œì„±í™” ìŠ¤í† ë¦¬ì§€ í‹°ì–´(active storage tier)ì— ì •ìƒì ìœ¼ë¡œ íˆ¬ì…ëœ ê²ƒì´ë‹¤.\n$ disk unfail 14.4 **** Disk 14.4 is already available. Disk x.x is already available. ë©”ì„¸ì§€ê°€ ì¶œë ¥ëœë‹¤ë©´ disk unfail ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¬ í•„ìš”ê°€ ì—†ë‹¤.\n7. Disk ìƒíƒœ ì¬í™•ì¸ # unfail ì¡°ì¹˜í•œ ë””ìŠ¤í¬ì˜ ìƒíƒœë¥¼ ìµœì¢… í™•ì¸í•œë‹¤.\n$ disk show state ì°¸ê³ ìë£Œ # Dell EMC Data Domain Hardware Features and Specifications Guide (6.2 ë²„ì „) - Dell EMC\në””ìŠ¤í¬ êµì²´ ì‹œ Data Domainì´ ë™ì‘í•˜ëŠ” ê³¼ì • - Dell Community\n","date":"Jan 8, 2022","permalink":"/blog/replacing-failed-disk-in-dd4500/","section":"Blogs","summary":"ê°œìš” # DD4500 ë°±ì—…ì¥ì¹˜ì˜ í´íŠ¸ ë””ìŠ¤í¬ êµì²´ ì‘ì—… ì‹œ, ì¸ì ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê³  ì•ˆì „í•˜ê²Œ êµì²´í•˜ëŠ” ì •ì‹ ì ˆì°¨ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.","title":"DD4500 ë””ìŠ¤í¬ êµì²´ì™€ spare disk ì„¤ì •"},{"content":"ê°œìš” # ë„·ì›Œì»¤ ë°±ì—…ì„œë²„ì—ì„œ nsports ëª…ë ¹ì–´ë¥¼ í†µí•´ EMC Networkerì˜ ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.\në°œë‹¨ # Networker ë°±ì—…ì„ ë°›ì„ ë•Œë§ˆë‹¤ \u0008ê°„í—ì ìœ¼ë¡œ auth failed ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë°œìƒí•˜ë©° ë°±ì—…ì— ì‹¤íŒ¨í•˜ëŠ” ì¦ìƒì´ ìˆì—ˆë‹¤.\nì´ ì´ìŠˆë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‚˜ëŠ” Networker ë°±ì—…ì„œë²„ë¥¼ ì ê²€í•˜ë˜ ì¤‘, Networker ì„œë¹„ìŠ¤ í¬íŠ¸ì˜ ì„¤ì •ê°’ì´ ì“°ë˜ ê°’ê³¼ ìƒì´í•˜ê²Œ ë‹¬ë¼ì¡ŒìŒì„ ë°œê²¬í–ˆë‹¤.\nì•¼ê°„ì— ê°™ì€ ì‹œê°„ëŒ€ì— ë™ì‹œ êµ¬ë™ë˜ëŠ” ë°±ì—…ì´ ë§ì„ ê²½ìš°, ë°±ì—… ì„œë²„ì˜ Service port ë²”ìœ„ë¥¼ ë‹¤ ì¨ë²„ë ¤ì„œ auth failedì™€ í•¨ê»˜ ì‹¤íŒ¨í•  ìˆ˜ë„ ìˆë‹¤.\në°±ì—…ì„ ì •ìƒí™”í•˜ê¸° ìœ„í•´ í•´ë‹¹ Networker ê´€ë¦¬ì„œë²„ì— ì ‘ì†í•œ í›„ networker service port ì„¤ì • ë²”ìœ„ë¥¼ ë³€ê²½í•´ë³´ì.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 6.x\nShell : Bash\në°±ì—… ì†”ë£¨ì…˜ : EMC Networker 9.1.1.1\nì‘ì—…ëŒ€ìƒ : Networker ë°±ì—… ê´€ë¦¬ì„œë²„\ní•´ê²°ë°©ë²• # Networker ë°±ì—…ì„œë²„ ì ‘ì† # $ hostname backup-server Networker ë°±ì—…ì„œë²„ëŠ” Netwokrer ì—ì´ì „íŠ¸ê°€ ì„¤ì¹˜ëœ ë°±ì—… ëŒ€ìƒ(Target)ì´ ì•„ë‹ˆë¼ Networkerê°€ ì„¤ì¹˜ëœ ì¤‘ì•™ ì„œë²„ë¥¼ ì˜ë¯¸í•œë‹¤.\nê¸°ì¡´ Networker ì„œë¹„ìŠ¤ í¬íŠ¸ì •ë³´ í™•ì¸ # $ nsrports Service ports: 7937-7999 Connection ports: 0-0 í˜„ì¬ ì„¤ì •ëœ Networkerìš© ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„ê°€ 7937-9999ì´ë‹¤.\nê¸°ë³¸ì ìœ¼ë¡œ Networker ì„œë¹„ìŠ¤ í¬íŠ¸ì˜ ê¸°ë³¸ê°’ì€ 7937-9936 ì´ì§€ë§Œ í˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ì˜ ì„œë²„ëŠ” ë„ˆë¬´ í¬íŠ¸ ë²”ìœ„ê°€ ì¢ë‹¤. ì •ìƒì ì¸ ë„“ì€ í¬íŠ¸ ë²”ìœ„ì¸ ê¸°ë³¸ê°’ 7937-9936 ìœ¼ë¡œ ë³€ê²½í•œë‹¤.\nì•„ë˜ ì‚¬ì§„ì€ nsrports ëª…ë ¹ì–´ì— ëŒ€í•œ ë©”ë‰´ì–¼(man) í˜ì´ì§€ì´ë‹¤.\nNetworker ì„œë¹„ìŠ¤ í¬íŠ¸ ë³€ê²½ # ëª…ë ¹ì–´ í˜•ì‹\n$ nsrports -s \u0026lt;ë°±ì—…ì„œë²„ì˜ Hostname\u0026gt; -S \u0026lt;ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„\u0026gt; ... \u0026lt;ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„\u0026gt; ì‹¤ì œ ëª…ë ¹ì–´\n$ nsrports -s networker-server -S 7937-9936 Networker ì„œë¹„ìŠ¤ í¬íŠ¸ í™•ì¸ # $ nsrports Service ports: 7937-9936 Connection ports: 0-0 Networkerê°€ ì‚¬ìš©í•  ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„ê°€ 7937-7999 ì—ì„œ 7937-9936 ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\nNetworker ì„œë¹„ìŠ¤ í¬íŠ¸ ë³€ê²½ ì‘ì—…ì€ ìƒê°ë³´ë‹¤ ê°„ë‹¨í•˜ë‹¤. ë! ê²°ë¡  # ì‚¬ì‹¤ ë°±ì—…ì€ í˜ë“¤ê³  ì§€ë£¨í•˜ê³  ì“¸ì“¸í•œ ì‘ì—…ì´ë‹¤. (ë¬¼ë¡  ë‚œ íŒŒíŠ¸ ë‚´ì—ì„œ ë°±ì—…ì´ ì¬ë°Œì–´ì„œ ë©”ì¸ìœ¼ë¡œ ë‹´ë‹¹í•˜ê³  ì œì¼ ì˜ ì•Œê³  ìˆì§€ë§Œ)\në°±ì—…ì€ ê°œë°œìì™€ ì„œë¹„ìŠ¤ ìì²´ì™€ ì „í˜€ ë™ë–¨ì–´ì§„ ì‘ì—…ì´ë©°, í‰ì†Œì—ëŠ” ë°±ì—… í•´ë†“ì€ í‹°ê°€ í•˜ë‚˜ë„ ë‚˜ì§ˆ ì•ŠëŠ”ë‹¤.\nê·¸ëŸ¬ë‚˜ ì‚¬ì‹¤ ì˜ˆê³ ì—†ì´ ì¥ì• ê°€ ë°œìƒí–ˆì„ ë•Œ ê·¸ ë¬´ì—‡ë³´ë‹¤ë„ ì¤‘ìš”í•œ ê²Œ ë°±ì—…ì´ ì•„ë‹ê¹Œ. ëª‡ ë…„ê°„ (ì˜ë¯¸ ì—†ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ”) ë°±ì—…ì„ ë°›ì•„ë†“ìœ¼ë©´ ë°˜ë“œì‹œ ì–¸ì  ê°€ëŠ” ì“¸ ì¼ì´ ìƒê¸°ê³¤ í•œë‹¤.\nê·¸ ìƒí™©ì—ì„œ ë°±ì—…ì„ ë°›ì§€ ì•Šì•˜ë‹¤ë©´ ë”ì°í•˜ê²Œ ë§ì€ ì‘ì—…ê³¼ ë…¸ë ¥ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤.\nì´ìŠˆ í•´ê²°ì€ ë‹¤ë°©ë©´ ë‹¤ê°ë„ë¡œ ë³´ì\níŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ í•  ë•Œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë§Œ ìƒê°í•˜ë©´ ì•ˆëœë‹¤. ì´ìŠˆë¥¼ ì²˜ë¦¬í•  ë•Œ ë‹¤ì–‘í•œ ì‹œê°ê³¼ ë‹¤ë¥¸ ë¶„ì•¼ì˜ ë‹´ë‹¹ìë“¤ê³¼ í˜‘ì—…í•´ì„œ ì²˜ë¦¬í•  í•„ìš”ê°€ ìˆë‹¤.\në°±ì—…ì˜ ê²½ìš°ë¥¼ ì˜ˆë¡œ ë“¤ë©´ ë°±ì—…ì´ ì•ˆë˜ëŠ” ì´ìœ ëŠ” ë„ˆë¬´ ë‹¤ì–‘í•˜ë‹¤.\në°©í™”ë²½ì´ë‚˜ IPS ë“±ì˜ ë³´ì•ˆ ì¥ë¹„ì—ì„œ íŠ¸ë˜í”½ ì°¨ë‹¨. ìµœê·¼ì— ë³´ì•ˆ ì •ì±…ì„ ì˜ëª» ì…ë ¥í•œ ë„¤íŠ¸ì›Œí¬ ë‹´ë‹¹ìì˜ ì¸ì  ì‹¤ìˆ˜. ì¤‘ì•™ ë°±ì—…ì„œë²„ ìì²´ì˜ ì„¤ì • ë¬¸ì œ. ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜ì˜ ì´ìŠˆ. ë°±ì—… ëŒ€ìƒ(í´ë¼ì´ì–¸íŠ¸)ì˜ ì—ì´ì „íŠ¸ê°€ ë‹¤ìš´ë˜ëŠ” ë“±ì˜ ì—ì´ì „íŠ¸ ë¬¸ì œ. í´ë¼ì´ì–¸íŠ¸ì˜ ì„¤ì •ì˜ ë¬¸ì œì¼ ìˆ˜ë„ ìˆë‹¤. ì‹¬ì§€ì–´ëŠ” (ìµœê·¼ì— ì§ì ‘ ê²½í—˜í•œ ì¼€ì´ìŠ¤ë‹¤) ë°±ì—… ëŒ€ìƒì˜ í˜¸ìŠ¤íŠ¸ë„¤ì„ì„ ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ì˜ëª» ì„¤ì •í•´ì„œ ë°±ì—… ì‹¤í–‰ì´ ì•ˆë˜ëŠ” ì¼ë„ ìˆì—ˆë‹¤.\në°±ì—… ì„œë²„ì™€ ëŒ€ìƒ í´ë¼ì´ì–¸íŠ¸ë§Œ ë“¤ì—¬ë‹¤ë´ì„œ í•´ê²° ì•ˆë˜ëŠ” ê²½ìš°ëŠ” ìƒê°ë³´ë‹¤ ë§ë‹¤. ë¹ ë¥¸ ë¬¸ì œí•´ê²°ì„ ìœ„í•´ì„œëŠ” ë‹¤ê°ë„ë¡œ ë‹¤ë°©ë©´ìœ¼ë¡œ ë´ì•¼ í•œë‹¤.\níŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì— ìˆì–´ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ì´ìŠˆì™€ ê´€ë ¨ëœ ì •ë³´ì™€ í”ì ë“¤ì„ ìˆ˜ì§‘í•´ì„œ ëˆì§ˆê¸°ê²Œ ì¶”ì í•˜ëŠ” ê±°ë¼ê³  ìƒê°í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ ë¡œê·¸ ì •ë³´ë¥¼ ì½ê³ , ì¦ìƒ, ê´€ë ¨ íŒ€ë“¤ì˜ ìµœê·¼ ì‘ì—… ì´ë ¥ ë“±ì˜ ì •ë³´ë¥¼ í•˜ë‚˜ ë‘˜ì”© ìˆ˜ì§‘í•´ì„œ ì°¾ì•„ê°€ë‹¤ë³´ë©´ ê²°êµ­ ì´ìŠˆëŠ” í•´ê²°í•˜ê²Œ ë˜ì–´ìˆëŠ” ê²ƒ ê°™ë‹¤.\nì–´ì©Œë‹¤ë³´ë‹ˆ ì”ì†Œë¦¬ê°€ ê¸¸ì–´ì¡Œë‹¤.\nì•„ë¬´íŠ¼ ì´ ê¸€ì„ ì½ê³  ê³„ì‹¤ ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ ë¶„ë“¤, ë‹¤ë“¤ í‹°ëŠ” ì•ˆë‚˜ì§€ë§Œ ì—´ì‹¬íˆ ë°±ì—…í•˜ì‹œê³  ì¥ì•  ì—†ëŠ” ì¸í”„ë¼ë¥¼ ê¸°ì›í•©ë‹ˆë‹¤. ì•ˆë…•!\n","date":"Jan 6, 2022","permalink":"/blog/changing-networker-service-ports/","section":"Blogs","summary":"ê°œìš” # ë„·ì›Œì»¤ ë°±ì—…ì„œë²„ì—ì„œ nsports ëª…ë ¹ì–´ë¥¼ í†µí•´ EMC Networkerì˜ ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.","title":"Networker ì„œë¹„ìŠ¤ í¬íŠ¸ ë²”ìœ„ ë³€ê²½"},{"content":"ê°œìš” # EMCì‚¬ì˜ VTL(Virtual Tape Library) ì¥ë¹„ì¸ DD2500ì—ì„œ ë””ìŠ¤í¬ ì—¬ìœ ê³µê°„ì´ ë¶€ì¡±í•  ë•Œ íŒŒì¼ì‹œìŠ¤í…œ ì •ë¦¬(Filesystem cleanining) ì¡°ì¹˜ë¥¼ í†µí•´ ìš©ëŸ‰ í™•ë³´í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.\nDD2500\nEMCì‚¬ì—ì„œ ë§Œë“  ë°±ì—… ë° ì¬í•´ ë³µêµ¬(DR, Disaster Recovery) ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì¤‘ë³µ ì œê±° ìŠ¤í† ë¦¬ì§€ ì œí’ˆì˜ ëª¨ë¸ëª…ì´ë‹¤.\ní™˜ê²½ # Model : Data Domain 2500\nDD OS : Data Domain OS 5.7.3.0-548132\nNetworker : Networker 9.1.1.1\në¬¸ì œì  # í‰í™”ë¡­ë˜ ì–´ëŠë‚ . í‰ì†Œì²˜ëŸ¼ Data Domainì— SSH ë¡œê·¸ì¸ì„ í–ˆë”ë‹ˆ \u0026ldquo;ì•ŒëŒì´ ë°œìƒí–ˆìœ¼ë‹ˆ í™•ì¸í•´ë³´ë¼\u0026quot;ëŠ” ë©”ì„¸ì§€ê°€ ì¶œë ¥ëë‹¤.\nLast login: Wed Jan 5 14:16:30 KST 2022 from xx.xxx.x.xx on pts/0 Welcome to Data Domain OS 5.7.3.0-548132 ---------------------------------------- ** ** NOTICE: There is 1 outstanding alert. Run \u0026#34;alerts show current\u0026#34; ** to display outstanding alert(s). ** $ system show version Data Domain OS 5.7.3.0-548132 NOTICE ì•ˆë‚´ë¬¸ì´ ì•Œë ¤ì¤€ëŒ€ë¡œ ì‰˜ì—ì„œ alerts show current ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\ní˜„ì¬ ë°œìƒí•œ ì•ŒëŒ ë³´ê¸°\n$ alert show current Id Post Time Severity Class Object Message ----- ------------------------ -------- ---------- ------------- --------------------------------------------------------------------------- p0-59 Wed Jan 5 13:02:58 2022 CRITICAL Filesystem FilesysType=2 EVT-SPACE-00004: Space usage in Data Collection has exceeded 90% threshold. ----- ------------------------ -------- ---------- ------------- --------------------------------------------------------------------------- There is 1 active alert. ë°ì´í„° ì €ì¥ê³µê°„ì˜ ìš©ëŸ‰ì´ 90% ì´ˆê³¼í•´ì„œ ë¶€ì¡±í•˜ë‹¤ëŠ” ê²½ë³´(Alert)ê°€ ë°œìƒí–ˆë‹¤.\nAlertì˜ ì‹¬ê°ë„ëŠ” Criticalì´ë¼ì„œ ê·¸ëƒ¥ ë¬´ì‹œí•˜ê¸°ì—ëŠ” ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.\ní•´ê²°ë°©ì•ˆ # 1. DD ìš©ëŸ‰ í™•ì¸ # $ df Active Tier: Resource Size GiB Used GiB Avail GiB Use% Cleanable GiB* ---------------- -------- -------- --------- ---- -------------- /data: pre-comp - 68789.7 - - - /data: post-comp 10436.7 9348.8 1087.9 90% 3576.0 /ddvar 49.2 7.2 39.5 15% - /ddvar/core 49.2 0.2 46.5 0% - ---------------- -------- -------- --------- ---- -------------- * Estimated based on last cleaning of 2022/01/04 11:06:35. Data Domainì˜ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì´ í˜„ì¬ 90%ì´ë‹¤.\n2. í…Œì´í”„ ë¼ë²¨ë§ # í…Œì´í”„ì— ë¼ë²¨ì„ ë¶€ì—¬í•˜ëŠ” ì‘ì—…ì€ í…Œì´í”„ì— ë‹´ê¸´ ë°ì´í„°ë¥¼ í•œë²ˆ ë°€ì–´ì„œ ì •ë¦¬í•˜ëŠ” ì‘ì—…ì´ë‹¤.\nModeê°€ recyclableì¸ í…Œì´í”„ì˜ ë¼ë²¨ì„ ë‹¤ë¥¸ ë¼ë²¨ì´ë‚˜ ì´ì „ê³¼ ë™ì¼í•œ ë¼ë²¨ë¡œ ì„¤ì •í•˜ë©´ í•´ë‹¹ í…Œì´í”„ë“¤ì´ ì´ˆê¸°í™”ë˜ë©´ì„œ ì¬í™œìš© ë¶„ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\nì´ ë°©ì‹ìœ¼ë¡œ Cleanble GiBë¥¼ í™•ë³´í•´ì•¼í•œë‹¤.\nNetworker í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ â†’ ë¡œê·¸ì¸ â†’ devices ë©”ë‰´ë¡œ ë“¤ì–´ê°„ë‹¤.\nModeê°€ recyclable ì¸ í…Œì´í”„ë“¤ì´ 20ê°œ ì´ìƒ ë³´ì¸ë‹¤. recyclableì€ í…Œì´í”„ì— ë‹´ê¸´ ë°ì´í„° ë³´ì¡´ê¸°ê°„ì´ ì§€ë‚˜ì„œ ì¬í™œìš© ê°€ëŠ¥í•œ í…Œì´í”„ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.\nrecyclable ëª¨ë“œì¸ í…Œì´í”„ì— ë¼ë²¨ë§ì„ ìƒˆë¡­ê²Œ í•œë‹¤.\nTape ì„ íƒ â†’ ìš°í´ë¦­ â†’ Label\u0026hellip;\në¼ë²¨ì„ ì„¤ì •í•  ë•ŒëŠ” ìƒˆë¡œìš´ ë¼ë²¨ë¡œ ì§€ì •í•˜ê±°ë‚˜ ë˜ëŠ” ê¸°ì¡´ê³¼ ê°™ì€ ë¼ë²¨ë¡œ ì§€ì •í•´ë„ ì „í˜€ ë¬´ê´€í•˜ë‹¤.\ní…Œì´í”„ì— ë¼ë²¨ì„ ì§€ì •í•œë‹¤ëŠ” ê²ƒì€ í•´ë‹¹ í…Œì´í”„ì— ìˆëŠ” ë°ì´í„°ë¥¼ ë°€ê³  ìƒˆë¡œìš´ í…Œì´í”„ì²˜ëŸ¼ ì¬í™œìš©í•´ì„œ ì“°ê² ë‹¤ëŠ” ì˜ë¯¸ì™€ ë™ì¼í•˜ë‹¤.\në¼ë²¨ ë©”ë‰´ì—ì„œ Target Media Pool â†’ ê¸°ì¡´ê³¼ ë™ì¼í•œ ë¼ë²¨ or ì›í•˜ëŠ” ë¼ë²¨ë¡œ ì§€ì • â†’ OK\nì´ì œ ì§€ì •ëœ í…Œì´í”„ë“¤ì— ë¼ë²¨ì´ ìƒˆë¡­ê²Œ ë¶™ê³  ë°ì´í„°ë¥¼ ë°€ì–´ë‚¼ ê²ƒì´ë‹¤.\nOKë¥¼ ëˆ„ë¥´ë©´ ìƒˆë¡œìš´ Label ì‘ì—…(operation: \u0026quot;Label\u0026quot;)ì´ ìƒì„±ë˜ê³  ì‘ì—…ì„ ì‹œì‘í•œë‹¤.\nì•½ 1ë¶„ ì •ë„ ê¸°ë‹¤ë¦¬ë©´ ì‘ì—…ì´ ì™„ë£Œ(succeeded)ëœë‹¤.\në‹¤ì‹œ Data Domainì˜ shellë¡œ ëŒì•„ì˜¨ë‹¤.\ní…Œì´í”„ì— ë¼ë²¨ì„ ë‹¤ì‹œ ë¶™ì´ëŠ” ì‘ì—…ì´ ëë‚¬ë‹¤ë©´ df ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ Cleanable GiB ê°’ì´ ëŠ˜ì–´ë‚œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n3. Filesystem Cleaning # Filesystem cleaning ìŠ¤ì¼€ì¤„ í™•ì¸\n$ filesys clean show config 50 Percent Throttle Filesystem cleaning is scheduled to run \u0026#34;Tue\u0026#34; at \u0026#34;0600\u0026#34;. ì´ ê¸€ì„ ì‘ì„±í•˜ëŠ” í˜„ì¬ ì‹œê°„ì€ ìˆ˜ìš”ì¼ì´ë‹¤.\në§¤ì£¼ í™”ìš”ì¼ ì˜¤ì „ 6ì‹œ(\u0026quot;Tue\u0026quot; at \u0026quot;0600\u0026quot;.)ë§ˆë‹¤ Filesystem cleaning ì‘ì—…ì´ ì‹œì‘ë˜ë„ë¡ ì„¤ì •ëœ ìƒíƒœì´ë‹¤.\nê²°ê³¼ì ìœ¼ë¡œ ë‹¤ìŒ Filesystem cleaning ì‘ì—…ì€ ë‹¤ìŒì£¼ í™”ìš”ì¼ ì˜¤ì „ 6ì‹œì— ì‹¤í–‰ë  ê²ƒì´ë‹¤.\nData Domainì˜ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì´ 90% ì´ˆê³¼í•˜ë©´ ìœ„í—˜í•˜ë‹¤.\në‹¤ìŒì£¼ í™”ìš”ì¼ê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ì—†ëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì— ìˆ˜ë™ìœ¼ë¡œ í´ë¦¬ë‹ ì‘ì—…ì„ ì‹¤í–‰í•˜ê³  ì—¬ìœ  ìš©ëŸ‰ì„ í™•ë³´í•˜ì.\nCleaning ì‘ì—… ìˆ˜ë™ ì‹œì‘\n$ filesys clean start Cleaning started. Use \u0026#39;filesys clean watch\u0026#39; to monitor progress. Filesystem cleaningì´ ì‹œì‘ëë‹¤.\n4. Cleaning ëª¨ë‹ˆí„°ë§ # filesys clean watch ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ Cleaning ì‘ì—… ìƒíƒœë¥¼ ì¤‘ê°„ì— ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆë‹¤.\n$ filesys clean watch Beginning \u0026#39;filesys clean\u0026#39; monitoring. Use Control-C to stop monitoring. Cleaning: phase 1 of 12 (pre-merge) 100.0% complete, 1088 GiB free; time: phase 0:01:03, total 0:01:04 filesys clean ëª¨ë‹ˆí„°ë§ ëª¨ë“œì—ì„œ ë¹ ì ¸ë‚˜ì˜¤ê³  ì‹¶ë‹¤ë©´ Ctrl + C í‚¤ë¥¼ ëˆ„ë¥´ë©´ ëœë‹¤.\n... Cleaning: phase 3 of 12 (pre-enumeration) 21.1% complete, 1088 GiB free; time: phase 0:57:01, total 1:03:05 Cleaningì€ ì´ 12ë‹¨ê³„ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. ì²« ë‹¨ê³„(phase 1)ëŠ” ì•½ 2ë¶„ ì•ˆì— ì™„ë£Œëœë‹¤.\nCleaning ë‹¨ê³„(phase)ê°€ ë†’ì•„ì§ˆ ìˆ˜ë¡ ì ì  ì¥ì‹œê°„ ì†Œìš”ëœë‹¤.\n$ filesys clean watch Beginning \u0026#39;filesys clean\u0026#39; monitoring. Use Control-C to stop monitoring. Cleaning: phase 4 of 12 (pre-filter) 65.4% complete, 1088 GiB free; time: phase 0:03:07, total 1:15:51 1ì‹œê°„ 15ë¶„ì´ ì§€ë‚˜ë„ ì „ì²´ 12ë‹¨ê³„ ì¤‘ 4ë‹¨ê³„ë¥¼ ì§„í–‰ì¤‘ì¸ ìƒí™©ì´ë‹¤.\nì°¸ì„ì„±ì„ ê°€ì§€ê³  ì‹œê°„ë‚  ë•Œë§ˆë‹¤ ê°€ë”ì”© Filesystem cleaningì˜ ì§„í–‰ì‚¬í•­ì„ ëª¨ë‹ˆí„°ë§í•œë‹¤.\nì´ì œ ê¸´ ì‹œê°„ì„ ê¸°ë‹¤ë ¤ë³¸ë‹¤.\n5. Cleaning ê²°ê³¼ í™•ì¸ # Filesystme cleaningì„ ì‹¤í–‰í•œ ì§€ ì•½ 3ì‹œê°„ì´ ì§€ë‚œ í›„ ë‹¤ì‹œ Data Domainì— ì ‘ì†í•œë‹¤.\n$ filesys clean watch **** Cleaning is not in progress. ì§„í–‰ì¤‘ì¸ Cleaning ì‘ì—…ì´ ì—†ë‹¤ê³  í•œë‹¤.\n$ filesys clean status Cleaning finished at 2022/01/05 17:49:06. Cleaningì´ ì™„ë£Œëœ ì‹œê°„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\ncleaningì´ ì™„ë£Œëœ í›„ df ëª…ë ¹ì–´ë¡œ ì‚¬ìš©ë¥ (Use%)ì´ ë‚®ì•„ì§€ê³  ì—¬ìœ ê³µê°„ì´ í™•ë³´ë˜ì—ˆëŠ”ì§€ ë‹¤ì‹œ í™•ì¸í•œë‹¤.\n$ df Active Tier: Resource Size GiB Used GiB Avail GiB Use% Cleanable GiB* ---------------- -------- -------- --------- ---- -------------- /data: pre-comp - 25769.9 - - - /data: post-comp 10436.7 8866.3 1570.4 85% 2213.3 /ddvar 49.2 7.1 39.6 15% - /ddvar/core 49.2 0.2 46.5 0% - ---------------- -------- -------- --------- ---- -------------- * Estimated based on last cleaning of 2022/01/05 17:49:06. /data: post-comp(ì¤‘ë³µì œê±° í›„ ìš©ëŸ‰)ì˜ ì‚¬ìš©ë¥ (Use%)ì´ 90%ì—ì„œ 85%ë¡œ 5% ê°ì†Œí–ˆë‹¤.\nì´ì œ ë!\n","date":"Jan 5, 2022","permalink":"/blog/resolving-space-utilization-issue-in-dd2500/","section":"Blogs","summary":"ê°œìš” # EMCì‚¬ì˜ VTL(Virtual Tape Library) ì¥ë¹„ì¸ DD2500ì—ì„œ ë””ìŠ¤í¬ ì—¬ìœ ê³µê°„ì´ ë¶€ì¡±í•  ë•Œ íŒŒì¼ì‹œìŠ¤í…œ ì •ë¦¬(Filesystem cleanining) ì¡°ì¹˜ë¥¼ í†µí•´ ìš©ëŸ‰ í™•ë³´í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","title":"DD2500 ìš©ëŸ‰ ë¶€ì¡±ì‹œ Filesystem cleaning"},{"content":"ê°œìš” # ë„ì»¤ì—ì„œ \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ ì´ë¯¸ì§€dangling imageë“¤ì´ ë§ì´ ìŒ“ì¸ ìƒí™©ì¼ ê²½ìš°, ëª…ë ¹ì–´ë¥¼ í†µí•´ í•œ ë²ˆì— dangling imageë¥¼ ì •ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\në°œë‹¨ # ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ë˜ ì¤‘ \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ ì“¸ëª¨ì—†ëŠ” ì´ë¯¸ì§€ë“¤ì´ ìŒ“ì—¬ë²„ë ¸ë‹¤.\n4ê°œì˜ ë„ì»¤ ì´ë¯¸ì§€ ì •ë¦¬ê°€ í•„ìš”í•˜ë‹¤.\n$ docker image ls REPOSITORY TAG IMAGE ID CREATED SIZE \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; a52cae4543de 10 minutes ago 522MB younsunglee/docker-nodejs-toyproject 746c681 5dee88486167 2 days ago 1GB younsunglee/docker-nodejs-toyproject \u0026lt;none\u0026gt; 3a8850aa21bf 3 days ago 1.01GB younsunglee/docker-nodejs-toyproject bd2f64b 4ece06c282a8 3 days ago 1GB younsunglee/docker-nodejs-toyproject 8d27e5f49 7e7bf7400489 3 days ago 1GB younsunglee/docker-nodejs-toyproject latest 7e7bf7400489 3 days ago 1GB younsunglee/docker-nodejs-toyproject \u0026lt;none\u0026gt; 7e989628d966 3 days ago 1GB jenkins-docker latest 141715b7bf00 3 days ago 522MB \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 0bd92a6415d2 3 days ago 522MB node latest a283f62cb84b 2 weeks ago 993MB mysql latest 3218b38490ce 2 weeks ago 516MB jenkins/jenkins lts 2a4bbe50c40b 4 weeks ago 441MB gradle jdk8-alpine 8017d8c2ba74 2 years ago 204MB node 4.6 e834398209c1 5 years ago 646MB í™˜ê²½ # Architecture : x86_64 OS : Ubuntu 20.04.3 LTS Shell : bash Docker : version 20.10.12, build e91ed57 TL;DR # ì‹œê°„ì´ ì—†ëŠ” ë¶„ë“¤ì„ ìœ„í•´ì„œ ì¡°ì¹˜ë°©ë²•ë§Œ ìš”ì•½í•œ ë‚´ìš©ì…ë‹ˆë‹¤.\nìì„¸í•œ í•´ê²°ë°©ë²•ì€ ì•„ë˜ í•´ê²°ë°©ë²•ì„ ì°¸ì¡°í•˜ì„¸ìš”.\n# ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ $ docker images # dangling ì´ë¯¸ì§€ ì‚­ì œ $ docker rmi $(docker images -f \u0026#34;dangling=true\u0026#34; -q) # ìœ„ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ ì•ˆë  ê²½ìš°ëŠ” ê°•ì œ ì‚­ì œ(-f, --force) ì‹œë„ $ docker rmi -f $(docker images -f \u0026#34;dangling=true\u0026#34; -q) # ì‚­ì œ ê²°ê³¼ í™•ì¸ $ docker images í•´ê²°ë°©ë²• # 1. ì´ë¯¸ì§€ í™•ì¸ # \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ ì“¸ëª¨ì—†ëŠ” ì´ë¯¸ì§€ë“¤ì„ ë¨¼ì € í™•ì¸í•œë‹¤.\n$ docker images REPOSITORY TAG IMAGE ID CREATED SIZE \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; a52cae4543de 16 minutes ago 522MB younsunglee/docker-nodejs-toyproject 746c681 5dee88486167 2 days ago 1GB younsunglee/docker-nodejs-toyproject \u0026lt;none\u0026gt; 3a8850aa21bf 3 days ago 1.01GB younsunglee/docker-nodejs-toyproject bd2f64b 4ece06c282a8 3 days ago 1GB younsunglee/docker-nodejs-toyproject 8d27e5f49 7e7bf7400489 3 days ago 1GB younsunglee/docker-nodejs-toyproject latest 7e7bf7400489 3 days ago 1GB younsunglee/docker-nodejs-toyproject \u0026lt;none\u0026gt; 7e989628d966 3 days ago 1GB jenkins-docker latest 141715b7bf00 3 days ago 522MB \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 0bd92a6415d2 3 days ago 522MB node latest a283f62cb84b 2 weeks ago 993MB mysql latest 3218b38490ce 2 weeks ago 516MB jenkins/jenkins lts 2a4bbe50c40b 4 weeks ago 441MB gradle jdk8-alpine 8017d8c2ba74 2 years ago 204MB node 4.6 e834398209c1 5 years ago 646MB ë‚˜ëŠ” ì‹¬í•œ í¸ì€ ì•„ë‹ˆì§€ë§Œ ì•½ 4ê°œì •ë„ì˜ \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ ì´ë¯¸ì§€ë“¤ì´ ìˆë‹¤.\nDockerì—ì„œëŠ” ì´ëŸ° ì´ë¯¸ì§€ë¥¼ ëŒ•ê¸€ë§ ì´ë¯¸ì§€(dangling image)ë¼ê³  ë¶€ë¥¸ë‹¤.\nDangling Image # ëŒ•ê¸€ë§ ì´ë¯¸ì§€ëŠ” ê°™ì€ ì´ë¦„ê³¼ íƒœê·¸ì˜ ìƒˆ ì´ë¯¸ì§€ë¡œ ë®ì–´ì“¸ ë•Œ ìƒì„±ëœë‹¤.\në™ì¼í•œ íƒœê·¸ë¥¼ ê°€ì§„ Docker ì´ë¯¸ì§€ê°€ ë¹Œë“œë  ê²½ìš°, ê¸°ì¡´ì— ìˆë˜ ì´ë¯¸ì§€ëŠ” ì‚­ì œë˜ì§€ëŠ” ì•Šê³  tagê°€ \u0026lt;none\u0026gt;ìœ¼ë¡œ ë³€ê²½ëœ ìƒíƒœë¡œ ë‚¨ì•„ ìˆëŠ”ë‹¤.\nëŒ•ê¸€ë§ ì´ë¯¸ì§€ëŠ” íƒœê·¸ê°€ ì§€ì •ëœ ì´ë¯¸ì§€ì™€ ê´€ë ¨ì´ ì—†ëŠ” ë¶ˆí•„ìš”í•œ ë ˆì´ì–´ì´ê¸° ë•Œë¬¸ì— ì •ë¦¬ê°€ í•„ìš”í•˜ë‹¤.\nëŒ•ê¸€ë§ ì´ë¯¸ì§€ëŠ” ë” ì´ìƒ ì´ë¯¸ì§€ ë¹Œë“œì— ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³  ë””ìŠ¤í¬ ê³µê°„ë§Œ ì°¨ì§€í•  ë¿ì´ë‹¤. ê´€ë¦¬ì  ì¸¡ë©´ì—ì„œë„ docker images ëª…ë ¹ì–´ë¡œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•˜ëŠ” ìƒí™©ì—ì„œ í—·ê°ˆë¦¬ê²Œ ë§Œë“ ë‹¤. ì´ëŸ° ì—¬ëŸ¬ê°€ì§€ ì´ìœ ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ëŒ•ê¸€ë§ ì´ë¯¸ì§€(dangling image)ë¥¼ ì •ë¦¬í•  í•„ìš”ê°€ ìˆë‹¤.\n2. ì‚­ì œ ì „ IMAGE ID í™•ì¸ # $ docker images -f \u0026#34;dangling=true\u0026#34; -q a52cae4543de 3a8850aa21bf 7e989628d966 0bd92a6415d2 \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ ë„ì»¤ ì´ë¯¸ì§€ì˜ Image IDë§Œ ì¶œë ¥ëœë‹¤.\nëª…ë ¹ì–´ ì˜µì…˜\n-f \u0026lt;Key=Value\u0026gt; : ì´ë¯¸ì§€ë¥¼ ì¡°íšŒí•  ë•Œ íŠ¹ì • ì¡°ê±´(filter)ì„ ê±¸ì–´ì„œ ì¡°ê±´ì— í•´ë‹¹ë˜ëŠ” ì´ë¯¸ì§€ë§Œ ì¶œë ¥í•œë‹¤.\n-q (--quiet) : ì´ë¯¸ì§€ IDë§Œ ì¶œë ¥í•œë‹¤.\n3. ì´ë¯¸ì§€ ì‚­ì œ # \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ danglingëœ ì´ë¯¸ì§€ë“¤ë§Œ í•„í„°ë§í•´ì„œ ì‚­ì œí•œë‹¤.\n$ docker rmi $(docker images -f \u0026#34;dangling=true\u0026#34; -q) Deleted: sha256:a52cae4543de475309ec97e30d7e1ec26b837bd6b1c34d8964e50f6d32be2742 Deleted: sha256:aad7d00427d8fdddfe06e6163e2a0696954bc9a0561f52e035b200b554f2e910 Deleted: sha256:f28088ff254ca63f5eb796dc7cb6cd34a51b9f6904f5b46ab36b84e817369c95 Deleted: sha256:2683a7c7d842eab9795d164c7a5271753eac60024d8a95bcb74c27a150c9438f Untagged: younsunglee/docker-nodejs-toyproject@sha256:52baff698058be6b7bd961857038e19ad019a03e95210ca053176bee6eb37f9e Deleted: sha256:3a8850aa21bfc17d9ddd3bb2a1cbbae7c752b69ed62ef15d9f6d5220f9ae7d02 Deleted: sha256:b69cba1495e82131fc54da34b136fa88f8d4066e8cb18354b25f2b3dd0ecf84d Deleted: sha256:69e70dbd2172741b5215a4ccc127d14a3c44d17ceba5d4d214f8cbe0b931c64f Deleted: sha256:1d850ae78effc483872e1f594733ef7858b09c9c98276d30c6350674527d48e9 Deleted: sha256:bad8a7081865b98d6d799161ca21c3e4328b235d30f3510d0ef78e586a63d836 Deleted: sha256:06e0c9e5ff491fd138f7762d1d1a2803e545aff3d22bfdcaace5d9a44d2542ed Deleted: sha256:0bd92a6415d2e368042811b8a1cb4b2481b5fab4fd5e82bd5e7af83d154e0eff Deleted: sha256:ac00a7709991e802542a5ef86251f01e1aced9369d6bbcc9dbcae9fa1f8f3a21 Deleted: sha256:254da0fd6eee155fdd01d19c02efde3ed476d495925c02ddd463147978d7df84 íŠ¹ì • ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ê°€ ì‚­ì œ ì•ˆë  ê²½ìš° # ì¦ìƒ\nì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì‚­ì œ ê³¼ì •ì—ì„œ image is being used by stopped container ... ì—ëŸ¬ ë©”ì„¸ì§€ì™€ í•¨ê»˜ íŠ¹ì • ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì§€ ì•ŠëŠ”ë‹¤.\n$ docker rmi $(docker images -f \u0026#34;dangling=true\u0026#34; -q) Deleted: sha256:a52cae4543de475309ec97e30d7e1ec26b837bd6b1c34d8964e50f6d32be2742 Deleted: sha256:aad7d00427d8fdddfe06e6163e2a0696954bc9a0561f52e035b200b554f2e910 Deleted: sha256:f28088ff254ca63f5eb796dc7cb6cd34a51b9f6904f5b46ab36b84e817369c95 Deleted: sha256:2683a7c7d842eab9795d164c7a5271753eac60024d8a95bcb74c27a150c9438f Untagged: younsunglee/docker-nodejs-toyproject@sha256:52baff698058be6b7bd961857038e19ad019a03e95210ca053176bee6eb37f9e Deleted: sha256:3a8850aa21bfc17d9ddd3bb2a1cbbae7c752b69ed62ef15d9f6d5220f9ae7d02 Deleted: sha256:b69cba1495e82131fc54da34b136fa88f8d4066e8cb18354b25f2b3dd0ecf84d Deleted: sha256:69e70dbd2172741b5215a4ccc127d14a3c44d17ceba5d4d214f8cbe0b931c64f Deleted: sha256:1d850ae78effc483872e1f594733ef7858b09c9c98276d30c6350674527d48e9 Deleted: sha256:bad8a7081865b98d6d799161ca21c3e4328b235d30f3510d0ef78e586a63d836 Deleted: sha256:06e0c9e5ff491fd138f7762d1d1a2803e545aff3d22bfdcaace5d9a44d2542ed Deleted: sha256:0bd92a6415d2e368042811b8a1cb4b2481b5fab4fd5e82bd5e7af83d154e0eff Deleted: sha256:ac00a7709991e802542a5ef86251f01e1aced9369d6bbcc9dbcae9fa1f8f3a21 Deleted: sha256:254da0fd6eee155fdd01d19c02efde3ed476d495925c02ddd463147978d7df84 Error response from daemon: conflict: unable to delete 7e989628d966 (cannot be forced) - image is being used by stopped container 234d5e511f5f ì›ì¸\ní•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì¤‘ì§€ëœ ìƒíƒœ(stopped container)ì˜ ì»¨í…Œì´ë„ˆê°€ ì°¸ì¡°í•˜ê³  ìˆì–´ì„œ ì‚­ì œê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\nì¡°ì¹˜ë°©ë²•\në„ì»¤ ì´ë¯¸ì§€ë¥¼ ì‚­ì œ ëª…ë ¹ì–´ì¸ docker rmië¥¼ ì‹¤í–‰í•  ë•Œ ê°•ì œ ì‚­ì œ-f, --force ì˜µì…˜ì„ ì£¼ë©´ ëœë‹¤.\n$ docker rmi -f $(docker images -f \u0026#34;dangling=true\u0026#34; -q) Untagged: younsunglee/docker-nodejs-toyproject@sha256:a7098ab967d86ee2b2d7431cc4be1c940b100cb964e86fb29fb6f964ba67d381 Deleted: sha256:7e989628d966c9c6c79477d85551cf72deac685286b3a598369e31465335b50e Deleted: sha256:172a4bf7f894bd7531cf11c24462aa3445667ec4ad80f5b7dec91b2326f70291 Deleted: sha256:8aaa4b338fc57490904b23497b579b4f760291a565d27f72d951c94b87c344fd Deleted: sha256:e00dfa43e425da0e1a3d3493b40cb6a298cf3ab82621531f4a87edb0542d4ece ì•„ê¹Œ ì‚­ì œ ì‹¤íŒ¨í–ˆë˜ ì´ë¯¸ì§€ê°€ -f ì˜µì…˜ì„ ì£¼ë‹ˆê¹Œ ì‚­ì œ ì²˜ë¦¬ëœë‹¤.\n4. ì´ë¯¸ì§€ ì‚­ì œê²°ê³¼ í™•ì¸ # $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE younsunglee/docker-nodejs-toyproject 746c681 5dee88486167 2 days ago 1GB younsunglee/docker-nodejs-toyproject bd2f64b 4ece06c282a8 3 days ago 1GB younsunglee/docker-nodejs-toyproject 8d27e5f49 7e7bf7400489 3 days ago 1GB younsunglee/docker-nodejs-toyproject latest 7e7bf7400489 3 days ago 1GB jenkins-docker latest 141715b7bf00 3 days ago 522MB node latest a283f62cb84b 2 weeks ago 993MB mysql latest 3218b38490ce 2 weeks ago 516MB jenkins/jenkins lts 2a4bbe50c40b 4 weeks ago 441MB gradle jdk8-alpine 8017d8c2ba74 2 years ago 204MB node 4.6 e834398209c1 5 years ago 646MB ì´ê²ƒìœ¼ë¡œ \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ dangling ì´ë¯¸ì§€ë“¤ì´ ëª¨ë‘ ì‚­ì œë˜ì—ˆë‹¤.\nì¡°ì¹˜ ì™„ë£Œ.\n","date":"Jan 5, 2022","permalink":"/blog/removing-dangling-image-in-docker/","section":"Blogs","summary":"ê°œìš” # ë„ì»¤ì—ì„œ \u0026lt;none\u0026gt; íƒœê·¸ê°€ ë¶™ì€ ì´ë¯¸ì§€dangling imageë“¤ì´ ë§ì´ ìŒ“ì¸ ìƒí™©ì¼ ê²½ìš°, ëª…ë ¹ì–´ë¥¼ í†µí•´ í•œ ë²ˆì— dangling imageë¥¼ ì •ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.","title":"Docker dangling ì´ë¯¸ì§€ ì‚­ì œ"},{"content":"ë°œë‹¨ # submodule ë ˆí¬ì§€í„°ë¦¬ì¸ seyslee.github.ioì˜ branch nameì„ masterì—ì„œ mainìœ¼ë¡œ ë³€ê²½í•˜ë˜ ì‘ì—…ì¤‘ ê¼¬ì—¬ë²„ë ¤ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.\nseyslee.github.io ë ˆí¬ì§€í„°ë¦¬ì™€ ì—°ê²°ëœ submoduleì¸ public ë””ë ‰í† ë¦¬ë¥¼ ë‹¤ì‹œ ë“±ë¡í•  í•„ìš”ê°€ ìˆì—ˆë‹¤.\ní™˜ê²½ # OS : macOS Monterey 12.1\nGit : git version 2.32.0 (Apple Git-132)\ní„°ë¯¸ë„ í”„ë¡œê·¸ë¨ : iTerm2 v3.4.15 (brewë¡œ ì„¤ì¹˜ë¨)\nShell : zsh\ní•´ê²°ë°©ë²• # 1. submodule ì‚­ì œ # submodule ëª©ë¡ í™•ì¸ # submoduleì„ ì™„ì „ì‚­ì œí•˜ê¸° ì „ì— submodule ëª©ë¡ì„ í™•ì¸í•œë‹¤.\n$ git submodule -47b65cc887e6b6f4a00b439906aa669ade23ee8c public 9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da themes/hugo-theme-codex (v1.6.0) 2ê°œì˜ submodule ì¤‘ì—ì„œ public ì´ë¼ëŠ” ì´ë¦„ì˜ submoduleì„ ì‚­ì œí•  ê²ƒì´ë‹¤.\nsubmodule deinit # publicì´ë¼ëŠ” ì´ë¦„ì˜ submoduleì„ ë“±ë¡í•´ì œ(Unregister)í•œë‹¤.\n$ git submodule deinit -f public ëª…ë ¹ì–´ ì˜µì…˜\n-f (--force) : ëª…ë ¹ì–´ë¥¼ ê°•ì œë¡œ ì‹¤í–‰í•œë‹¤. -f ì˜µì…˜ì€ add, update, deinit ëª…ë ¹ì–´ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ë¡œì»¬ì—ì„œ submodule ë””ë ‰í† ë¦¬ ì‚­ì œ # ./git/modules/ í´ë” ì•ˆì˜ ëª¨ë“ˆ ë””ë ‰í† ë¦¬ë¥¼ ì‚­ì œí•œë‹¤.\n$ rm -rf .git/modules/public gitì—ì„œ submodule ë””ë ‰í† ë¦¬ ì‚­ì œ # ë§ˆì§€ë§‰ìœ¼ë¡œ gitì—ì„œ í•´ë‹¹ ì‹¤ì œ í´ë”ë¥¼ ì‚­ì œí•œë‹¤.\n$ git rm -f public submodule ëª©ë¡ ì¬í™•ì¸ # ë‹¤ì‹œ submodule ëª©ë¡ì„ í™•ì¸í•´ë³´ì.\n$ git submodule 9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da themes/hugo-theme-codex (v1.6.0) ê¸°ì¡´ì— ìˆë˜ publicì´ë¼ëŠ” ì´ë¦„ì˜ submoduleì´ ì‚­ì œëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n2. submodule ë“±ë¡ # submodule ë‹¤ì‹œ ì¶”ê°€ # ì‚­ì œí•œ submoduleì„ ë‹¤ì‹œ ë“±ë¡í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.\nëª…ë ¹ì–´ í˜•ì‹\n$ git submodule add -b \u0026lt;branch ì´ë¦„\u0026gt; https://github.com/\u0026lt;Github ìœ ì €ëª…\u0026gt;/\u0026lt;ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„\u0026gt;.git \u0026lt;ë¡œì»¬ì— ìƒì„±í•  ë””ë ‰í† ë¦¬ ì´ë¦„\u0026gt; ì‹¤ì œ ëª…ë ¹ì–´\nì‚­ì œí•œ submoduleì„ ë‹¤ì‹œ ë¡œì»¬ì— ìƒì„±í•˜ê³  submoduleë¡œ ë“±ë¡í•˜ëŠ” ê³¼ì •ì´ë‹¤.\nBranch ì´ë¦„ê³¼ ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„, ì—°ê²°í•  ë””ë ‰í† ë¦¬ ëª…ì€ ê°œê°œì¸ì˜ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ëª…ë ¹ì–´ë¥¼ ì˜ ì°¸ê³ í•´ì„œ ë³€ê²½í•´ ì“°ë©´ ëœë‹¤.\n$ git submodule add -b main https://github.com/seyslee/seyslee.github.io.git public Cloning into \u0026#39;/Users/ive/githubrepos/blog/public\u0026#39;... remote: Enumerating objects: 3, done. remote: Counting objects: 100% (3/3), done. remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 Receiving objects: 100% (3/3), done. ë§ˆì§€ë§‰ ë¼ì¸ì— ì¶œë ¥ëœ Receiving objects: ..., done. ë©”ì„¸ì§€ê°€ ì¶œë ¥ëœ ê±¸ ë³´ë©´ ë¬¸ì œì—†ì´ ë³µì œê°€ ëœ ê²ƒ ê°™ë‹¤.\nì´ì œ ì‹¤ì œ ë””ë ‰í† ë¦¬ë¥¼ ë°›ì•„ì™”ëŠ”ì§€ ë¡œì»¬ì—ì„œ í™•ì¸í•´ë³´ì.\nsubmodule ì¶”ê°€ ê²°ê³¼ í™•ì¸ # ë‚´ ë¡œì»¬ PCì—ì„œ ë¸”ë¡œê·¸ ì‘ì—…ê²½ë¡œë¥¼ í™•ì¸í•œë‹¤.\n$ pwd /Users/ive/githubrepos/blog $ ls -lh total 16 drwxr-xr-x 3 ive staff 96B 7 30 20:00 archetypes -rw-r--r-- 1 ive staff 2.5K 1 2 22:41 config.toml drwxr-xr-x 6 ive staff 192B 12 7 23:45 content -rwxrwxrwx@ 1 ive staff 585B 1 2 22:05 deploy.sh drwxr-xr-x 5 ive staff 160B 12 8 00:39 layouts drwxr-xr-x 16 ive staff 512B 1 3 00:01 public drwxr-xr-x 4 ive staff 128B 8 1 14:43 resources drwxr-xr-x 5 ive staff 160B 1 2 23:22 static drwxr-xr-x 4 ive staff 128B 7 30 20:03 themes public ë””ë ‰í† ë¦¬ê°€ ìƒˆë¡œ ìƒì„±ë˜ì—ˆë‹¤.\n$ git submodule ebfe49d9e92afef6bd11df4eb077439a8df18808 public (heads/main) 9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da themes/hugo-theme-codex (v1.6.0) seyslee.github.io ë ˆí¬ì§€í„°ë¦¬ì— ì—°ê²°ëœ public ë””ë ‰í† ë¦¬ê°€ ì˜ ë³µì œ(Clone)ë˜ì—ˆë‹¤!\nbranch ì´ë¦„ë„ masterê°€ ì•„ë‹Œ main ìœ¼ë¡œ ë³€ê²½ëë‹¤.\nGithubì— ë¡œê·¸ì¸í•œ í›„ ë ˆí¬ì§€í„°ë¦¬ì— ë“¤ì–´ê°€ì„œ ì§ì ‘ í™•ì¸í•´ë³¸ ê²°ê³¼ë„ ë™ì¼í•˜ë‹¤.\npublicÂ ë””ë ‰í† ë¦¬ì— íŒŒë€ìƒ‰ ë§í¬ê°€ ê±¸ë ¤ìˆë‹¤ëŠ” ê²ƒì€ submoduleë¡œ ë‹¤ë¥¸ Repositoryì™€ ì—°ê²°ë˜ì–´ ìˆë‹¤ëŠ” ê±¸ ì˜ë¯¸í•œë‹¤.\nì°¸ê³ ìë£Œ # http://snowdeer.github.io/git/2018/08/01/how-to-remove-git-submodule/\nGit - git-submodule Documentation\n","date":"Jan 3, 2022","permalink":"/blog/removing-submodule-in-github/","section":"Blogs","summary":"ë°œë‹¨ # submodule ë ˆí¬ì§€í„°ë¦¬ì¸ seyslee.","title":"submodule ì‚­ì œ í›„ ì¬ë“±ë¡"},{"content":"ê°œìš” # Jenkinsì™€ Slackì„ Incoming webhooksë¥¼ ì´ìš©í•´ì„œ ì—°ë™í•´ë³´ì.\nIncoming webhooksëŠ” Slack ìì²´ í”ŒëŸ¬ê·¸ì¸(ì•±)ì´ë‹¤.\nì „ì œì¡°ê±´ # ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ êµ¬ì¶•ëœ Jenkins Server : ì‹¤ìŠµì—ì„œ ì¤‘ìš”í•œ í•µì‹¬ ìš”ì†Œ\nSlack ê³„ì • : Jenkinsì™€ Slackì„ ì—°ë™í•  ë•Œ í•„ìš”\nGithub ê³„ì • : Github Repositoryë¥¼ ë§Œë“¤ê³  Jenkinsfile ì½”ë“œë¥¼ ì—…ë¡œë“œí•  ë•Œ í•„ìš”\ní™˜ê²½ # ì‹œìŠ¤í…œ êµ¬ì„±ë„ # DigitalOceanì´ë¼ëŠ” í´ë¼ìš°ë“œ í”Œë«í¼ ìœ„ì— Ubuntu 20.04.3 OSê°€ ì„¤ì¹˜ëœ Virtual Server 1ëŒ€ë¥¼ ìƒì„±í•´ë†“ì•˜ë‹¤.\n$ cat /etc/os-release | grep VERSION VERSION=\u0026#34;20.04.3 LTS (Focal Fossa)\u0026#34; VERSION_ID=\u0026#34;20.04\u0026#34; VERSION_CODENAME=focal $ arch x86_64 ê·¸ ë¦¬ëˆ…ìŠ¤ ì„œë²„ ìœ„ì— Dockerë¥¼ ì„¤ì¹˜í›„ Jenkinsë¥¼ ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ ì˜¬ë¦° êµ¬ì„±ì´ë‹¤.\n$ ps -ef | grep docker root 2924 1 0 2021 ? 00:01:10 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES c269a4e8a445 jenkins-docker \u0026#34;/sbin/tini -- /usr/â€¦\u0026#34; 26 hours ago Up 26 hours 0.0.0.0:8080-\u0026gt;8080/tcp, :::8080-\u0026gt;8080/tcp, 0.0.0.0:50000-\u0026gt;50000/tcp, :::50000-\u0026gt;50000/tcp jenkins ì´ í¬ìŠ¤íŒ… ìì²´ê°€ Jenkins ì„œë²„ë¥¼ êµ¬ì¶•í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¨ì§€ëŠ” ì•ŠëŠ”ë‹¤.\nJenkins Serverë¥¼ ì§ì ‘ êµ¬ì¶•í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ë¥¸ ê¸€ì„ ì°¸ê³ í•˜ê³  ì˜¤ì.\nVirtual Server í™˜ê²½ ìƒì„¸ì •ë³´ # Cloud Service Provider : DigtialOcean\nOS : Ubuntu 20.04.3 LTS\nLinux Kernel : 5.4.0-88-generic\nDocker : Docker version 20.10.12, build e91ed57\nJenkins : 2.319.1\nì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ëŠ” Jenkins ê³µì‹ ë„ì»¤í—ˆë¸Œ ì´ë¯¸ì§€( jenkins/jenkins:lts)ì´ë‹¤.\nJenkins Plugin : Slack Notification 2.49\në°©ë²• # 1. Jenkins í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ # Jenkins ê´€ë¦¬ í˜ì´ì§€ë¡œ ë¡œê·¸ì¸í•œë‹¤. Jenkins ê¸°ë³¸í¬íŠ¸ëŠ” 8080ì´ë‹¤.\nJenkins ë©”ì¸í™”ë©´ â†’ Jenkins ê´€ë¦¬ â†’ í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ ë©”ë‰´ë¡œ ë“¤ì–´ê°€ì.\nì„¤ì¹˜ ê°€ëŠ¥ íƒ­ìœ¼ë¡œ ì´ë™í•œë‹¤.\nì„¤ì¹˜ ê°€ëŠ¥ íƒ­ì—ì„œ slackìœ¼ë¡œ ê²€ìƒ‰í•œë‹¤.\nSlack Notification 2.49 ë²„ì „ì´ ê²€ìƒ‰ëœë‹¤.\nSlack Notificationì— Install ì²´í¬ â†’ Download now and install after restart í´ë¦­\nì  í‚¨ìŠ¤ê°€ Slack Notification í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•œ í›„ ìë™ìœ¼ë¡œ ì¬ì‹œì‘í•  ê²ƒì´ë‹¤.\nì ì‹œ ê¸°ë‹¤ë¦° í›„ ë‹¤ì‹œ ì  í‚¨ìŠ¤ì— ë¡œê·¸ì¸í•œë‹¤.\n2. Slack setup # slack ê³µì‹ í™ˆí˜ì´ì§€ë¡œ ì ‘ì†í•œí›„ ìƒˆë¡œìš´ ê³„ì •ìœ¼ë¡œ ê°€ì…í•œë‹¤.\nì´ë¯¸ Slack ê³„ì •ì„ ê°€ì§€ê³  ìˆë‹¤ë©´ ë˜ ê°€ì…í•  í•„ìš”ëŠ” ì—†ë‹¤.\nìƒˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ë§Œë“  í›„, ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì‚¬ìš©í•  ì•±ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì•± í™”ë©´ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\nê²€ìƒ‰ì°½ì— webhookì„ ì…ë ¥í•œë‹¤.\nIncoming Webhooksë¥¼ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì—°ê²°í•˜ê¸° ìœ„í•´ ì¶”ê°€í•œë‹¤.\nIncoming Webhooksì˜ ì„¤ì •ì— ë“¤ì–´ê°„ë‹¤.\nì±„ë„ì— í¬ìŠ¤íŠ¸ ê°’ì— alertsë¥¼ ì…ë ¥í•œë‹¤. #alerts ì±„ë„ì´ ì›¹í›„í¬ ë©”ì„¸ì§€ë¥¼ ë°›ê² ë‹¤ëŠ” ê²ƒì´ë‹¤.\n[ìˆ˜ì‹  ì›¹í›„í¬ í†µí•© ì•± ì¶”ê°€] ë²„íŠ¼ì„ í´ë¦­í•œë‹¤.\ní•˜ë‹¨ì— ë‚´ë ¤ë³´ë©´ ì›¹í›„í¬ URLì´ ë³´ì¸ë‹¤.\nì§€ê¸ˆ ë°”ë¡œ ì‚¬ìš©í•  ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì›¹í›„í¬ URLì„ ë©”ëª¨ì¥ì— ë”°ë¡œ ë³µì‚¬í•´ë†“ëŠ”ë‹¤.\n3. Jenkins Slack ì„¤ì • # Jenkins ë©”ì¸í™”ë©´ â†’ ì‹œìŠ¤í…œ ì„¤ì • ë©”ë‰´ë¡œ ë“¤ì–´ê°„ë‹¤.\ní™˜ê²½ì„¤ì •ì—ì„œ í•˜ë‹¨ìœ¼ë¡œ ì­‰ ë‚´ë ¤ë³´ë©´, Slack ì„¹ì…˜ì´ ìˆë‹¤. ì—¬ê¸°ì„œ Credential ê°’ì— ì•„ê¹Œ ë³µì‚¬í•œ ì›¹í›„í¬ URLì´ ë“¤ì–´ê°ˆ ê²ƒì´ë‹¤.\n[ê³ ê¸‰\u0026hellip;] ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì „ì²´ ì†ì„±ì„ ë³¼ ìˆ˜ ìˆê²Œ í™”ë©´ì„ í™•ì¥ ì‹œí‚¨ë‹¤.\nCredential â†’ Add â†’ Jenkins ë¥¼ ëˆŒëŸ¬ì„œ Slackìš© ë¡œê·¸ì¸ ì •ë³´ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì.\nì•„ê¹Œ ë³µì‚¬í•œ ì›¹í›„í¬ URLì„ ë³´ì.\nì›¹í›„í¬ URLì˜ ì•ë¶€ë¶„(https://hooks.slack.com/services/)ì„ ì œì™¸í•˜ê³  ë’·ë¶€ë¶„ë§Œ ë³µì‚¬í•œë‹¤.\nSlack Credential ìƒì„± # [Add] ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì€ Credential ìƒì„±í™”ë©´ì´ ë‚˜íƒ€ë‚œë‹¤.\nKind : Secret text\nSecret : ì›¹í›„í¬ URLì˜ ë’·ë¶€ë¶„ì„ ë³µì‚¬ ë¶™ì—¬ë„£ê¸°í•œë‹¤.\nID : slack-alerts (ë³¸ì¸ì´ ì›í•˜ëŠ” ê±¸ë¡œ ë°”ê¿”ë„ ë¬´ë°©í•˜ë‹¤.)\nDescription : IDì— ëŒ€í•œ ë¶€ê°€ì„¤ëª…\nì°¸ê³ ë¡œ ì´ë ‡ê²Œ Credentialì„ ì“°ëŠ” ì´ìœ ëŠ” ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.\nì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ Webhook URLì´ë¼ë˜ì§€ ID/PW ê°’ì„ ê³µê°œí•  ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆ, Jenkinsê°€ ë”°ë¡œ Credentialì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•œë‹¤.\nSlack ì„¸íŒ… ì ê²€ # Credential : slack-alerts (ìš°ë¦¬ê°€ ë°©ê¸ˆ ë§Œë“ )\nDefault channel / member id : #alerts\nOverride url : https://hooks.slack.com/services/\nìœ„ ì„¤ì •ê°’ë“¤ì„ ì…ë ¥ í›„ Test Connection ë²„íŠ¼ í´ë¦­\nì„¤ì •ê°’ì„ ì˜¬ë°”ë¥´ê²Œ ë„£ì—ˆë‹¤ë©´ ì ‘ì† ì„±ê³µì´ë¼ëŠ” ë©”ì„¸ì§€(Success)ê°€ ë–¨ì–´ì§„ë‹¤. Test Connection ë²„íŠ¼ì„ ì—¬ëŸ¬ë²ˆ ëˆŒëŸ¬ë³¸ë‹¤.\nTest Connection ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ #alert ì±„ë„ë¡œ ë©”ì„¸ì§€ê°€ ë“¤ì–´ì˜¨ë‹¤.\nìµœì¢…ì ìœ¼ë¡œëŠ” Jenkins build ì‹¤íŒ¨ì‹œì—ë„ Slack ë©”ì„¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ë³´ë‚´ì£¼ë„ë¡ êµ¬í˜„í•  ê²ƒì´ë‹¤.\n4. Jenkinsfile ì¤€ë¹„ # Jenkinsfileì€ ì  í‚¨ìŠ¤ íŒŒì´í”„ë¼ì¸ì´ ë™ì‘í•˜ëŠ” ì „ì²´ ê³¼ì •ì„ ì½”ë“œë¡œ ì ì–´ë†“ì€ ëª…ì„¸ì„œë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. Jenkinsfileì€ groovyë¼ëŠ” ì–¸ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.\nìƒˆ ë ˆí¬ì§€í„°ë¦¬ë¥¼ ë§Œë“¤ê³  Jenkinsfile ì„ ì˜¬ë ¤ë†“ëŠ”ë‹¤. ë‚´ ê²½ìš° í™˜ê²½ì€ ì•„ë˜ì™€ ê°™ë‹¤.\në ˆí¬ì§€í„°ë¦¬ ì´ë¦„ : jenkins-pipeline-toyproj ë°”ë¡œê°€ê¸°\nJenkinsfile ê²½ë¡œ : /5-slack-notifications/Jenkinsfile (ê¹ƒí—ˆë¸Œ ë ˆí¬ ê¸°ì¤€)\në‚´ ê²½ìš° ë¡œì»¬ í™˜ê²½ì—ì„œ Jenkinsfile ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë ˆí¬ì§€í„°ë¦¬ë¥¼ ì—°ê²°í•œ ë‹¤ìŒ, git pushë¡œ ì½”ë“œ(Jenkinsfile)ë¥¼ ë¯¸ë¦¬ ë ˆí¬ì§€í„°ë¦¬ì— ë°€ì–´ë„£ì€ ìƒíƒœì´ë‹¤.\nJenkinsfile ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\nnode { // job try { stage(\u0026#39;build\u0026#39;) { println(\u0026#39;so far so good...\u0026#39;) } stage(\u0026#39;test\u0026#39;) { println(\u0026#39;A test has failed!\u0026#39;) sh \u0026#39;exit 1\u0026#39; } } catch(e) { // mark build as failed currentBuild.result = \u0026#34;FAILURE\u0026#34;; // send slack notification slackSend (color: \u0026#39;#FF0000\u0026#39;, message: \u0026#34;FAILED: Job \u0026#39;${env.JOB_NAME} [${env.BUILD_NUMBER}]\u0026#39; (${env.BUILD_URL})\u0026#34;) // throw the error throw e; } } Jenkinsfile ì‹¤í–‰ì‹œ ì§„í–‰ìˆœì„œ\nJenkinsì—ì„œ githubì— ì˜¬ë¼ê°€ìˆëŠ” Jenkinsfileì„ í†µí•´ buildë¥¼ ì‹œì‘í•œë‹¤.\níŒŒì´í”„ë¼ì¸ì—ì„œ build stageëŠ” í†µê³¼í•œë‹¤.\níŒŒì´í”„ë¼ì¸ì˜ test stageì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤. (exit 1ì„ ë°˜í™˜í•˜ë„ë¡ ì§œì—¬ì ¸ ìˆìœ¼ë‹ˆê¹Œ)\nJenkinsëŠ” ë¹Œë“œì— ì—ëŸ¬ ë°œìƒì„ ê°ì§€í•œë‹¤.\nJenkinsëŠ” slackSend()ë¥¼ í†µí•´ ë¯¸ë¦¬ ì„¤ì •ëœ Slack webhookë¡œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë³´ë‚¸ë‹¤.\nSlackì˜ #alert ì±„ë„ë¡œ Jenkinsê°€ ë³´ë‚¸ ë¹Œë“œì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë“¤ì–´ì˜¨ë‹¤.\n5. Jenkins pipeline ìƒì„± # Jenkins ë©”ì¸í™”ë©´ â†’ create a new jobìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\nItem name : slack notification (ë³¸ì¸ì´ í•˜ê³  ì‹¶ì€ê±¸ë¡œ ë°”ê¿”ë„ ë¬´ë°©í•¨)\nì¢…ë¥˜ : Pipeline\n[OK] ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤.\nPipeline ì •ë³´ë¥¼ ë„£ëŠ”ë‹¤.\nBranch Specifier ê°’ì´ masterê°€ ì•„ë‹Œ mainì´ë¼ëŠ” ì ì„ ì²´í¬í•œë‹¤.\nDefinition : Pipeline script from SCM\nSCM : Git\nRepository URL : https://github.com/seyslee/jenkins-pipeline-toyproj.git\nìŠ¤ìŠ¤ë¡œ êµ¬ì¶•í•œ Github Repositoryê°€ ìˆë‹¤ë©´ ê·¸ê±¸ë¡œ ë°”ê¿”ì„œ ì…ë ¥. Branch Specifier : */main\n2020ë…„ 10ì›”ì„ ê¸°ì ìœ¼ë¡œ githubëŠ” default branch ì´ë¦„ì¸ masterê°€ ì¸ì¢… ì°¨ë³„ì  ë‹¨ì–´ë¼ëŠ” ì´ìœ ë¡œ mainì´ ê¸°ë³¸ ìƒì„±ë˜ë„ë¡ ë³€ê²½í–ˆë‹¤. ì›ë¬¸ : The default branch for newly-created repositories is now main | GitHub Changelog Script Path : 5-slack-notification/Jenkinsfile (í•´ë‹¹ ë ˆí¬ ê¸°ì¤€ì—ì„œì˜ Jenkinsfileì˜ ê²½ë¡œë¥¼ ì˜ë¯¸í•œë‹¤.) ì…ë ¥ í›„ ì €ì¥í•œë‹¤.\nslack notification ì´ˆê¸°í™”ë©´ â†’ [Build Now] ë²„íŠ¼ í´ë¦­\nBuildë¥¼ ì‹œì‘í•˜ë©´ Jenkinsì´ Github Repositoryì— ì €ì¥ë˜ì–´ ìˆëŠ” Jenkinsfileì„ ê¸°ë°˜ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•œë‹¤.\nìš°ë¦¬ê°€ ì˜ë„í•œëŒ€ë¡œ build stageëŠ” ë¬¸ì œì—†ì´ í†µê³¼í•˜ê³  test stageì—ì„œ ì‹¤íŒ¨í•œë‹¤.\nì—ëŸ¬í™”ë©´\nì•„ë«ì¤„ì— ì¶œë ¥ëœ ë¡œê·¸ë¥¼ ìì„¸íˆ ë³´ì.\n..... [Pipeline] // stage [Pipeline] slackSend Slack Send Pipeline step running, values are - baseUrl: https://hooks.slack.com/services/, teamDomain: \u0026lt;empty\u0026gt;, channel: #alert, color: #FF0000, botUser: false, tokenCredentialId: slack-alerts, notifyCommitters: false, iconEmoji: \u0026lt;empty\u0026gt;, username: \u0026lt;empty\u0026gt;, timestamp: \u0026lt;empty\u0026gt; [Pipeline] } [Pipeline] // node ..... baseUrl, channel ê°’ì´ jenkins slack ì„¤ì •ê°’ê³¼ ë™ì¼í•˜ê²Œ ì œëŒ€ë¡œ ë„˜ì–´ê°”ëŠ”ì§€ ì²´í¬í•œë‹¤.\nbuildê°€ ì‹¤íŒ¨í•˜ì #alert ì±„ë„ì— FAILED: Job ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ì—ˆë‹¤.\nì „ë‹¬ë°›ì€ slack ë©”ì„¸ì§€ì— ë”¸ë¦° URLì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ Jenkins build í˜ì´ì§€ë¡œ ì—°ê²°ëœë‹¤!\nì •ìƒ ì ‘ì†ëœ Jenkins ì›¹í˜ì´ì§€\nê²°ë¡  # ChatOpsê°€ ìš”ì¦˜ ìš´ì˜ íŠ¸ë Œë“œì´ë‹¤. íŠ¸ë Œë“œê°€ ë°”ë€Œë©´ì„œ DevOps Engineerì—ê²Œ ì´ì œ JenkinsëŠ” ë„ì»¤ì™€ ë™ë“±í•œ ìˆ˜ì¤€ì„ ìš”êµ¬í•˜ëŠ” í•µì‹¬ ìŠ¤í‚¬ì´ ëœ ê²ƒ ê°™ë‹¤.\nJenkinsì™€ Slackì˜ ë‹¤ì–‘í•œ ì•±ì„ í†µí•©í•˜ë©´ ì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§ê³¼ ì•ŒëŒ ìë™í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë¬´ì—‡ë³´ë‹¤ë„ JenkinsëŠ” ëª¨ë“  ê±¸ ë‹¤ ë¶™ì¼ ìˆ˜ ìˆëŠ” ë§ŒëŠ¥íˆ´ì´ë‹ˆ ê¼­ ë”¥í•˜ê²Œ ë°°ì›Œë†“ì.\nì´ìƒìœ¼ë¡œ ê¸´ ê¸€ ì½ì–´ì£¼ì‹  ë…ìë¶„ë“¤ ê°ì‚¬í•©ë‹ˆë‹¤.\nPS. ì‹¤ìŠµì„ ë”°ë¼ ì§„í–‰í•˜ì‹œë‹¤ê°€ ì˜ ì•ˆë  ê²½ìš°, ëŒ“ê¸€ì„ ë‹¬ì•„ì£¼ì‹œë©´ ê°™ì´ í•´ê²°ì„ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n","date":"Jan 2, 2022","permalink":"/blog/slack-notifications-in-jenkins/","section":"Blogs","summary":"ê°œìš” # Jenkinsì™€ Slackì„ Incoming webhooksë¥¼ ì´ìš©í•´ì„œ ì—°ë™í•´ë³´ì.","title":"Jenkinsì™€ Slack webhook ì—°ë™"},{"content":"ë°œë‹¨ # 2ì£¼ë¼ëŠ” ì§§ì€ ê¸°ê°„ë™ì•ˆ íŠ¹ì • í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ì‚¬ìš©ë¥ ì´ 65%ì—ì„œ 90%ë¡œ ê¸‰ì¦í–ˆë‹¤.\ní™˜ê²½ # Architecture : x86_64 Database : Oracle Database 12c Standard Edition Release 12.x.x.x.x Shell : bash sqlplus : sqlplus ì‹¤í–‰ì‹œ ê´€ë¦¬ì ê¶Œí•œ(sys) í•„ìš” ì›ì¸ # ì´ë¯¸ì§€ íŒŒì¼ì´ë‚˜ ìŒì„± ë“±ì˜ ë¹„ì •í˜• ë°ì´í„°ë¥¼ ë‹´ëŠ” LOBSEGMENT ì‚¬ì´ì¦ˆì˜ ì¦ê°€ê°€ ì›ì¸ì´ì—ˆë‹¤.\ní…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ìš©ëŸ‰ ì‚°ì •ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒì´ ì•„ë‹ˆë¼, ì •ë§ë¡œ ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚œ ê²ƒì´ë‹¤.\nLOB ë°ì´í„° # LOBì´ë€ Large Objectì˜ ì•½ìë¡œ, ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì˜¤ë¼í´ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ë°ì´í„° íƒ€ì…ì´ë‹¤.\nLOB ë°ì´í„°ëŠ” ì‚¬ì§„, ìŒì„±, ì´ë¯¸ì§€ ë“± ë¹„êµ¬ì¡°í™”ëœ í° ìš©ëŸ‰ì˜ íŒŒì¼ì„ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ì¼ë°˜ SELECT ... FROM ... SQLë¬¸ìœ¼ë¡œëŠ” ì¡°íšŒê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\nLOBì˜ ì¢…ë¥˜ (Types of LOBs)\nCLOB : Character Large Objects ì˜ ì•½ì. ë¬¸ì ëŒ€í˜•ê°ì²´(Character), Oracleì€ CLOBê³¼ VARCHAR2 ì‚¬ì´ì— ì•”ì‹œì  ë³€í™˜ì„ ìˆ˜í–‰í•¨. BLOB : Binary Large Objects ì˜ ì•½ì. ì´ì§„ ëŒ€í˜•ê°ì²´(Binary), ì´ë¯¸ì§€, ë™ì˜ìƒ, MP3 ë“± NCLOB : Nation Character Large Objects ì˜ ì•½ì. ë‚´ì…”ë„ ë¬¸ì ëŒ€í˜•ê°ì²´, Oracleì—ì„œ ì •ì˜ë˜ëŠ” National Character setì„ ë”°ë¥´ëŠ” ë¬¸ì BFILE : Binary File Objects ì˜ ì•½ì. OSì— ì €ì¥ë˜ëŠ” ì´ì§„ íŒŒì¼ì˜ ì´ë¦„ê³¼ ìœ„ì¹˜ë¥¼ ì €ì¥. ì½ê¸° ì „ìš©(Read Only) ëª¨ë“œë¡œë§Œ ì•¡ì„¸ìŠ¤ ê°€ëŠ¥ í™•ì¸ë°©ë²• # íŠ¹ì • í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ìš©ëŸ‰ ë¶„ì„ ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n1. í…Œì´ë¸”ë³„ ìš©ëŸ‰ í™•ì¸ # ì…ë ¥ ëª…ë ¹ì–´\n-- SQL ì‹¤í–‰ê²°ê³¼ë¥¼ ê°€ë…ì„± ìˆê²Œ ì˜ ì •ë ¬í•´ì„œ ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ SET LINESIZE 300; -- ì‹¤ì œ ìˆ˜í–‰ SQLë¬¸ SELECT TOTAL.TABLESPACE_NAME, ROUND(TOTAL.MB, 2) AS TOTAL_MB, ROUND(TOTAL.MB - FREE.MB, 2) AS USED_MB, ROUND((1 - FREE.MB / TOTAL.MB) * 100, 2) || \u0026#39;%\u0026#39; AS USED_PER FROM (SELECT TABLESPACE_NAME, SUM(BYTES)/1024/1024 AS MB FROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME) FREE, (SELECT TABLESPACE_NAME, SUM(BYTES)/1024/1024 AS MB FROM DBA_DATA_FILES GROUP BY TABLESPACE_NAME) TOTAL WHERE FREE.TABLESPACE_NAME = TOTAL.TABLESPACE_NAME ORDER BY USED_PER DESC; ëª…ë ¹ì–´ ê²°ê³¼\nTABLESPACE_NAME TOTAL_MB USED_MB USED_PER ------------------------------ ---------- ---------- ----------------------------------------- SYSTEM 1320 1310.06 99.25% UNDOTBS1 1320 1227.88 93.02% SYSAUX 900 731.69 81.3% USERS 5 4 80% SECRET 30720 24201.69 78.78% SECRET_IDX 10240 6.56 .06% 6 í–‰ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì˜ ì˜¤ê¸° ì „ì— ì´ë¯¸ ê°œë°œì ìš”ì²­ì— ì˜í•´ì„œ SECRET í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì— 5GBë¥¼ ì¶”ê°€í•´ì„œ ì‚¬ì´ì¦ˆë¥¼ 30GBë¡œ ëŠ˜ë¦° ìƒí™©ì´ë‹¤.\n2. ê°œë°œìì˜ ë¬¸ì˜ # í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ì‚¬ìš©ë¥ ì„ ë‚®ì¶°ì„œ ì•ˆì „í•˜ê²Œ ì¡°ì¹˜ëŠ” ëë‚¬ë‹¤.\ní•˜ì§€ë§Œ ì´í›„ ê°œë°œìëŠ” ê·¼ë³¸ì ì¸ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ìš©ëŸ‰ ê¸‰ì¦ì˜ ì›ì¸ì„ ë¬¼ì–´ë´¤ë‹¤.\nDeveloper : \u0026ldquo;ì™œ SECRET í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ìš©ëŸ‰ì´ ê¸‰ì¦í•œê±¸ê¹Œìš”?\u0026rdquo;\nSysadmin (me) : (ê·¸ê±´ ì €ë„ ì˜ë¬¸ì…ë‹ˆë‹¤.)\nì´ì œ ë³¸ê²©ì ìœ¼ë¡œ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì— ì—°ê²°ëœ í…Œì´ë¸”ë³„ ìš©ëŸ‰ì„ í™•ì¸í•˜ëŠ” ë‹¨ê³„ë¡œ ë“¤ì–´ê°„ë‹¤.\n3. í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ìš©ëŸ‰ í™•ì¸ (SQL) # ì…ë ¥ ëª…ë ¹ì–´\n-- SQL ì‹¤í–‰ê²°ê³¼ë¥¼ ê°€ë…ì„± ìˆê²Œ ì˜ ì •ë ¬í•´ì„œ ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ SET LINESIZE 300; SET PAGES 1000; COL FILE_NAME FOR A50; -- ì‹¤ì œ ìˆ˜í–‰ SQLë¬¸ SELECT TABLESPACE_NAME, FILE_NAME, ROUND(BYTES/1024/1024/1024, 2) AS GB, ROUND(MAXBYTES/1024/1024/1024, 2) AS MAXGB, AUTOEXTENSIBLE FROM DBA_DATA_FILES; ëª…ë ¹ì–´ ê²°ê³¼\nTABLESPACE_NAME FILE_NAME GB MAXGB AUT ------------------------------ -------------------------------------------------- ---------- ---------- --- SYSTEM /data/SECRETDB/system01.dbf 1.29 32 YES SYSAUX /data/SECRETDB/sysaux01.dbf .88 32 YES UNDOTBS1 /data/SECRETDB/undotbs01.dbf 1.29 32 YES USERS /data/SECRETDB/users01.dbf 0 32 YES SECRET /data/SECRET 30 31 YES SECRET_IDX /data/SECRET_IDX 10 20 YES 6 í–‰ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. SECRET í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ë°ì´í„° íŒŒì¼ì€ /data/SECRETì— ìœ„ì¹˜í•´ìˆê³ , í˜„ì¬ í• ë‹¹ëœ ìš©ëŸ‰ì€ 30GBì´ë‹¤.\n4. í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ìš©ëŸ‰ í™•ì¸ (OS) # $ ls -lh /data/SECRET -rw-r----- 1 oracle dba 31G 12ì›” 29 09:22 /data/SECRET ls -lh ëª…ë ¹ì–´ë¡œ í™•ì¸í•´ë³¸ ê²°ê³¼ë„ sqlplusì—ì„œ í™•ì¸í•œ ê²°ê³¼ì²˜ëŸ¼ ë™ì¼í•˜ê²Œ 31GBì´ë‹¤.\n5. í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì— ì†í•œ í…Œì´ë¸” ì¡°íšŒ # ì…ë ¥ ëª…ë ¹ì–´\n-- SQL ì‹¤í–‰ê²°ê³¼ë¥¼ ê°€ë…ì„± ìˆê²Œ ì˜ ì •ë ¬í•´ì„œ ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ COL OWNER FOR A10; COL TABLE_NAME FOR A20; -- ì‹¤ì œ ìˆ˜í–‰ SQLë¬¸ SELECT OWNER, TABLE_NAME, TABLESPACE_NAME FROM DBA_TABLES WHERE TABLESPACE_NAME=\u0026#39;SECRET\u0026#39;; ëª…ë ¹ì–´ ê²°ê³¼\nOWNER TABLE_NAME TABLESPACE_NAME ---------- -------------------- ------------------------------ DEVXXX XXXXX_XXX SECRET DEVXXX XXXX_XXXXX_TBL SECRET DEVXXX XXXXXXX_TBL SECRET DEVXXX XXXXXXX_XXXX_TBL SECRET DEVXXX XXXX_XXXXX_TBL SECRET DEVXXX XXXX_XXX_TBL SECRET DEVXXX XXXXXX_XXXXX_TBL SECRET 7 í–‰ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. SECRET í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì—ëŠ” 7ê°œì˜ í…Œì´ë¸”ì´ ì†í•œë‹¤.\n6. í…Œì´ë¸”ë³„ ìš©ëŸ‰ ì¡°íšŒ # ì…ë ¥ ëª…ë ¹ì–´\n-- SQL ì‹¤í–‰ê²°ê³¼ë¥¼ ê°€ë…ì„± ìˆê²Œ ì˜ ì •ë ¬í•´ì„œ ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ SET PAGESIZE 1000; SET LINESIZE 1000; COL OWNER FOR A10; COL SEGMENT_TYPE FOR A15; COL SEGMENT_NAME FOR A30; COL TABLESPACE_NAME FOR A15; -- ì‹¤ì œ ìˆ˜í–‰ SQLë¬¸ SELECT OWNER, SEGMENT_TYPE, SEGMENT_NAME, TABLESPACE_NAME, BYTES/1024/1024 MB FROM DBA_SEGMENTS WHERE TABLESPACE_NAME=\u0026#39;SECRET\u0026#39; ORDER BY MB DESC; SQLë¬¸ ìƒì„¸ ì„¤ëª…\nORDER BY MB DESC : MB ë‹¨ìœ„ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ WHERE TABLESPACE_NAME='\u0026lt;í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ì´ë¦„\u0026gt;' : íŠ¹ì • í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì™€ ê´€ë ¨ëœ í…Œì´ë¸”, LOB ê°ì²´ë“¤ë§Œ ê²€ìƒ‰í•œë‹¤. ëª…ë ¹ì–´ ê²°ê³¼\nOWNER SEGMENT_TYPE SEGMENT_NAME TABLESPACE_NAME MB ---------- --------------- ------------------------------ --------------- ---------- DEVXXX LOBSEGMENT SYS_LOB0000233727C00003$$ SECRET 24190.125 DEVXXX TABLE XXXX_XXX_XXX SECRET 5 DEVXXX TABLE XXXXXXX_XXX SECRET 3 DEVXXX INDEX XXXX_XXX_XXX_PK SECRET 1 DEVXXX TABLE XXXXX_XXX SECRET 1 DEVXXX LOBSEGMENT SYS_LOB0000083246C00003$$ SECRET .125 DEVXXX TABLE XXXXXXX_XXXX_XXX SECRET .125 DEVXXX LOBINDEX SYS_IL0000233727C00003$$ SECRET .0625 DEVXXX TABLE XXXX_XXXXX_XXX SECRET .0625 DEVXXX TABLE XXXX_XXXXX_XXX SECRET .0625 DEVXXX LOBINDEX SYS_IL0000083246C00003$$ SECRET .0625 DEVXXX TABLE XXXXXXX_XXXX_XXX SECRET .0625 12 í–‰ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. í™•ì¸ê²°ê³¼\nLOBSEGMENT íƒ€ì…ì¸ SYS_LOB0000233727C00003$$ì˜ ìš©ëŸ‰ì´ 24190MB(=23.6GB)ë¡œ ëŠ˜ì–´ë‚œ ìƒíƒœì¸ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì¼ë°˜ì ì¸ í…Œì´ë¸”(TABLE TYPE)ë“¤ì€ ì •í˜• ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³  ìˆê¸° ë•Œë¬¸ì— 5MB ì´í•˜ì˜ ìš©ëŸ‰ì´ë‹¤.\nê·¸ëŸ¬ë‚˜ LOBSEGMENTëŠ” ë‹¤ë¥¸ í…Œì´ë¸”ë“¤ê³¼ ìš©ëŸ‰ ë¹„êµë¥¼ í–ˆì„ ë•Œ ë…ë³´ì ìœ¼ë¡œ í° ìš©ëŸ‰ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.\n","date":"Dec 29, 2021","permalink":"/blog/reason-for-the-rapid-increase-tablespace-size-in-oracle/","section":"Blogs","summary":"ë°œë‹¨ # 2ì£¼ë¼ëŠ” ì§§ì€ ê¸°ê°„ë™ì•ˆ íŠ¹ì • í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ì‚¬ìš©ë¥ ì´ 65%ì—ì„œ 90%ë¡œ ê¸‰ì¦í–ˆë‹¤.","title":"Oracle í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ìš©ëŸ‰ ê¸‰ì¦ì˜ ì›ì¸"},{"content":"ê°œìš” # vSphere HA êµ¬ì„±ì‹œ ë°œìƒí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ê´€ë ¨ ì•ŒëŒì„ ê°•ì œë¡œ ëŒ ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # vSphere : vSphere Client 5.x í˜¸ìŠ¤íŠ¸ í´ëŸ¬ìŠ¤í„° : vSphere HA êµ¬ì„±ë¨ ë¬¸ì œì  # ì—¬ëŸ¬ ëŒ€ì˜ í˜¸ìŠ¤íŠ¸ë¡œ êµ¬ì„±ëœ í´ëŸ¬ìŠ¤í„°ì—ì„œ vSphere HAë¥¼ êµ¬ì„±í•œ í›„ ëŠë‚Œí‘œ ì•„ì´ì½˜ê³¼ í•¨ê»˜ ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ê´€ë ¨ ì•ŒëŒì´ ë°œìƒí•œë‹¤.\ní•œê¸€ ë©”ì„¸ì§€ : í˜„ì¬ ì´ í˜¸ìŠ¤íŠ¸ì— ê´€ë¦¬ ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™”ê°€ ì—†ìŒ\nì˜ë¬¸ ë©”ì„¸ì§€ : Host \u0026lt;xxx\u0026gt; currently has no management network redundancy\n# í•´ê²°ë°©ì•ˆ # ê·¼ë³¸ì  í•´ê²°ì±… : VMwareì—ì„œëŠ” vSphere HA êµ¬ì„±ì‹œ í˜¸ìŠ¤íŠ¸ì˜ ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™”ë¥¼ ê¶Œì¥í•œë‹¤. ì•ŒëŒì„ ì—†ì• ëŠ” ê·¼ë³¸ì ì¸ ë°©ë²•ìœ¼ë¡œëŠ” ì‹¤ì œ í˜¸ìŠ¤íŠ¸ì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ì¤‘í™”í•´ì„œ ì•ˆì •ì  êµ¬ì„±ì„ ì™„ì„±í•œë‹¤.\nëŒ€ì•ˆ : ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™”ê°€ ì–´ë µë‹¤ë©´, ëŒ€ì±…ë°©ì•ˆìœ¼ë¡œ vSphere HAì˜ ê³ ê¸‰ íŒŒë¼ë¯¸í„°ë¥¼ ì„¤ì •í•´ ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ì•ŒëŒì„ ëŒ ìˆ˜ ìˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” 2. ëŒ€ì•ˆ ë°©ë²•ì— ëŒ€í•´ì„œ ì„¤ëª…í•œë‹¤.\n\u0008ìƒì„¸ ì ˆì°¨ # vSphere Client ë¡œê·¸ì¸ # vSphere Client í”„ë¡œê·¸ë¨ì— ë¡œê·¸ì¸í•œë‹¤.\ní˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ê°œë³„ í˜¸ìŠ¤íŠ¸ë¡œ ì ‘ì†í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì „ì²´ í˜¸ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” vCenterë¡œ ì ‘ì†í•œë‹¤.\ní˜¸ìŠ¤íŠ¸ ìƒíƒœ í™•ì¸ # vSphere HA ì„¤ì •í›„ ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” êµ¬ì„±ëœ ìƒíƒœê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í˜¸ìŠ¤íŠ¸ ì „ì²´ì— ê²½ë³´ê°€ ë°œìƒí•œ ìƒíƒœì´ë‹¤. (í˜¸ìŠ¤íŠ¸ ì•„ì´ì½˜ ì˜†ì— ë…¸ë€ìƒ‰ ëŠë‚Œí‘œ í‘œì§€íŒ)\ní˜¸ìŠ¤íŠ¸ â†’ êµ¬ì„± â†’ í•˜ë“œì›¨ì–´ â†’ ë„¤íŠ¸ì›Œí‚¹ ë©”ë‰´ë¡œ ë“¤ì–´ê°€ë³¸ë‹¤.\nì‹¤ì œë¡œ Management Networkê°€ ì—°ê²°ëœ ë¬¼ë¦¬ì  ì–´ëŒ‘í„°(í˜¸ìŠ¤íŠ¸ ì„œë²„ì˜ ë¬¼ë¦¬ í¬íŠ¸)ê°€ vmnic4 1ê°œ ë¿ì¸ êµ¬ì„±ì¸ ì ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në§Œì•½ Management Networkì— ë¬¼ë¦¬ì  ì–´ëŒ‘í„°ê°€ 2ê°œ ì—°ê²°ë˜ì–´ ìˆì„ ê²½ìš°, ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ì¡°ê±´ì„ ì¶©ì¡±í–ˆê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ì•ŒëŒì€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.\nì„¤ì • í¸ì§‘ # í´ëŸ¬ìŠ¤í„° ì•„ì´ì½˜ ìš°í´ë¦­ â†’ ì„¤ì • í¸ì§‘(E)\u0026hellip;\nvSphere HA ê³ ê¸‰ ì˜µì…˜ # vSphere HAì˜ íŒŒë¼ë¯¸í„° ì„¤ì •ì„ ìœ„í•´ ê³ ê¸‰ ì˜µì…˜ ë©”ë‰´ë¡œ ë“¤ì–´ê°„ë‹¤.\nvSphere HA ë©”ë‰´ â†’ ê³ ê¸‰ ì˜µì…˜(O)\u0026hellip; ë©”ë‰´ë¡œ ë“¤ì–´ê°„ë‹¤.\níŒŒë¼ë¯¸í„° ì„¤ì • # ê³ ê¸‰ ì˜µì…˜ (vSphere HA)ì—ëŠ” íŒŒë¼ë¯¸í„° ê°’ì„ ì„¤ì •í•´ ë””í…Œì¼í•œ ì„¤ì •ì„ ì ìš©í•´ ìš´ì˜í•  ìˆ˜ ìˆë‹¤.\nê¸°ë³¸ê°’ì€ ì…ë ¥ëœ íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ìƒíƒœì´ë‹¤.\në„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” êµ¬ì„± ì•ŒëŒì„ ë„ê¸° ìœ„í•´ ì•„ë˜ ê°’ì„ ì…ë ¥í•œë‹¤. ì˜µì…˜ê³¼ ê°’ ì…ë ¥ì‹œ ëŒ€ì†Œë¬¸ìì— ì£¼ì˜í•œë‹¤.\nì˜µì…˜ : das.ignoreRedundantNetWarning\nê°’ : true\níŒŒë¼ë¯¸í„° ì…ë ¥ â†’ í™•ì¸ vSphere HA ì¬êµ¬ì„± # ìƒˆë¡œ ì„¤ì •í•œ das.ignoreRedundantNetWarning íŒŒë¼ë¯¸í„°ë¥¼ vSphere HA í´ëŸ¬ìŠ¤í„°ì— ì ìš©ì„ ìœ„í•´ vSphere HA êµ¬ì„±ì„ í•´ì œí–ˆë‹¤ê°€ ì¬êµ¬ì„±í•˜ë„ë¡ í•œë‹¤.\ní´ëŸ¬ìŠ¤í„° ê¸°ëŠ¥ ë©”ë‰´ â†’ vSphere HA ì„¤ì • ì²´í¬í•´ì œ â†’ í™•ì¸\nvSphere Client í”„ë¡œê·¸ë¨ í•˜ë‹¨ì˜ ìµœê·¼ ì‘ì—… ë¦¬ìŠ¤íŠ¸ì— vSphere êµ¬ì„± í•´ì œ ì‘ì—…ì´ ì§„í–‰ì¤‘ì¸ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nvSphere HAë¥¼ ë‹¤ì‹œ êµ¬ì„±í•œë‹¤.\ní´ëŸ¬ìŠ¤í„° ê¸°ëŠ¥ ë©”ë‰´ â†’ vSphere HA ì„¤ì • ì²´í¬ â†’ í™•ì¸\nì•ŒëŒ í•´ì œ í™•ì¸ # vSphere HA êµ¬ì„±ì´ ëë‚˜ë©´ ìƒˆë¡­ê²Œ ì„¤ì •í•œ íŒŒë¼ë¯¸í„°ê°€ í´ëŸ¬ìŠ¤í„°ì— ì ìš©ëœë‹¤. ì´ ë•Œ ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” êµ¬ì„± ì•ŒëŒì´ ì‚¬ë¼ì§„ë‹¤.\nìœ„ ì‚¬ì§„ì²˜ëŸ¼ vSphere HA í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” í˜¸ìŠ¤íŠ¸ ì „ì²´ì— ë…¸ë€ìƒ‰ ëŠë‚Œí‘œ ì•„ì´ì½˜ì´ ì‚¬ë¼ì§„ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nê²°ë¡  # ì•ŒëŒ ë„ëŠ” ì¡°ì¹˜ë°©ë²•ì€ ë°˜ë“œì‹œ ëŒ€ì•ˆ(Alternative)ìœ¼ë¡œë§Œ ì‚¬ìš©í•œë‹¤. ì œì¡°ì‚¬ ê¶Œê³ ì‚¬í•­ì€ ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” êµ¬ì„±ì„ì„ ìŠì§€ ë§ì.\nì°¸ê³ ìë£Œ # VMwareì˜ Knowledge Base ê³µì‹ë¬¸ì„œ 1004700\nNetwork redundancy message when configuring vSphere High Availability in vCenter Server (1004700)\n","date":"Dec 20, 2021","permalink":"/blog/configuring-ignore-network-redundancy-in-vsphere-ha/","section":"Blogs","summary":"ê°œìš” # vSphere HA êµ¬ì„±ì‹œ ë°œìƒí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ê´€ë ¨ ì•ŒëŒì„ ê°•ì œë¡œ ëŒ ìˆ˜ ìˆë‹¤.","title":"vSphere ë„¤íŠ¸ì›Œí¬ ì´ì¤‘í™” ì•ŒëŒ ë„ê¸°"},{"content":" # ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— í• ë‹¹í•œ ìŠ¤í† ë¦¬ì§€ LUNì„ multipathë¥¼ ì´ìš©í•´ ì—°ê²°í•˜ëŠ” ì‘ì—…ì„ ì„¤ëª…í•œë‹¤. ì°¸ê³ ë¡œ í•´ë‹¹ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” LVM(Linux Volume Manager)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.\ní™˜ê²½ # Architecture : x86_64 OS : CentOS release 5.x (Final) Shell : bash Package : device-mapper-multipath-0.4.7-59.el5 ì „ì œì¡°ê±´ # ì„œë²„, SAN ìŠ¤ìœ„ì¹˜, ìŠ¤í† ë¦¬ì§€ ê°„ì˜ ë¬¼ë¦¬ì  ì—°ê²°ì´ ì‚¬ì „ì— ì™„ë£Œëœ ìƒíƒœ\nì„œë²„ì˜ OS, ì•„í‚¤í…ì²˜ ë²„ì „ì— ë§ëŠ” multipath íŒ¨í‚¤ì§€(device-mapper-multipath)ê°€ ì„¤ì¹˜ëœ ìƒíƒœì—¬ì•¼í•¨\në³¸ë¡  # SAN êµ¬ì„± # í˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ì˜ SAN(Storage Area Network) êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nFABRIC ARCHITECTURE +------------------+ | 1 LUN | | +-----------+ | =================== | | Storage | | * LUN ìš©ëŸ‰ : 1TB | +-----------+ | =================== | ^ | | | | | v | | +-----------+ | =================== | |SAN Switch | | * 8ê°œì˜ ë‹¤ì¤‘ê²½ë¡œë¡œ êµ¬ì„±í•¨ | +-----------+ | =================== | ^ | | | | | v | | multipath | | +-----------+ | =================== | | Server | | * OS : CentOS 5.x | +-----------+ | =================== | | +------------------+ Storage : Server Host ë“±ë¡, LUN í• ë‹¹ ì‘ì—…ì´ ì™„ë£Œëœ ìƒíƒœ\nSAN Switch : ì„œë²„ì™€ ìŠ¤í† ë¦¬ì§€ê°€ ê´‘ ì¼€ì´ë¸”ë¡œ SAN í¬íŠ¸ì— ì—°ê²°ëœ ìƒíƒœ, ì„œë²„ì™€ ìŠ¤í† ë¦¬ì§€ê°„ Zoning ì‘ì—…ì´ ì™„ë£Œëœ ìƒíƒœ\nServer : SAN Switchì™€ ë¬¼ë¦¬ì ìœ¼ë¡œ ì¼€ì´ë¸”ì´ ì—°ê²°ëœ ìƒíƒœ\nì‚¬ì „ì‘ì—… # 1. HBA ì¹´ë“œ í™•ì¸ # $ lspci | grep -i fibre 40:00.0 Fibre Channel: QLogic Corp. ISP2532-based 8Gb Fibre Channel to PCI Express HBA (rev 02) 40:00.1 Fibre Channel: QLogic Corp. ISP2532-based 8Gb Fibre Channel to PCI Express HBA (rev 02) ì„œë²„ì— HBA ì¹´ë“œê°€ 1ê°œ ì¥ì°©ëœ ìƒíƒœì´ë‹¤.\n2. multipath íŒ¨í‚¤ì§€ ì„¤ì¹˜ì—¬ë¶€ í™•ì¸ # $ rpm -qa | grep device-mapper-multipath device-mapper-multipath-0.4.7-59.el5 ì´ ì„œë²„ì—ì„œëŠ” device-mapper-multipath 0.4.7 ë²„ì „ì´ ì´ë¯¸ ì„¤ì¹˜ëœ ìƒíƒœì´ë‹¤.\nCentOS 5.x ê¸°ì¤€ìœ¼ë¡œ multipath íŒ¨í‚¤ì§€ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ OS ì„¤ì¹˜ì‹œ í¬í•¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ë³„ë„ë¡œ multipath íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ í•„ìš” ì—†ì—ˆë‹¤.\n3. multipathd ì‹¤í–‰ì—¬ë¶€ í™•ì¸ # $ ps -ef | grep multipathd root 8474 8427 0 18:14 pts/1 00:00:00 grep multipathd multipath ë°ëª¬(multipathd)ì´ ë™ì‘í•˜ê³  ìˆì§€ ì•Šë‹¤.\n4. multipathd ìë™ì‹œì‘ í™œì„±í™” # $ chkconfig --list multipathd multipathd 0:off 1:off 2:off 3:off 4:off 5:off 6:off ëª¨ë“  Run Level 1 ~ 5ì—ì„œ multipathd ìë™ì‹œì‘ì´ ë¹„í™œì„±í™”ëœ ìƒíƒœì´ë‹¤.\n$ chkconfig --level 35 multipathd on Run Level 3ê³¼ Run Level 5 ì¼ ê²½ìš°ì—ë§Œ multipathdê°€ ìë™ì‹œì‘ ë˜ë„ë¡ ì„¤ì •í•œë‹¤.\nRun Level\n3 : Full multi user mode. CLI ê¸°ë°˜ì˜ ë‹¤ì¤‘ ì‚¬ìš©ì ëª¨ë“œ. ê·¸ë˜í”½ ì‚¬ìš©ì í™˜ê²½(GUI)ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.\n5 : Run Level 3ê³¼ ìœ ì‚¬í•˜ë‚˜, X11 GUIë¥¼ ì§€ì›.\n$ chkconfig --list multipathd multipathd 0:off 1:off 2:off 3:on 4:off 5:on 6:off ì•ìœ¼ë¡œ multipathdëŠ” Run Level 3ê³¼ 5ì¼ ê²½ìš° ìë™ì‹œì‘ëœë‹¤.\n5. multipathd ì‹¤í–‰ # $ service multipathd start Starting multipathd daemon: [ OK ] multipathdë¥¼ ì‹œì‘í•œë‹¤.\n$ ps -ef | grep multipathd | grep -v grep root 16274 1 0 20:50 ? 00:00:00 /sbin/multipathd multipathd ê°€ ì‘ë™ì¤‘ì´ë‹¤.\nmultipath ì„¤ì • # 6. ëª¨ë“ˆ ìƒì„± # $ modprobe dm-multipath multipath ì‚¬ìš©ì„ ìœ„í•´ dm-multipath ëª¨ë“ˆì„ ì˜¬ë¦°ë‹¤.\n$ partprobe partprobe ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ ë¦¬ë¶€íŒ… ì—†ì´ë„ íŒŒí‹°ì…˜ ë³€ê²½ì‚¬í•­ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. ëª…ë ¹ì–´ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì™„ë£Œë˜ë©´ ë³„ë„ë¡œ ì¶œë ¥ ë©”ì„¸ì§€ëŠ” ë‚˜ì˜¤ì§€ ì•ŠëŠ”ë‹¤.\n7. LUN Rescan # systool ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ì„œ FC í¬íŠ¸ì˜ êµ¬ì„±ê³¼ ì´ë¦„ ì •ë³´ë¥¼ ìˆ˜ì§‘í•œë‹¤. ì°¸ê³ ë¡œ systool ëª…ë ¹ì–´ëŠ” sysfsutils íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ì•¼ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.\n$ systool -c fc_host Class = \u0026#34;fc_host\u0026#34; Class Device = \u0026#34;host7\u0026#34; Device = \u0026#34;host7\u0026#34; Class Device = \u0026#34;host8\u0026#34; Device = \u0026#34;host8\u0026#34; í•´ë‹¹ ì„œë²„ì—ì„œ host7, host8 ì´ë¼ëŠ” ì´ë¦„ì˜ 2ê°œì˜ ê´‘ í¬íŠ¸(FC)ë¥¼ ì‚¬ìš©ì¤‘ì´ë‹¤.\nìŠ¤í† ë¦¬ì§€ì—ì„œ LUN í• ë‹¹ ì‘ì—…ì´ ì´ë¯¸ ëë‚œ ìƒíƒœë¼ë©´, ì„œë²„ì—ì„œ LUNì„ ì¬ì¸ì‹(Rescan)í•˜ë„ë¡ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\n$ echo \u0026#34;1\u0026#34; \u0026gt; /sys/class/fc_host/host7/issue_lip $ echo \u0026#34;1\u0026#34; \u0026gt; /sys/class/fc_host/host8/issue_lip ìœ„ì˜ host7, host8 ê°’ì€ ê° ì„œë²„ë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë³€ê²½ë  ìˆ˜ ìˆë‹¤.\nsystool -c fc_host ëª…ë ¹ì–´ë¡œ ë°˜ë“œì‹œ ê°ìì˜ ì„œë²„ í™˜ê²½ì—ì„œ í™•ì¸í•œë‹¤.\n8. WWID í™•ì¸ # $ scsi_id -g -u -s /block/sdb 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sdc 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sdd 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sde 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sdf 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sdg 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sdh 36006016035303900df9eaf55ec5bec11 $ scsi_id -g -u -s /block/sdi 36006016035303900df9eaf55ec5bec11 /block/sdb ë¶€í„° /block/sdi ê¹Œì§€ ëª¨ë‘ ë™ì¼í•œ WWIDë¥¼ ê°€ì§€ê³  ìˆë‹¤. /block/sdaëŠ” OSê°€ ì„¤ì¹˜ëœ ë¡œì»¬ ë””ìŠ¤í¬ì´ë‹¤.\nì—¬ëŸ¬ê°œì˜ ì¥ì¹˜ì˜ WWIDê°€ ê°™ë‹¤ëŠ” ê²ƒì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë™ì¼í•œ ìŠ¤í† ë¦¬ì§€ì˜ LUNì´ ì—¬ëŸ¬ê°œë¡œ ë‚˜íƒ€ë‚¬ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\n9. multipath ì„¤ì •íŒŒì¼ ìˆ˜ì • # blacklist í•´ì œ\n$ cat /etc/multipath.conf | grep -v ^# | grep -v ^$ blacklist { devnode \u0026#34;*\u0026#34; } defaults { user_friendly_names yes } multipath ì„¤ì •íŒŒì¼ì˜ ê¸°ë³¸ê°’ì€ ëª¨ë“  Deviceë¥¼ ì°¨ë‹¨í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆë‹¤. ë¼ì¸ ë§¨ ì•ì— #ì„ ë¶™ì—¬ì„œ blacklist { ... } ì˜ì—­ì„ ì£¼ì„ì²˜ë¦¬í•œë‹¤.\n$ cat /etc/multipath.conf | grep -v ^# | grep -v ^$ #blacklist { # devnode \u0026#34;*\u0026#34; #} defaults { user_friendly_names yes } ì´ì œ multipaths { ... } êµ¬ë¬¸ì— ë™ì¼í•œ WWID ê°’ì„ ì¶”ê°€í•œë‹¤.\nmultipaths ì‘ì„±\n$ cat /etc/multipath.conf | grep -v ^$ #blacklist { # devnode \u0026#34;*\u0026#34; #} defaults { user_friendly_names yes } multipaths { multipath { wwid 36006016035303900df9eaf55ec5bec11 alias mpath1 } } OSê°€ ì„¤ì¹˜ëœ ì˜ì—­ì´ì ë¡œì»¬ ë””ìŠ¤í¬ì¸ /dev/sdaì˜ WWIDë¥¼ í™•ì¸í•œë‹¤.\në¡œì»¬ë””ìŠ¤í¬ ì œì™¸\n/dev/sda ì¥ì¹˜ëŠ” OSê°€ ì„¤ì¹˜ëœ ë¡œì»¬ë””ìŠ¤í¬ë‹¤.\nmultipathì—ì„œ ë¡œì»¬ ë””ìŠ¤í¬ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì •ì„ ì¡ì„ ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¡œì»¬ ë””ìŠ¤í¬ë¥¼ multipathì—ì„œ ì¡ì§€ ì•Šë„ë¡ blacklist ì„¤ì •í•œë‹¤.\n/sdaì˜ WWIDë¥¼ ì¡°íšŒí•œë‹¤.\n$ scsi_id -g -u -s /block/sda 3600508e000000000d7ca736cf72d740c $ cat /etc/multipath.conf | grep -v ^$ | grep -v ^# blacklist { wwid 3600508e000000000d7ca736cf72d740c } defaults { user_friendly_names yes } multipaths { multipath { wwid 36006016035303900df9eaf55ec5bec11 alias mpath1 } } blacklistì˜ ì£¼ì„ì„ í•´ì œí•œ í›„ multipathì—ì„œ ìë™ ì„¤ì •ì„ ì¡ì§€ ì•Šë„ë¡, /dev/sdaì˜ WWIDë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.\n$ service multipathd reload Reloading multipathd: [ OK ] ë³€ê²½ëœ ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ multipathdë¥¼ reload í•œë‹¤.\n$ service multipathd status multipathd (pid 12269) is running... multipathd ê°€ ì •ìƒ ì‹¤í–‰ì¤‘ì´ë‹¤.\n$ multipath -v2 ëª…ë ¹ì–´ ê²°ê³¼ë¡œ ì•„ë¬´ëŸ° ì¶œë ¥ì´ ì—†ìœ¼ë©´ í˜„ì¬ ì„œë²„ì™€ ìŠ¤í† ë¦¬ì§€ì˜ êµ¬ì„± ë¬¸ì œëŠ” ì—†ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\nì´ì œ LUNì´ ë©€í‹°íŒ¨ìŠ¤ êµ¬ì„±ì´ ëëŠ”ì§€ í™•ì¸í•œë‹¤.\n10. multipath êµ¬ì„± í™•ì¸ # $ multipath -ll mpath1 (36006016035303900df9eaf55ec5bec11) dm-0 DGC,VRAID [size=1.0T][features=1 queue_if_no_path][hwhandler=1 emc][rw] \\_ round-robin 0 [prio=1][active] \\_ 7:0:2:0 sdd 8:48 [active][ready] \\_ 7:0:3:0 sde 8:64 [active][ready] \\_ 8:0:2:0 sdh 8:112 [active][ready] \\_ 8:0:3:0 sdi 8:128 [active][ready] \\_ round-robin 0 [prio=0][enabled] \\_ 7:0:0:0 sdb 8:16 [active][ready] \\_ 7:0:1:0 sdc 8:32 [active][ready] \\_ 8:0:0:0 sdf 8:80 [active][ready] \\_ 8:0:1:0 sdg 8:96 [active][ready] 1ê°œì˜ LUNì´ 8ê°œì˜ ê²½ë¡œë¡œ ë©€í‹°íŒ¨ìŠ¤ê°€ êµ¬ì„±ë˜ì—ˆë‹¤. multipath ê²½ë¡œ ê°œìˆ˜ëŠ” ê°ì êµ¬ì¶•í•œ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥´ë‹¤.\ní•´ë‹¹ ì‹œë‚˜ë¦¬ì˜¤ì˜ ê²½ìš°, 8ê°œì˜ multipath ê²½ë¡œë¥¼ ì¡ë„ë¡ SAN ìŠ¤ìœ„ì¹˜ì™€ ìŠ¤í† ë¦¬ì§€ ë¶€ë¶„ì—ì„œ Zoning ì„¤ì •ì„ ì˜ë„í–ˆë‹¤.\níŒŒì¼ì‹œìŠ¤í…œ ì‘ì—… # 11. íŒŒì¼ì‹œìŠ¤í…œ ìƒì„± # $ mkfs.ext3 /dev/mapper/mpath1 mke2fs 1.39 (29-May-2006) Filesystem label= OS type: Linux Block size=4096 (log=2) Fragment size=4096 (log=2) 134217728 inodes, 268435456 blocks 13421772 blocks (5.00%) reserved for the super user First data block=0 Maximum filesystem blocks=4294967296 8192 block groups 32768 blocks per group, 32768 fragments per group 16384 inodes per group Superblock backups stored on blocks: 32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 102400000, 214990848 Writing inode tables: done Creating journal (32768 blocks): done Writing superblocks and filesystem accounting information: done This filesystem will be automatically checked every 38 mounts or 180 days, whichever comes first. Use tune2fs -c or -i to override. ì´ ì‹œë‚˜ë¦¬ì˜¤ì˜ ê²½ìš°ëŠ” ìŠ¤í† ë¦¬ì§€ì˜ ë³¼ë¥¨ì„ ext3 íƒ€ì…ìœ¼ë¡œ íŒŒì¼ì‹œìŠ¤í…œì„ ìƒì„±í•´ì„œ ì‚¬ìš©í•œë‹¤. ë§Œì•½ ext4 íƒ€ì…ìœ¼ë¡œ ìƒì„±í•˜ê³  ì‹¶ë‹¤ë©´, mkfs.ext4 /dev/mapper/mpath1 ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.\n12. íŒŒí‹°ì…˜ êµ¬ì„± # $ fdisk -l Disk /dev/sda: 298.9 GB, 298999349248 bytes 255 heads, 63 sectors/track, 36351 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/sda1 * 1 131 1052226 83 Linux /dev/sda2 132 17624 140512522+ 83 Linux /dev/sda3 17625 21801 33551752+ 82 Linux swap / Solaris /dev/sda4 21802 36351 116872875 5 Extended /dev/sda5 21802 24412 20972826 83 Linux /dev/sda6 24413 27023 20972826 83 Linux /dev/sda7 27024 29634 20972826 83 Linux /dev/sda8 29635 36351 53954271 83 Linux ..... Disk /dev/dm-0: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/dm-0 ì˜ ì „ì²´ ìš©ëŸ‰ì„ íŒŒí‹°ì…˜ 1ê°œë¡œ ì¡ì„ ì˜ˆì •ì´ë‹¤.\n$ fdisk /dev/mapper/mpath1 /dev/mapper/mpath1 ë””ìŠ¤í¬ë¥¼ íŒŒí‹°ì…˜ ì„¤ì •í•˜ê¸° ìœ„í•´ fdisk ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\np í‚¤ë¥¼ ì…ë ¥í•´ì„œ íŒŒí‹°ì…˜ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.\n$ fdisk /dev/mapper/mpath1 The number of cylinders for this disk is set to 133674. There is nothing wrong with that, but this is larger than 1024, and could in certain setups cause problems with: 1) software that runs at boot time (e.g., old versions of LILO) 2) booting and partitioning software from other OSs (e.g., DOS FDISK, OS/2 FDISK) Command (m for help): p Disk /dev/mapper/mpath1: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System ì•„ì§ ì•„ë¬´ëŸ° íŒŒí‹°ì…˜ ì„¤ì •ì´ ì—†ê¸° ë•Œë¬¸ì—, ì¶œë ¥ê°’ì€ ì—†ë‹¤.\nìƒˆ íŒŒí‹°ì…˜ì„ ìƒì„±í•˜ê¸° ìœ„í•´ n í‚¤ë¥¼ ì…ë ¥\nCommand (m for help): n primary partitionìœ¼ë¡œ ìƒì„±ì„ ìœ„í•´ p í‚¤ë¥¼ ì…ë ¥í•œë‹¤.\nCommand (m for help): n Command action e extended p primary partition (1-4) p ì§€ê¸ˆë¶€í„°ëŠ” íŒŒí‹°ì…˜ ìƒì„±ì‹œ ì„¤ì • ë‹¨ê³„ì´ë‹¤.\n[Enter] í‚¤ëŠ” ê¸°ë³¸ê°’(default ...) ì„ ì“°ê¸° ìœ„í•´ ì…ë ¥í•´ì¤€ë‹¤.\nPartition number (1-4): 1 First cylinder (1-133674, default 1): [Enter] Using default value 1 Last cylinder or +size or +sizeM or +sizeK (1-133674, default 133674): [Enter] Using default value 133674 p í‚¤ ì…ë ¥ : ìƒì„±ëœ íŒŒí‹°ì…˜ ëª©ë¡ ì¶œë ¥(print)\nCommand (m for help): p Disk /dev/mapper/mpath1: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/mapper/mpath1p1 1 133674 1073736373+ 83 Linux mpath1p1 : í•´ë‹¹ ë””ìŠ¤í¬(mpath1)ì˜ ì²«ë²ˆì§¸ íŒŒí‹°ì…˜(p1)ì„ ì˜ë¯¸í•œë‹¤.\nw ì…ë ¥ : ìƒì„±í•œ íŒŒí‹°ì…˜ì„ ì˜êµ¬ì ìœ¼ë¡œ ë””ìŠ¤í¬ì— ì ìš©(write)\nCommand (m for help): w The partition table has been altered! Calling ioctl() to re-read partition table. WARNING: Re-reading the partition table failed with error 22: Invalid argument. The kernel still uses the old table. The new table will be used at the next reboot. Syncing disks. ì •ìƒì ìœ¼ë¡œ íŒŒí‹°ì…˜ êµ¬ì„±ì´ ì™„ë£Œë˜ë©´ fdisk í”„ë¡¬í”„íŠ¸ì—ì„œ Shell í”„ë¡¬í”„íŠ¸ë¡œ ëŒì•„ì˜¨ë‹¤.\n..... WARNING: Re-reading the partition table failed with error 22: Invalid argument. The kernel still uses the old table. The new table will be used at the next reboot. Syncing disks. $ íŒŒí‹°ì…˜ ì„¤ì •ì„ ì ìš©í•œ í›„ shellë¡œ ìë™ìœ¼ë¡œ ëŒì•„ì™”ë‹¤.\n$ partprobe partprobe ëª…ë ¹ì–´ë¡œ íŒŒí‹°ì…˜ì˜ ë³€ê²½ì‚¬í•­ì„ ì „ì²´ ë©€í‹°íŒ¨ìŠ¤ ë³¼ë¥¨ì— ë°˜ì˜í•œë‹¤.\n$ fdisk -l Disk /dev/sda: 298.9 GB, 298999349248 bytes 255 heads, 63 sectors/track, 36351 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/sda1 * 1 131 1052226 83 Linux /dev/sda2 132 17624 140512522+ 83 Linux /dev/sda3 17625 21801 33551752+ 82 Linux swap / Solaris /dev/sda4 21802 36351 116872875 5 Extended /dev/sda5 21802 24412 20972826 83 Linux /dev/sda6 24413 27023 20972826 83 Linux /dev/sda7 27024 29634 20972826 83 Linux /dev/sda8 29635 36351 53954271 83 Linux Disk /dev/sdd: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/sdd1 1 133674 1073736373+ 83 Linux Disk /dev/sde: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/sde1 1 133674 1073736373+ 83 Linux Disk /dev/sdh: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/sdh1 1 133674 1073736373+ 83 Linux Disk /dev/sdi: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/sdi1 1 133674 1073736373+ 83 Linux Disk /dev/dm-0: 1099.5 GB, 1099511627776 bytes 255 heads, 63 sectors/track, 133674 cylinders Units = cylinders of 16065 * 512 = 8225280 bytes Device Boot Start End Blocks Id System /dev/dm-0p1 1 133674 1073736373+ 83 Linux partprobe ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œ í›„, ë©€í‹°íŒ¨ìŠ¤ë¡œ êµ¬ì„±ëœ ë””ë°”ì´ìŠ¤ /dev/sdd ~ /dev/sdi ì „ì²´ê°€ /dev/dm-0 ê³¼ ë™ì¼í•œ íŒŒí‹°ì…˜ ì •ë³´ë¥¼ ê°–ê²Œ ë˜ì—ˆë‹¤.\n13. ë§ˆìš´íŠ¸ # ë§ˆìš´íŠ¸ ì§€ì ì´ ë  ë””ë ‰í† ë¦¬ë¥¼ ìƒˆë¡œ ìƒì„±í•œë‹¤.\n$ mkdir /appdata multipath êµ¬ì„±ì´ëœ device(/dev/mapper/mpath1)ë¥¼ ë§ˆìš´íŠ¸ ì§€ì (ë””ë ‰í† ë¦¬)ì— ë§ˆìš´íŠ¸í•œë‹¤.\n$ mount /dev/mapper/mpath1 /appdata íŒŒì¼ì‹œìŠ¤í…œ í™•ì¸\níŒŒì¼ì‹œìŠ¤í…œ ë¦¬ìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ë³´ê¸° í¸í•˜ê²Œ ì •ë ¬í•˜ë ¤ë©´ column -t ëª…ë ¹ì–´ë¥¼ ì¡°í•©í•´ì„œ ì‹¤í–‰í•œë‹¤.\n$ df -Ph | column -t Filesystem Size Used Avail Use% Mounted on /dev/sda8 50G 499M 47G 2% / /dev/sda7 20G 2.7G 16G 15% /usr /dev/sda6 20G 238M 19G 2% /var /dev/sda5 20G 174M 19G 1% /home /dev/sda2 130G 188M 123G 1% /test /dev/sda1 996M 41M 904M 5% /boot tmpfs 7.9G 0 7.9G 0% /dev/shm /dev/mapper/mpath1 1008G 200M 957G 1% /appdata /dev/mapper/mpath1 íŒŒì¼ì‹œìŠ¤í…œì´ ìƒˆë¡œ ìƒì„±ë˜ì—ˆë‹¤. ë§ˆìš´íŠ¸ ì§€ì ì€ /appdata ì´ë‹¤.\n14. ìë™ ë§ˆìš´íŠ¸ ì„¤ì • # ì„œë²„ ë¦¬ë¶€íŒ… í›„ì—ë„ ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ì´ ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸ë˜ë„ë¡ íŒŒì¼ì‹œìŠ¤í…œ ì„¤ì •íŒŒì¼(/etc/fstab)ì— ë“±ë¡í•œë‹¤.\n$ cat /etc/fstab LABEL=/ / ext3 defaults 1 1 LABEL=/usr /usr ext3 defaults 1 2 LABEL=/var /var ext3 defaults 1 2 LABEL=/home /home ext3 defaults 1 2 LABEL=/test /test ext3 defaults 1 2 LABEL=/boot /boot ext3 defaults 1 2 /dev/mapper/mpath1 /appdata ext3 defaults 0 0 tmpfs /dev/shm tmpfs defaults 0 0 devpts /dev/pts devpts gid=5,mode=620 0 0 sysfs /sys sysfs defaults 0 0 proc /proc proc defaults 0 0 LABEL=SWAP-sda3 swap swap defaults 0 0 15. íŒŒì¼ ìƒì„±/ì‚­ì œ í…ŒìŠ¤íŠ¸ # $ dd if=/dev/zero of=/appdata/write_test.tmp bs=1G count=10 10+0 records in 10+0 records out 10737418240 bytes (11 GB) copied, 15.7843 seconds, 680 MB/s dd ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ì„œ ìƒˆë¡­ê²Œ ë§Œë“  íŒŒì¼ì‹œìŠ¤í…œ ì•ˆì— 10GB í¬ê¸°ì˜ write_test.tmp íŒŒì¼ì„ ìƒì„±(Write)í•´ë³¸ë‹¤.\n$ ls -lh /appdata/ total 11G drwx------ 2 root root 16K Dec 13 18:51 lost+found -rw-r--r-- 1 root root 10G Dec 13 19:08 write_test.tmp 10GBì˜ write_test.tmp íŒŒì¼ì´ ìƒì„±ë˜ì—ˆë‹¤.\n$ rm /appdata/write_test.tmp rm: remove regular file `/appdata/write_test.tmp\u0026#39;? y ìƒì„±í•œ í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ì‚­ì œí•œë‹¤.\n$ ls -lh /appdata/ total 16K drwx------ 2 root root 16K Dec 13 18:51 lost+found íŒŒì¼ ì‚­ì œë„ ë¬¸ì œ ì—†ì´ ì§„í–‰ëœë‹¤.\n","date":"Dec 14, 2021","permalink":"/blog/implementing-storage-lun-on-linux/","section":"Blogs","summary":"# ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— í• ë‹¹í•œ ìŠ¤í† ë¦¬ì§€ LUNì„ multipathë¥¼ ì´ìš©í•´ ì—°ê²°í•˜ëŠ” ì‘ì—…ì„ ì„¤ëª…í•œë‹¤.","title":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì™€ ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ ì—°ê²°"},{"content":"TL;DR # ë§ˆí¬ë‹¤ìš´ ì—ë””í„° Typoraê°€ ìœ ë£Œí™”ë˜ì—ˆê¸° ë•Œë¬¸ì— ëŒ€ì•ˆìœ¼ë¡œ mark textë¥¼ ì„¤ì¹˜ í›„ ì‚¬ìš©í•œë‹¤.\n$ brew install --cask mark-text ê°œìš” # ë¶ˆë§Œì—†ì´ ì˜ ì‚¬ìš©í•˜ë˜ ë§ˆí¬ë‹¤ìš´ ì—ë””í„° Typoraê°€ ìœ ë£Œí™” ì„ ì–¸ì„ í•´ë²„ë ¸ë‹¤.\nTypora ë¼ì´ì„¼ìŠ¤ ë“±ë¡ í™”ë©´\n13ì¼ ë‚¨ì•˜ë‹¤ê³  ê²½ê³ ê¹Œì§€ í•´ì£¼ëŠ” ë¬´ì„œìš´ ëª¨ìŠµ.\nì´ë²ˆ ê¸°íšŒì— Typora ëŒ€ì•ˆìœ¼ë¡œ ì˜¤í”ˆì†ŒìŠ¤ ë§ˆí¬ë‹¤ìš´ ì—ë””í„°ì¸ mark textë¥¼ ê³¨ëë‹¤. ì´ í¬ìŠ¤íŒ… ë˜í•œ mark downìœ¼ë¡œ ì‘ì„±ì¤‘ì´ë‹¤.\nmark textì˜ ì¥ì \ní˜¸í™˜ì„± : Linux, Windows, MacOS ëª¨ë‘ ì§€ì›í•œë‹¤. ì˜¤í”ˆì†ŒìŠ¤ : ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤(MIT License). mark textì˜ ê°œë°œìëŠ” Mark Textê°€ ì˜ì›íˆ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ë‚¨ì„ê±°ë¼ê³  README íŒŒì¼ì— ì ì–´ë†“ì•˜ë‹¤. í¸ë¦¬í•¨ : ê¹”ë”í•˜ê³  ê°„ê²°í•œ ì¸í„°í˜ì´ìŠ¤, ë¶ˆí•„ìš”í•œ ê¸°ëŠ¥ì„ ëœì–´ëƒ„. ì´ 6ê°œì˜ ê¸°ë³¸ í…Œë§ˆê°€ ì¡´ì¬í•˜ëŠ”ë° ëª¨ë‘ ì´ì˜ê³  ê¹”ë”í•¨. ê¸€ì“°ê¸°ì— ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ í™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.3.7 ì„¤ì¹˜í•  íŒ¨í‚¤ì§€ : mark-text 0.16.3 ë³¸ë¬¸ # 1. mark-text ì„¤ì¹˜ # íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¥¼ í†µí•´ mark textë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì.\n$ brew install --cask mark-text Running `brew update --preinstall`... ==\u0026gt; Auto-updated Homebrew! Updated 1 tap (homebrew/core). ==\u0026gt; Updated Formulae Updated 1 formula. ==\u0026gt; Downloading https://github.com/marktext/marktext/releases/download/v0.16.3/m ==\u0026gt; Downloading from https://objects.githubusercontent.com/github-production-rel ######################################################################## 100.0% ==\u0026gt; Installing Cask mark-text ==\u0026gt; Moving App \u0026#39;Mark Text.app\u0026#39; to \u0026#39;/Applications/Mark Text.app\u0026#39; ğŸº mark-text was successfully installed! 2. ì„¤ì¹˜ê²°ê³¼ í™•ì¸ # homebrew # homebrew ëª…ë ¹ì–´ë¥¼ í†µí•´ mark text íŒ¨í‚¤ì§€ì˜ ì„¤ì¹˜ì •ë³´ë¥¼ í™•ì¸í•œë‹¤.\n$ brew info mark-text mark-text: 0.16.3 https://marktext.app/ /opt/homebrew/Caskroom/mark-text/0.16.3 (123B) From: https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/mark-text.rb ==\u0026gt; Name Mark Text ==\u0026gt; Description None ==\u0026gt; Artifacts Mark Text.app (App) ==\u0026gt; Analytics install: 773 (30 days), 1,104 (90 days), 2,594 (365 days) í™•ì¸í•œ íŒ¨í‚¤ì§€ ì •ë³´\në²„ì „ : 0.16.3 ì„¤ì¹˜ê²½ë¡œ : /opt/homebrew/Caskroom/mark-text/0.16.3 ëŸ°ì¹˜íŒ¨ë“œ í™•ì¸ # ì„¤ì¹˜ê°€ ì™„ë£Œ ì•½ 10ì´ˆ í›„ ëŸ°ì¹˜íŒ¨ë“œì— Mark Text ì•„ì´ì½˜ì´ ìƒˆë¡œ ìƒì„±ëœë‹¤.\n3. ì„¤ì • # ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì‘ì„±ì‹œ ìˆ˜ì •ì‚¬í•­ì„ ì‹¤ì‹œê°„ ë°˜ì˜í•˜ê¸° ìœ„í•œ ìë™ ì €ì¥ ì„¤ì •ì„ í™œì„±í™” í•´ë³´ì.\ní™˜ê²½ì„¤ì •\nì¢Œì¸¡ ìƒë‹¨ì˜ Mark Text \u0026gt; í™˜ê²½ì„¤ì •(Preferences) í´ë¦­\në¬¸ì„œ ìë™ì €ì¥ ì„¤ì •\nGeneral \u0026gt; Automatically save document changes \u0026gt; On ìœ¼ë¡œ í† ê¸€ê°’ì„ ë³€ê²½í•œë‹¤.\nê¸°ë³¸ê°’ì€ Offì´ë‹¤.\nê²°ë¡  # Mark TextëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë§ˆí¬ë‹¤ìš´ ì—ë””í„° ì¹˜ê³  ê´œì°®ì€ í¸ì´ì§€ë§Œ, ì•„ì§ 1ì¼ì°¨ë¼ ë” ì§€ì¼œë³¼ í•„ìš”ê°€ ìˆë‹¤.\në¬¸ì„œ ìë™ì €ì¥ ì„¤ì •ì„ í•´ë„ ë°˜ì˜ì´ ì‚´ì§ ëŠë¦° ë‹¨ì  ê·¸ë¦¬ê³  í•œê¸€ ì…ë ¥ì‹œ ë°€ë¦¼ ê´€ë ¨ ë²„ê·¸ê°€ ë°œìƒí•˜ê³  ìˆëŠ” ì ì€ ì•„ì‰½ë‹¤.\nê·¸ë˜ë„ Mark TextëŠ” ì˜¤í”ˆì†ŒìŠ¤(MIT License)ì´ë©° ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì´ë¼ ë¯¸ë˜ê°€ ë°ë‹¤. ê°€ë³ê²Œ ì‚¬ìš©í•˜ë©´ì„œ ë¦´ë¦¬ì¦ˆ, íŒ¨ì¹˜ ë“±ì˜ ì§„í–‰ì‚¬í•­ì„ ê³„ì† ëª¨ë‹ˆí„°ë§í•  ì˜ˆì •ì´ë‹¤.\n","date":"Dec 8, 2021","permalink":"/blog/review-of-marktext/","section":"Blogs","summary":"TL;DR # ë§ˆí¬ë‹¤ìš´ ì—ë””í„° Typoraê°€ ìœ ë£Œí™”ë˜ì—ˆê¸° ë•Œë¬¸ì— ëŒ€ì•ˆìœ¼ë¡œ mark textë¥¼ ì„¤ì¹˜ í›„ ì‚¬ìš©í•œë‹¤.","title":"ë§ˆí¬ë‹¤ìš´ ì—ë””í„° mark text"},{"content":"TL;DR # í™•ì¸ë°©ë²• 1\n# HBA ì¹´ë“œ ì •ë³´ í™•ì¸ $ lspci -nn | grep -i hba # HBA í¬íŠ¸ ì •ë³´ í™•ì¸ $ ls -l /sys/class/fc_host # HBA Port ìƒíƒœí™•ì¸ $ more /sys/class/fc_host/host?/port_state # WWN ì •ë³´ í™•ì¸ $ more /sys/class/fc_host/host?/port_name í™•ì¸ë°©ë²• 2\n# systool ëª…ë ¹ì–´ ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜ $ yum install sysfsutils # HBA êµ¬ì„±ì •ë³´ í™•ì¸ $ systool -c fc_host # HBA Port ìƒíƒœí™•ì¸ $ systool -c fc_host -v | grep port_state # WWN ì •ë³´ í™•ì¸ $ systool -c fc_host -v | grep port_name ê°œìš” # ë¦¬ëˆ…ìŠ¤ OS í™˜ê²½ì—ì„œ HBA ì¹´ë“œ ì •ë³´, HBA í¬íŠ¸ êµ¬ì„±ê³¼ WWN(World Wide Name) ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 5.x (Tikanga) Architecture : x86_64 Shell : bash í•„ìš”í•œ íŒ¨í‚¤ì§€ : sysfsutils-2.1.0-1.el5 ë³¸ë¡  # ë°©ë²•1. /sys/class ì´ìš© # HBA ì¹´ë“œ ëª©ë¡ í™•ì¸ # ì„œë²„ì— ì¥ì°©ëœ HBA ì¹´ë“œ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤.\n$ lspci -nn | grep -i hba 40:00.0 Fibre Channel [0c04]: QLogic Corp. ISP2532-based 8Gb Fibre Channel to PCI Express HBA [1077:2532] (rev 02) 40:00.1 Fibre Channel [0c04]: QLogic Corp. ISP2532-based 8Gb Fibre Channel to PCI Express HBA [1077:2532] (rev 02) ëª…ë ¹ì–´ ì˜µì…˜\n-nn : PCI IDë¥¼ ê°™ì´ ì¶œë ¥í•œë‹¤. PCI IDëŠ” ì œì¡°ì‚¬ ID(Vendor ID)ì™€ ì¥ì¹˜ ID(Device ID)ë¥¼ ì¡°í•©í•œ ê°’ì´ë‹¤.\nVendor ID : Device ID 1077 : 2532 ---- ---- | +---\u0026gt; ISP2532-based 8Gb Fibre Channel to PCI Express HBA +-----------\u0026gt; QLogic Corp. 40:00 : numberëŠ” 1ê°œì˜ HBA ì¹´ë“œë¥¼ ì˜ë¯¸í•œë‹¤.\n40:00.0, 40:00.1 : 1ê°œ HBA ì¹´ë“œì˜ HBA í¬íŠ¸ 2ê°œë¥¼ ì˜ë¯¸í•œë‹¤.\ní˜„ì¬êµ¬ì„±ì€ 1ê°œì˜ HBA ì¹´ë“œ(QLogic Corp. ISP2532-based 8Gb)ì— 2ê°œì˜ í¬íŠ¸ë¡œ êµ¬ì„±ëœ ìƒíƒœì´ë‹¤.\nQLogic Corp. ISP2532-based (ì¶œì²˜ : Alibaba.com) HBA í¬íŠ¸ëª©ë¡ í™•ì¸ # $ ls -l /sys/class/fc_host total 0 drwxr-xr-x 3 root root 0 Dec 7 10:42 host7 drwxr-xr-x 3 root root 0 Dec 7 10:45 host8 2ê°œì˜ HBA í¬íŠ¸(host7, host8)ë¥¼ ì‚¬ìš©ì¤‘ì´ë‹¤.\nHBA í¬íŠ¸ìƒíƒœ í™•ì¸ # $ more /sys/class/fc_host/host?/port_state :::::::::::::: /sys/class/fc_host/host7/port_state :::::::::::::: Online :::::::::::::: /sys/class/fc_host/host8/port_state :::::::::::::: Online ê° í¬íŠ¸ì˜ ìƒíƒœê°’ì€ Online ë˜ëŠ” Offlineìœ¼ë¡œ ê²°ì •ëœë‹¤.\ní˜„ì¬ ì„œë²„ì˜ HBA í¬íŠ¸(host7, host8) 2ê°œ ì „ë¶€ ì‚¬ìš©ì¤‘ì¸ ìƒíƒœ(Online)ë¡œ í™•ì¸ëœë‹¤.\nWWN í™•ì¸ # WWN\nWWNì€ World Wide Nameì˜ ì¤„ì„ë§ì´ë‹¤. SAN(Storage Area Network)ì—ì„œ FC(Fibre Channel) í¬íŠ¸ë¥¼ ì¸ì‹í•˜ê¸° ìœ„í•œ ê³ ìœ í•œ ID ì£¼ì†Œ ê°’ì„ ì˜ë¯¸í•œë‹¤. WWNì€ FC í¬íŠ¸ë§ˆë‹¤ ê°ê° ë¶€ì—¬ëœë‹¤.\nLAN ì¹´ë“œì˜ ê³ ìœ í•œ ì£¼ì†Œì¸ MAC Addressë‚˜ íœ´ëŒ€ì „í™”ì˜ IMEIì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë™ì¼í•œ WWNì€ ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤.\n$ more /sys/class/fc_host/host?/port_name :::::::::::::: /sys/class/fc_host/host7/port_name :::::::::::::: 0x21000024ff4cf9c6 :::::::::::::: /sys/class/fc_host/host8/port_name :::::::::::::: 0x21000024ff4cf9c7 WWN í™•ì¸ê²°ê³¼\nhost7 í¬íŠ¸ì˜ WWN : 21:00:00:24:ff:4c:f9:c6 host8 í¬íŠ¸ì˜ WWN : 21:00:00:24:ff:4c:f9:c7 ë°©ë²•2. systool ì´ìš© # systool ëª…ë ¹ì–´ëŠ” sysfsutils íŒ¨í‚¤ì§€ì— í¬í•¨ë˜ì–´ ìˆë‹¤. systool ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” sysfsutils íŒ¨í‚¤ì§€ë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ì•¼í•œë‹¤.\nsysfsutils íŒ¨í‚¤ì§€ ì„¤ì¹˜ # yum íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ í†µí•´ì„œ ìµœì‹  ë²„ì „ì˜ sysfsutils íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤.\n$ yum install sysfsutils $ which systool /usr/bin/systool systool ëª…ë ¹ì–´ë¥¼ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœì´ë©°, systool ëª…ë ¹ì–´ íŒŒì¼ì˜ ì ˆëŒ€ê²½ë¡œëŠ” /usr/bin/systool ì´ë‹¤.\n$ rpm -ql sysfsutils /usr/bin/get_module /usr/bin/systool /usr/share/doc/sysfsutils-2.1.0 /usr/share/doc/sysfsutils-2.1.0/AUTHORS /usr/share/doc/sysfsutils-2.1.0/COPYING /usr/share/doc/sysfsutils-2.1.0/CREDITS /usr/share/doc/sysfsutils-2.1.0/ChangeLog /usr/share/doc/sysfsutils-2.1.0/GPL /usr/share/doc/sysfsutils-2.1.0/NEWS /usr/share/doc/sysfsutils-2.1.0/README /usr/share/doc/sysfsutils-2.1.0/libsysfs.txt /usr/share/man/man1/systool.1.gz RPM(Redhat Package Manager) ëª…ë ¹ì–´ë¡œ í™•ì¸í•´ë³¸ ê²°ê³¼ systool ëª…ë ¹ì–´ëŠ” sysfsutils íŒ¨í‚¤ì§€ì— í¬í•¨ë˜ì–´ ìˆë‹¤.\nëª…ë ¹ì–´ ì˜µì…˜\n-ql : ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” íŒŒì¼ë“¤ì˜ ì ˆëŒ€ ê²½ë¡œë¥¼ í™•ì¸\nHBA í¬íŠ¸ ëª©ë¡í™•ì¸ # í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ HBA í¬íŠ¸ ëª©ë¡ì„ í™•ì¸í•œë‹¤.\n$ systool -c fc_host Class = \u0026#34;fc_host\u0026#34; Class Device = \u0026#34;host7\u0026#34; Device = \u0026#34;host7\u0026#34; Class Device = \u0026#34;host8\u0026#34; Device = \u0026#34;host8\u0026#34; 2ê°œì˜ HBA í¬íŠ¸(host7, host8)ê°€ ì¡´ì¬í•œë‹¤.\nHBA í¬íŠ¸ ìƒíƒœí™•ì¸ # $ systool -c fc_host -v | grep port_state port_state = \u0026#34;Online\u0026#34; port_state = \u0026#34;Online\u0026#34; HBA í¬íŠ¸ì˜ ìƒíƒœê°’ì€ Online ë˜ëŠ” Offlineìœ¼ë¡œ ê²°ì •ëœë‹¤.\ní˜„ì¬ ì„œë²„ì˜ 2ê°œ HBA í¬íŠ¸(host7, host8)ëŠ” ëª¨ë‘ Online ìƒíƒœë¡œ í™•ì¸ëœë‹¤.\nWWN í™•ì¸ # ê° HBA í¬íŠ¸ì˜ ê³ ìœ í•œ WWN ì£¼ì†Œë¥¼ í™•ì¸í•œë‹¤.\n$ systool -c fc_host -v | grep port_name port_name = \u0026#34;0x21000024ff4cf9c6\u0026#34; port_name = \u0026#34;0x21000024ff4cf9c7\u0026#34; WWN í™•ì¸ê²°ê³¼\nhost7 í¬íŠ¸ì˜ WWN : 21:00:00:24:ff:4c:f9:c6 host8 í¬íŠ¸ì˜ WWN : 21:00:00:24:ff:4c:f9:c7 ","date":"Dec 7, 2021","permalink":"/blog/identifying-hba-cards-ports-and-wwn-in-linux/","section":"Blogs","summary":"TL;DR # í™•ì¸ë°©ë²• 1","title":"linux WWN í™•ì¸"},{"content":"ê°œìš” # macOS í™˜ê²½ì—ì„œ kindë¥¼ ì„¤ì¹˜í•œ í›„ ê°„í¸í•˜ê²Œ ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.\nkind\nkindëŠ” Kubernetes IN Dockerì˜ ì¤„ì„ë§ë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•´ ì†ì‰½ê²Œ ë¡œì»¬ í™˜ê²½ì—ì„œ kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì´ë‹¤. ë¹„ìŠ·í•œ ì†Œí”„íŠ¸ì›¨ì–´ë¡œëŠ” minikube, k3s ë“±ì´ ìˆë‹¤. ë¡œì»¬ í™˜ê²½ì—ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ ê´€ë ¨ ê°œë°œí•˜ê±°ë‚˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì‹¤ìŠµì´ í•„ìš”í•  ê²½ìš° kindë¥¼ ì´ìš©í•˜ë©´ ê°„í¸í•˜ê³  ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì•„í‚¤í…ì³\nkindì˜ ì•„í‚¤í…ì²˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\nkindê°€ ìƒì„±í•œ 1ëŒ€ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œëŠ” ì•Œê³ ë³´ë©´ 1ê°œì˜ ë„ì»¤ ì»¨í…Œì´ë„ˆë‹¤.\nì¶œì²˜ : https://kind.sigs.k8s.io/docs/design/initial/\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.3.6 docker desktop 4.3.0 (Docker version 20.10.11, build dea9396) : ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ëŠ¥ í™œì„±í™”, íŒ¨í‚¤ì§€ ê´€ë¦¬ì Homebrewë¥¼ ì´ìš©í•œ ì„¤ì¹˜ kind v0.11.1 : íŒ¨í‚¤ì§€ ê´€ë¦¬ì Homebrewë¥¼ ì´ìš©í•œ ì„¤ì¹˜ kubectl v1.22.4 : íŒ¨í‚¤ì§€ ê´€ë¦¬ì Homebrewë¥¼ ì´ìš©í•œ ì„¤ì¹˜ ì „ì œì¡°ê±´ # macOSìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ brewê°€ ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.\në³¸ë¡  # ë‹¨ì¼ í´ëŸ¬ìŠ¤í„° # 1. docker ì„¤ì¹˜ # kindë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ë ¤ë©´ ë¨¼ì € docker desktopì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.\nbrewë¡œ docker desktopì„ ì„¤ì¹˜í•œë‹¤.\n$ brew install --cask docker Running `brew update --preinstall`... ==\u0026gt; Auto-updated Homebrew! Updated 2 taps (homebrew/core and homebrew/cask). ==\u0026gt; Updated Formulae Updated 48 formulae. ==\u0026gt; Updated Casks Updated 21 casks. ==\u0026gt; Downloading https://desktop.docker.com/mac/main/arm64/71786/Docker.dmg ######################################################################## 100.0% ==\u0026gt; Installing Cask docker ==\u0026gt; Moving App \u0026#39;Docker.app\u0026#39; to \u0026#39;/Applications/Docker.app\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker-compose.bash-completion\u0026#39; to \u0026#39;/opt/homebrew/etc/bash_completion.d/docker-compose\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker.zsh-completion\u0026#39; to \u0026#39;/opt/homebrew/share/zsh/site-functions/_docker\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker.fish-completion\u0026#39; to \u0026#39;/opt/homebrew/share/fish/vendor_completions.d/docker.fish\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker-compose.fish-completion\u0026#39; to \u0026#39;/opt/homebrew/share/fish/vendor_completions.d/docker-compose.f ==\u0026gt; Linking Binary \u0026#39;docker-compose.zsh-completion\u0026#39; to \u0026#39;/opt/homebrew/share/zsh/site-functions/_docker_compose\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker.bash-completion\u0026#39; to \u0026#39;/opt/homebrew/etc/bash_completion.d/docker\u0026#39; ğŸº docker was successfully installed! íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¡œ ë„ì»¤ë¥¼ ì„¤ì¹˜í•  ë•Œ --cask ì˜µì…˜ì„ ì¤˜ì„œ GUI í™˜ê²½ì—ì„œ dockerë¥¼ ì„¤ì¹˜í•œë‹¤.\n$ brew info docker Warning: Treating docker as a formula. For the cask, use homebrew/cask/docker docker: stable 20.10.11 (bottled), HEAD Pack, ship and run any application as a lightweight container https://www.docker.com/ Conflicts with: docker-completion (because docker already includes these completion scripts) Not installed From: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/docker.rb License: Apache-2.0 ==\u0026gt; Dependencies Build: go âœ˜, go-md2man âœ˜ ==\u0026gt; Options --HEAD Install HEAD version ==\u0026gt; Analytics install: 52,619 (30 days), 154,260 (90 days), 509,552 (365 days) install-on-request: 52,245 (30 days), 153,216 (90 days), 503,828 (365 days) build-error: 4 (30 days) docker ì•ˆì •í™” ë²„ì „(stable) 20.10.11ì´ ì„¤ì¹˜ëœ ìƒíƒœì´ë‹¤.\nëŸ°ì¹˜íŒ¨ë“œì—ì„œ í™•ì¸í•´ë³¸ ê²°ê³¼ ë„ì»¤ ì•„ì´ì½˜ì´ ìƒˆë¡œ ìƒì„±ë˜ì—ˆë‹¤.\n2. kind ì„¤ì¹˜ # ì„¤ì¹˜ # kindë„ docker desktopê³¼ ë™ì¼í•˜ê²Œ brewë¥¼ ì´ìš©í•´ ìµœì‹ ë²„ì „ì„ ì„¤ì¹˜í•œë‹¤.\n$ brew install kind Running `brew update --preinstall`... ==\u0026gt; Auto-updated Homebrew! Updated 1 tap (homebrew/core). ==\u0026gt; Updated Formulae Updated 2 formulae. ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/kind/manifests/0.11.1 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/kind/blobs/sha256:836dda92f4ab17324edd3ebc8614fb84a55923388df87dc2be4 ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sha256:836dda92f4ab17324edd3ebc8614fb84a ######################################################################## 100.0% ==\u0026gt; Pouring kind--0.11.1.arm64_monterey.bottle.tar.gz ==\u0026gt; Caveats zsh completions have been installed to: /opt/homebrew/share/zsh/site-functions ==\u0026gt; Summary ğŸº /opt/homebrew/Cellar/kind/0.11.1: 8 files, 8.4MB ==\u0026gt; Running `brew cleanup kind`... Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP. Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`) ë²„ì „ í™•ì¸ # kindë¥¼ ì„¤ì¹˜ ì™„ë£Œí•œ í›„ ë²„ì „ì„ í™•ì¸í•´ë³¸ë‹¤.\n$ kind version kind v0.11.1 go1.17.2 darwin/arm64 3. kubectl ì„¤ì¹˜ # $ brew install kubectl homebrew íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ ì´ìš©í•´ kubectlì„ ì„¤ì¹˜í•œë‹¤.\n$ kubectl version Client Version: version.Info{Major:\u0026#34;1\u0026#34;, Minor:\u0026#34;22\u0026#34;, GitVersion:\u0026#34;v1.22.4\u0026#34;, GitCommit:\u0026#34;b695d79d4f967c403a96986f1750a35eb75e75f1\u0026#34;, GitTreeState:\u0026#34;clean\u0026#34;, BuildDate:\u0026#34;2021-11-17T15:41:42Z\u0026#34;, GoVersion:\u0026#34;go1.16.10\u0026#34;, Compiler:\u0026#34;gc\u0026#34;, Platform:\u0026#34;darwin/arm64\u0026#34;} Server Version: version.Info{Major:\u0026#34;1\u0026#34;, Minor:\u0026#34;21\u0026#34;, GitVersion:\u0026#34;v1.21.1\u0026#34;, GitCommit:\u0026#34;5e58841cce77d4bc13713ad2b91fa0d961e69192\u0026#34;, GitTreeState:\u0026#34;clean\u0026#34;, BuildDate:\u0026#34;2021-05-21T23:06:30Z\u0026#34;, GoVersion:\u0026#34;go1.16.4\u0026#34;, Compiler:\u0026#34;gc\u0026#34;, Platform:\u0026#34;linux/arm64\u0026#34;} kubectl ëª…ë ¹ì–´ì˜ ë™ì‘ ìƒíƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ versionì„ ì²´í¬í•´ë³¸ë‹¤.\n4. cluster ìƒì„± # $ kind create cluster Creating cluster \u0026#34;kind\u0026#34; ... âœ“ Ensuring node image (kindest/node:v1.21.1) ğŸ–¼ âœ“ Preparing nodes ğŸ“¦ âœ“ Writing configuration ğŸ“œ âœ“ Starting control-plane ğŸ•¹ï¸ âœ“ Installing CNI ğŸ”Œ âœ“ Installing StorageClass ğŸ’¾ Set kubectl context to \u0026#34;kind-kind\u0026#34; You can now use your cluster with: kubectl cluster-info --context kind-kind Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community ğŸ™‚ kind ë¼ëŠ” ì´ë¦„ì˜ Kubernetes clusterê°€ ìƒì„±ëë‹¤.\nclusterë¥¼ ìƒì„±í•  ë•Œ ì´ë¦„ì„ ë”°ë¡œ ì§€ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ kindë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ìƒì„±ëœë‹¤.\nìƒì„±í•  í´ëŸ¬ìŠ¤í„°ì˜ ì´ë¦„ì„ ì •í•  ìˆ˜ë„ ìˆë‹¤.\n$ kind create cluster --name kind-2 Creating cluster \u0026#34;kind-2\u0026#34; ... âœ“ Ensuring node image (kindest/node:v1.21.1) ğŸ–¼ âœ“ Preparing nodes ğŸ“¦ âœ“ Writing configuration ğŸ“œ âœ“ Starting control-plane ğŸ•¹ï¸ âœ“ Installing CNI ğŸ”Œ âœ“ Installing StorageClass ğŸ’¾ Set kubectl context to \u0026#34;kind-kind-2\u0026#34; You can now use your cluster with: kubectl cluster-info --context kind-kind-2 Have a nice day! ğŸ‘‹ ì´ë²ˆì—ëŠ” kind-2 ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì§€ì •í•´ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•´ë³¸ë‹¤.\n5. cluster ëª©ë¡ í™•ì¸ # $ kind get clusters kind kind-2 ì²˜ìŒì— ìƒì„±í•œ kind í´ëŸ¬ìŠ¤í„°, ì´í›„ ìƒì„±í•œ kind-2 í´ëŸ¬ìŠ¤í„°ê°€ ì¡´ì¬í•œë‹¤.\n6. ì¡°ì‘í•  cluster ë³€ê²½ # $ kubectl cluster-info --context kind-kind-2 Kubernetes control plane is running at https://127.0.0.1:61332 CoreDNS is running at https://127.0.0.1:61332/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use \u0026#39;kubectl cluster-info dump\u0026#39;. kind-kind-2 í´ëŸ¬ìŠ¤í„°ë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” contextë¥¼ kind-kind-2ë¡œ ë³€ê²½í•œë‹¤.\nì´ì œ í˜„ì¬ context ìƒíƒœë¥¼ í™•ì¸í•´ë³´ì.\n$ kubectl config get-contexts CURRENT NAME CLUSTER AUTHINFO NAMESPACE docker-desktop docker-desktop docker-desktop kind-kind kind-kind kind-kind * kind-kind-2 kind-kind-2 kind-kind-2 í˜„ì¬ context ê°’ì´ kind-kind-2ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\n7. í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸ # node ìƒíƒœ í™•ì¸ # $ kubectl get node NAME STATUS ROLES AGE VERSION kind-2-control-plane Ready control-plane,master 64s v1.21.1 1ëŒ€ì˜ control-plane(kind-2-control-plane) ë…¸ë“œê°€ ìƒì„±ë˜ì—ˆë‹¤.\ní˜„ì¬ ì´ ë…¸ë“œì˜ ìƒíƒœëŠ” ì •ìƒ ë™ì‘ì¤‘(Ready)ì´ë‹¤.\npod ìƒíƒœ í™•ì¸ # $ kubectl get pod -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-558bd4d5db-4v54r 1/1 Running 0 76s kube-system coredns-558bd4d5db-6dsqk 1/1 Running 0 76s kube-system etcd-kind-2-control-plane 1/1 Running 0 88s kube-system kindnet-cwbkv 1/1 Running 0 77s kube-system kube-apiserver-kind-2-control-plane 1/1 Running 0 88s kube-system kube-controller-manager-kind-2-control-plane 1/1 Running 0 88s kube-system kube-proxy-6nkmp 1/1 Running 0 77s kube-system kube-scheduler-kind-2-control-plane 1/1 Running 0 88s local-path-storage local-path-provisioner-547f784dff-266sv 1/1 Running 0 76s ì¿ ë²„ë„¤í‹°ìŠ¤ ìš´ì˜ì„ ìœ„í•´ ìƒì„±ë˜ëŠ” ê¸°ë³¸ ì‹œìŠ¤í…œ pod ë“¤ì„ í™•ì¸í•œë‹¤. ëª¨ë“  podê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘ì¤‘(Running)ì¸ ìƒíƒœì´ë‹¤.\n8. í´ëŸ¬ìŠ¤í„° ì‚­ì œ # $ kind delete cluster Deleting cluster \u0026#34;kind\u0026#34; ... í´ëŸ¬ìŠ¤í„° ì‚­ì œì‹œ --name \u0026lt;í´ëŸ¬ìŠ¤í„° ì´ë¦„\u0026gt; ì˜µì…˜ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ì´ë¦„ì„ ì§€ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´, ê¸°ë³¸ í´ëŸ¬ìŠ¤í„°ì¸ kindë¥¼ ì‚­ì œí•˜ê²Œ ëœë‹¤.\n$ kind get clusters kind-2 kind-2 í´ëŸ¬ìŠ¤í„°ëŠ” ì‚­ì œë˜ì§€ ì•Šê³  ë‚¨ì•„ìˆë‹¤.\n$ kind delete cluster --name kind-2 Deleting cluster \u0026#34;kind-2\u0026#34; ... kind-2 í´ëŸ¬ìŠ¤í„°ë„ ì§€ì›Œì¤€ë‹¤.\n$ kind get clusters No kind clusters found. kindì™€ kind-2 í´ëŸ¬ìŠ¤í„°ë¥¼ ëª¨ë‘ ì‚­ì œí–ˆê¸° ë•Œë¬¸ì— ì¡°íšŒ ê²°ê³¼ëŠ” ì—†ë‹¤.\nì‘ìš© # ë©€í‹° í´ëŸ¬ìŠ¤í„° # ìƒì„± # ë©€í‹°ë…¸ë“œëŠ” ë‹¨ì¼ ë…¸ë“œê°€ ì•„ë‹Œ ì—¬ëŸ¬ ëŒ€ì˜ ë…¸ë“œê°€ êµ¬ì„±ëœ í´ëŸ¬ìŠ¤í„° í™˜ê²½ì„ ì˜ë¯¸í•œë‹¤.\në©€í‹°ë…¸ë“œ ìš´ì˜ì„ ìœ„í•´ì„œëŠ” í˜¸ìŠ¤íŠ¸ í™˜ê²½ì˜ ë¦¬ì†ŒìŠ¤(CPU, Memory)ê°€ ë§ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì‹¤ìŠµ ì „ì— ë¯¸ë¦¬ Docker deskopì˜ ë¦¬ì†ŒìŠ¤ ì œí•œ(Resources)ì„ í’€ë„ë¡ í•œë‹¤. ë„ì»¤ì— í• ë‹¹í•˜ëŠ” ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ ìµœì†Œ 8GBë¥¼ ê¶Œì¥í•œë‹¤.\nyaml ì‘ì„± # ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì„¤ì •ì´ ë‹´ê¸´ yaml íŒŒì¼ì„ ì‘ì„±í•œë‹¤.\n$ cat kind-multi-node-clusters.yaml # three node (two workers) cluster config kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 nodes: - role: control-plane - role: worker - role: worker í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì€ 1ëŒ€ì˜ control-plane + 2ëŒ€ì˜ worker node ì´ë‹¤.\ní´ëŸ¬ìŠ¤í„° ìƒì„± # ì‘ì„±í•œ í´ëŸ¬ìŠ¤í„° yaml íŒŒì¼ì„ ì ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œë‹¤.\nkind create cluster \\ --config kind-multi-node-clusters.yaml \\ --name multinode ë¯¸ë¦¬ ì‘ì„±í•œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼(.yaml)ì„ ì‚¬ìš©í•´ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë•Œì—ëŠ” --config \u0026lt;ì„¤ì •íŒŒì¼ ì´ë¦„\u0026gt; ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\ní´ëŸ¬ìŠ¤í„° ìƒì„±ì´ ì™„ë£Œë˜ëŠ” ë°ì— ì•½ 1ë¶„ ì •ë„ ì†Œìš”ëœë‹¤.\n$ kind create cluster \\ --config kind-multi-node-clusters.yaml \\ --name multinode Creating cluster \u0026#34;multinode\u0026#34; ... âœ“ Ensuring node image (kindest/node:v1.21.1) ğŸ–¼ âœ“ Preparing nodes ğŸ“¦ ğŸ“¦ ğŸ“¦ âœ“ Writing configuration ğŸ“œ âœ“ Starting control-plane ğŸ•¹ï¸ âœ“ Installing CNI ğŸ”Œ âœ“ Installing StorageClass ğŸ’¾ âœ“ Joining worker nodes ğŸšœ Set kubectl context to \u0026#34;kind-multinode\u0026#34; You can now use your cluster with: kubectl cluster-info --context kind-multinode Thanks for using kind! ğŸ˜Š multinode í´ëŸ¬ìŠ¤í„° ìƒì„±ì´ ì™„ë£Œë˜ë©´ ìë™ì ìœ¼ë¡œ contextê°€ ìƒˆë¡œ ìƒì„±ëœ í´ëŸ¬ìŠ¤í„°ë¡œ ë³€ê²½ëœë‹¤.\n$ kubectl config current-context kind-multinode í˜„ì¬ ìœ„ì¹˜í•œ contextëŠ” kind-multinodeì´ë‹¤.\në…¸ë“œ í™•ì¸ # $ kubectl get no NAME STATUS ROLES AGE VERSION multinode-control-plane Ready control-plane,master 4m32s v1.21.1 multinode-worker Ready \u0026lt;none\u0026gt; 4m2s v1.21.1 multinode-worker2 Ready \u0026lt;none\u0026gt; 4m1s v1.21.1 3ëŒ€ì˜ ë…¸ë“œ ìƒíƒœê°€ ëª¨ë‘ ì •ìƒ ë™ì‘ì¤‘(Ready)ì´ë‹¤.\nROLES ê°’ì— control-plane,masterê°€ ìˆìœ¼ë©´ Master Nodeë‹¤. ROLES ê°’ì´ \u0026lt;none\u0026gt;ì´ë©´ Worker Nodeë‹¤. ë¬¼ë¡  NAMEì— ë¶™ì€ control-planeê³¼ workerë¡œë„ êµ¬ë¶„ ê°€ëŠ¥í•˜ë‹¤. ì •ë¦¬ # ë©€í‹°ë…¸ë“œ í´ëŸ¬ìŠ¤í„° ì‹¤ìŠµì´ ëë‚¬ë‹¤ë©´ í´ëŸ¬ìŠ¤í„° í™˜ê²½ì„ ì •ë¦¬clean-upí•œë‹¤.\nkind í´ëŸ¬ìŠ¤í„° ì „ì²´ ëª©ë¡ì„ í™•ì¸í•œë‹¤.\n$ kind get clusters kind multinode multinode í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚­ì œí•œë‹¤.\n$ kind delete cluster --name multinode Deleting cluster \u0026#34;multinode\u0026#34; ... multinode í´ëŸ¬ìŠ¤í„°ê°€ ì‚­ì œë˜ì—ˆë‹¤.\n$ kind get clusters kind ê²°ë¡  # ë©€í‹°ë…¸ë“œ ì‹¤ìŠµì„ ë§ˆì§€ë§‰ìœ¼ë¡œ kindì˜ ì„¤ì¹˜ ë° ì‚¬ìš©ë²•ì— ëŒ€í•œ í¬ìŠ¤íŒ…ì„ ë§ˆì¹˜ê² ë‹¤.\nM1 í˜¸í™˜ì„± ë¬¸ì œ\n2021ë…„ 12ì›” 6ì¼ ê¸°ì¤€ìœ¼ë¡œ Apple SiliconM1ì´ íƒ‘ì¬ëœ ë§¥ë¶ì€ ì•„ì§ ì¶œì‹œëœ ì§€ ì–¼ë§ˆ ì§€ë‚˜ì§€ ì•Šì•„ì„œ í˜¸í™˜ì„±ì´ ë°•ì‚´ë‚œ ìƒíƒœë¡œ, Virtual Box ì„¤ì¹˜ë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹¤ìŠµì„ í•˜ëŠ” ë°ì— ì œí•œì´ ìˆë‹¤.\në§Œì•½ macOSì—ì„œ docker ì»¨í…Œì´ë„ˆê°€ ì•„ë‹Œ virtualbox í™˜ê²½ê³¼ ê°™ì€ ê°€ìƒí™” í´ëŸ¬ìŠ¤í„°ë¡œ êµ¬ì„±í•˜ê³  ì‹¶ë‹¤ë©´ macOS ì „ìš© í•˜ì´í¼ë°”ì´ì €ì¸ hyperkitì„ í™œìš©í•˜ë„ë¡ í•˜ì.\në‚˜ë„ ì—¬ëŸ¬ ë°©ë©´ì—ì„œ kubernetes êµ¬ì¶• ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ìˆì§€ë§Œ ë²„ê·¸ì™€ ì•„ì§ ë§‰ë§‰í•œ M1ì˜ í˜¸í™˜ì„±ì— ë§‰í˜€ ì ˆë§í•˜ê³  ìˆëŠ” ì¤‘ì´ë‹¤.\nM1 í˜¸í™˜ì„± ë¬¸ì œëŠ” ì‹œê°„ì´ ì°¨ì°¨ í•´ê²°í•´ì¤„ ê±°ë¼ê³  ì˜ˆìƒí•œë‹¤.\nì°¸ê³ ìë£Œ # kind ê³µì‹ Quick Start ê°€ì´ë“œ ë¬¸ì„œ : https://kind.sigs.k8s.io/docs/user/quick-start/\n","date":"Dec 6, 2021","permalink":"/blog/k8s/kind-quickstart/","section":"Blogs","summary":"ê°œìš” # macOS í™˜ê²½ì—ì„œ kindë¥¼ ì„¤ì¹˜í•œ í›„ ê°„í¸í•˜ê²Œ ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.","title":"kind ì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì¶•"},{"content":"ê°œìš” # M1 ì¹©ì…‹ì´ ì¥ì°©ëœ ë§¥ë¶ì—ì„œ Homebrewë¥¼ ì´ìš©í•´ mongodbë¥¼ ì„¤ì¹˜í•œë‹¤.\nmongodbë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆë‹¤.\nmongodb ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” tar ballì„ ë°›ì•„ì„œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ ë³µì¡í•˜ë‹¤. macOSë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Homebrewë¡œ ì„¤ì¹˜í•˜ëŠ”ê²Œ ê°„í¸í•˜ê³  ë¹ ë¥´ë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.3.5 MongoDB 5.0 : Homebrewë¥¼ í†µí•œ ì„¤ì¹˜ ì „ì œì¡°ê±´ # Homebrew ì„¤ì¹˜ê°€ ì™„ë£Œëœ macOS\në³¸ë¬¸ # ì„¤ì¹˜ # 1. tap í™•ì¸ # homebrewì—ì„œ tapì€ homebrewì˜ ê¸°ë³¸ ë ˆí¬ì§€í„°ë¦¬(Master Repository)ì— í¬í•¨ë˜ì§€ ì•Šì€ ë‹¤ë¥¸ ë ˆí¬ì§€í„°ë¦¬ë¥¼ ì˜ë¯¸í•œë‹¤. ë ˆí¬ì§€í„°ë¦¬ëŠ” ì—¬ëŸ¬ íŒ¨í‚¤ì§€ê°€ ëª¨ì—¬ìˆëŠ” ì €ì¥ì†Œë¼ê³  ë³´ë©´ ëœë‹¤.\ní˜„ì¬ brewì— ë“±ë¡ëœ íƒ­ ëª©ë¡ì„ í™•ì¸í•´ë³´ì.\n$ brew tap homebrew/cask homebrew/core homebrew/cask, homebrew/coreëŠ” homebrew ì„¤ì¹˜ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ëŠ” tapì´ë‹¤.\n2. mongodb tap ë“±ë¡ # mongodb community editionì„ ë‹¤ìš´ë¡œë“œ ë°›ê¸° ìœ„í•´ mongodbì—ì„œ ê³µì‹ì ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” The MongoDB Homebrew tapì„ ë“±ë¡í•œë‹¤.\n$ brew tap mongodb/brew ==\u0026gt; Tapping mongodb/brew Cloning into \u0026#39;/opt/homebrew/Library/Taps/mongodb/homebrew-brew\u0026#39;... remote: Enumerating objects: 794, done. remote: Counting objects: 100% (291/291), done. remote: Compressing objects: 100% (208/208), done. remote: Total 794 (delta 144), reused 139 (delta 80), pack-reused 503 Receiving objects: 100% (794/794), 173.59 KiB | 1.19 MiB/s, done. Resolving deltas: 100% (382/382), done. Tapped 14 formulae (30 files, 238.3KB). mongodb tapì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.\n$ brew tap homebrew/cask homebrew/core mongodb/brew mongodb/brewë¼ëŠ” ì´ë¦„ì˜ tapì´ ì˜ ë“±ë¡ë˜ì—ˆë‹¤.\n3. mongodb ì„¤ì¹˜ # ë“±ë¡í•œ mongodb tapì—ì„œ mongodb community editionì„ ë‹¤ìš´ë¡œë“œ ë°›ëŠ”ë‹¤.\nìµœì‹  ë²„ì „ì˜ mongodb ì„¤ì¹˜\n$ brew install mongodb-community ì„¤ì¹˜ì‹œ ë”°ë¡œ ë²„ì „ì„ í‘œê¸°í•˜ì§€ ì•Šìœ¼ë©´ ìë™ì ìœ¼ë¡œ ìµœì‹  ë²„ì „(latest)ì˜ mongodb community editionì„ ì„¤ì¹˜í•œë‹¤.\níŠ¹ì • ë²„ì „ì˜ mongodb ì„¤ì¹˜\nmongodb-community edition 5.0 ë²„ì „ì„ ì„¤ì¹˜í•œë‹¤. ì°¸ê³ ë¡œ MongoDB 5.0 Community Editionì€ macOS 10.14 ë²„ì „ë¶€í„° ì§€ì›í•œë‹¤.\n$ brew install mongodb-community@5.0 Updating Homebrew... ==\u0026gt; Auto-updated Homebrew! Updated 1 tap (homebrew/core). ==\u0026gt; Updated Formulae Updated 1 formula. ==\u0026gt; Downloading https://fastdl.mongodb.org/tools/db/mongodb-database-tools-macos ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/brotli/manifests/1.0.9 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/brotli/blobs/sha256:5e9bddd862b ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/c-ares/manifests/1.18.1 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/c-ares/blobs/sha256:7b1eacc9efb ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/icu4c/manifests/69.1 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/icu4c/blobs/sha256:3771949f1799 ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/macos-term-size/manifests/1.0.0 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/macos-term-size/blobs/sha256:f4 ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/node/14/manifests/14.18.1 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/node/14/blobs/sha256:92ea528d60 ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/mongosh/manifests/1.1.4 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/mongosh/blobs/sha256:b3ccc98848 ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://fastdl.mongodb.org/osx/mongodb-macos-x86_64-5.0.3.tgz ######################################################################## 100.0% ==\u0026gt; Installing mongodb-community from mongodb/brew ==\u0026gt; Installing dependencies for mongodb/brew/mongodb-community: mongodb-database-tools, brotli, c-ares, icu4c, macos-term-size, node@14 and mongosh ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: mongodb-database- ğŸº /opt/homebrew/Cellar/mongodb-database-tools/100.5.1: 13 files, 115.7MB, built in 3 seconds ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: brotli ==\u0026gt; Pouring brotli--1.0.9.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/brotli/1.0.9: 25 files, 2.3MB ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: c-ares ==\u0026gt; Pouring c-ares--1.18.1.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/c-ares/1.18.1: 87 files, 665.3KB ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: icu4c ==\u0026gt; Pouring icu4c--69.1.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/icu4c/69.1: 259 files, 73.3MB ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: macos-term-size ==\u0026gt; Pouring macos-term-size--1.0.0.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/macos-term-size/1.0.0: 5 files, 36.9KB ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: node@14 ==\u0026gt; Pouring node@14--14.18.1.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/node@14/14.18.1: 3,923 files, 52.6MB ==\u0026gt; Installing mongodb/brew/mongodb-community dependency: mongosh ==\u0026gt; Pouring mongosh--1.1.4.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/mongosh/1.1.4: 5,617 files, 32.5MB ==\u0026gt; Installing mongodb/brew/mongodb-community ==\u0026gt; Caveats To start mongodb/brew/mongodb-community now and restart at login: brew services start mongodb/brew/mongodb-community Or, if you don\u0026#39;t want/need a background service you can just run: mongod --config /opt/homebrew/etc/mongod.conf ==\u0026gt; Summary ğŸº /opt/homebrew/Cellar/mongodb-community/5.0.3: 11 files, 180.7MB, built in 2 seconds ==\u0026gt; Caveats ==\u0026gt; mongodb-community To start mongodb/brew/mongodb-community now and restart at login: brew services start mongodb/brew/mongodb-community Or, if you don\u0026#39;t want/need a background service you can just run: mongod --config /opt/homebrew/etc/mongod.conf mongodb ì„¤ì¹˜ê°€ ë¬¸ì œì—†ì´ ëë‚¬ë‹¤.\nmongodb ê²½ë¡œì•ˆë‚´ # M1 ë§¥ë¶ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ìš”íŒŒì¼, ë””ë ‰í† ë¦¬ì˜ ê²½ë¡œëŠ” ì•„ë˜ì™€ ê°™ë‹¤. Intel CPUê°€ ì¥ì°©ëœ ë§¥ë¶ì€ M1 ë§¥ë¶ì˜ ê²½ë¡œì™€ ë‹¤ë¥´ë‹¤.\nì„¤ì •íŒŒì¼ : /opt/homebrew/etc/mongod.conf ë¡œê·¸ ë””ë ‰í† ë¦¬ : /opt/homebrew/var/log/mongodb ë°ì´í„° ë””ë ‰í† ë¦¬ : /opt/homebrew/var/mongodb 4. mongodb ì‹¤í–‰ # $ brew services start mongodb-community@5.0 ==\u0026gt; Successfully started `mongodb-community` (label: homebrew.mxcl.mongodb-community) mongodb-community ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•œë‹¤.\n$ brew services list Name Status User File emacs stopped mongodb-community started xxx ~/Library/LaunchAgents/homebrew.mxcl.mongodb-community.plist unbound stopped mongodb-communityê°€ ì‹¤í–‰ì¤‘ì´ë‹¤.\n$ ps -ef | grep mongo | grep -v grep 501 43139 1 0 1:04AM ?? 0:02.63 /opt/homebrew/opt/mongodb-community/bin/mongod --config /opt/homebrew/etc/mongod.conf ps ëª…ë ¹ì–´ë¡œë„ mongodbìš© ì„œë¹„ìŠ¤ ë°ëª¬ì¸ mongodê°€ ì‹¤í–‰ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nError: Unknown command: services ì—ëŸ¬ ë°œìƒì‹œ í•´ê²°ë°©ë²• # ì¦ìƒ\nì„¤ì¹˜í•œ mongodbë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.\n$ brew services start mongodb-community@5.0 Error: Unknown command: services ì›ì¸\nbrew services ëª…ë ¹ì–´ë¥¼ ì°¾ì§€ ëª»í•´ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë‹¤. brew servicesëŠ” ìˆ¨ê²¨ì§„ ëª…ë ¹ì–´ì´ê¸° ë•Œë¬¸ì— homebrewë¥¼ ì„¤ì¹˜í•œ í›„ ë”°ë¡œ ì„¤ì •ì„ í•´ì¤˜ì•¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.\ní•´ê²°ë°©ë²•\ntapì— homebrew/servicesë¥¼ ìƒˆë¡œ ì¶”ê°€í•œë‹¤.\n$ brew tap homebrew/services ==\u0026gt; Tapping homebrew/services Cloning into \u0026#39;/opt/homebrew/Library/Taps/homebrew/homebrew-services\u0026#39;... remote: Enumerating objects: 1535, done. remote: Counting objects: 100% (414/414), done. remote: Compressing objects: 100% (303/303), done. remote: Total 1535 (delta 171), reused 283 (delta 101), pack-reused 1121 Receiving objects: 100% (1535/1535), 448.79 KiB | 1.82 MiB/s, done. Resolving deltas: 100% (647/647), done. Tapped 1 command (38 files, 558.8KB). $ brew tap homebrew/cask homebrew/core homebrew/services mongodb/brew tap ëª©ë¡ì— homebrew/servicesê°€ ìƒˆë¡œ ì¶”ê°€ë˜ì—ˆë‹¤.\n$ brew services Name Status User File emacs stopped mongodb-community stopped unbound stopped homebrew/services tapì„ ìƒˆë¡œ ì¶”ê°€í•œ í›„ brew services ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì˜¤ë¥˜ëŠ” í•´ê²°ëœë‹¤.\n5. mongodb ì ‘ì† # mongodbì— ì ‘ì†í•˜ë ¤ë©´ mongoshëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•œë‹¤. mongodbëŠ” ê¸°ë³¸ì ìœ¼ë¡œ TCP 27017 í¬íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.\nmongoshì˜ ì˜ˆì „ë²„ì „ ëª…ë ¹ì–´ì¸ mongoëŠ” mongoshë¡œ ëŒ€ì²´(Superseded)ëœ í›„ ì°¨ê¸° ë²„ì „ì—ì„œ ì‚­ì œë  ì˜ˆì •ì´ë¯€ë¡œ ê°€ê¸‰ì ì´ë©´ ì‚¬ìš©í•˜ì§€ ë§ì.\n$ mongosh Current Mongosh Log ID:\t61a1070d11290afddd3fa6d8 Connecting to:\tmongodb://127.0.0.1:27017/?directConnection=true\u0026amp;serverSelectionTimeoutMS=2000 Using MongoDB:\t5.0.3 Using Mongosh:\t1.1.4 For mongosh info see: https://docs.mongodb.com/mongodb-shell/ ------ The server generated these startup warnings when booting: 2021-11-27T01:04:58.779+09:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted ------ Warning: Found ~/.mongorc.js, but not ~/.mongoshrc.js. ~/.mongorc.js will not be loaded. You may want to copy or rename ~/.mongorc.js to ~/.mongoshrc.js. test\u0026gt; mongodbì— ì œëŒ€ë¡œ ì ‘ì†í–ˆë‹¤.\nmongodbì— ì ‘ì†í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ test DBë¥¼ ì‚¬ìš©í•œë‹¤.\ntest\u0026gt; db test ì´ì œ ì „ì²´ DB ëª©ë¡ì„ í™•ì¸í•œë‹¤.\ntest\u0026gt; show dbs admin 41 kB config 111 kB local 73.7 kB test\u0026gt; use admin switched to db admin ì‚¬ìš©ì¤‘ì¸ DBë¥¼ testì—ì„œ adminìœ¼ë¡œ ë³€ê²½í•´ë³¸ë‹¤.\ntest\u0026gt; exit $ mongoshì—ì„œ ë¹ ì ¸ë‚˜ì™€ macOSì˜ ì‰˜ë¡œ ëŒì•„ì˜¤ê³  ì‹¶ë‹¤ë©´ exit ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.\n$ mongotop 2021-11-27T01:16:06.812+0900\tconnected to: mongodb://localhost/ ns total read write 2021-11-27T01:16:07+09:00 admin.system.version 0ms 0ms 0ms config.system.sessions 0ms 0ms 0ms config.transactions 0ms 0ms 0ms local.system.replset 0ms 0ms 0ms ns total read write 2021-11-27T01:16:08+09:00 admin.system.version 0ms 0ms 0ms config.system.sessions 0ms 0ms 0ms config.transactions 0ms 0ms 0ms local.system.replset 0ms 0ms 0ms ns total read write 2021-11-27T01:16:09+09:00 admin.system.version 0ms 0ms 0ms config.system.sessions 0ms 0ms 0ms config.transactions 0ms 0ms 0ms local.system.replset 0ms 0ms 0ms mongotopì€ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë¥¼ ëª¨ë‹ˆí„°ë§í•  ë•Œ ì‚¬ìš©í•˜ëŠ” top ëª…ë ¹ì–´ì˜ mongodb ë²„ì „ì´ë‹¤. mongotopì„ ì‹¤í–‰í•˜ë©´ ë™ì‘ì¤‘ì¸ mongodì™€ ì—°ê²°ëœ í›„ DB ì‚¬ìš©ëŸ‰ í†µê³„ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë½‘ì•„ë‚¸ë‹¤.\n6. ì‹¤ìŠµí™˜ê²½ ì •ë¦¬ # mongodb ì‹¤ìŠµì´ ëë‚œ í›„ì—ëŠ” ë°˜ë“œì‹œ Homebrewë¥¼ ì´ìš©í•´ì„œ mongodb ì„œë¹„ìŠ¤ë¥¼ ì¢…ë£Œí•´ì¤€ë‹¤.\nmongodb í¬íŠ¸ê°€ ê³„ì† ì—´ë ¤ìˆìœ¼ë©´ ë³´ì•ˆì— ë¬¸ì œê°€ ë ìˆ˜ë„ ìˆê³  ë˜í•œ ê°œì¸ ì»´í“¨í„°ì˜ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤.\nmongodb ì„œë¹„ìŠ¤ ì¢…ë£Œ\n$ brew services stop mongodb-community@5.0 Stopping `mongodb-community`... (might take a while) ==\u0026gt; Successfully stopped `mongodb-community` (label: homebrew.mxcl.mongodb-community) mongodb ì„œë¹„ìŠ¤ ìƒíƒœí™•ì¸\n$ brew services list Name Status User File emacs stopped mongodb-community stopped unbound stopped mongodb-community ì„œë¹„ìŠ¤ê°€ ì¤‘ì§€ëœ ìƒíƒœ(stopped)ë‹¤.\n$ ps -ef | grep mongo | grep -v grep mongodë„ ì¤‘ì§€ëœ ê²ƒì´ í™•ì¸ëë‹¤. ë!\nì¶”ê°€ì„¤ì • # ì™¸ë¶€ì ‘ì† í—ˆìš©í•˜ê¸° # mongodbë¥¼ ì„¤ì¹˜í•˜ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì¹˜í•œ ë¡œì»¬(127.0.0.1)ì—ì„œë§Œ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆë‹¤. ë°©í™”ë²½ì´ ì—´ë ¤ìˆì–´ë„ ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¬ ìˆ˜ ì—†ëŠ” ìƒíƒœì´ë¯€ë¡œ, ì™¸ë¶€ì—ì„œ ì ‘ì†ì´ í•„ìš”í•˜ë‹¤ë©´ mongodb ì„¤ì •íŒŒì¼(mongod.conf)ì„ ì—´ì–´ì„œ ì ‘ì† ê°€ëŠ¥í•œ IP ì„¤ì •ê°’(bindIp)ì„ ë³€ê²½í•˜ë„ë¡ í•œë‹¤.\nì„¤ì •íŒŒì¼ í™•ì¸\nmongodb ì„¤ì •íŒŒì¼ì˜ ì´ë¦„ì€ mongodb.conf ì´ë‹¤.\nM1 mac ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •íŒŒì¼ì˜ ë””í´íŠ¸ ìœ„ì¹˜ëŠ” /opt/homebrew/etc/mongod.conf ì´ë‹¤.\n$ cat /opt/homebrew/etc/mongod.conf systemLog: destination: file path: /opt/homebrew/var/log/mongodb/mongo.log logAppend: true storage: dbPath: /opt/homebrew/var/mongodb net: bindIp: 127.0.0.1 mongodb í¬íŠ¸í™•ì¸\n$ netstat -antp tcp | grep 27017 tcp4 0 0 127.0.0.1.27017 *.* LISTEN 4ë²ˆì§¸ ì¹¸ì— ìœ„ì¹˜í•œ Local Address ê°’ì´ 127.0.0.1.27017 ì´ë‹¤.\nì°¸ê³ ì‚¬í•­ : macOSìš© netstatì€ Linuxì—ì„œì˜ netstatê³¼ ëª…ë ¹ì–´ ì˜µì…˜ ì²´ê³„ê°€ ì‚´ì§ ë‹¤ë¥´ë‹¤.\nì„¤ì •íŒŒì¼ ë³€ê²½\nvi í¸ì§‘ê¸°ë¥¼ ì´ìš©í•´ì„œ bindIp ê°’ì„ 127.0.0.1ì—ì„œ 0.0.0.0 ìœ¼ë¡œ ë³€ê²½í•´ì¤€ë‹¤.\n$ vi /opt/homebrew/etc/mongod.conf systemLog: destination: file path: /opt/homebrew/var/log/mongodb/mongo.log logAppend: true storage: dbPath: /opt/homebrew/var/mongodb net: bindIp: 0.0.0.0 ì„œë¹„ìŠ¤ ì¬ì‹œì‘\në³€ê²½ëœ bindIp ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ homebrew ëª…ë ¹ì–´ë¡œ mongodbë¥¼ ì¬ì‹œì‘í•œë‹¤.\n$ brew services restart mongodb-community@5.0 Stopping `mongodb-community`... (might take a while) ==\u0026gt; Successfully stopped `mongodb-community` (label: homebrew.mxcl.mongodb-community) ==\u0026gt; Successfully started `mongodb-community` (label: homebrew.mxcl.mongodb-community) mongodb í¬íŠ¸ ì¬í™•ì¸\n$ netstat -antp tcp | grep 27017 tcp4 0 0 *.27017 *.* LISTEN 4ë²ˆì§¸ ì¹¸ì— ìœ„ì¹˜í•œ Local Address ê°’ì´ 127.0.0.1.27017ì—ì„œ *.27017ë¡œ ë³€ê²½ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì´ì œ mongodbë¡œ ëª¨ë“  IPê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ëŠ” ê±¸ ì˜ë¯¸í•œë‹¤.\nê²°ë¡  # ì‚¬ì‹¤ ì„¤ì¹˜, êµ¬ì„±ë³´ë‹¤ ì¤‘ìš”í•œê±´ ìš´ì˜ì´ ì§€ì† ê°€ëŠ¥í•˜ë„ë¡ ìœ ì§€í•´ì£¼ëŠ” ë³´ì•ˆ ì„¤ì •ì´ë‹¤.\nmongodb ë³´ì•ˆ ì„¤ì •ì€ ì´ ê¸€ì— ì„¤ëª…í•˜ê¸°ì—” ë„ˆë¬´ ë°©ëŒ€í•˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ì¸ ì„¤ì¹˜ ê³¼ì •ë§Œ ë‹¤ë£¨ì—ˆë‹¤.\nìë£Œë¥¼ ì¡°ì‚¬í•˜ëŠ” ê³¼ì •ì—ì„œ ê°œì¸ ëª©ì ì˜ ê°œë°œìš© mongodb ì„œë²„ê°€ ëœì„¬ì›¨ì–´ë¡œ í„¸ë¦¬ëŠ” ì¼€ì´ìŠ¤ê°€ ì€ê·¼íˆ ë§ì€ ê²ƒ ê°™ë‹¤. ì´ ê¸€ì„ í†µí•´ ê³„ì† ìƒì‹œ ìš´ì˜ë˜ëŠ” ê°œë°œìš© mongodbë¥¼ ì„¤ì¹˜í–ˆë‹¤ë©´, ë°˜ë“œì‹œ ë‹¤ë¥¸ ë³´ì•ˆê´€ë ¨ í¬ìŠ¤íŠ¸ë“¤ì„ ì°¸ê³ í•´ì„œ ê´€ë¦¬ììš© ê³„ì • ìƒì„±, Security authorization enabled ë“±ì˜ DB ë³´ì•ˆ ì„¤ì •ì„ ì ìš©í•´ ìš´ì˜í•˜ë„ë¡ í•˜ì. ì•„ë¬´ë¦¬ ê°œì¸ í•™ìŠµìš© mongodbì¼ì§€ë¼ë„ í•´ì»¤í•œí…Œ í„¸ë¦¬ë©´ ê·€ì°®ì•„ì§€ë‹ˆê¹Œ. ë!\nì°¸ê³ ìë£Œ # https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/ : MongoDB ê³µì‹í˜ì´ì§€ì˜ ì„¤ì¹˜ ê°€ì´ë“œ ë¬¸ì„œ\nhttps://github.com/mongodb/homebrew-brew : mongodb tap ê³µì‹í˜ì´ì§€\nhttps://apple.stackexchange.com/questions/150300/need-help-using-homebrew-services-command : brew services ëª…ë ¹ì–´ ì—ëŸ¬ ë°œìƒ ê´€ë ¨ í•´ê²°ë°©ë²•\n","date":"Nov 27, 2021","permalink":"/blog/installing-mongodb-on-m1-mac/","section":"Blogs","summary":"ê°œìš” # M1 ì¹©ì…‹ì´ ì¥ì°©ëœ ë§¥ë¶ì—ì„œ Homebrewë¥¼ ì´ìš©í•´ mongodbë¥¼ ì„¤ì¹˜í•œë‹¤.","title":"mongodb ì„¤ì¹˜"},{"content":"ê°œìš” # minikube ê¸°ë°˜ì˜ ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ prometheusì™€ grafanaë¥¼ ì„¤ì¹˜, êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : brew v3.3.5 Kubernetes í™˜ê²½ Docker Desktop v4.2.0 (70708) : Kubernetes ê¸°ëŠ¥ í™œì„±í™”ë¨ (Enable Kubernetes) minikube v1.24.0 : brewë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜. ë‹¨ì¼ ë…¸ë“œ 1ê°œ ìƒì„±. kubectl v1.22.4 : brewë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜ helm v3.7.1 : brewë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì¹˜ prometheus v2.31.1 : helmì„ ì´ìš©í•˜ì—¬ ì„¤ì¹˜ ë° ë°°í¬ grafana v8.2.5 : helmì„ ì´ìš©í•˜ì—¬ ì„¤ì¹˜ ë° ë°°í¬ ë³¸ë¬¸ # 1. minikube, kubectl ì„¤ì¹˜ # macOSìš© ì±„í‚¤ì§€ ê´€ë¦¬ìì¸ brewë¥¼ ì´ìš©í•´ minikubeì™€ kubectlì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n$ brew install minikube $ brew install kubectl 2. helm 3 ì„¤ì¹˜ # helmì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ íŒ¨í‚¤ì§€ ê´€ë¦¬ì(Kubernetes Package Manager)ì…ë‹ˆë‹¤. helmì„ ì´ìš©í•˜ë©´ prometheusì™€ grafanaë¥¼ ì„¤ì¹˜ì™€ ë™ì‹œì— ìë™ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nhelm ì„¤ì¹˜ # macOSìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ brewë¥¼ ì´ìš©í•´ helmì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. brewë¥¼ ì´ìš©í•´ ì„¤ì¹˜í•˜ëŠ” ì´ìœ ëŠ” íŒ¨í‚¤ì§€ ê´€ë¦¬ê°€ í¸ë¦¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n$ brew install helm Updating Homebrew... ==\u0026gt; Auto-updated Homebrew! Updated 2 taps (homebrew/core and homebrew/cask). [...] ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/helm/manifests/3.7.1 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/helm/blobs/sha256:8587566f16cef ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Pouring helm--3.7.1.arm64_monterey.bottle.tar.gz ==\u0026gt; Caveats zsh completions have been installed to: /opt/homebrew/share/zsh/site-functions ==\u0026gt; Summary ğŸº /opt/homebrew/Cellar/helm/3.7.1: 60 files, 51MB helm 3.7.1ì´ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤. 60ê°œì˜ íŒŒì¼ì´ í¬í•¨ë˜ì–´ ìˆê³ , helmì˜ ìš©ëŸ‰ì€ 51MB ì…ë‹ˆë‹¤.\nhelm ì„¤ì¹˜ ì •ë³´ í™•ì¸ # helmì˜ ì•ˆì •í™”ëœ ë²„ì „(Stable)ì¸ 3.7.1ì´ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.\në²„ì „ì •ë³´ ì•„ë˜ì—ëŠ” Kubernetes package managerë¼ëŠ” ê°„ë‹¨í•œ ì„¤ëª…ì´ ì í˜€ìˆìŠµë‹ˆë‹¤.\n$ brew info helm helm: stable 3.7.1 (bottled), HEAD Kubernetes package manager https://helm.sh/ /opt/homebrew/Cellar/helm/3.7.1 (60 files, 51MB) * Poured from bottle on 2021-11-25 at 20:48:43 From: https://githubcom/Homebrew/homebrew-core/blob/HEAD/Formula/helm.rb License: Apache-2.0 ==\u0026gt; Dependencies Build: go âœ˜ ==\u0026gt; Options --HEAD Install HEAD version ==\u0026gt; Caveats zsh completions have been installed to: /opt/homebrew/share/zsh/site-functions ==\u0026gt; Analytics install: 35,802 (30 days), 121,935 (90 days), 487,738 (365 days) install-on-request: 35,054 (30 days), 119,382 (90 days), 477,316 (365 days) build-error: 17 (30 days) helm ë²„ì „ í™•ì¸ # helm ëª…ë ¹ì–´ê°€ ì˜ ì‹¤í–‰ë˜ëŠ” ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n$ helm version version.BuildInfo{Version:\u0026#34;v3.7.1\u0026#34;, GitCommit:\u0026#34;1d11fcb5d3f3bf00dbe6fe31b8412839a96b3dc4\u0026#34;, GitTreeState:\u0026#34;clean\u0026#34;, GoVersion:\u0026#34;go1.17.2\u0026#34;} 3. minikube êµ¬ì„± # minikubeë¥¼ ì´ìš©í•´ ë‹¨ì¼ ë…¸ë“œë¡œ êµ¬ì„±ëœ kubernetes í™˜ê²½ì„ ë¨¼ì € ë§Œë“¤ê³ , ê·¸ 1ëŒ€ì˜ ë…¸ë“œ ìœ„ì— prometheusì™€ grafanaë¥¼ ë°°í¬í•´ì„œ ì„œë¹„ìŠ¤í•  ê³„íšì…ë‹ˆë‹¤.\nì´ë²ˆ ì‹œë‚˜ë¦¬ì˜¤ëŠ” 2ëŒ€ ì´ìƒì˜ ë©€í‹° ë…¸ë“œê°€ ì•„ë‹ˆë¼ ë§ˆìŠ¤í„° ë…¸ë“œ 1ê°œë§Œìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.\nminikube ì‹œì‘ # docker í™˜ê²½ì„ ì´ìš©í•´ì„œ minikube ë…¸ë“œ 1ê°œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. í•´ë‹¹ ë…¸ë“œì— ë¦¬ì†ŒìŠ¤ëŠ” 2ì½”ì–´(CPUs=2)ì— ë©”ëª¨ë¦¬ê°€ 1988MBê°€ í• ë‹¹ë˜ì—ˆìŠµë‹ˆë‹¤.\n$ minikube start -p prom-demo ğŸ˜„ [prom-demo] Darwin 12.0.1 (arm64) ì˜ minikube v1.24.0 âœ¨ ìë™ì ìœ¼ë¡œ docker ë“œë¼ì´ë²„ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë“œë¼ì´ë²„ ëª©ë¡: virtualbox, ssh ğŸ‘ prom-demo í´ëŸ¬ìŠ¤í„°ì˜ prom-demo ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì‹œì‘í•˜ëŠ” ì¤‘ ğŸšœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ... ğŸ”¥ Creating docker container (CPUs=2, Memory=1988MB) ... ğŸ³ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘ â–ª ì¸ì¦ì„œ ë° í‚¤ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ ... â–ª ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ë¶€íŒ…... â–ª RBAC ê·œì¹™ì„ êµ¬ì„±í•˜ëŠ” ì¤‘ ... ğŸ” Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸... â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5 ğŸŒŸ ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass ğŸ„ ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ \u0026#34;prom-demo\u0026#34; í´ëŸ¬ìŠ¤í„°ì™€ \u0026#34;default\u0026#34; ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. -p ëŠ” profile ì˜µì…˜ì…ë‹ˆë‹¤. minikubeì—ì„œëŠ” profileì„ í†µí•´ ì—¬ëŸ¬ ê°œì˜ ì‹¤ìŠµí™˜ê²½ì„ í¸í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nprofile ëª©ë¡ í™•ì¸ # ì œ ê²½ìš°ëŠ” ì˜ˆì „ì— ì´ë¯¸ ìƒì„±í•´ë†“ì€ mnlab profileì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ ì•„ë˜ì— ë°©ê¸ˆ ìƒì„±í•œ prom-demo profileì´ ë³´ì…ë‹ˆë‹¤.\n$ minikube profile list |-----------|-----------|---------|--------------|------|---------|---------|-------| | Profile | VM Driver | Runtime | IP | Port | Version | Status | Nodes | |-----------|-----------|---------|--------------|------|---------|---------|-------| | mnlab | docker | docker | 192.168.49.2 | 8443 | v1.22.3 | Stopped | 4 | | prom-demo | docker | docker | 192.168.49.2 | 8443 | v1.22.3 | Running | 1 | |-----------|-----------|---------|--------------|------|---------|---------|-------| prom-demo profileì€ í˜„ì¬ 1ëŒ€ì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©° ë™ì‘ì¤‘(Running)ì…ë‹ˆë‹¤.\nprofile ìƒíƒœ í™•ì¸ # $ minikube status -p prom-demo prom-demo type: Control Plane host: Running kubelet: Running apiserver: Running kubeconfig: Configured prom-demo ë¼ëŠ” ì´ë¦„ì˜ ë§ˆìŠ¤í„° ë…¸ë“œ(Control Plane) 1ëŒ€ë§Œ ì¡´ì¬í•˜ê³ , ì˜ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n$ minikube node list -p prom-demo prom-demo\t192.168.49.2 4. prometheus ì„¤ì¹˜ ë° êµ¬ì„± # $ kubectl create ns prometheus namespace/prometheus created prometheusë¼ëŠ” ì´ë¦„ì˜ namespaceë¥¼ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤. ëª…ë ¹ì–´ì˜ nsëŠ” namespaceì˜ ì•½ì–´ì…ë‹ˆë‹¤.\n$ kubectl config set-context --current --namespace prometheus Context \u0026#34;prom-demo\u0026#34; modified. namespace í™˜ê²½ì„ ìƒˆë¡œ ìƒì„±í•œ prometheusë¡œ ë³€ê²½í•´ì¤ë‹ˆë‹¤. ì´ì œ prometheus namespace ìœ„ì— prometheusì™€ grafanaë¥¼ ì„¤ì¹˜í•  ê²ƒì…ë‹ˆë‹¤.\n$ kubectl config get-contexts CURRENT NAME CLUSTER AUTHINFO NAMESPACE docker-desktop docker-desktop docker-desktop * prom-demo prom-demo prom-demo prometheus NAMESPACE ê°’ì´ prometheusë¡œ ë³€ê²½ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nrepo ë“±ë¡ # $ helm repo add prometheus-community https://prometheus-community.github.io/helm-charts \u0026#34;prometheus-community\u0026#34; has been added to your repositories prometheus-communityë¼ëŠ” ì´ë¦„ìœ¼ë¡œ repo(repository)ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.\nrepo í™•ì¸ # $ helm repo list NAME URL prometheus-community\thttps://prometheus-community.github.io/helm-charts prometheus-community repoê°€ ìƒˆë¡­ê²Œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\nprometheus ì„¤ì¹˜ # $ helm install prometheus prometheus-community/prometheus NAME: prometheus LAST DEPLOYED: Thu Nov 25 21:30:28 2021 NAMESPACE: prometheus STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: The Prometheus server can be accessed via port 80 on the following DNS name from within your cluster: prometheus-server.prometheus.svc.cluster.local Get the Prometheus server URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace prometheus -l \u0026#34;app=prometheus,component=server\u0026#34; -o jsonpath=\u0026#34;{.items[0].metadata.name}\u0026#34;) kubectl --namespace prometheus port-forward $POD_NAME 9090 The Prometheus alertmanager can be accessed via port 80 on the following DNS name from within your cluster: prometheus-alertmanager.prometheus.svc.cluster.local Get the Alertmanager URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace prometheus -l \u0026#34;app=prometheus,component=alertmanager\u0026#34; -o jsonpath=\u0026#34;{.items[0].metadata.name}\u0026#34;) kubectl --namespace prometheus port-forward $POD_NAME 9093 ################################################################################# ###### WARNING: Pod Security Policy has been moved to a global property. ##### ###### use .Values.podSecurityPolicy.enabled with pod-based ##### ###### annotations ##### ###### (e.g. .Values.nodeExporter.podSecurityPolicy.annotations) ##### ################################################################################# The Prometheus PushGateway can be accessed via port 9091 on the following DNS name from within your cluster: prometheus-pushgateway.prometheus.svc.cluster.local Get the PushGateway URL by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace prometheus -l \u0026#34;app=prometheus,component=pushgateway\u0026#34; -o jsonpath=\u0026#34;{.items[0].metadata.name}\u0026#34;) kubectl --namespace prometheus port-forward $POD_NAME 9091 For more information on running Prometheus, visit: https://prometheus.io/ helmì„ ì´ìš©í•´ prometheusë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. helmìœ¼ë¡œ prometheusë¥¼ ì„¤ì¹˜í•˜ë©´ prometheusëŠ” pod í˜•íƒœë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œ ìœ„ì— ë°°í¬ë©ë‹ˆë‹¤.\npod ë°°í¬ í™•ì¸ # prometheus ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ì„œ prometheusì™€ ê´€ë ¨ëœ pod 5ê°œê°€ ë°°í¬ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní˜„ì¬ prometheusê°€ ë°°í¬ëœ namespace ìœ„ì¹˜ëŠ” ì €í¬ê°€ ì•„ê¹Œ ìƒˆë¡œ ìƒì„±í•œ prometheusì…ë‹ˆë‹¤.\n$ kubectl get po -n prometheus NAME READY STATUS RESTARTS AGE prometheus-alertmanager-74674b7775-gjhdm 2/2 Running 0 136m prometheus-kube-state-metrics-58c5cd6ddb-2vjp5 1/1 Running 0 136m prometheus-node-exporter-72m9k 1/1 Running 0 136m prometheus-pushgateway-88fd4899d-xqtzr 1/1 Running 0 136m prometheus-server-5d455cb759-62f44 2/2 Running 0 136m prometheus pod ë³„ ì—­í•  ì„¤ëª…\nalertmanager : alertmanagerëŠ” prometheusë¡œë¶€í„° ì „ë‹¬ë°›ì€ ê²½ë³´(Alert)ë¥¼ Email, Slack, Pagerduty ë“± ì—¬ëŸ¬ ë°©ë²•ì„ ì´ìš©í•´ ê´€ë¦¬ìì—ê²Œ ë³´ë‚´ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. kube-state-metrics : Kubernetes Cluster ë‚´ë¶€ì˜ ìì›(CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ ë° ê° ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë¦¬ì†ŒìŠ¤ í˜„í™©, ë„¤íŠ¸ì›Œí¬ I/O, ì •ìƒ ì»¨í…Œì´ë„ˆ, ë¹„ì •ìƒ ì»¨í…Œì´ë„ˆ ê°œìˆ˜ ë“±)ì— ëŒ€í•œ ë§¤íŠ¸ë¦­ì„ ìˆ˜ì§‘í•´ì£¼ëŠ” exporterì…ë‹ˆë‹¤. node-exporter : ì„œë²„ ë…¸ë“œì˜ ìì›ì— ëŒ€í•œ ë§¤íŠ¸ë¦­ì„ ìˆ˜ì§‘í•´ì£¼ëŠ” exporterì…ë‹ˆë‹¤. pushgateway : ë§¤íŠ¸ë¦­ì„ í‘¸ì‹œí•  ìˆ˜ ìˆëŠ” ì¤‘ê°„ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. server : Prometheus WEB UIë¥¼ ë„ìš¸ ìˆ˜ ìˆëŠ” ì„œë²„ì…ë‹ˆë‹¤. port-forward # prometheus-server podì˜ ì´ë¦„ì„ ì–»ì–´ì„œ POD_NAMEì´ë¼ëŠ” ë³€ìˆ˜ì— ì €ì¥í•˜ëŠ” ì ˆì°¨ì…ë‹ˆë‹¤.\n$ export POD_NAME=$(kubectl get pods --namespace prometheus -l \u0026#34;app=prometheus,component=server\u0026#34; -o jsonpath=\u0026#34;{.items[0].metadata.name}\u0026#34;) $ echo $POD_NAME prometheus-server-5d455cb759-62f44 POD_NAME ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ëª…ë ¹ì–´ëŠ” helmì„ ì´ìš©í•´ prometheusë¥¼ ì„¤ì¹˜í•  ë•Œ NOTES ë¶€ë¶„ì— ì´ë¯¸ ì í˜€ìˆìŠµë‹ˆë‹¤.\nì™¸ë¶€ì—ì„œ 9090 í¬íŠ¸ë¡œ ì ‘ì†ì´ ë“¤ì–´ì˜¬ ê²½ìš°, prometheus-server(prometheus-server-5d455cb759-62f44) podì˜ 9090 í¬íŠ¸ë¡œ ì—°ê²°í•´ì£¼ë„ë¡ port-forward ì„¤ì •í•©ë‹ˆë‹¤.\n$ kubectl --namespace prometheus port-forward $POD_NAME 9090 Forwarding from 127.0.0.1:9090 -\u0026gt; 9090 Forwarding from [::1]:9090 -\u0026gt; 9090 Handling connection for 9090 Handling connection for 9090 ì ‘ì† í…ŒìŠ¤íŠ¸ # ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  Prometheus ì›¹í˜ì´ì§€ ì£¼ì†Œì¸ http://localhost:9090ìœ¼ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.\nPrometheus ì›¹ì´ ì˜ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ì œ Prometheusê°€ ìˆ˜ì§‘í•œ ëª¨ë‹ˆí„°ë§ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•´ì„œ í…ŒìŠ¤íŠ¸í•´ë´…ì‹œë‹¤.\nìˆ˜ì§‘ ë°ì´í„° í™•ì¸ # prometheusê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œë¡œë¶€í„° ë°ì´í„°ë¥¼ ì˜ ê°€ì ¸ì™”ëŠ”ì§€ ì ê²€í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ê²€ìƒ‰ì°½(ë‹ë³´ê¸° ì•„ì´ì½˜)ì— kube_node_infoë¥¼ ì…ë ¥í•˜ê³ , Execute ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.\n1ëŒ€ ìƒì„±ëœ ë…¸ë“œì˜ ì „ì²´ ì •ë³´ê°€ ë‚˜ì˜µë‹ˆë‹¤.\në…¸ë“œ ê´€ë ¨ ì •ë³´\ncontainer_runtime_version : docker://20.10.8 internal_ip : 192.168.49.2 os_image : Ubuntu 20.04.2 LTS node : prom-demo ì´ì œ kubectl ëª…ë ¹ì–´ë¡œ node ì •ë³´ë¥¼ ì¶œë ¥í•´ì„œ ì‹¤ì œë¡œ prometheusì—ì„œ ìˆ˜ì§‘ëœ ì •ë³´ì™€ ë¹„êµí•´ë´…ë‹ˆë‹¤. ëª…ë ¹ì–´ì˜ -o wide ì˜µì…˜ì€ ê²°ê³¼ë¥¼ ë” ìì„¸íˆ ì¶œë ¥í•©ë‹ˆë‹¤. noëŠ” nodeì˜ ì•½ìì…ë‹ˆë‹¤.\n$ kubectl get no -o wide NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME prom-demo Ready control-plane,master 50m v1.22.3 192.168.49.2 \u0026lt;none\u0026gt; Ubuntu 20.04.2 LTS 5.10.47-linuxkit docker://20.10.8 prometheus ì›¹ì˜ ê²°ê³¼ì™€ ëª…ë ¹ì–´ ê²°ê³¼ë¥¼ ë¹„êµí•´ë³´ë‹ˆ í‹€ë¦° ë‚´ìš©ì€ ì—†ìŠµë‹ˆë‹¤. prometheusê°€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œì—ê²Œì„œ ë°ì´í„°ë¥¼ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì§‘í•´ì™”ìŠµë‹ˆë‹¤.\n5. grafana ì„¤ì¹˜ ë° êµ¬ì„± # grafanaëŠ” prometheusê°€ ë³´ë‚´ì£¼ëŠ” ì‹œê³„ì—´ ë§¤íŠ¸ë¦­ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ëŠ”ë° ê°€ì¥ ìµœì í™”ëœ ì˜¤í”ˆì†ŒìŠ¤ ëŒ€ì‹œë³´ë“œ íˆ´ì…ë‹ˆë‹¤.\nrepo ë“±ë¡ # helmì„ í†µí•´ grafanaë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ê¸° ìœ„í•´ ë¨¼ì € repoë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.\n$ helm repo add grafana https://grafana.github.io/helm-charts \u0026#34;grafana\u0026#34; has been added to your repositories repo í™•ì¸ # $ helm repo list NAME URL prometheus-community\thttps://prometheus-community.github.io/helm-charts grafana https://grafana.github.io/helm-charts grafana repoê°€ ìƒˆë¡­ê²Œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.\nì„¤ì¹˜ # helmì„ ì´ìš©í•´ grafanaë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n$ helm install grafana grafana/grafana W1125 22:23:14.691555 19170 warnings.go:70] policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+ W1125 22:23:14.693706 19170 warnings.go:70] policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+ W1125 22:23:14.773504 19170 warnings.go:70] policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+ W1125 22:23:14.773573 19170 warnings.go:70] policy/v1beta1 PodSecurityPolicy is deprecated in v1.21+, unavailable in v1.25+ NAME: grafana LAST DEPLOYED: Thu Nov 25 22:23:14 2021 NAMESPACE: prometheus STATUS: deployed REVISION: 1 NOTES: 1. Get your \u0026#39;admin\u0026#39; user password by running: kubectl get secret --namespace prometheus grafana -o jsonpath=\u0026#34;{.data.admin-password}\u0026#34; | base64 --decode ; echo 2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster: grafana.prometheus.svc.cluster.local Get the Grafana URL to visit by running these commands in the same shell: export POD_NAME=$(kubectl get pods --namespace prometheus -l \u0026#34;app.kubernetes.io/name=grafana,app.kubernetes.io/instance=grafana\u0026#34; -o jsonpath=\u0026#34;{.items[0].metadata.name}\u0026#34;) kubectl --namespace prometheus port-forward $POD_NAME 3000 3. Login with the password from step 1 and the username: admin ################################################################################# ###### WARNING: Persistence is disabled!!! You will lose your data when ##### ###### the Grafana pod is terminated. ##### ################################################################################# helmì„ í†µí•´ grafanaë¥¼ ì„¤ì¹˜í•˜ë©´ prometheusì™€ ë™ì¼í•˜ê²Œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œ ìœ„ì— pod í˜•íƒœë¡œ ë°°í¬ë©ë‹ˆë‹¤.\nNOTES: ë¶€ë¶„ì—ëŠ” grafana ì„¤ì • ê°€ì´ë“œê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ë¯¸ë¦¬ ìˆ™ì§€í•˜ë©´ í¸í•©ë‹ˆë‹¤.\ngrafana ë°°í¬ìƒíƒœ í™•ì¸ # helmì„ í†µí•´ grafanaë¥¼ ì„¤ì¹˜í•˜ë©´ nodeì— pod, service, deployment, replicasetì´ ì•Œì•„ì„œ ë°°í¬ë©ë‹ˆë‹¤.\n$ kubectl get all -l app.kubernetes.io/instance=grafana NAME READY STATUS RESTARTS AGE pod/grafana-59f986bdc-mbrcg 1/1 Running 0 99m NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/grafana ClusterIP 10.102.81.160 \u0026lt;none\u0026gt; 80/TCP 99m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/grafana 1/1 1 1 99m NAME DESIRED CURRENT READY AGE replicaset.apps/grafana-59f986bdc 1 1 1 99m -l ì˜µì…˜ì— grafana ë¼ë²¨ì´ ë¶™ì€ ê°ì²´ë“¤ë§Œ ë³´ì´ë„ë¡ ì œí•œì„ ê±¸ë©´ í—·ê°ˆë¦¬ì§€ ì•Šê³  grafana ê´€ë ¨ ë¦¬ì†ŒìŠ¤, ì˜¤ë¸Œì íŠ¸ ëª©ë¡ë§Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nhelmì—ì„œë„ ë°°í¬ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n$ helm list NAME NAMESPACE REVISION\tUPDATED STATUS CHART APP VERSION grafana prometheus\t1 2021-11-25 22:23:14.520143 +0900 KST\tdeployed\tgrafana-6.17.7 8.2.5 prometheus\tprometheus\t1 2021-11-25 21:30:28.306396 +0900 KST\tdeployed\tprometheus-14.12.0\t2.31.1 grafana v8.2.5ëŠ” ì •ìƒì ìœ¼ë¡œ prometheus ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë°°í¬ëœ ìƒíƒœ(deployed)ë¡œ í™•ì¸ë©ë‹ˆë‹¤.\nadmin ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œ ì°¾ê¸° # ìë™ ìƒì„±ëœ grafana ì›¹í˜ì´ì§€ì˜ admin ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì°¾ëŠ” ì ˆì°¨ì…ë‹ˆë‹¤.\ngrafana ì„¤ì¹˜ì‹œ ì°¸ê³ ì‚¬í•­(NOTES:)ì— ì íŒ ëª…ë ¹ì–´ 1ë²ˆë¶€í„° ì°¨ë¡€ëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.\n$ kubectl get secret --namespace prometheus grafana -o jsonpath=\u0026#34;{.data.admin-password}\u0026#34; | base64 --decode ; echo kJYxA6F19BN3TAWcHwsOpqcCOGMJ9sXM1cxOiWxK admin ê³„ì •ì˜ ì•”í˜¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤. ì´ ì•”í˜¸ëŠ” ì ì‹œí›„ grafana ì›¹í˜ì´ì§€ì— admin ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ë˜ë¯€ë¡œ ì˜ ê¸°ë¡í•´ë‘¡ë‹ˆë‹¤.\nport-forward # ì™¸ë¶€ì—ì„œ 3000ë²ˆ í¬íŠ¸ë¡œ ì ‘ì†ì´ ë“¤ì–´ì˜¬ ê²½ìš° grafana podë¡œ ì—°ê²°í•´ì£¼ë„ë¡ port-forward ì„¤ì •ì„ í•´ì¤ë‹ˆë‹¤.\n$ export POD_NAME=$(kubectl get pods --namespace prometheus -l \u0026#34;app.kubernetes.io/name=grafana,app.kubernetes.io/instance=grafana\u0026#34; -o jsonpath=\u0026#34;{.items[0].metadata.name}\u0026#34;) $ echo $POD_NAME grafana-59f986bdc-mbrcg $ kubectl --namespace prometheus port-forward $POD_NAME 3000 Forwarding from 127.0.0.1:3000 -\u0026gt; 3000 Forwarding from [::1]:3000 -\u0026gt; 3000 ë¡œê·¸ì¸ # http://localhost:3000 ìœ¼ë¡œ ì ‘ì†í•˜ë©´ Grafana ë¡œê·¸ì¸ í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤.\nì•„ê¹Œ ì°¾ì€ admin ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥í•œ í›„ ë¡œê·¸ì¸í•©ë‹ˆë‹¤.\nGrafana ì´ˆê¸°í™”ë©´ì…ë‹ˆë‹¤.\në°ì´í„° ì†ŒìŠ¤ ì—°ê²° # PrometheusëŠ” ë°ì´í„° ìˆ˜ì§‘, GrafanaëŠ” ë°ì´í„° ì‹œê°í™”ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤. Grafanaì—ì„œ Data sourceë¼ëŠ” ìš©ì–´ëŠ” prometheus, influxDBì™€ ê°™ì€ ì‹œê³„ì—´ ë©”íŠ¸ë¦­ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆëŠ” ëŒ€ìƒ ë°ì´í„°ë² ì´ìŠ¤ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. GrafanaëŠ” ë°˜ë“œì‹œ Data sourceì™€ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë˜ì–´ì•¼ ë°ì´í„° ì‹œê°í™”ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ì œ Grafanaì— ë°ì´í„° ì†ŒìŠ¤ë¥¼ ë“±ë¡í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.\nConfiguration â†’ Data sources â†’ Add data source í´ë¦­\nPrometheus â†’ Select ë²„íŠ¼ í´ë¦­\në°ì´í„° ì†ŒìŠ¤ë¥¼ ì„¤ì •í•˜ëŠ” í™”ë©´ì…ë‹ˆë‹¤.\nURL í™•ì¸ë°©ë²• # data sourceë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ ë¨¼ì € prometheus-serverì˜ IP, Port ì •ë³´ë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.\nprometheus-serverì˜ Endpoint ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ëª…ë ¹ì–´ì—ì„œ epëŠ” endpointì˜ ì•½ìì…ë‹ˆë‹¤.\n$ kubectl get ep prometheus-server NAME ENDPOINTS AGE prometheus-server 172.17.0.6:9090 12h ì œ ê¸°ì¤€ì—ì„œ prometheus-serverì˜ Endpoint IPëŠ” 172.17.0.6, í¬íŠ¸ëŠ” 9090 ì…ë‹ˆë‹¤. Endpoint IPëŠ” ì–¸ì œë“  ë°”ë€”ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” ì ˆëŒ€ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nì£¼ì˜ì‚¬í•­ : prometheus-serverì˜ Endpoint IP ì£¼ì†ŒëŠ” ê°ì ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì œ ì£¼ì†Œë¥¼ ê·¸ëŒ€ë¡œ ì ì–´ì„œ ë„£ìœ¼ë©´ í†µì‹ ë¶ˆê°€ë¡œ ì¸í•œ Bad gateway ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ë°˜ë“œì‹œ kubectl get ep prometheus-server ëª…ë ¹ì–´ë¡œ ì§ì ‘ í™•ì¸í›„ ì…ë ¥ ë°”ëë‹ˆë‹¤.\nì…ë ¥ê²°ê³¼\nURL : ìœ„ì—ì„œ í™•ì¸í•œ prometheus-serverì˜ endpoint ì •ë³´ë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤. Access : Server (default) Browser ë°©ì‹ì€ ê³§ ì‚¬ìš© ì¤‘ë‹¨(Deprecated)ë  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— ê°€ê¸‰ì ì´ë©´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê±¸ ê¶Œê³ í•©ë‹ˆë‹¤. URL ê°’ì„ ì…ë ¥í–ˆë‹¤ë©´ ë§¨ ì•„ë˜ì— ìœ„ì¹˜í•œ Save \u0026amp; test ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤ë‹ˆë‹¤.\nGrafanaê°€ Prometheusì™€ ì •ìƒ ì—°ê²°ë˜ì—ˆì„ ê²½ìš° Data source is working ë©”ì„¸ì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.\nì´ì œ Prometheusë¡œ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ì‹œê°í™”í•  ëŒ€ì‹œë³´ë“œë§Œ ìƒì„±í•´ì£¼ë©´ ì‘ì—…ì€ ëë‚©ë‹ˆë‹¤.\ngrafana dashboard import # Grafana Labs ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒë“¤ ì¤‘ì—ì„œ ë§ˆìŒì— ë“œëŠ”ê±¸ ê³¨ë¼ì„œ Importë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nGrafana Labs ì‚¬ì´íŠ¸ì— ì ‘ì†í•´ì„œ ë©”ì¸í™”ë©´ì— ë³´ì´ëŠ” Node Exporter Fullë¥¼ í´ë¦­í•©ë‹ˆë‹¤.\nNode Exporter Full ëŒ€ì‹œë³´ë“œëŠ” Node Exporterê°€ ìˆ˜ì§‘í•œ ë…¸ë“œ ê´€ë ¨ ì •ë³´ë¥¼ ë””í…Œì¼í•˜ê²Œ í‘œì‹œí•´ì£¼ëŠ” ë ˆì´ì•„ì›ƒì˜ ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.\nNode Exporter Fullì˜ Dashboard ID ê°’ì¸ 1860ì„ ê¸°ì–µí•´ë‘¡ë‹ˆë‹¤. ì ì‹œí›„ Node Exporter Full ëŒ€ì‹œë³´ë“œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë‹¨ê³„(Import)ì—ì„œ í•´ë‹¹ ID ê°’ ì…ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\u0026lsquo;+\u0026rsquo; ì•„ì´ì½˜(Create) â†’ Import í´ë¦­\nDashboard IDì¸ 1860 ì…ë ¥ â†’ ìš°ì¸¡ Load ë²„íŠ¼ í´ë¦­\nPrometheus ì„ íƒ â†’ Import\nGrafana ê³µì‹ ì‚¬ì´íŠ¸ì— ì—…ë¡œë“œëœ Node Exporter Full ëŒ€ì‹œë³´ë“œë¥¼ ë°›ì•„ í™˜ê²½ì— ìƒì„±í•œ ê²°ê³¼ì…ë‹ˆë‹¤.\nCPU Basic, Memory Basic, Network Traffic Basic ë“±ì˜ ë…¸ë“œ ë°ì´í„° ìˆ˜ì§‘ë„ ì •ìƒì ìœ¼ë¡œ ì§„í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.\nê²°ë¡  # Kubernetes í™˜ê²½ì—ì„œ Prometheus + GrafanaëŠ” ì´ì œ ì„ íƒì„ ë„˜ì–´ì„œ ì—”ì§€ë‹ˆì–´ì—ê²Œ í•„ìˆ˜ë¡œ ìš”êµ¬ë˜ëŠ” ëª¨ë‹ˆí„°ë§ ê¸°ìˆ  ìŠ¤íƒì…ë‹ˆë‹¤.\nPrometheusëŠ” ëª¨ë‹ˆí„°ë§ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì—­í• , GrafanaëŠ” Prometheusê°€ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ê´€ë¦¬ìê°€ ë³´ê¸° ì¢‹ê²Œ ì‹œê°í™”í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ì—ì„œëŠ” ë§ì€ ì¢…ë¥˜ì˜ ì†Œê·œëª¨ ê¸°ëŠ¥ì´ ê°ê° ì‘ì€ ë‹¨ìœ„ë¡œ ë‚˜ë‰˜ì–´ì§„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì³ë¡œ ê°œë°œ ë° ë°°í¬ë˜ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ì¤‘ì•™ ëª¨ë‹ˆí„°ë§ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë•Œ íš¨ìœ¨ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆëŠ” í…Œí¬ ìŠ¤íƒ ì¤‘ í•˜ë‚˜ê°€ Prometheusì™€ Grafanaì˜ ì¡°í•©ì…ë‹ˆë‹¤. Prometheusì™€ GrafanaëŠ” ì»¨í…Œì´ë„ˆ í˜•íƒœë¡œ íŒ¨í‚¤ì§•ë˜ì–´ ë™ì‘í•˜ë©° ìµœì†Œí•œì˜ ìì›ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\nê¸°ì—…ì˜ ê·œëª¨ ê°€ë¦´ ê²ƒ ì—†ì´ ëª¨ë‹ˆí„°ë§ ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í…Œí¬ ìŠ¤íƒì´ê¸° ë•Œë¬¸ì— ì‹¬ë„ ìˆê²Œ ë°°ì›Œë‘ë©´ ì·¨ì—… ë¿ë§Œ ì•„ë‹ˆë¼ ì»¤ë¦¬ì–´ì—ë„ í° ë„ì›€ì´ ë  ê±°ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\nì°¸ê³ ìë£Œ # https://prometheus.io/docs/introduction/overview/ : Prometheus Architecture\nhttps://stackoverflow.com/questions/48338122/grafana-http-error-bad-gateway-and-templating-init-failed-errors : Bad gateway ë„¤íŠ¸ì›Œí¬ ì´ìŠˆ ë°œìƒì‹œ ì°¸ê³ \n","date":"Nov 25, 2021","permalink":"/blog/k8s/installing-prometheus-and-grafana-with-minikube/","section":"Blogs","summary":"ê°œìš” # minikube ê¸°ë°˜ì˜ ë¡œì»¬ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ prometheusì™€ grafanaë¥¼ ì„¤ì¹˜, êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.","title":"prometheusì™€ grafana êµ¬ì¶•"},{"content":"ê°œìš” # LSI ì‚¬ì˜ RAID Controllerê°€ ì¥ì°©ëœ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ MegaCLI ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ RAID ê´€ë ¨ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nmegacliëŠ” MegaRaidë¥¼ CLI í™˜ê²½ì—ì„œ ì¡°ì‘í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ê´€ë¦¬ ì†Œí”„íŠ¸ì›¨ì–´ì´ë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 6.2 (Santiago) Architecture : x86_64 Shell : bash ì„¤ì¹˜í•  íŒ¨í‚¤ì§€ : MegaCLI v8.07.14 (MegaCli-8.07.14-1.noarch.rpm) ë³¸ë¬¸ # MegaCLI íŒ¨í‚¤ì§€ ì„¤ì¹˜ # 1. RAID Controller ì œì› í™•ì¸ # ìš°ì„  í•´ë‹¹ ì„œë²„ì˜ RAID Controllerê°€ LSI Logicì—ì„œ ë§Œë“  MegaRAID ì œí’ˆì´ì–´ì•¼ MegaCli íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í›„ ëª…ë ¹ì–´ë¥¼ ì´ìš© ê°€ëŠ¥í•˜ë‹¤. ê·¸ëŸ¬ë‹ˆ ìš°ì„  RAID Controllerì˜ ì œì¡°ì‚¬ì™€ ëª¨ë¸ëª…ë¶€í„° í™•ì¸í•œë‹¤.\ní™•ì¸ë°©ë²• 1. lspci # $ rpm -qa pciutils pciutils-3.1.4-11.el6.x86_64 lspci ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” lspci íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤.\n$ lspci | grep -i raid 06:00.0 RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 03) RAID Controller ì œì¡°ì‚¬(Vendor)ëŠ” LSI Logic, ëª¨ë¸ëª…ì€ MegaRAID SAS 2208 [Thunderbolt] ë¼ëŠ” ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\ní™•ì¸ë°©ë²• 2. lshw # $ rpm -qa lshw lshw-2.17-1.el6.rf.x86_64 lshw ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” lshw íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤. í•´ë‹¹ ì„œë²„ëŠ” LSI Logicì‚¬ì—ì„œ ë§Œë“  RAID Controller ëª¨ë¸ MegaRAID SAS 2208 [Thunderbolt]ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤.\n$ lshw -c storage *-storage description: RAID bus controller product: MegaRAID SAS 2208 [Thunderbolt] vendor: LSI Logic / Symbios Logic physical id: 0 bus info: pci@0000:06:00.0 logical name: scsi0 version: 03 width: 64 bits clock: 33MHz capabilities: storage pm pciexpress vpd msi msix bus_master cap_list rom configuration: driver=megaraid_sas latency=0 resources: irq:40 ioport:d000(size=256) memory:fbd60000-fbd63fff memory:fbd00000-fbd3ffff memory:fbd40000-fbd5ffff(prefetchable) lshw ëª…ë ¹ì–´ ì„¤ëª…\n-c \u0026lt;class\u0026gt; : íŠ¹ì • íŒŒíŠ¸ì— ëŒ€í•œ ìƒì„¸ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.\n2. ì„¤ì¹˜íŒŒì¼ ë‹¤ìš´ë¡œë“œ # Broadcom ë‹¤ìš´ë¡œë“œ ë§í¬ ì ‘ì†\nBroadcom ì‚¬ì˜ ê³µì‹ ë‹¤ìš´ë¡œë“œ í™ˆí˜ì´ì§€ë¥¼ ì ‘ì†í•œë‹¤.\nhttps://www.broadcom.com/support/download-search?dk=megacli\nManagement Software and Tools í´ë¦­\nMegaCLI 5.5 P2 (Version 8.07.14) í´ë¦­\ní´ë¦­ì‹œ íŒì—… í˜ì´ì§€ê°€ ëœ¨ë©° zip í™•ì¥ìì˜ ì„¤ì¹˜íŒŒì¼ ë‹¤ìš´ë¡œë“œê°€ ì‹œì‘ëœë‹¤.\n3. MegaCLI íŒ¨í‚¤ì§€ ì—…ë¡œë“œ # SFTP, FTPë¥¼ ì´ìš©í•´ ì„œë²„ì— MegaCLI ì„¤ì¹˜íŒŒì¼(8-07-14_MegaCLI.zip)ì„ ì—…ë¡œë“œí•œë‹¤.\n$ ls 8-07-14_MegaCLI.zip $ ls -lh total 7.6M -rw-rw-r-- 1 devuser1 devuser1 7.6M Nov 18 09:15 8-07-14_MegaCLI.zip MegaCLI ì„¤ì¹˜íŒŒì¼ì˜ ìš©ëŸ‰ì€ 7.6MB ì´ë‹¤.\nì„¤ì¹˜íŒŒì¼ zipì„ ì••ì¶•í•´ì œí•œë‹¤.\n$ unzip 8-07-14_MegaCLI.zip Archive: 8-07-14_MegaCLI.zip inflating: 8.07.14_MegaCLI.txt inflating: DOS/MegaCLI.exe extracting: FreeBSD/MegaCLI.zip extracting: FreeBSD/MegaCli64.zip inflating: Linux/MegaCli-8.07.14-1.noarch.rpm inflating: Solaris/MegaCli.pkg inflating: Windows/MegaCli.exe inflating: Windows/MegaCli64.exe ì••ì¶• í•´ì œí›„ ìƒì„±ëœ Linux ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œë‹¤.\n$ ls 8-07-14_MegaCLI.zip 8.07.14_MegaCLI.txt DOS FreeBSD Linux Solaris Windows $ cd Linux Linuxìš© íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ í™•ì¸\n$ ls MegaCli-8.07.14-1.noarch.rpm 4. íŒ¨í‚¤ì§€ ì„¤ì¹˜ # $ rpm -ivh MegaCli-8.07.14-1.noarch.rpm Preparing... ########################################### [100%] 1:MegaCli ########################################### [100%] íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ëª…ì˜ noarchëŠ” íŠ¹ì • ì•„í‚¤í…ì³ë¥¼ ì˜ë¯¸í•˜ì§€ ì•Šì„ ë•Œ ë¶™ì´ëŠ” í‚¤ì›Œë“œì´ë‹¤. ì•„í‚¤í…ì³ ì¢…ë¥˜ë¡œëŠ” alpha, sparc, sparc64, i386, i586, i686, ppc64 ë“±ì´ ìˆë‹¤. megacli íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ëŠ” ì ˆëŒ€ ê²½ë¡œëŠ” /opt/MegaRAID/MegaCli/ ì´ë‹¤.\n5. ëª…ë ¹ì–´ ì‹¬ë³¼ë¦­ ë§í¬ ì—°ê²° # MegaCli64 ëª…ë ¹ì–´ì—ëŠ” ëŒ€ì†Œë¬¸ìì™€ ìˆ«ìê¹Œì§€ ì„ì—¬ìˆë‹¤. MegaCLI64 ëª…ë ¹ì–´ë¥¼ í¸í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ MegaCli64 ëª…ë ¹ì–´ íŒŒì¼ì„ megaclië¡œ ì‹¬ë³¼ë¦­ ë§í¬ ì—°ê²°í•œë‹¤.\n$ ln -s /opt/MegaRAID/MegaCli/MegaCli64 /usr/bin/megacli ì´ì œë¶€í„°ëŠ” MegaCli64 ëª…ë ¹ì–´ê°€ ì•„ë‹Œ megaclië¡œ ì…ë ¥í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\n$ which megacli /usr/bin/megacli 6. ëª…ë ¹ì–´ ë™ì‘ í…ŒìŠ¤íŠ¸ # -v ì˜µì…˜ì€ megacli ë²„ì „ì„ ì¶œë ¥í•œë‹¤.\n$ megacli -v MegaCLI SAS RAID Management Tool Ver 8.07.14 Dec 16, 2013 (c)Copyright 2013, LSI Corporation, All Rights Reserved. Exit Code: 0x00 MegaCli ëª…ë ¹ì–´ # 1. megacli ëª…ë ¹ì–´ ë©”ë‰´ì–¼ í™•ì¸ # ìì„¸í•œ ëª…ë ¹ì–´ ë©”ë‰´ì–¼ì€ megacli -h ëª…ë ¹ì–´ë¡œ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.\n$ megacli -h | more MegaCLI SAS RAID Management Tool Ver 8.07.14 Dec 16, 2013 (c)Copyright 2013, LSI Corporation, All Rights Reserved. NOTE: The following options may be given at the end of any command below: [-Silent] [-AppLogFile filename] [-NoLog] [-page[N]] [-] is optional. N - Number of lines per page. MegaCli -v MegaCli -help|-h|? MegaCli -adpCount MegaCli -AdpSetProp {CacheFlushInterval -val} | { RebuildRate -val} | {PatrolReadRate -val} | {BgiRate -val} | {CCRate -val} | {ForceSGPIO -val} | {ReconRate -val} | {SpinupDriveCount -val} | {SpinupDelay -val} | {CoercionMode -val} | {ClusterEnable -val} | {PredFailPollInterval -val} | {BatWarnDsbl -val} | {EccBucketSize -val} | {EccBucketLeakRate -val} | {AbortCCOnError -val} | AlarmEnbl | AlarmDsbl | AlarmSilence [...] MegaCli XD -FetchSafeId -iN | -iALL MegaCli XD -ApplyActivationKey \u0026lt;key\u0026gt; -iN Exit Code: 0x00 2. ì‹œìŠ¤í…œ ìš”ì•½ì •ë³´ í™•ì¸ # í™•ì¸ ê°€ëŠ¥í•œ ì£¼ìš”ì •ë³´\nì‹œìŠ¤í…œ ê¸°ë³¸ì •ë³´ : ë¦¬ëˆ…ìŠ¤ ì»¤ë„ ë²„ì „, ë“œë¼ì´ë²„ ë²„ì „, megacli íŒ¨í‚¤ì§€ ë²„ì „ ì •ë³´ RAID Controller : ì œì¡°ì‚¬, ëª¨ë¸ëª…, íŒì›¨ì–´ ë²„ì „, ìƒíƒœ RAID ë°°í„°ë¦¬(BBU, Battery Backup Unit) : BBUëŠ” ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì „ì› ì¤‘ë‹¨ì´ ë°œìƒí•˜ë”ë¼ë„ ìºì‹œì˜ ë‚´ìš©ì´ ì§€ì›Œì§€ì§€ ì•Šë„ë¡ ë³´ì¡´í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì¸í´ë¡œì €(Enclosure) ë¬¼ë¦¬ì  ë””ìŠ¤í¬(PD, Physical Drive) êµ¬ì„±ì •ë³´ ë…¼ë¦¬ì  ë””ìŠ¤í¬(VD, Virtual Drive) êµ¬ì„±ì •ë³´ : ë…¼ë¦¬ì  ë””ìŠ¤í¬ëŠ” RAIDë¥¼ ì˜ë¯¸í•œë‹¤. $ megacli -ShowSummary -aALL System Operating System: Linux version 2.6.32-220.el6.x86_64 Driver Version: 00.00.05.40-rh2 CLI Version: 8.07.14 Hardware Controller ProductName : LSI MegaRAID SAS 9266-8i(Bus 0, Dev 0) SAS Address : 500605b0057b9570 FW Package Version: 23.9.0-0023 Status : Optimal BBU BBU Type : Status : Healthy Enclosure Product Id : SGPIO Type : SGPIO Status : OK PD Connector : Port 0 - 3\u0026lt;Internal\u0026gt;: Slot 1 Vendor Id : SEAGATE Product Id : ST9300653SS State : Online Disk Type : SAS,Hard Disk Device Capacity : 278.464 GB Power State : Active Connector : Port 0 - 3\u0026lt;Internal\u0026gt;: Slot 0 Vendor Id : SEAGATE Product Id : ST9300653SS State : Online Disk Type : SAS,Hard Disk Device Capacity : 278.464 GB Power State : Active Storage Virtual Drives Virtual drive : Target Id 0 ,VD name Size : 278.464 GB State : Optimal RAID Level : 1 Exit Code: 0x00 3. ë¬¼ë¦¬ì  ë””ìŠ¤í¬ ì •ë³´ í™•ì¸ # PDëŠ” ë¬¼ë¦¬ ë””ìŠ¤í¬(Physical Drive)ì˜ ì•½ìì´ë‹¤.\n## MegaCli64 ëª…ë ¹ì–´ë¥¼ ì‹¬ë³¼ë¦­ ë§í¬ë¡œ ì—°ê²°í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° $ /opt/MegaRAID/MegaCli/MegaCli64 -PDList -aALL ## MegaCli64 ëª…ë ¹ì–´ë¥¼ ì‹¬ë³¼ë¦­ ë§í¬ë¡œ ì—°ê²°í–ˆì„ ê²½ìš° $ megacli -PDList -aALL Adapter #0 Enclosure Device ID: 252 Slot Number: 0 Drive\u0026#39;s position: DiskGroup: 0, Span: 0, Arm: 1 Enclosure position: N/A Device Id: 9 WWN: 5000C5005EC4558C Sequence Number: 2 Media Error Count: 0 Other Error Count: 0 Predictive Failure Count: 0 Last Predictive Failure Event Seq Number: 0 PD Type: SAS Raw Size: 279.396 GB [0x22ecb25c Sectors] Non Coerced Size: 278.896 GB [0x22dcb25c Sectors] Coerced Size: 278.464 GB [0x22cee000 Sectors] Sector Size: 512 Firmware state: Online, Spun Up Device Firmware Level: 0004 Shield Counter: 0 Successful diagnostics completion on : N/A SAS Address(0): 0x5000c5005ec4558d SAS Address(1): 0x0 Connected Port Number: 1(path0) Inquiry Data: SEAGATE ST9300653SS 00046XN2SNLZ FDE Capable: Not Capable FDE Enable: Disable Secured: Unsecured Locked: Unlocked Needs EKM Attention: No Foreign State: None Device Speed: 6.0Gb/s Link Speed: 6.0Gb/s Media Type: Hard Disk Device Drive: Not Certified Drive Temperature :29C (84.20 F) PI Eligibility: No Drive is formatted for PI information: No PI: No PI Port-0 : Port status: Active Port\u0026#39;s Linkspeed: 6.0Gb/s Port-1 : Port status: Active Port\u0026#39;s Linkspeed: 6.0Gb/s Drive has flagged a S.M.A.R.T alert : No Enclosure Device ID: 252 Slot Number: 1 Drive\u0026#39;s position: DiskGroup: 0, Span: 0, Arm: 0 Enclosure position: N/A Device Id: 8 WWN: 5000C5005EC45560 Sequence Number: 2 Media Error Count: 0 Other Error Count: 0 Predictive Failure Count: 0 Last Predictive Failure Event Seq Number: 0 PD Type: SAS Raw Size: 279.396 GB [0x22ecb25c Sectors] Non Coerced Size: 278.896 GB [0x22dcb25c Sectors] Coerced Size: 278.464 GB [0x22cee000 Sectors] Sector Size: 512 Firmware state: Online, Spun Up Device Firmware Level: 0004 Shield Counter: 0 Successful diagnostics completion on : N/A SAS Address(0): 0x5000c5005ec45561 SAS Address(1): 0x0 Connected Port Number: 0(path0) Inquiry Data: SEAGATE ST9300653SS 00046XN2SNMA FDE Capable: Not Capable FDE Enable: Disable Secured: Unsecured Locked: Unlocked Needs EKM Attention: No Foreign State: None Device Speed: 6.0Gb/s Link Speed: 6.0Gb/s Media Type: Hard Disk Device Drive: Not Certified Drive Temperature :28C (82.40 F) PI Eligibility: No Drive is formatted for PI information: No PI: No PI Port-0 : Port status: Active Port\u0026#39;s Linkspeed: 6.0Gb/s Port-1 : Port status: Active Port\u0026#39;s Linkspeed: 6.0Gb/s Drive has flagged a S.M.A.R.T alert : No Exit Code: 0x00 4. ë¬¼ë¦¬ ë””ìŠ¤í¬ ê°œë³„ ì—ëŸ¬ ì¹´ìš´íŠ¸ í™•ì¸ # ë””ìŠ¤í¬ì˜ Error Count ê°’ì´ 1 ì´ìƒì´ë©´ ë””ìŠ¤í¬ êµì²´ë¥¼ ê¶Œê³ í•œë‹¤.\nPredictive Failure Count ê°’ì´ ê¸‰ì¦í•˜ëŠ” ë””ìŠ¤í¬ì˜ ê²½ìš°ëŠ” ë©°ì¹  ì´ë‚´ì— ë””ìŠ¤í¬ í´íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ë¯¸ë¦¬ ì˜ˆë¹„ ë””ìŠ¤í¬ íŒŒíŠ¸ë¥¼ í™•ë³´í•´ë‘”ë‹¤.\n$ megacli -PDList -aALL | grep Count Media Error Count: 0 Other Error Count: 0 Predictive Failure Count: 0 Shield Counter: 0 Media Error Count: 0 Other Error Count: 0 Predictive Failure Count: 0 Shield Counter: 0 5. ë…¼ë¦¬ì  ë””ìŠ¤í¬ ì •ë³´ í™•ì¸ # $ megacli -LDInfo -Lall -aALL Adapter 0 -- Virtual Drive Information: Virtual Drive: 0 (Target Id: 0) Name : RAID Level : Primary-1, Secondary-0, RAID Level Qualifier-0 Size : 278.464 GB Sector Size : 512 Mirror Data : 278.464 GB State : Optimal Strip Size : 64 KB Number Of Drives : 2 Span Depth : 1 Default Cache Policy: WriteBack, ReadAhead, Direct, No Write Cache if Bad BBU Current Cache Policy: WriteBack, ReadAhead, Direct, No Write Cache if Bad BBU Default Access Policy: Read/Write Current Access Policy: Read/Write Disk Cache Policy : Disk\u0026#39;s Default Encryption Type : None PI type: No PI Is VD Cached: No Exit Code: 0x00 6. ì–´ëŒ‘í„° ì •ë³´í™•ì¸ # í™•ì¸ ê°€ëŠ¥í•œ ì£¼ìš”ì •ë³´\nRAID Controller ëª¨ë¸ëª… RAID Controller Serial ë²ˆí˜¸ RAID Controller íŒì›¨ì–´ ë²„ì „ ì •ë³´ RAID Controllerê°€ ì§€ì›í•˜ëŠ” RAID Level ì •ë³´ RAID Controllerê°€ ì§€ì›í•˜ëŠ” ë“œë¼ì´ë¸Œ íƒ€ì… : SAS, SATA $ megacli -AdpAllInfo -aALL Adapter #0 ============================================================================== Versions ================ Product Name : LSI MegaRAID SAS 9266-8i Serial No : SV23924725 FW Package Build: 23.9.0-0023 Mfg. Data ================ Mfg. Date : 09/29/12 Rework Date : 00/00/00 Revision No : 09B Battery FRU : N/A Image Versions in Flash: ================ BIOS Version : 5.38.00_4.12.05.00_0x05180000 WebBIOS Version : 6.1-49-e_49-Rel Preboot CLI Version: 05.05-03:#%00011 FW Version : 3.220.75-2196 NVDATA Version : 2.1209.03-0117 Boot Block Version : 2.05.00.00-0010 BOOT Version : 07.26.13.219 Pending Images in Flash ================ None PCI Info ================ Controller Id : 0000 Vendor Id : 1000 Device Id : 005b SubVendorId : 1000 SubDeviceId : 9266 Host Interface : PCIE ChipRevision : C1 Link Speed : 0 Number of Frontend Port: 0 Device Interface : PCIE Number of Backend Port: 8 Port : Address 0 5000c5005ec45561 1 5000c5005ec4558d 2 0000000000000000 3 0000000000000000 4 0000000000000000 5 0000000000000000 6 0000000000000000 7 0000000000000000 HW Configuration ================ SAS Address : 500605b0057b9570 BBU : Present Alarm : Present NVRAM : Present Serial Debugger : Present Memory : Present Flash : Present Memory Size : 1024MB TPM : Absent On board Expander: Absent Upgrade Key : Absent Temperature sensor for ROC : Present Temperature sensor for controller : Absent ROC temperature : 46 degree Celsius Settings ================ Current Time : 9:44:50 11/18, 2021 Predictive Fail Poll Interval : 300sec Interrupt Throttle Active Count : 16 Interrupt Throttle Completion : 50us Rebuild Rate : 30% PR Rate : 30% BGI Rate : 30% Check Consistency Rate : 30% Reconstruction Rate : 30% Cache Flush Interval : 4s Max Drives to Spinup at One Time : 2 Delay Among Spinup Groups : 12s Physical Drive Coercion Mode : 1GB Cluster Mode : Disabled Alarm : Enabled Auto Rebuild : Enabled Battery Warning : Enabled Ecc Bucket Size : 15 Ecc Bucket Leak Rate : 1440 Minutes Restore HotSpare on Insertion : Disabled Expose Enclosure Devices : Enabled Maintain PD Fail History : Disabled Host Request Reordering : Enabled Auto Detect BackPlane Enabled : SGPIO/i2c SEP Load Balance Mode : Auto Use FDE Only : Yes Security Key Assigned : No Security Key Failed : No Security Key Not Backedup : No Default LD PowerSave Policy : Automatic Maximum number of direct attached drives to spin up in 1 min : 10 Auto Enhanced Import : Yes Any Offline VD Cache Preserved : No Allow Boot with Preserved Cache : No Disable Online Controller Reset : No PFK in NVRAM : No Use disk activity for locate : No POST delay : 90 seconds BIOS Error Handling : Pause on Errors Current Boot Mode :Normal Capabilities ================ RAID Level Supported : RAID0, RAID1, RAID5, RAID6, RAID00, RAID10, RAID50, RAID60, PRL 11, PRL 11 with spanning, SRL 3 supported, PRL11-RLQ0 DDF layout with no span, PRL11-RLQ0 DDF layout with span Supported Drives : SAS, SATA Allowed Mixing: Mix in Enclosure Allowed Mix of SAS/SATA of HDD type in VD Allowed Mix of SAS/SATA of SSD type in VD Allowed Status ================ ECC Bucket Count : 0 Limitations ================ Max Arms Per VD : 32 Max Spans Per VD : 8 Max Arrays : 128 Max Number of VDs : 64 Max Parallel Commands : 1008 Max SGE Count : 60 Max Data Transfer Size : 8192 sectors Max Strips PerIO : 42 Max LD per array : 64 Min Strip Size : 8 KB Max Strip Size : 1.0 MB Max Configurable CacheCade Size: 0 GB Current Size of CacheCade : 0 GB Current Size of FW Cache : 873 MB Device Present ================ Virtual Drives : 1 Degraded : 0 Offline : 0 Physical Devices : 3 Disks : 2 Critical Disks : 0 Failed Disks : 0 Supported Adapter Operations ================ Rebuild Rate : Yes CC Rate : Yes BGI Rate : Yes Reconstruct Rate : Yes Patrol Read Rate : Yes Alarm Control : Yes Cluster Support : No BBU : Yes Spanning : Yes Dedicated Hot Spare : Yes Revertible Hot Spares : Yes Foreign Config Import : Yes Self Diagnostic : Yes Allow Mixed Redundancy on Array : No Global Hot Spares : Yes Deny SCSI Passthrough : No Deny SMP Passthrough : No Deny STP Passthrough : No Support Security : No Snapshot Enabled : No Support the OCE without adding drives : Yes Support PFK : Yes Support PI : Yes Support Boot Time PFK Change : No Disable Online PFK Change : No Support LDPI Type1 : No Support LDPI Type2 : No Support LDPI Type3 : No PFK TrailTime Remaining : 0 days 0 hours Support Shield State : Yes Block SSD Write Disk Cache Change: No Supported VD Operations ================ Read Policy : Yes Write Policy : Yes IO Policy : Yes Access Policy : Yes Disk Cache Policy : Yes Reconstruction : Yes Deny Locate : No Deny CC : No Allow Ctrl Encryption: No Enable LDBBM : No Support Breakmirror : No Power Savings : No Supported PD Operations ================ Force Online : Yes Force Offline : Yes Force Rebuild : Yes Deny Force Failed : No Deny Force Good/Bad : No Deny Missing Replace : No Deny Clear : No Deny Locate : No Support Temperature : Yes NCQ : No Disable Copyback : No Enable JBOD : No Enable Copyback on SMART : No Enable Copyback to SSD on SMART Error : Yes Enable SSD Patrol Read : No PR Correct Unconfigured Areas : Yes Enable Spin Down of UnConfigured Drives : Yes Disable Spin Down of hot spares : No Spin Down time : 30 T10 Power State : No Error Counters ================ Memory Correctable Errors : 0 Memory Uncorrectable Errors : 0 Cluster Information ================ Cluster Permitted : No Cluster Active : No Default Settings ================ Phy Polarity : 0 Phy PolaritySplit : 0 Background Rate : 30 Strip Size : 64kB Flush Time : 4 seconds Write Policy : WB Read Policy : Adaptive Cache When BBU Bad : Disabled Cached IO : No SMART Mode : Mode 6 Alarm Disable : Yes Coercion Mode : 1GB ZCR Config : Unknown Dirty LED Shows Drive Activity : No BIOS Continue on Error : 1 Spin Down Mode : Internal Only Allowed Device Type : SAS/SATA Mix Allow Mix in Enclosure : Yes Allow HDD SAS/SATA Mix in VD : Yes Allow SSD SAS/SATA Mix in VD : Yes Allow HDD/SSD Mix in VD : No Allow SATA in Cluster : No Max Chained Enclosures : 16 Disable Ctrl-R : Yes Enable Web BIOS : Yes Direct PD Mapping : No BIOS Enumerate VDs : Yes Restore Hot Spare on Insertion : No Expose Enclosure Devices : Yes Maintain PD Fail History : No Disable Puncturing : No Zero Based Enclosure Enumeration : No PreBoot CLI Enabled : Yes LED Show Drive Activity : No Cluster Disable : Yes SAS Disable : No Auto Detect BackPlane Enable : SGPIO/i2c SEP Use FDE Only : Yes Enable Led Header : No Delay during POST : 0 EnableCrashDump : No Disable Online Controller Reset : No EnableLDBBM : No Un-Certified Hard Disk Drives : Allow Treat Single span R1E as R10 : No Max LD per array : 64 Power Saving option : All power saving options are enabled Default spin down time in minutes: 30 Enable JBOD : No TTY Log In Flash : Yes Auto Enhanced Import : Yes BreakMirror RAID Support : No Disable Join Mirror : No Enable Shield State : No Time taken to detect CME : 60s Exit Code: 0x00 7. BBU ì •ë³´ í™•ì¸ # BBU(Battery Backup Unit)ëŠ” RAID Controller ì „ìš© ë°°í„°ë¦¬ë¡œ, ì˜ˆê³ ì—†ì´ ì „ì› ê³µê¸‰ì´ ëŠê¸´ ìƒí™©ì—ì„œ ìºì‹œ ì˜ì—­ì˜ ë°ì´í„°ê°€ ì†ì‹¤ë˜ëŠ” ê±¸ ë°©ì§€í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\ní™•ì¸ ê°€ëŠ¥í•œ ì£¼ìš”ì •ë³´\në°°í„°ë¦¬ ìƒíƒœ : Battery State ì œì¡°ë…„ì›” : Date of Manufacture ì œì¡°ì‚¬ : Manufacture Name ë™ì‘ì •ë³´ : ì „ì••(Voltage), ì˜¨ë„(Temperature), Learn Cycle ìƒíƒœ(Learn Cycle Status) $ megacli -AdpBbuCmd -aALL BBU status for Adapter: 0 BatteryType: SuperCaP Voltage: 9438 mV Current: 0 mA Temperature: 28 C Battery State: Optimal BBU Firmware Status: Charging Status : None Voltage : OK Temperature : OK Learn Cycle Requested : No Learn Cycle Active : No Learn Cycle Status : OK Learn Cycle Timeout : No I2c Errors Detected : No Battery Pack Missing : No Battery Replacement required : No Remaining Capacity Low : No Periodic Learn Required : No Transparent Learn : No No space to cache offload : No Pack is about to fail \u0026amp; should be replaced : No Cache Offload premium feature required : No Module microcode update required : No BBU GasGauge Status: 0x002a Pack energy : 298 J Capacitance : 0 Remaining reserve space : 93 Battery backup charge time : 0 hours BBU Design Info for Adapter: 0 Date of Manufacture: 06/13, 2012 Design Capacity: 283 J Design Voltage: 9411 mV Serial Number: 2679 Manufacture Name: LSI Firmware Version : Device Name: SuperCaP Device Chemistry: Battery FRU: N/A TMM FRU: N/A Transparent Learn = 1 App Data = 0 BBU Properties for Adapter: 0 Auto Learn Period: 28 Days Next Learn time: Tue Dec 14 12:07:23 2021 Learn Delay Interval:0 Hours Auto-Learn Mode: Transparent Exit Code: 0x00 8. ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œê·¸í™•ì¸ # $ megacli -fwtermlog -dsply -aALL [...] 11/06/21 3:32:08: pii ccisue ld pii=1 ld=0 11/06/21 3:32:08: cmdBlockPrep: Command block started (host IOs blocked) 11/06/21 3:32:08: EVT#55239-11/06/21 3:32:08: 58=Consistency Check done on VD 00/0 11/06/21 3:32:08: pii modvd bvd pii=1 \u0026lt;- ld ld=0 11/06/21 3:32:08: ccScheduleSetNextStartTime: RTC_TimeStamp=2918b3b8, nextStartTime=2921e6ac 11/06/21 3:32:08: Next cc scheduled to start at 11/13/21 2:59:56 11/06/21 3:32:08: CC Schedule cycle complete 11/06/21 3:32:08: updateBlockDone: DDF update started 11/06/21 3:32:08: updateStartNext: DDF update complete 11/06/21 3:32:08: ld sync: all LDs sync\u0026#39;d 11/06/21 3:32:08: FP_NotifyAndChangeAll - Driver ldsync required 1 11/06/21 3:32:08: CmdUnBlock: Final command block released (host IOs were blocked for 266 ms) 11/06/21 3:32:08: ld sync: all LDs sync\u0026#39;d 11/06/21 3:32:08: LdDcmdSynchronize gLdSyncRequired:0 mfiCmdStatus:0 11/12/21 12:04:03: EVT#55240-11/12/21 12:04:03: 157=Battery relearn will start in 4 days 11/13/21 2:59:56: prDiskStart: starting Patrol Read on PD=08 11/13/21 2:59:56: EVT#55241-11/13/21 2:59:56: 94=Patrol Read progress on PD 08(e0xfc/s1) is 0.00%(0s) 11/13/21 2:59:56: prDiskStart: starting Patrol Read on PD=09 11/13/21 2:59:56: EVT#55242-11/13/21 2:59:56: 94=Patrol Read progress on PD 09(e0xfc/s0) is 0.00%(0s) 11/13/21 2:59:56: EVT#55243-11/13/21 2:59:56: 39=Patrol Read started 11/13/21 2:59:56: EVT#55244-11/13/21 2:59:56: 66=Consistency Check started on VD 00/0 11/13/21 2:59:56: pii modvd bvd pii=1 \u0026lt;- ld ld=0 11/13/21 2:59:56: cmdBlockPrep: Command block started (host IOs blocked) 11/13/21 2:59:56: prDiskCheckOkToRun: PR cannot run on this pd=8 init or CC running ld=0 11/13/21 2:59:56: prCallback: PR being stopped for pd=08 - state changed 11/13/21 2:59:56: EVT#55245-11/13/21 2:59:56: 445=Patrol Read aborted on PD 08(e0xfc/s1) 11/13/21 2:59:56: prDiskCheckOkToRun: PR cannot run on this pd=9 init or CC running ld=0 11/13/21 2:59:56: prCallback: PR being stopped for pd=09 - state changed 11/13/21 2:59:56: EVT#55246-11/13/21 2:59:56: 445=Patrol Read aborted on PD 09(e0xfc/s0) 11/13/21 2:59:56: PR cycle complete Exit Code: 0x00 RAID Controller ë¡œê·¸ì—ëŠ” PR(Patrol Read)ì´ ìˆ˜í–‰ëœ ê¸°ë¡, ì¼ê´€ì„± ê²€ì‚¬(CC, Consistency Check) ê¸°ë¡, ë…¼ë¦¬ì  ë””ìŠ¤í¬(LD, Logical Drive)ì˜ ë™ê¸°í™”ë¥¼ ë§ºì€ ê¸°ë¡ ë“±ì´ ë‚¨ì•„ìˆë‹¤.\nì¼ê´€ì„± ê²€ì‚¬ # ì˜ì–´ë¡œ Consistency Check, ì¶•ì•½í˜•ì€ CC. ì¼ê´€ì„± ê²€ì‚¬ëŠ” ë°ì´í„° ë° ì¤‘ë³µì´ ì˜¬ë°”ë¥´ê²Œ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì–´ë ˆì´ì˜ ëª¨ë“  ë“œë¼ì´ë¸Œë¥¼ ì„œë¡œ ë¹„êµí•˜ëŠ” ìˆ˜ë™ìœ¼ë¡œ í™œì„±í•´ì•¼ ë™ì‘í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. RAID 1ìœ¼ë¡œ êµ¬ì„±ëœ ê²½ìš° í•œ ë“œë¼ì´ë¸Œì˜ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ ë“œë¼ì´ë¸Œì™€ ë¹„êµí•˜ì—¬ ë°ì´í„°ê°€ ì˜¤ë¥˜ ì—†ì´ ë³µì œ(ë¯¸ëŸ¬ë§)ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤.\n9. Patrol Read # Patrol Read(PR)ëŠ” ë””ìŠ¤í¬ ì˜¤ë¥˜ ìƒíƒœê°€ ì•…í™”ë˜ì–´ ë°ì´í„°ê°€ ì†ì‹¤ë˜ê¸° ì „ì— ë””ìŠ¤í¬ ì˜¤ë¥˜ë¥¼ ë¯¸ë¦¬ ë°œê²¬í•˜ëŠ” ìë™ê²€ì‚¬ ê¸°ëŠ¥ì´ë‹¤.\nê¸°ë³¸ê°’ìœ¼ë¡œ ìƒˆë²½ ì‹œê°„ë§ˆë‹¤ ìë™ ìˆ˜í–‰ë˜ë©°, ìˆ˜í–‰ ê°„ê²©(Patrol Read Execution Delay)ì€ 168ì‹œê°„ì´ë‹¤. Patrol ReadëŠ” I/O ë¦¬ì†ŒìŠ¤ì˜ ìµœëŒ€ 30%ë¥¼ ì°¨ì§€í•  ìˆ˜ ìˆë‹¤. PR ì„¤ì •ì •ë³´ í™•ì¸ # $ megacli -AdpPR -Info -aALL Adapter 0: Patrol Read Information: Patrol Read Mode: Auto Patrol Read Execution Delay: 168 hours Number of iterations completed: 448 Next start time: 11/20/2021, 02:00:00 Current State: Stopped Patrol Read on SSD Devices: Disabled Exit Code: 0x00 í•´ì„\nPatrol Read Execution Delay : Patrol Readë¥¼ ì‹¤í–‰í•˜ëŠ” ê°„ê²©(ì£¼ê¸°)ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. Number of iterations completed : ì§€ê¸ˆê¹Œì§€ ìˆ˜í–‰ ì™„ë£Œëœ Patrol Read íšŸìˆ˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. Next start time : ë‹¤ìŒ Patrol Readê°€ ì‹¤í–‰ë˜ëŠ” ì‹œê°„ Patrol Read on SSD Devices : SSD(Solid State Drive)ì—ë„ Patrol Readë¥¼ ìˆ˜í–‰í•˜ëŠ”ì§€ ì—¬ë¶€ (Patrol ReadëŠ” ê¸°ë³¸ì ìœ¼ë¡œ SSD ì¥ì¹˜ì—ëŠ” ìˆ˜í–‰í•˜ì§€ ì•Šê³ , HDD ì¥ì¹˜ì—ì„œë§Œ ì‹¤í–‰í•©ë‹ˆë‹¤.)\nPR í™œì„±í™” # $ megacli -AdpPR -EnblAuto -aALL Adapter 0: Patrol Read Mode is set to AUTO. Exit Code: 0x00 PR ë¹„í™œì„±í™” # $ megacli -AdpPR -Dsbl -aALL Adapter 0: Patrol Read Mode is set to DISABLED. Exit Code: 0x00 PR ìŠ¤ìº” ìˆ˜ë™ì‹¤í–‰ # Patrol Read ìŠ¤ìº” ì‘ì—…ì€ I/O ìì›ì˜ ìµœëŒ€ 30%ê¹Œì§€ ì ìœ í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ PR ìŠ¤ìº” ìˆ˜ë™ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ê²½ìš° ë°˜ë“œì‹œ ë¶€í•˜ê°€ ì ì€ ì‹œê°„ëŒ€(off-peak times)ì— ì‹œí–‰í•´ì•¼ í•œë‹¤.\n$ megacli -AdpPR -Start -aALL PR ìŠ¤ìº” ì¤‘ì§€ # $ megacli -AdpPR -Stop -aALL 10. ë””ìŠ¤í¬ LED ë¸”ë§í¬ # ë””ìŠ¤í¬ êµì²´ ì‘ì—…ì„ ì§„í–‰í•  ë•Œ êµì²´ ëŒ€ìƒ ë””ìŠ¤í¬ì˜ ì „ë©´ LEDë¥¼ ì ë“±ì‹œí‚¨ í›„ êµì²´ ì‘ì—…ì„ ì§„í–‰í•˜ë©´ ì •ìƒ ë””ìŠ¤í¬ë¥¼ ì˜ëª» ì œê±°í•˜ëŠ” ë“±ì˜ ì¸ì  ì‹¤ìˆ˜(Human Fault)ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.\níŠ¹ì • ë””ìŠ¤í¬ì˜ ë¬¼ë¦¬ì  ìœ„ì¹˜ë¥¼ íŒŒì•…í•  ë•Œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.\n1. Enclosure, Slot ë²ˆí˜¸ í™•ì¸ # LED Blinkë¥¼ ì‹¤í–‰ì‹œí‚¤ë ¤ë©´ ë¨¼ì € í•´ë‹¹ ë””ìŠ¤í¬ì˜ Enclosure ë²ˆí˜¸(Enclosure Device ID)ì™€ ë””ìŠ¤í¬ ìŠ¬ë¡¯ ë²ˆí˜¸(Slot Number)ë¥¼ ë¨¼ì € íŒŒì•…í•´ì•¼í•œë‹¤.\n$ megacli -PDList -aALL Adapter #0 Enclosure Device ID: 252 Slot Number: 0 Drive\u0026#39;s position: DiskGroup: 0, Span: 0, Arm: 1 Enclosure position: N/A Device Id: 9 WWN: 5000C5005EC4558C Sequence Number: 2 Media Error Count: 0 Other Error Count: 0 Predictive Failure Count: 0 Last Predictive Failure Event Seq Number: 0 PD Type: SAS Enclosure Device ID: 252ëŠ” Enclosure ë²ˆí˜¸, Slot Number: 0ì€ ë””ìŠ¤í¬ ìŠ¬ë¡¯ ë²ˆí˜¸ë¥¼ ì˜ë¯¸í•œë‹¤.\n2. LED Blinking ì‹œì‘ # 252ë²ˆ Enclosureì˜ 0ë²ˆ ìŠ¬ë¡¯ì— ì¥ì°©ëœ ë””ìŠ¤í¬ëŠ” -physdrv ì˜µì…˜ì—ì„œ [252:0]ë¡œ í‘œê¸°í•œë‹¤.\n[252:0] --- - | +----\u0026gt; 0 : (Disk) Slot Number | +-------\u0026gt; 252 : Enclosure Device ID $ megacli -PdLocate -start -physdrv[252:0] -aALL Adapter: 0: Device at EnclId-252 SlotId-0 -- PD Locate Start Command was successfully sent to Firmware Exit Code: 0x00 ì„œë²„ ì „ë©´ë¶€ì— ì¥ì°©ëœ ë””ìŠ¤í¬ì˜ LEDê°€ ê¹œë¹¡ì´ëŠ”ì§€ í™•ì¸í•œë‹¤.\n3. LED Blinking ì¤‘ì§€ # $ megacli -PdLocate -stop -physdrv[252:0] -aALL Adapter: 0: Device at EnclId-252 SlotId-0 -- PD Locate Stop Command was successfully sent to Firmware Exit Code: 0x00 ì„œë²„ ì „ë©´ë¶€ì— ì¥ì°©ëœ 0ë²ˆ ë””ìŠ¤í¬ì˜ LED ì ë©¸ì´ ë©ˆì¶˜ë‹¤.\n","date":"Nov 18, 2021","permalink":"/blog/installing-megacli-on-linux/","section":"Blogs","summary":"ê°œìš” # LSI ì‚¬ì˜ RAID Controllerê°€ ì¥ì°©ëœ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ MegaCLI ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ RAID ê´€ë ¨ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","title":"MegaCLI ì„¤ì¹˜ ë° ì‚¬ìš©ë²•"},{"content":"ë°œë‹¨ # ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(Container Runtime)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\nì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” v1.20 ì´í›„ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œì„œ ë„ì»¤ ì‚¬ìš©ì„ ì¤‘ë‹¨(deprecating)í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ v1.20 ë²„ì „ë¶€í„°ëŠ” dockershimì´ ì§€ì› ì¤‘ë‹¨ë˜ì—ˆë‹¤(deprecated)ëŠ” ê²½ê³  ë©”ì„¸ì§€ê°€ ì¶œë ¥ëœë‹¤.\nUsing dockershim is deprecated, please consider using a full-fledged CRI implementation ì´ ë§ì€ ë„ì»¤ì— ë‚´ì¥ëœ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì¸ dockershimì´ ê³§ ì‚­ì œ ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. dockershimì˜ ì‚­ì œ ì‹œì ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.24 ë²„ì „ì— ì˜ˆì •ë˜ì–´ ìˆë‹¤.\nì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì—ëŠ” \u0026ldquo;ë‹¹í™©í•˜ì§€ ë§ˆë¼. ìƒê°ë³´ë‹¤ ê·¹ì ì´ì§€ ì•Šë‹¤.(You do not need to panic. Itâ€™s not as dramatic as it sounds.)\u0026rdquo; ë¼ê³  ì í˜€ìˆë‹¤.\në³€ê²½ì‚¬í•­ # kubeletê³¼ docker ì‚¬ì´ì— ìœ„ì¹˜í•œ dockershimì´ ì‚¬ë¼ì§„ë‹¤.\nkubelet ì•„í‚¤í…ì³ ë¹„êµ\nkubeletì—ì„œ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ìœ¼ë¡œ dockerë¥¼ ì‚¬ìš©í•  ê²½ìš° containerdì™€ ì§ì ‘ í†µì‹ í•œë‹¤. ì•„í‚¤í…ì³ê°€ ë” ê°„ê²°í•´ì§€ê³  ì„±ëŠ¥ì´ í–¥ìƒëœë‹¤.\níŒŒë“œ ì‹œì‘ì‹œ ì§€ì—°ì‹œê°„ ë¹„êµ\nìœ„ ê·¸ë˜í”„ëŠ” íŒŒë“œê°€ ì‹œì‘ë  ë•Œì˜ ì§€ì—°ì‹œê°„ì´ë‹¤. (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ) dockershimì„ ì´ìš©í•  ë•Œë³´ë‹¤ Containerdë¥¼ ì´ìš©í•  ë•Œ íŒŒë“œ ì‹œì‘ì†ë„ê°€ í›¨ì”¬ ë¹ ë¥¸ ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.\nì´ìœ  # ë°©ì¹˜ : ê°œë°œì‚¬ì¸ ë„ì»¤ëŠ” ë„ì»¤ì— ë‚´ì¥ëœ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì¸ dockershimì„ 2019ë…„ 3ì›” ì´í›„ë¡œ 2ë…„ ë„˜ê²Œ ì—…ë°ì´íŠ¸ ì—†ì´ ë°©ì¹˜í–ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” 1ë…„ê°„ ë„ì»¤ë¥¼ ê¸°ë‹¤ë ¤ì£¼ë˜ ì¤‘ ì§€ì› ì¤‘ë‹¨ ì„ ì–¸ì„ í•œ ê²ƒì´ë‹¤. í˜¸í™˜ì„± : ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” CRI(Container Runtime Interface) í‘œì¤€ì„ ì‚¬ìš©í•´ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ê³¼ í†µì‹ í•œë‹¤. ê·¸ëŸ¬ë‚˜ dockerëŠ” CRI í‘œì¤€ì„ ì§€í‚¤ì§€ ì•Šê³  ë³„ë„ë¡œ dockershimì„ í†µí•´ ë³€í™˜ì„ ê±°ì³ ë„ì»¤ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜í•´ ì‚¬ìš©í•´ì™”ë‹¤. dockershimìœ¼ë¡œ ì¸í•´ ìƒê¸´ ë¶ˆí•„ìš”í•˜ê³  ë³µì¡í•œ êµ¬ì¡° ë•Œë¬¸ì— ì¿ ë²„ë„¤í‹°ìŠ¤ ì¸¡ì—ì„œ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì¡Œë‹¤. ì˜í–¥/í•´ê²°ì±… # Kubernetes ì‹œìŠ¤í…œ ê´€ë¦¬ìì˜ ê´€ì \në„ì»¤ ì´ë¯¸ì§€ : ë„ì»¤ ì´ë¯¸ì§€ëŠ” OCI(Open Container Initiative) í‘œì¤€ì´ê¸° ë•Œë¬¸ì— ê³„ì†í•´ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ì¡°ì¹˜ê°€ í•„ìš”í•œ ì‚¬í•­ì€ ì—†ìŒ. ë…¸ë“œì˜ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ : ë§ˆìŠ¤í„° ë…¸ë“œì™€ ì›Œì»¤ ë…¸ë“œì˜ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ dockershimì—ì„œ CRIë¥¼ ì§€ì›í•˜ëŠ” containerdë‚˜ CRI-O ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•´ ë³€ê²½í•˜ë©´ ëœë‹¤. ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ containerdë‚˜ CRI-Oë¡œ ë³€ê²½í•˜ë©´ ê¸°ì¡´ì— ì“°ë˜ docker ëª…ë ¹ì–´ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ë‹ˆ ì°¸ê³ í•˜ì. ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì„¤ëª…\nCRI-O\në ˆë“œí–‡, ì¸í…”, SUSE, Hyper, IBMì˜ ê´€ë¦¬ìì™€ ì»¨íŠ¸ë¦¬ë·°í„°ë“¤ì´ ë§Œë“  ì»¤ë®¤ë‹ˆí‹° ì¤‘ì‹¬ì˜ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì´ë‹¤. CRI-OëŠ” containerë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê³  ìˆë‹¤. (ë„ì»¤ì˜ containerdì™€ ë™ì¼í•œ ì—­í• ) CRI-OëŠ” image build, CLI, image registry ìƒì„± ë“±ì˜ ë¶€ê°€ê¸°ëŠ¥ì€ ìˆ˜í–‰í•˜ì§€ ëª»í•œë‹¤.\ncontainerd\në‹¨ìˆœì„±, ê²¬ê³ ì„± ë° ì´ì‹ì„±ì„ ê°•ì¡°í•˜ëŠ” ì‚°ì—… í‘œì¤€ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„\n","date":"Nov 16, 2021","permalink":"/blog/k8s/kubernetes-is-deprecating-docker/","section":"Blogs","summary":"ë°œë‹¨ # ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(Container Runtime)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.","title":"ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë„ì»¤ ì§€ì› ì¤‘ë‹¨"},{"content":"ê°œìš” # cordon, uncordon, drain ëª…ë ¹ì–´ë¥¼ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ë…¸ë“œì˜ íŒŒë“œ ìŠ¤ì¼€ì¤„ë§ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤. ì£¼ë¡œ ë…¸ë“œì˜ íŒ¨ì¹˜ ì‘ì—…ì´ë‚˜ í•˜ë“œì›¨ì–´ ìœ ì§€ë³´ìˆ˜ ì‘ì—… ì‹œì— íŒŒë“œ ìŠ¤ì¼€ì¤„ë§ì„ ì‚¬ìš©í•œë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 Docker Desktop 4.1.1 (ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ëŠ¥ í™œì„±í™”ë¨) minikube v.1.24.0 (Homebrewë¡œ ì„¤ì¹˜) ë©€í‹°ë…¸ë“œ êµ¬ì„± : 1ëŒ€ì˜ ë§ˆìŠ¤í„° ë…¸ë“œ(Control Plane) + 3ëŒ€ì˜ ì›Œì»¤ ë…¸ë“œ ë³¸ë¡  # cordon # kubectl cordonì€ ì§€ì •í•œ ë…¸ë“œì— ì´ë¯¸ ë°°í¬ëœ PodëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ ì´í›„ ì¶”ê°€ì ì¸ Pod ìŠ¤ì¼€ì¤„ë§ì—ì„œ ì œì™¸í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤.\ncordon ì„¤ì •ëœ ì‹œì  ì´í›„ë¶€í„° í•´ë‹¹ ë…¸ë“œì—ëŠ” ì¶”ê°€ë¡œ podê°€ ë°°í¬ë˜ì§€ ì•ŠëŠ”ë‹¤.\nì„¤ì •ë°©ë²• # $ kubectl cordon \u0026lt;ë…¸ë“œ ì´ë¦„\u0026gt; ì˜ˆì œ # ë…¸ë“œ í™•ì¸ # $ kubectl get no NAME STATUS ROLES AGE VERSION mnlab Ready,SchedulingDisabled control-plane,master 2d16h v1.22.3 mnlab-m02 Ready \u0026lt;none\u0026gt; 43s v1.22.3 mnlab-m03 Ready \u0026lt;none\u0026gt; 29s v1.22.3 mnlab-m04 Ready \u0026lt;none\u0026gt; 16s v1.22.3 í˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ì—ëŠ” í´ëŸ¬ìŠ¤í„° ë…¸ë“œ 4ëŒ€(Master node 1 + Worker node 3)ê°€ ì¡´ì¬í•œë‹¤.\ncordon ì„¤ì • # mnlab-m04 ë…¸ë“œì— cordonì„ ì„¤ì •í–ˆë‹¤.\n$ kubectl cordon mnlab-m04 node/mnlab-m04 cordoned $ kubectl get no NAME STATUS ROLES AGE VERSION mnlab Ready,SchedulingDisabled control-plane,master 2d17h v1.22.3 mnlab-m02 Ready \u0026lt;none\u0026gt; 12m v1.22.3 mnlab-m03 Ready \u0026lt;none\u0026gt; 11m v1.22.3 mnlab-m04 Ready,SchedulingDisabled \u0026lt;none\u0026gt; 11m v1.22.3 cordon ì²˜ë¦¬í•œ mnlab-m04 ë…¸ë“œê°€ ìŠ¤ì¼€ì¤„ë§ ë¹„í™œì„±í™”(SchedulingDisabled) ìƒíƒœë¡œ ë¹ ì¡Œë‹¤.\ndeployment ìƒì„± # ì´ì œ mnlab-m04 ë…¸ë“œì— podê°€ ë°°í¬ ì•ˆë˜ëŠ”ì§€ ì§ì ‘ í™•ì¸í•˜ê¸° ìœ„í•´ deploymentë¥¼ ìƒì„±í•´ë³¸ë‹¤.\n$ cat deploy-nginx.yaml apiVersion: apps/v1 kind: Deployment # íƒ€ì…ì€ Deployment metadata: name: nginx-deployment labels: app: nginx spec: replicas: 5 # 5ê°œì˜ Podë¥¼ ìœ ì§€í•œë‹¤. selector: # Deploymentì— ì†í•˜ëŠ” Podì˜ ì¡°ê±´ matchLabels: # labelì˜ app ì†ì„±ì˜ ê°’ì´ nginx ì¸ Podë¥¼ ì°¾ì•„ë¼. app: nginx template: metadata: labels: app: nginx # labels í•„ë“œë¥¼ ì‚¬ìš©í•´ì„œ app: nginx ë ˆì´ë¸”ì„ ë¶™í˜ spec: containers: # containerì— ëŒ€í•œ ì •ì˜ - name: nginx # containerì˜ ì´ë¦„ image: nginx:1.7.9 # Docker Hubì— ì—…ë¡œë“œëœ nginx:1.7.9 ì´ë¯¸ì§€ë¥¼ ì‚¬ìš© ports: - containerPort: 80 5ê°œì˜ nginx podë¥¼ ìƒì„±í•˜ëŠ” deployment yaml íŒŒì¼ì´ë‹¤.\nì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ëŠ” Docker Hubì— ê³µì‹ ë“±ë¡ëœ nginx:1.7.9ë¥¼ ì‚¬ìš©í•œë‹¤.\n$ kubectl apply -f deploy-nginx.yaml deployment.apps/nginx-deployment created ì‘ì„±í•œ yaml íŒŒì¼ë¡œ deploymentë¥¼ ìƒì„±í–ˆë‹¤.\në°°í¬ ê²°ê³¼í™•ì¸ # deploymentë¡œ pod 5ëŒ€ë¥¼ ìƒì„±í–ˆì§€ë§Œ mnlab-m04 ë…¸ë“œì—ëŠ” podê°€ 1ëŒ€ë„ ë°°í¬ë˜ì§€ ì•Šì•˜ë‹¤!\n$ kubectl get all -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES pod/nginx-deployment-5d59d67564-5jz9r 1/1 Running 0 12s 10.244.1.3 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-grwwc 1/1 Running 0 12s 10.244.2.3 mnlab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-pmsfr 1/1 Running 0 12s 10.244.2.2 mnlab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-qwnht 1/1 Running 0 12s 10.244.1.4 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-xc8tv 1/1 Running 0 12s 10.244.1.2 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 15h \u0026lt;none\u0026gt; NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR deployment.apps/nginx-deployment 5/5 5 5 12s nginx nginx:1.7.9 app=nginx NAME DESIRED CURRENT READY AGE CONTAINERS IMAGES SELECTOR replicaset.apps/nginx-deployment-5d59d67564 5 5 5 12s nginx nginx:1.7.9 app=nginx,pod-template-hash=5d59d67564 cordon í•´ì œ # $ kubectl uncordon mnlab-m04 node/mnlab-m04 uncordoned mnlab-m04 ë…¸ë“œì˜ cordonì´ í•´ì œë˜ì—ˆë‹¤.\n$ kubectl get no NAME STATUS ROLES AGE VERSION mnlab Ready,SchedulingDisabled control-plane,master 2d17h v1.22.3 mnlab-m02 Ready \u0026lt;none\u0026gt; 15m v1.22.3 mnlab-m03 Ready \u0026lt;none\u0026gt; 14m v1.22.3 mnlab-m04 Ready \u0026lt;none\u0026gt; 14m v1.22.3 ì´í›„ë¶€í„° mnlab-m04 ë…¸ë“œì— podê°€ ë‹¤ì‹œ ë°°í¬ë  ìˆ˜ ìˆë‹¤.\ndrain # kubectl drainì€ ì§€ì •í•œ ë…¸ë“œì— ì´ë¯¸ ë°°í¬ëœ podë¥¼ ì œê±°í•œ í›„ ë‹¤ë¥¸ ë…¸ë“œì— ì¬ë°°ì¹˜í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤. (ì°¸ê³ ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ podë¥¼ ì˜®ê¸°ëŠ” ê¸°ëŠ¥ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. íŒŒë“œë¥¼ ë‹¤ë¥¸ ë…¸ë“œì— ë‹¤ì‹œ ìƒì„±í•  ë¿ì´ë‹¤.)\ndrain ì„¤ì •ëœ ë…¸ë“œì—ëŠ” podê°€ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì¬ë°°ì¹˜ëœ í›„ ìŠ¤ì¼€ì¤„ë§ì´ ë¹„í™œì„±í™”(SchedulingDisabled)ë˜ì–´ ì´í›„ ì–´ë– í•œ podë„ ë°°í¬ë˜ì§€ ì•ŠëŠ”ë‹¤. ë…¸ë“œì˜ í•˜ë“œì›¨ì–´ ì‘ì—…ì´ë‚˜ ë¦¬ë¶€íŒ…ì´ í•„ìš”í•  ê²½ìš°, ë¨¼ì € drainìœ¼ë¡œ podë¥¼ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì¬ë°°ì¹˜í•œ í›„ ì›í•˜ëŠ” ìœ ì§€ë³´ìˆ˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ ëœë‹¤.\nì£¼ì˜ì‚¬í•­ : ReplicationController, ReplicaSet, Deployment, StatefulSet ë“±ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ê°œë³„ íŒŒë“œ(Static pod)ì˜ ê²½ìš° drain ì‹¤í–‰ì‹œ ë‹¤ë¥¸ ë…¸ë“œì— ì¬ë°°í¬ ë˜ì§€ì•Šê³  ì‚­ì œë§Œ ë°œìƒí•˜ë¯€ë¡œ ë°ì´í„°ê°€ ì†ì‹¤ë  ìˆ˜ ìˆë‹¤.\ndrainì„ ì‹¤í–‰í•˜ë©´ ë°œìƒí•˜ëŠ” ì¼\ní•´ë‹¹ ë…¸ë“œì— ë” ì´ìƒ pod ë°°í¬ë¥¼ í•˜ì§€ ì•Šë„ë¡ ìŠ¤ì¼€ì¤„ë§ ë¹„í™œì„±í™” (SchedulingDisabled) ë…¸ë“œì— ì´ë¯¸ ë°°í¬ëœ podë¥¼ ëª¨ë‘ ì‚­ì œ ì‚­ì œëœ podëŠ” ìƒˆë¡œìš´ ì •ìƒ ë…¸ë“œì—ì„œ ì¬ìƒì„±ë¨ drainì€ cordon ê¸°ëŠ¥ì— podë¥¼ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì¬ë°°ì¹˜í•˜ëŠ” ê¸°ëŠ¥ 2ê°œê°€ ê²°í•©ëœ ê±°ë¼ê³  ì´í•´í•˜ë©´ ì‰½ë‹¤.\nì„¤ì •ë°©ë²• # $ kubectl drain \u0026lt;ë…¸ë“œ ì´ë¦„\u0026gt; --ignore-daemonsets ì˜ˆì œ # ë…¸ë“œ í™•ì¸ # $ kubectl get no NAME STATUS ROLES AGE VERSION mnlab Ready,SchedulingDisabled control-plane,master 2d17h v1.22.3 mnlab-m02 Ready \u0026lt;none\u0026gt; 29m v1.22.3 mnlab-m03 Ready \u0026lt;none\u0026gt; 28m v1.22.3 mnlab-m04 Ready \u0026lt;none\u0026gt; 28m v1.22.3 í˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ì—ëŠ” í´ëŸ¬ìŠ¤í„° ë…¸ë“œ 4ëŒ€(Master node 1 + Worker node 3)ê°€ ì¡´ì¬í•œë‹¤.\ndeployment ë°°í¬ # cordon ì˜ˆì œì—ì„œ ì“´ deploymentë¥¼ ë˜‘ê°™ì´ ë°°í¬í•´ë†“ì•˜ë‹¤.\n$ kubectl get all -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES pod/nginx-deployment-5d59d67564-2jdjt 1/1 Running 0 6s 10.244.1.7 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-4qjvt 1/1 Running 0 6s 10.244.2.7 mnlab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-6qjg5 1/1 Running 0 6s 10.244.3.3 mnlab-m04 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-j78cp 1/1 Running 0 6s 10.244.2.8 mnlab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-j8wft 1/1 Running 0 6s 10.244.1.8 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 15h \u0026lt;none\u0026gt; NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR deployment.apps/nginx-deployment 5/5 5 5 6s nginx nginx:1.7.9 app=nginx NAME DESIRED CURRENT READY AGE CONTAINERS IMAGES SELECTOR replicaset.apps/nginx-deployment-5d59d67564 5 5 5 6s nginx nginx:1.7.9 app=nginx,pod-template-hash=5d59d67564 5ê°œì˜ podê°€ mnlab-m02, mnlab-m03, mnlab-m04 ë…¸ë“œì— ê³¨ê³ ë£¨ ë°°í¬ë˜ì–´ ìˆëŠ” ìƒíƒœì´ë‹¤. ì´ ìƒíƒœì—ì„œ mnlab-m04 ë…¸ë“œë¥¼ drain í•´ë³¸ë‹¤.\ndrain # $ kubectl drain mnlab-m04 --ignore-daemonsets node/mnlab-m04 cordoned WARNING: ignoring DaemonSet-managed Pods: kube-system/kindnet-jgdz8, kube-system/kube-proxy-9fxn7 evicting pod default/nginx-deployment-5d59d67564-6qjg5 pod/nginx-deployment-5d59d67564-6qjg5 evicted node/mnlab-m04 evicted í˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ì¤€ìœ¼ë¡œ Worker nodeë§ˆë‹¤ ì‹œìŠ¤í…œ ê´€ë ¨ Podì¸ kindnetê³¼ kube-proxyê°€ ì¡´ì¬í•œë‹¤.\ndrain ì‹¤í–‰ì‹œ --ignore-daemonsets ì˜µì…˜ì„ ì¤˜ì„œ ë°ëª¬ì…‹ì— ì˜í•´ ìƒì„±ëœ ì‹œìŠ¤í…œ PodëŠ” drainì—ì„œ ì œì™¸í•œë‹¤.\n$ kubectl get no NAME STATUS ROLES AGE VERSION mnlab Ready,SchedulingDisabled control-plane,master 2d17h v1.22.3 mnlab-m02 Ready \u0026lt;none\u0026gt; 31m v1.22.3 mnlab-m03 Ready \u0026lt;none\u0026gt; 31m v1.22.3 mnlab-m04 Ready,SchedulingDisabled \u0026lt;none\u0026gt; 31m v1.22.3 mnlab-m04 ë…¸ë“œê°€ ìŠ¤ì¼€ì¤„ë§ ë¹„í™œì„±í™” ìƒíƒœ(SchedulingDisabled)ë¡œ ë¹ ì¡Œë‹¤. ë” ì´ìƒ í•´ë‹¹ ë…¸ë“œì— podê°€ ìŠ¤ì¼€ì¤„ë§ë˜ì–´ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\nê²°ê³¼í™•ì¸ # mnlab-m04 ë…¸ë“œì— ìˆë˜ pod 1ëŒ€ê°€ ì‚­ì œëœ í›„ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì¬ë°°í¬ë˜ì—ˆë‹¤.\n$ kubectl get all -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES pod/nginx-deployment-5d59d67564-2jdjt 1/1 Running 0 91s 10.244.1.7 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-4qjvt 1/1 Running 0 91s 10.244.2.7 mnlab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-j78cp 1/1 Running 0 91s 10.244.2.8 mnlab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-j8wft 1/1 Running 0 91s 10.244.1.8 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-nn699 1/1 Running 0 20s 10.244.1.9 mnlab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 15h \u0026lt;none\u0026gt; NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR deployment.apps/nginx-deployment 5/5 5 5 91s nginx nginx:1.7.9 app=nginx NAME DESIRED CURRENT READY AGE CONTAINERS IMAGES SELECTOR replicaset.apps/nginx-deployment-5d59d67564 5 5 5 91s nginx nginx:1.7.9 app=nginx,pod-template-hash=5d59d67564 í•´ì œ # í•´ì œ ë°©ë²•ì€ cordonê³¼ ë™ì¼í•˜ê²Œ uncordon ëª…ë ¹ì–´ë¡œ ìŠ¤ì¼€ì¤„ë§ ë¹„í™œì„±í™”ë¥¼ í•´ì œí•œë‹¤.\n$ kubectl uncordon mnlab-m04 node/mnlab-m04 uncordoned mnlab-m04 ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ ë¹„í™œì„±í™”(SchedulingDisabled) ìƒíƒœê°€ ì‚¬ë¼ì¡Œë‹¤. ì´í›„ë¶€í„°ëŠ” ë‹¤ì‹œ í•´ë‹¹ ë…¸ë“œë¡œ podê°€ ë°°í¬ë  ê²ƒì´ë‹¤.\n$ kubectl get no NAME STATUS ROLES AGE VERSION mnlab Ready,SchedulingDisabled control-plane,master 2d17h v1.22.3 mnlab-m02 Ready \u0026lt;none\u0026gt; 48m v1.22.3 mnlab-m03 Ready \u0026lt;none\u0026gt; 48m v1.22.3 mnlab-m04 Ready \u0026lt;none\u0026gt; 47m v1.22.3 ","date":"Nov 14, 2021","permalink":"/blog/k8s/cordon-and-drain/","section":"Blogs","summary":"ê°œìš” # cordon, uncordon, drain ëª…ë ¹ì–´ë¥¼ í†µí•´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ë…¸ë“œì˜ íŒŒë“œ ìŠ¤ì¼€ì¤„ë§ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.","title":"ì¿ ë²„ë„¤í‹°ìŠ¤ cordon, drain"},{"content":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— lshw(list hardware) íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ ì„œë²„ ëª¨ë¸, CPU, Memory ë“±ì˜ í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ ì›ê²©ìœ¼ë¡œ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤. ì‹œìŠ¤í…œ ê´€ë¦¬ ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€ë“¤ì„ ì ì ˆí•œ ìƒí™©ì— í™œìš©í•˜ë©´ íš¨ìœ¨ì ì¸ ì‹œìŠ¤í…œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. í™˜ê²½ # OS : Red Hat Enterprise Linux Server release 6.x Architecture : x86_64 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : rpm (Red hat Package Manager) ì„¤ì¹˜ íŒ¨í‚¤ì§€ lshw B.02.17 (lshw-2.17-1.el6.rf.x86_64.rpm)\në³¸ë¡  # íŒ¨í‚¤ì§€ ì„¤ì¹˜ # 1. ì„¤ì¹˜ì „ ì •ë³´ í™•ì¸ # $ arch x86_64 í•´ë‹¹ ì„œë²„ì˜ ì•„í‚¤í…ì³ëŠ” Intel CPU ê¸°ë°˜ 64bit ì•„í‚¤í…ì³(x86_64)ì´ë‹¤.\n2. íŒ¨í‚¤ì§€ ì„¤ì¹˜ # $ ls -lh í•©ê³„ 1.7M -rw-rw-r-- 1 dev dev 1.7M 2021-11-12 08:35 lshw-2.17-1.el6.rf.x86_64.rpm ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ëŒ€ìƒ ì„œë²„ì˜ ì•„í‚¤í…ì³ì™€ ìš´ì˜ì²´ì œ ë²„ì „ì— ë§ëŠ” lshw íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ì„ ì—…ë¡œë“œ í•´ë†“ëŠ”ë‹¤.\níŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ì€ ë°˜ë“œì‹œ ê²€ì¦ëœ íŒ¨í‚¤ì§€ ì €ì¥ì†Œì—ì„œ ë°›ì•„ì•¼ í•œë‹¤.\n$ rpm -ivh lshw-2.17-1.el6.rf.x86_64.rpm ê²½ê³ : lshw-2.17-1.el6.rf.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 6b8d79e6: NOKEY ì¤€ë¹„ ì¤‘... ########################################### [100%] 1:lshw ########################################### [100%] lshw íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ ì™„ë£Œëë‹¤.\n3. ì„¤ì¹˜ê²°ê³¼ í™•ì¸ # $ rpm -qa lshw lshw-2.17-1.el6.rf.x86_64 lshw íŒ¨í‚¤ì§€ê°€ RPM(Redhat Package Manaer)ì—ì„œ ì¡°íšŒëœë‹¤. ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ì˜ ë²„ì „ì€ 2.17.1 ì´ë‹¤.\n$ lshw -version B.02.17 the latest version is B.02.18 ë²„ì „ ì¶œë ¥ìœ¼ë¡œ ëª…ë ¹ì–´ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•œë‹¤.\nì¡°ì‘ë²• # 1. ìƒì„¸ì •ë³´ ì¶œë ¥ # ì•„ë¬´ ì˜µì…˜ ì—†ì´ lshw ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëª¨ë“  í•˜ë“œì›¨ì–´ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.\n$ lshw dev-server1 description: Expansion Chassis product: UCSC-C220-M3S vendor: Cisco Systems Inc version: A serial: XXX1704X1X0 width: 64 bits capabilities: smbios-2.7 dmi-2.7 vsyscall64 vsyscall32 configuration: boot=normal chassis=expansion frontpanel_password=enabled keyboard_password=disabled power-on_password=di sabled uuid=31CB0CAD-EB83-4327-8599-83C27AD698A8 *-core description: Motherboard product: UCSC-C220-M3S vendor: Cisco Systems Inc physical id: 0 version: 74-10442-01 serial: XXX1703XXX7 *-firmware description: BIOS 2. ìš”ì•½ì •ë³´ ì¶œë ¥ # -short ì˜µì…˜ì„ ë¶™ì´ë©´ ì „ì²´ í•˜ë“œì›¨ì–´ì˜ ìš”ì•½ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.\n$ lshw -short H/W path Device Class Description ======================================================== system UCSC-C220-M3S /0 bus UCSC-C220-M3S /0/0 memory 64KiB BIOS /0/1 memory /0/1/0 memory 8GiB DIMM DDR3 1600 MHz (0.6 ns) /0/2 memory /0/2/0 memory DIMM Synchronous [empty] /0/3 memory [...] /0/13.1 generic Sandy Bridge Ring to PCI Express Performance Monitor /0/13.4 generic Sandy Bridge QuickPath Interconnect Agent Ring Registers /0/13.5 generic Sandy Bridge Ring to QuickPath Interconnect Link 0 Performance Monitor /0/13.6 generic Sandy Bridge Ring to QuickPath Interconnect Link 1 Performance Monitor 3. íŠ¹ì • íŒŒíŠ¸ í™•ì¸ # í´ë˜ìŠ¤ëŠ” í•˜ë“œì›¨ì–´ì˜ íŠ¹ì • ì¹´í…Œê³ ë¦¬(Part)ë¥¼ ì˜ë¯¸í•œë‹¤. í´ë˜ìŠ¤ì—ëŠ” system, cpu, memory, disk, volume, storage ë“±ì´ ìˆë‹¤.\n-c ë˜ëŠ” -class ì˜µì…˜ì„ ë¶™ì´ë©´ íŠ¹ì • í•˜ë“œì›¨ì–´ íŒŒíŠ¸(í´ë˜ìŠ¤)ì˜ ì •ë³´ë§Œ ì¶œë ¥í•œë‹¤.\nì–´ë–¤ í´ë˜ìŠ¤ë“¤ì´ ì¡´ì¬í•˜ëŠ”ì§€ ê¶ê¸ˆí•˜ë‹¤ë©´ lshw -short ëª…ë ¹ì–´ ê²°ê³¼ì˜ Class ì»¬ëŸ¼ì„ ì°¸ì¡°í•˜ì.\n$ lshw -c system dev-server1 description: Expansion Chassis product: UCSC-C220-M3S vendor: Cisco Systems Inc version: A serial: XXX0000X0X0 width: 64 bits capabilities: smbios-2.7 dmi-2.7 vsyscall64 vsyscall32 configuration: boot=normal chassis=expansion frontpanel_password=enabled keyboard_password=disabled power-on_password=disabled uuid=31CB0CAD-EB83-4327-8599-83C27AD698A8 ì„œë²„ ëª¨ë¸ëª…(product), ì œì¡°ì‚¬(vendor), ê³ ìœ ë²ˆí˜¸(serial)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ lshw -c cpu *-cpu:0 description: CPU product: Xeon vendor: Intel Corp. physical id: 32 bus info: cpu@0 version: Intel(R) Xeon(R) CPU E5-2667 0 @ 2.90GHz slot: CPU1 size: 1200MHz capacity: 4GHz width: 64 bits clock: 100MHz capabilities: x86-64 fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm dca sse4_1 sse4_2 x2apic popcnt aes xsave avx lahf_lm ida arat epb xsaveopt pln pts tpr_shadow vnmi flexpriority ept vpid cpufreq configuration: cores=6 enabledcores=6 threads=12 *-cpu:1 DISABLED description: CPU [empty] physical id: 33 slot: CPU2 CPUì™€ ê´€ë ¨ëœ ìƒì„¸ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\ní™•ì¸ ê°€ëŠ¥í•œ ì •ë³´\nCPU ì†Œì¼“ ìˆ˜(cpu:0, cpu:1) CPU ì•„í‚¤í…ì³(x86-64) CPU ëª¨ë¸ëª…(version) ì½”ì–´ ìˆ˜(cores=6) ìŠ¤ë ˆë“œ ìˆ˜(threads=12)\n$ lshw -c memory *-firmware description: BIOS vendor: Cisco Systems, Inc. physical id: 0 version: C220M3.1.4.7b.0.100520120256 date: 10/05/2012 size: 64KiB capacity: 4032KiB capabilities: pci upgrade shadowing cdboot bootselect socketedrom edd int13floppy1200 int13floppy720 int13floppy2880 int5printscreen int9keyboard int14serial int17printer acpi usb biosbootspecification uefi *-memory:0 UNCLAIMED physical id: 1 *-bank UNCLAIMED description: DIMM DDR3 1600 MHz (0.6 ns) product: M393B1K70DH0-YK0 vendor: Samsung physical id: 0 serial: 3592XX2X slot: DIMM_A1 size: 8GiB width: 64 bits clock: 1600MHz (0.6ns) *-memory:1 UNCLAIMED physical id: 2 *-bank UNCLAIMED description: DIMM Synchronous [empty] product: NO DIMM vendor: NO DIMM physical id: 0 serial: NO DIMM slot: DIMM_A2 Memory Bank ì˜ ì „ì²´ ê°œìˆ˜, ì‚¬ìš©ì¤‘ì¸ ê°œìˆ˜, ë©”ëª¨ë¦¬ ìš©ëŸ‰, ë™ì‘í´ëŸ­, ë©”ëª¨ë¦¬ ëª¨ë¸ëª…, ë©”ëª¨ë¦¬ ê³ ìœ ë²ˆí˜¸(serial)ê¹Œì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n4. HTML íŒŒì¼ë¡œ ë³´ê¸° # CLI í™˜ê²½ì—ì„œ ë³´ëŠ”ê²Œ ë¶ˆí¸í•œ ì—”ì§€ë‹ˆì–´ë¼ë©´ í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ HTML íŒŒì¼ë¡œ ì €ì¥í•´ ì›¹ë¸Œë¼ìš°ì €ì—ì„œ ë³´ëŠ” ë°©ë²•ë„ ìˆë‹¤.\n$ lshw -html \u0026gt;\u0026gt; /tmp/lshw.html CLIê°€ ë” í¸í•œ ì—”ì§€ë‹ˆì–´ë¼ë©´ ì €ì¥ëœ html íŒŒì¼ì„ SFTP ë“±ì„ ì´ìš©í•´ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì‹¤í–‰ë˜ëŠ” í™˜ê²½ìœ¼ë¡œ ì˜®ê²¨ì„œ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ê²Œ ë²ˆê±°ë¡­ê¸° ë•Œë¬¸ì— êµ³ì´ ì´ ë°©ë²•ì„ ì“¸ í•„ìš”ê°€ ìˆë‚˜ ì˜êµ¬ì‹¬ì´ ë“ ë‹¤.\nê²°ë¡  # ì´ ê¸€ì—ì„œ ì†Œê°œí•˜ëŠ” lshw íŒ¨í‚¤ì§€ëŠ” í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²• ì¤‘ í•œ ê°€ì§€ì¼ ë¿ì´ë‹¤. lshw ë§ê³ ë„ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê°€ì§„ íŒ¨í‚¤ì§€ë“¤ì´ ë„ë ¤ìˆë‹¤.\nì‹œìŠ¤í…œ ê´€ë¦¬ì—ëŠ” ì •ë‹µì´ ì—†ê¸° ë•Œë¬¸ì— ì—”ì§€ë‹ˆì–´ ê°ìê°€ ì˜ ì•Œê³  ìµìˆ™í•œ ë°©ë²•ìœ¼ë¡œ í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ë©´ ëœë‹¤.\n","date":"Nov 12, 2021","permalink":"/blog/lshw-on-linux/","section":"Blogs","summary":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— lshw(list hardware) íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ ì„œë²„ ëª¨ë¸, CPU, Memory ë“±ì˜ í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ ì›ê²©ìœ¼ë¡œ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤.","title":"lshw íŒ¨í‚¤ì§€ë¡œ ë¦¬ëˆ…ìŠ¤ í•˜ë“œì›¨ì–´ ì •ë³´ í™•ì¸"},{"content":"ê°œìš” # minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œ(1 master node + 2 worker node)ë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.\ní™˜ê²½ # Hardware : macBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 minikube v1.24.0 ë…¸ë“œ 3ëŒ€ë¥¼ ìƒì„±í•  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— í•˜ë“œì›¨ì–´ì˜ ë©”ëª¨ë¦¬ ë¦¬ì†ŒìŠ¤ê°€ ìµœì†Œ 8GB ì´ìƒì€ ë˜ì–´ì•¼ ì•ˆì •ì ìœ¼ë¡œ ì‹¤ìŠµí•  ìˆ˜ ìˆë‹¤.\në³¸ë¡  # 1. ë©€í‹°ë…¸ë“œ ìƒì„± # ì˜µì…˜ì„¤ëª…\n--nodes=\u0026lt;ë…¸ë“œ ìˆ˜\u0026gt; : ìƒì„±í•  ë…¸ë“œì˜ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. Default ê°’ì€ 1ê°œ. ë‚˜ëŠ” 4ê°œê¹Œì§€ë§Œ ì‹œë„í•´ë´¤ëŠ”ë°, ë§¥ë¶ì— ì•„ì§ ë¬¸ì œëŠ” ì—†ë‹¤. -p \u0026lt;í”„ë¡œíŒŒì¼ëª…\u0026gt; : í”„ë¡œíŒŒì¼(Profile)ì„ ë”°ë¡œ ì§€ì •í•´ì„œ ì‘ì—…ì˜ì—­ì„ ë¶„ë¦¬í•œë‹¤. multinode-lab í”„ë¡œíŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì–´ ì‘ì—…ì˜ì—­ì„ êµ¬ë¶„ì§“ê³ , ë…¸ë“œ 3ëŒ€ë¥¼ ìƒì„±í•œë‹¤. --driver=\u0026lt;ë“œë¼ì´ë²„ ì´ë¦„\u0026gt; : ì–´ë–¤ ê°€ìƒí™˜ê²½ì— ë…¸ë“œë¥¼ ìƒì„±í•  ê²ƒì¸ì§€ ê²°ì •í•œë‹¤. ë”°ë¡œ ë“œë¼ì´ë²„ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ minikubeì—ì„œ íƒìƒ‰í•œ í›„ ì•Œì•„ì„œ ì§€ì •í•´ ìƒì„±í•´ì¤€ë‹¤. ë“œë¼ì´ë²„ì˜ ê²½ìš° ê°ì ì‹¤í–‰í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. (e.g. minikube start --driver=docker) $ minikube start --nodes=3 -p multinode-lab ğŸ˜„ [multinode-lab] Darwin 12.0.1 (arm64) ì˜ minikube v1.24.0 âœ¨ ìë™ì ìœ¼ë¡œ docker ë“œë¼ì´ë²„ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë“œë¼ì´ë²„ ëª©ë¡: virtualbox, ssh ğŸ‘ multinode-lab í´ëŸ¬ìŠ¤í„°ì˜ multinode-lab ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì‹œì‘í•˜ëŠ” ì¤‘ ğŸšœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ... ğŸ”¥ Creating docker container (CPUs=2, Memory=1988MB) ... ğŸ³ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘ â–ª ì¸ì¦ì„œ ë° í‚¤ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ ... â–ª ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ë¶€íŒ…... â–ª RBAC ê·œì¹™ì„ êµ¬ì„±í•˜ëŠ” ì¤‘ ... ğŸ”— Configuring CNI (Container Networking Interface) ... ğŸ” Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸... â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5 ğŸŒŸ ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass ğŸ‘ Starting worker node multinode-lab-m02 in cluster multinode-lab ğŸšœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ... ğŸ”¥ Creating docker container (CPUs=2, Memory=1988MB) ... ğŸŒ ë„¤íŠ¸ì›Œí¬ ì˜µì…˜ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤ â–ª NO_PROXY=192.168.58.2 ğŸ³ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘ â–ª env NO_PROXY=192.168.58.2 ğŸ” Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸... ğŸ‘ Starting worker node multinode-lab-m03 in cluster multinode-lab ğŸšœ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ... ğŸ”¥ Creating docker container (CPUs=2, Memory=1988MB) ... ğŸŒ ë„¤íŠ¸ì›Œí¬ ì˜µì…˜ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤ â–ª NO_PROXY=192.168.58.2,192.168.58.3 ğŸ³ ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘ â–ª env NO_PROXY=192.168.58.2 â–ª env NO_PROXY=192.168.58.2,192.168.58.3 ğŸ” Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸... ğŸ„ ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ \u0026#34;multinode-lab\u0026#34; í´ëŸ¬ìŠ¤í„°ì™€ \u0026#34;default\u0026#34; ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. minikubeëŠ” ë…¸ë“œë¥¼ ìƒì„±í•˜ë©´ì„œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸(CNI, Container Network Interface)ê¹Œì§€ ìë™ êµ¬ì„±í•´ì¤€ë‹¤.\në…¸ë“œ 1ëŒ€ë‹¹ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì˜ 2 CPU, ì•½ 2GBì˜ ë©”ëª¨ë¦¬ê°€ í• ë‹¹ëœë‹¤.\n2. ë…¸ë“œ ë¦¬ìŠ¤íŠ¸ í™•ì¸ # $ minikube node list -p multinode-lab multinode-lab\t192.168.58.2 multinode-lab-m02\t192.168.58.3 multinode-lab-m03\t192.168.58.4 3ëŒ€ì˜ ë©€í‹°ë…¸ë“œë¡œ êµ¬ì„±ë˜ì—ˆë‹¤.\nMaster Node 1ëŒ€ : multinode-lab Worker Node 2ëŒ€ : multinode-lab-m02, multinode-lab-m03 3. ë…¸ë“œ ìƒíƒœ í™•ì¸ (minikube) # $ minikube status -p multinode-lab multinode-lab type: Control Plane host: Running kubelet: Running apiserver: Running kubeconfig: Configured multinode-lab-m02 type: Worker host: Running kubelet: Running multinode-lab-m03 type: Worker host: Running kubelet: Running 3ëŒ€ì˜ ë…¸ë“œê°€ ëª¨ë‘ ì •ìƒ ì‹¤í–‰ì¤‘(Running)ì´ë‹¤. type: ê°’ì„ ë³´ë©´ í•´ë‹¹ ë…¸ë“œê°€ Master node(Control plane)ì¸ì§€ Worker nodeì¸ì§€ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.\n4. ë…¸ë“œ ìƒíƒœ í™•ì¸ (kubernetes) # kubectl ëª…ë ¹ì–´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ ìƒíƒœë¥¼ í™•ì¸í•´ë³´ì.\n$ kubectl get no NAME STATUS ROLES AGE VERSION multinode-lab Ready control-plane,master 3m32s v1.22.3 multinode-lab-m02 Ready \u0026lt;none\u0026gt; 3m10s v1.22.3 multinode-lab-m03 Ready \u0026lt;none\u0026gt; 2m43s v1.22.3 kubernetesì—ì„œë„ ë…¸ë“œ 3ëŒ€ê°€ ì •ìƒì ìœ¼ë¡œ ì¸ì‹ë˜ì—ˆë‹¤.\në…¸ë“œì˜ ROLES ê°’ì´ control-plane,masterì´ë©´ ë§ˆìŠ¤í„° ë…¸ë“œ, \u0026lt;none\u0026gt;ì´ë©´ ì›Œì»¤ë…¸ë“œì´ë‹¤.\n5. deployment êµ¬ì„± # yaml ì‘ì„±\n$ cat nginx-deploy.yaml apiVersion: apps/v1 kind: Deployment # íƒ€ì…ì€ Deployment metadata: name: nginx-deployment labels: app: nginx spec: replicas: 3 # 3ê°œì˜ Podë¥¼ ìœ ì§€í•œë‹¤. selector: # Deploymentì— ì†í•˜ëŠ” Podì˜ ì¡°ê±´ matchLabels: # labelì˜ app ì†ì„±ì˜ ê°’ì´ nginx ì¸ Podë¥¼ ì°¾ì•„ë¼. app: nginx template: metadata: labels: app: nginx # labels í•„ë“œë¥¼ ì‚¬ìš©í•´ì„œ app: nginx ë ˆì´ë¸”ì„ ë¶™í˜ spec: containers: # containerì— ëŒ€í•œ ì •ì˜ - name: nginx # containerì˜ ì´ë¦„ image: nginx:1.7.9 # Docker Hubì— ì—…ë¡œë“œëœ nginx:1.7.9 ì´ë¯¸ì§€ë¥¼ ì‚¬ìš© ports: - containerPort: 80 í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ 3ëŒ€ì˜ podë¥¼ ë°°í¬í•˜ëŠ” deployment yamlì„ ì‘ì„±í•œë‹¤.\ndeployment ìƒì„±\n$ kubectl apply -f nginx-deploy.yaml deployment.apps/nginx-deployment created ì‘ì„±í•œ yaml íŒŒì¼ì„ ì ìš©í•´ deploymentë¥¼ ìƒì„±í•œë‹¤.\n$ kubectl get po -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES nginx-deployment-5d59d67564-7nvnj 0/1 ContainerCreating 0 8s \u0026lt;none\u0026gt; multinode-lab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; nginx-deployment-5d59d67564-8zhz7 0/1 ContainerCreating 0 8s \u0026lt;none\u0026gt; multinode-lab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; nginx-deployment-5d59d67564-f2wdw 0/1 ContainerCreating 0 8s \u0026lt;none\u0026gt; multinode-lab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 3ê°œì˜ Podê°€ ìƒì„±(ContainerCreating)ì¤‘ì´ë‹¤.\nì ì‹œ ê¸°ë‹¤ë¦¬ë©´ ìƒíƒœê°€ Runningìœ¼ë¡œ ë°”ë€Œë©° pod ìƒì„±ì´ ì™„ë£Œëœë‹¤.\nì´ì œ 3ëŒ€ podê°€ ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚°ë˜ì–´ ë°°í¬ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.\n$ kubectl get po -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES nginx-deployment-5d59d67564-7nvnj 1/1 Running 0 2m16s 10.244.2.2 multinode-lab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; nginx-deployment-5d59d67564-8zhz7 1/1 Running 0 2m16s 10.244.2.3 multinode-lab-m03 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; nginx-deployment-5d59d67564-f2wdw 1/1 Running 0 2m16s 10.244.1.2 multinode-lab-m02 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; multinode-lab-m02 ë…¸ë“œì— pod 1ëŒ€, multinode-lab-m03ì— pod 2ëŒ€ê°€ ë¶„ì‚° ë°°í¬ë˜ì—ˆìŒ.\n6. minikube ì¢…ë£Œ # minikubeëŠ” ì‹¤ìŠµí™˜ê²½ì˜ ë¦¬ì†ŒìŠ¤(CPU, ë©”ëª¨ë¦¬)ë¥¼ ë§ì´ ì ìœ í•˜ê³  ì‚¬ìš©í•œë‹¤. ì§€ì†ì ìœ¼ë¡œ ì¼œë†“ëŠ” ê±´ ë©íƒ‘ ìƒíƒœì— ì¢‹ì§€ ì•Šê¸° ë•Œë¬¸ì— minikube ì‹¤ìŠµì´ ëë‚œ í›„ì—ëŠ” ë°˜ë“œì‹œ ì¢…ë£Œí•´ì£¼ì.\n$ minikube stop -p multinode-lab âœ‹ Stopping node \u0026#34;multinode-lab\u0026#34; ... ğŸ›‘ Powering off \u0026#34;multinode-lab\u0026#34; via SSH ... âœ‹ Stopping node \u0026#34;multinode-lab-m02\u0026#34; ... ğŸ›‘ Powering off \u0026#34;multinode-lab-m02\u0026#34; via SSH ... âœ‹ Stopping node \u0026#34;multinode-lab-m03\u0026#34; ... ğŸ›‘ Powering off \u0026#34;multinode-lab-m03\u0026#34; via SSH ... ğŸ›‘ 3 nodes stopped. 3ëŒ€ì˜ ë…¸ë“œê°€ ì •ìƒ ì¢…ë£Œë˜ì—ˆë‹¤.\në…¸ë“œìƒíƒœ í™•ì¸\në…¸ë“œ 3ëŒ€ì˜ ìƒíƒœë¥¼ í™•ì¸í•´ë³¸ë‹¤.\n$ minikube status -p multinode-lab multinode-lab type: Control Plane host: Stopped kubelet: Stopped apiserver: Stopped kubeconfig: Stopped multinode-lab-m02 type: Worker host: Stopped kubelet: Stopped multinode-lab-m03 type: Worker host: Stopped kubelet: Stopped multinode-lab, multinode-lab-m02, multinode-lab03 ë…¸ë“œê°€ ëª¨ë‘ ì •ìƒ ì¢…ë£Œ(Stopped)ë˜ì—ˆë‹¤.\nì‹¤ìŠµí™˜ê²½ ì „ì²´ ì‚­ì œ # ì‹¤ìŠµí™˜ê²½ êµ¬ì¶• ì¤‘ì— ì¤‘ì§€, ì‹œì‘ì´ ì•ˆë˜ê±°ë‚˜ ì˜¤ë¥˜ê°€ ì§€ì† ë°œìƒí•œë‹¤ë©´ ìƒì„±ëœ ì‹¤ìŠµí™˜ê²½ ì„¤ì •ê³¼ íŒŒì¼ì„ ì™„ì „íˆ ì‚­ì œí•œ í›„ êµ¬ì¶• ê³¼ì •ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œë„í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ë‹¤.\nì´ë¯¸ ë©€í‹°ë…¸ë“œì˜ ì‹¤ìŠµí™˜ê²½ì´ ì •ìƒì ìœ¼ë¡œ êµ¬ì„±ëœ ì‚¬ëŒì€ ì‹¤ìŠµí™˜ê²½ ì „ì²´ ì‚­ì œë¥¼ ì•ˆí•´ë„ ëœë‹¤.\n$ minikube delete --all --profile=\u0026#39;multinode-lab\u0026#39; ğŸ”¥ docker ì˜ \u0026#34;minikube\u0026#34; ë¥¼ ì‚­ì œí•˜ëŠ” ì¤‘ ... ğŸ”¥ /Users/ive/.minikube/machines/minikube ì œê±° ì¤‘ ... ğŸ’€ \u0026#34;minikube\u0026#34; í´ëŸ¬ìŠ¤í„° ê´€ë ¨ ì •ë³´ê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ”¥ docker ì˜ \u0026#34;multinode-lab\u0026#34; ë¥¼ ì‚­ì œí•˜ëŠ” ì¤‘ ... ğŸ”¥ /Users/ive/.minikube/machines/multinode-lab ì œê±° ì¤‘ ... ğŸ”¥ /Users/ive/.minikube/machines/multinode-lab-m02 ì œê±° ì¤‘ ... ğŸ”¥ /Users/ive/.minikube/machines/multinode-lab-m03 ì œê±° ì¤‘ ... ğŸ’€ \u0026#34;multinode-lab\u0026#34; í´ëŸ¬ìŠ¤í„° ê´€ë ¨ ì •ë³´ê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ”¥ ëª¨ë“  í”„ë¡œí•„ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤ ìœ„ ëª…ë ¹ì–´ëŠ” ë„ì»¤ì— ì˜¬ë¼ê°„ ê°€ìƒ ë…¸ë“œ ì „ì²´ë¥¼ ì‚­ì œí•˜ê³  ê´€ë ¨ ì„¤ì •ê³¼ íŒŒì¼ê¹Œì§€ ëª¨ë‘ ì‚­ì œí•œë‹¤.\nì¿ ë²„ë„¤í‹°ìŠ¤ ì‹¤ìŠµí™˜ê²½ì—ì„œ ê³„ì† ì—ëŸ¬ê°€ ë‚  ê²½ìš°, ìœ„ ë°©ë²•ìœ¼ë¡œ ì™„ì „ì‚­ì œí•˜ê³  ë‹¤ì‹œ êµ¬ì„±í•˜ë©´ í•´ê²°ë˜ëŠ” ì—ëŸ¬ë„ ë§ë‹¤.\n","date":"Nov 10, 2021","permalink":"/blog/k8s/multinode-in-minikube/","section":"Blogs","summary":"ê°œìš” # minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œ(1 master node + 2 worker node)ë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","title":"minikube ë©€í‹°ë…¸ë“œ êµ¬ì„±"},{"content":"ê°œìš” # minikube ê¸°ë°˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ deploymentë¥¼ ìƒì„±í•˜ê³  ì œì–´í•˜ëŠ” ì‹¤ìŠµì„ í•œë‹¤.\ní™˜ê²½ # Hardware : macBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 minikube v1.24.0 + docker desktop v4.1.1 kubectl stable v1.22.3 ë³¸ë¬¸ # í•´ë‹¹ ê³¼ì •ì€ minikubeê°€ êµ¬ì¶•ëœ ì´í›„ ì‹œì ë¶€í„° ì§„í–‰ëœë‹¤. ë°˜ë“œì‹œ minikubeë¥¼ êµ¬ì„±í•œ ìƒíƒœì—ì„œ ì´ ì‹¤ìŠµì„ ì§„í–‰í•´ì•¼ë§Œ í•œë‹¤.\ndeployment ìƒì„± # deploymentëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•œ ë¦¬ì†ŒìŠ¤ì´ë‹¤. ì‹¤ì œ podë“¤ì€ deploymentê°€ ì•„ë‹Œ replicasetì— ì˜í•´ ìƒì„±, ê´€ë¦¬ëœë‹¤. deploymentë¥¼ ìƒì„±í•˜ë©´ replicaset ë¦¬ì†ŒìŠ¤ê°€ ê·¸ ì•„ë˜ì— ìë™ìƒì„±ëœë‹¤. podë¥¼ ê°ì‹œí•˜ëŠ” replicasetì´ deploymentë¥¼ ì§€ì›í•˜ëŠ” êµ¬ì¡°ì´ë‹¤. í˜„ì—…ì—ì„œ deploymentëŠ” ë°°í¬ ì—…ë°ì´íŠ¸ì— ì£¼ë¡œ ì“°ì¸ë‹¤. (e.g. ë¸”ë£¨-ê·¸ë¦° ì—…ë°ì´íŠ¸, ë¡¤ë§ ì—…ë°ì´íŠ¸, ì¹´ë‚˜ë¦¬ ì—…ë°ì´íŠ¸) 1. yaml ì‘ì„± # nginx podë¥¼ 3ëŒ€ ë°°í¬í•˜ëŠ” Deploymentì˜ yaml íŒŒì¼ì„ ì‘ì„±í•œë‹¤.\n$ vi nginx-deploy.yaml apiVersion: apps/v1 kind: Deployment # íƒ€ì…ì€ Deployment metadata: name: nginx-deployment labels: app: nginx spec: replicas: 3 # 3ê°œì˜ Podë¥¼ ìœ ì§€í•œë‹¤. selector: # Deploymentì— ì†í•˜ëŠ” Podì˜ ì¡°ê±´ matchLabels: # labelì˜ app ì†ì„±ì˜ ê°’ì´ nginx ì¸ Podë¥¼ ì°¾ì•„ë¼. app: nginx template: metadata: labels: app: nginx # labels í•„ë“œë¥¼ ì‚¬ìš©í•´ì„œ app: nginx ë ˆì´ë¸”ì„ ë¶™í˜ spec: containers: # containerì— ëŒ€í•œ ì •ì˜ - name: nginx # containerì˜ ì´ë¦„ image: nginx:1.7.9 # Docker Hubì— ì—…ë¡œë“œëœ nginx:1.7.9 ì´ë¯¸ì§€ë¥¼ ì‚¬ìš© ports: - containerPort: 80 í•´ë‹¹ yaml ì½”ë“œë¥¼ ë³µì‚¬ ë¶™ì—¬ë„£ê¸° í•´ì„œ ì‘ì„±í•œë‹¤.\n2. ìƒì„± # ì‘ì„±í•œ nginx-deploy.yaml íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ deploymentë¥¼ ìƒì„±í•œë‹¤.\n$ kubectl apply -f nginx-deploy.yaml deployment.apps/nginx-deployment created 3. í™•ì¸ # ê°„ë‹¨í•œ í¬ë§·ìœ¼ë¡œ ì¶œë ¥\n$ kubectl get all NAME READY STATUS RESTARTS AGE pod/nginx-deployment-5d59d67564-5jfwj 1/1 Running 0 3m51s pod/nginx-deployment-5d59d67564-djrms 1/1 Running 0 90s pod/nginx-deployment-5d59d67564-vkkqp 1/1 Running 0 2m5s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 4h34m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/nginx-deployment 3/3 3 3 9m34s NAME DESIRED CURRENT READY AGE replicaset.apps/nginx-deployment-5d59d67564 3 3 3 9m34s deploymentëŠ” pod í…œí”Œë¦¿ì˜ ê° ë²„ì „ë§ˆë‹¤ í•˜ë‚˜ì”© ì—¬ëŸ¬ ê°œì˜ replicasetì„ ìƒì„±í•œë‹¤. pod í…œí”Œë¦¿ì˜ í•´ì‹œê°’ì„ ì‚¬ìš©í•˜ë©´ deploymentì—ì„œ ì§€ì •ëœ ë²„ì „ì˜ pod í…œí”Œë¦¿ì— ê´€í•´ í•­ìƒ ë™ì¼í•œ(ê¸°ì¡´ì˜) replicasetì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nìì„¸í•œ í¬ë§·ìœ¼ë¡œ ì¶œë ¥\n-o wide ì˜µì…˜ì„ ë¶™ì´ë©´ ë” ìì„¸í•œ ì •ë³´ë¥¼ ì¶œë ¥ì¤€ë‹¤.\n$ kubectl get all -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES pod/nginx-deployment-5d59d67564-5jfwj 1/1 Running 0 5m37s 172.17.0.6 minikube \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-djrms 1/1 Running 0 3m16s 172.17.0.7 minikube \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; pod/nginx-deployment-5d59d67564-vkkqp 1/1 Running 0 3m51s 172.17.0.5 minikube \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 4h36m \u0026lt;none\u0026gt; NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR deployment.apps/nginx-deployment 3/3 3 3 11m nginx nginx:1.7.9 app=nginx NAME DESIRED CURRENT READY AGE CONTAINERS IMAGES SELECTOR replicaset.apps/nginx-deployment-5d59d67564 3 3 3 11m nginx nginx:1.7.9 app=nginx,pod-template-hash=5d59d67564 4. pod ì¬ìƒì„± í…ŒìŠ¤íŠ¸ # Deploymentì™€ ì—°ê´€ëœ replicasetì€ podì˜ ê°œìˆ˜ë¥¼ ìœ ì§€í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. pod 1ê°œë¥¼ ì‚­ì œí•´ì„œ ì¸ìœ„ì ìœ¼ë¡œ pod ê°œìˆ˜ë¥¼ ì¤„ì—¬ë³´ì.\nkubectl delete pod nginx-deployment-5d59d67564-djrms pod \u0026#34;nginx-deployment-5d59d67564-djrms\u0026#34; deleted djrms podë¥¼ ì‚­ì œí–ˆë‹¤.\n$ kubectl get all NAME READY STATUS RESTARTS AGE pod/nginx-deployment-5d59d67564-5jfwj 1/1 Running 0 8m10s pod/nginx-deployment-5d59d67564-82rvt 1/1 Running 0 88s pod/nginx-deployment-5d59d67564-vkkqp 1/1 Running 0 6m24s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 4h38m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/nginx-deployment 3/3 3 3 13m NAME DESIRED CURRENT READY AGE replicaset.apps/nginx-deployment-5d59d67564 3 3 3 13m djrms podë¥¼ ì‚­ì œí•˜ë©´ replicasetì€ ì§€ì •ëœ pod ê°œìˆ˜(3ê°œ)ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ 82rvtÂ podë¥¼ ìë™ìƒì„±í•œë‹¤.\n$ kubectl describe pod nginx-deployment-5d59d67564-82rvt | grep -i controlled Controlled By: ReplicaSet/nginx-deployment-5d59d67564 82rvt podë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” nginx-deployment-5d59d67564 replicasetì„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në¡¤ë§ ì—…ë°ì´íŠ¸ # 1. ë¡¤ë§ ì—…ë°ì´íŠ¸ ì‹¤í–‰ # ëª…ë ¹ì–´ í˜•ì‹\n$ kubectl set image deployment/\u0026lt;deployment ì´ë¦„\u0026gt; \u0026lt;container ì´ë¦„\u0026gt;=\u0026lt;ì´ë¯¸ì§€ ì´ë¦„\u0026gt;:\u0026lt;ì´ë¯¸ì§€ ë²„ì „\u0026gt; ì‹¤ì œ ëª…ë ¹ì–´ ì˜ˆì‹œ\n$ kubectl set image deployment/nginx-deployment nginx=nginx:1.9.1 deployment.apps/nginx-deployment image updated nginx-deploymentì— ì„¤ì •ëœ nginx 1.7.9 ë²„ì „ì˜ ì´ë¯¸ì§€ê°€ 1.9.1 ë²„ì „ì˜ nginx ì´ë¯¸ì§€ë¡œ ì—…ë°ì´íŠ¸ ë˜ì—ˆë‹¤.\n2. ê²°ê³¼í™•ì¸ # $ kubectl get all NAME READY STATUS RESTARTS AGE pod/nginx-deployment-69c44dfb78-d97k5 1/1 Running 0 10s pod/nginx-deployment-69c44dfb78-kqqk4 1/1 Running 0 9s pod/nginx-deployment-69c44dfb78-kv6ms 1/1 Running 0 11s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 5h11m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/nginx-deployment 3/3 3 3 35s NAME DESIRED CURRENT READY AGE replicaset.apps/nginx-deployment-5d59d67564 0 0 0 35s replicaset.apps/nginx-deployment-69c44dfb78 3 3 3 11s ê¸°ì¡´ì˜ replicasetì€ ë¹„í™œì„±í™”ë˜ê³ , ìƒˆë¡œìš´ replicasetì¸ 69c44dfb78ì´ ë“±ì¥í–ˆë‹¤. ìƒˆ replicasetì€ 3ëŒ€ì˜ podë¥¼ ìœ ì§€í•˜ê³  ìˆë‹¤.\n$ kubectl describe deploy Name: nginx-deployment Namespace: default CreationTimestamp: Wed, 10 Nov 2021 00:23:05 +0900 Labels: app=nginx Annotations: deployment.kubernetes.io/revision: 2 Selector: app=nginx Replicas: 3 desired | 3 updated | 3 total | 3 available | 0 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 25% max unavailable, 25% max surge Pod Template: Labels: app=nginx Containers: nginx: Image: nginx:1.9.1 ì£¼ìš” í™•ì¸ì‚¬í•­\nì»¨í…Œì´ë„ˆì˜ ì´ë¯¸ì§€(Image:) ê°’ì´ nginx:1.9.1ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸. ë³€ê²½ íšŒìˆ˜(revision) ê°’ì´ 1ì—ì„œ 2ë¡œ ì¦ê°€í–ˆë‹¤. ì¦‰ 1ë²ˆ deploymentì˜ ë³€ê²½ì‚¬í•­ì´ ë°œìƒí–ˆë‹¤ëŠ” ì ì´ë‹¤. 3. ë³€ê²½ê¸°ë¡ í™•ì¸ # ëª…ë ¹ì–´ í˜•ì‹\n$ kubectl rollout history deployment \u0026lt;deployment ì´ë¦„\u0026gt; ì‹¤ì œ ëª…ë ¹ì–´\n$ kubectl rollout history deployment nginx-deployment deployment.apps/nginx-deployment REVISION CHANGE-CAUSE 1 \u0026lt;none\u0026gt; 2 \u0026lt;none\u0026gt; ìµœì´ˆì— revision 1ì—ì„œ ì‹œì‘í•œë‹¤. ë³€ê²½ì‚¬ìœ (CHANGE-CAUSE) ê°’ì€ ì§€ì •í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— \u0026lt;none\u0026gt;ìœ¼ë¡œ ì¶œë ¥ëœë‹¤.\n4. ë¡¤ë°± # ë¡¤ë§ ì—…ë°ì´íŠ¸ ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆì„ ê²½ìš°, ë¡¤ë§ ì—…ë°ì´íŠ¸ ì‹¤í–‰ ì „ìœ¼ë¡œ ì¦‰ì‹œ ë˜ëŒë¦´ ìˆ˜ ìˆë‹¤.\nëª…ë ¹ì–´ í˜•ì‹\n$ kubectl rollout undo deployment \u0026lt;deployment ì´ë¦„\u0026gt; --to-revision=\u0026lt;ìˆ«ì\u0026gt; ì‹¤ì œ ëª…ë ¹ì–´\ndeploymentë¥¼ ìµœì´ˆ ë²„ì „(revision 1)ìœ¼ë¡œ ëŒë¦°ë‹¤.\n$ kubectl rollout undo deployment nginx-deployment --to-revision=1 deployment.apps/nginx-deployment rolled back ë¡¤ë°± í›„ ìƒíƒœí™•ì¸\n$ kubectl get all NAME READY STATUS RESTARTS AGE pod/nginx-deployment-5d59d67564-24cll 1/1 Running 0 51s pod/nginx-deployment-5d59d67564-9kgp8 1/1 Running 0 52s pod/nginx-deployment-5d59d67564-dvv8n 1/1 Running 0 50s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 5h23m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/nginx-deployment 3/3 3 3 12m NAME DESIRED CURRENT READY AGE replicaset.apps/nginx-deployment-5d59d67564 3 3 3 12m replicaset.apps/nginx-deployment-69c44dfb78 0 0 0 12m nginx ì´ë¯¸ì§€ ë²„ì „ì„ 1.9.1ë¡œ ì—…ê·¸ë ˆì´ë“œ í•˜ë©´ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë˜ 5d59d67564 replicasetì´ ë‹¤ì‹œ pod ê´€ë¦¬ë¥¼ ë„˜ê²¨ ë°›ì•˜ë‹¤.\nì—¬ê¸°ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ pod 3ëŒ€ë„ ê¸°ì¡´ podê°€ ì•„ë‹ˆë¼ ìƒˆë¡œ ìƒì„±(êµì²´)ëœ podë¼ëŠ” ì‚¬ì‹¤ì´ë‹¤.\ndeployment ìƒì„¸ì •ë³´ í™•ì¸\n$ kubectl describe deploy Name: nginx-deployment Namespace: default CreationTimestamp: Wed, 10 Nov 2021 00:23:05 +0900 Labels: app=nginx Annotations: deployment.kubernetes.io/revision: 3 Selector: app=nginx Replicas: 3 desired | 3 updated | 3 total | 3 available | 0 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 25% max unavailable, 25% max surge Pod Template: Labels: app=nginx Containers: nginx: Image: nginx:1.7.9 Image: ê°’ì´ nginx:1.9.1ì—ì„œ nginx:1.7.9ë¡œ rollback ë˜ì—ˆë‹¤. revision ê°’ë„ +1 ë˜ì–´ 3ì´ë‹¤.\n5. ë³€ê²½ì‚¬ìœ  ê¸°ë¡ # ë°©ë²•1. Annotation ìˆ˜ì •\nAnnotationì€ Labelì²˜ëŸ¼ í‚¤:ê°’ ìŒìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©°, ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œì´ í•„ìš”í•œ ì •ë³´ë“¤ì„ ë‹´ê³  ìˆë‹¤. Annotationì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ë¼ì´ì–¸íŠ¸ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í™œìš©í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.\nëª…ë ¹ì–´ í˜•ì‹\nchange-causeì— ê°’ì„ ë¶€ì—¬í•´ ìˆ˜ì •í•˜ëŠ” ë°©ì‹ì´ë‹¤. annotationì„ ìˆ˜ì •í•˜ëŠ” ë°©ì‹ì´ í˜„ì—…ì—ì„œ ë” ê¶Œì¥ë˜ê³  ì•ˆì „í•˜ë‹¤.\n$ kubectl annotate deployment.v1.apps/\u0026lt;deployment ì´ë¦„\u0026gt; kubernetes.io/change-cause=\u0026#34;\u0026lt;ë³€ê²½ì‚¬ìœ \u0026gt;\u0026#34; ì‹¤í–‰ ëª…ë ¹ì–´\n$ kubectl annotate deployment.v1.apps/nginx-deployment kubernetes.io/change-cause=\u0026#34;test update V2\u0026#34; deployment.apps/nginx-deployment annotated nginx-deploymentì˜ change-cause ê°’ì´ ë³€ê²½ë˜ì—ˆë‹¤.\në³€ê²½ê²°ê³¼ í™•ì¸\ndescribeë¡œ nginx-deploymentì˜ ìƒì„¸ì •ë³´ë¥¼ í™•ì¸í•´ë³¸ë‹¤. 2ë²ˆì§¸ Annotationì¸ change-cause: test update V2 ìƒì„±ë˜ì–´ ìˆë‹¤.\n$ kubectl describe deploy nginx-deployment Name: nginx-deployment Namespace: default CreationTimestamp: Wed, 10 Nov 2021 18:54:18 +0900 Labels: app=nginx Annotations: deployment.kubernetes.io/revision: 1 kubernetes.io/change-cause: test update V2 ë¡¤ë§ ì—…ë°ì´íŠ¸ ê¸°ë¡ë„ í™•ì¸í•´ë³¸ë‹¤. change-cause annotationì˜ ê°’ê³¼ ë™ì¼í•˜ê²Œ ì í˜€ìˆë‹¤.\n$ kubectl rollout history deployment nginx-deployment deployment.apps/nginx-deployment REVISION CHANGE-CAUSE 1 test update V2 ë°©ë²•2. ì§ì ‘ ìˆ˜ì •\ndeploymentì˜ ì„¤ì •ì´ ë‹´ê¸´ manifest íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•œë‹¤. ì´ ë°©ì‹ì€ ìœ„í—˜í•˜ë¯€ë¡œ annotationì„ ìˆ˜ì •í•˜ëŠ” ë°©ì‹ì„ ì¶”ì²œí•œë‹¤.\n$ kubectl edit deployment nginx-deployment deployment.apps/nginx-deployment edited rolloutì˜ ë³€ê²½ì‚¬ìœ  ê¸°ë¡ì„ ìœ„í•´ nginx-deploymentì˜ ì„¤ì •íŒŒì¼ì„ ì—°ë‹¤.\n# Please edit the object below. Lines beginning with a \u0026#39;#\u0026#39; will be ignored, # and an empty file will abort the edit. If an error occurs while saving this file will be # reopened with the relevant failures. # apiVersion: apps/v1 kind: Deployment metadata: annotations: deployment.kubernetes.io/revision: \u0026#34;3\u0026#34; kubectl.kubernetes.io/last-applied-configuration: | {\u0026#34;apiVersion\u0026#34;:\u0026#34;apps/v1\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;Deployment\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;labels\u0026#34;:{\u0026#34;app\u0026#34;:\u0026#34;nginx\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;nginx-deployment\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;replicas\u0026#34;:3,\u0026#34;selector\u0026#34;:{\u0026#34;matchLabels\u0026#34;:{\u0026#34;app\u0026#34;:\u0026#34;nginx\u0026#34;}},\u0026#34;template\u0026#34;:{\u0026#34;metadata\u0026#34;:{\u0026#34;labels\u0026#34;:{\u0026#34;app\u0026#34;:\u0026#34;nginx\u0026#34;}},\u0026#34;spec\u0026#34;:{\u0026#34;containers\u0026#34;:[{\u0026#34;image\u0026#34;:\u0026#34;nginx:1.7.9\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;nginx\u0026#34;,\u0026#34;ports\u0026#34;:[{\u0026#34;containerPort\u0026#34;:80}]}]}}}} kubernetes.io/change-cause: nginx:1.7.9 creationTimestamp: \u0026#34;2021-11-09T15:23:05Z\u0026#34; generation: 5 annotations ì•„ë«ì¤„ì— kubernets.io/change-cause: \u0026lt;ì‚¬ìœ \u0026gt;ë¥¼ ì¶”ê°€ ì…ë ¥í•´ì¤€ë‹¤. manifest íŒŒì¼ì„ ìˆ˜ì • í›„ ì €ì¥í•˜ë©´ ì¦‰ì‹œ ì ìš©ë˜ë‹ˆ ì£¼ì˜í•˜ì.\nrollout ê¸°ë¡ì„ ë‹¤ì‹œ ì¡°íšŒí•´ë³¸ë‹¤.\n$ kubectl rollout history deployment nginx-deployment deployment.apps/nginx-deployment REVISION CHANGE-CAUSE 2 \u0026lt;none\u0026gt; 3 nginx:1.7.9 annotationsì— ì…ë ¥í•œ nginx:1.7.9 ê°€ ê·¸ëŒ€ë¡œ ì¶œë ¥ëœë‹¤.\nrollout ì¬ì‹œì‘ # deploymentì— ì†í•œ ì „ì²´ podë¥¼ ì¬ì‹œì‘í•˜ëŠ” ë°©ë²•\nëª…ë ¹ì–´ í˜•ì‹\n$ kubectl rollout restart deployment/\u0026lt;deployment ì´ë¦„\u0026gt; ì‹¤í–‰ ëª…ë ¹ì–´\n$ kubectl rollout restart deployment/nginx-deployment deployment.apps/nginx-deployment restarted nginx-deploymentê°€ ì¬ì‹œì‘ë˜ì—ˆë‹¤.\npod, replicaset ìƒíƒœ í™•ì¸\n$ kubectl get all NAME READY STATUS RESTARTS AGE pod/nginx-deployment-5468f7bfc5-cpd95 1/1 Running 0 5s pod/nginx-deployment-5468f7bfc5-ds7sm 1/1 Running 0 4s pod/nginx-deployment-5468f7bfc5-x6jjq 1/1 Running 0 3s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE service/kubernetes ClusterIP 10.96.0.1 \u0026lt;none\u0026gt; 443/TCP 6h8m NAME READY UP-TO-DATE AVAILABLE AGE deployment.apps/nginx-deployment 3/3 3 3 57m NAME DESIRED CURRENT READY AGE replicaset.apps/nginx-deployment-5468f7bfc5 3 3 3 5s replicaset.apps/nginx-deployment-5d59d67564 0 0 0 57m replicaset.apps/nginx-deployment-69c44dfb78 0 0 0 56m ìƒˆ replicasetì¸ 5468f7bfc5ê°€ ìƒì„±ë˜ê³ , ìƒˆë¡œìš´ pod 3ëŒ€ë„ í•¨ê»˜ ìƒì„±ëœë‹¤.\nrollout ê¸°ë¡ í™•ì¸\n$ kubectl rollout history deployment nginx-deployment deployment.apps/nginx-deployment REVISION CHANGE-CAUSE 2 \u0026lt;none\u0026gt; 3 nginx:1.7.9 4 nginx:1.7.9 rollout ì¬ì‹œì‘ì„ ì‹¤í–‰í•˜ë©´ì„œ revision 3ì—ì„œ 4ë¡œ ë³€ê²½ë˜ì—ˆë‹¤. ìƒˆë¡œ ìƒì„±ëœ revision 4ì˜ CHANGE-CAUSE ê°’ì€ revision 3ê³¼ ë™ì¼í•˜ê²Œ ê°€ì ¸ì˜¨ë‹¤.\n","date":"Nov 10, 2021","permalink":"/blog/k8s/deployment-tutorial/","section":"Blogs","summary":"ê°œìš” # minikube ê¸°ë°˜ì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ deploymentë¥¼ ìƒì„±í•˜ê³  ì œì–´í•˜ëŠ” ì‹¤ìŠµì„ í•œë‹¤.","title":"ì¿ ë²„ë„¤í‹°ìŠ¤ deployment ì‹¤ìŠµ"},{"content":"ê°œìš” # M1 CPUë¥¼ ì‚¬ìš©í•˜ëŠ” macì— minikubeë¥¼ ì„¤ì¹˜í•´ kubernetes ì‹¤ìŠµ í™˜ê²½ì„ êµ¬ì¶•í•œë‹¤.\nì´ ë°©ì‹ì€ Virtualboxë‚˜ VMwareë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , dockerì— minikubeë¥¼ ì˜¬ë¦¬ëŠ” ë°©ì‹ì´ë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.3.2 ì„¤ì¹˜ëŒ€ìƒ Docker Desktop v4.1.1 minikube v1.24.0 ë³¸ë¬¸ # 1. Docker ì„¤ì¹˜ # macOSìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¥¼ ì´ìš©í•´ dockerë¥¼ ì„¤ì¹˜í•œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” dockerë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ì•¼í•œë‹¤.\n$ brew install --cask docker ==\u0026gt; Downloading https://desktop.docker.com/mac/main/arm64/69879/Docker.dmg Already downloaded: /Users/ive/Library/Caches/Homebrew/downloads/b5774f18ca8a6d3936c5174f91b93cb1a1a407daa784fe63d9b6300180c7b1ed--Docker.dmg ==\u0026gt; Installing Cask docker ==\u0026gt; Moving App \u0026#39;Docker.app\u0026#39; to \u0026#39;/Applications/Docker.app\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker-compose.bash-completion\u0026#39; to \u0026#39;/opt/homebrew/etc/bash_c ==\u0026gt; Linking Binary \u0026#39;docker.zsh-completion\u0026#39; to \u0026#39;/opt/homebrew/share/zsh/site-func ==\u0026gt; Linking Binary \u0026#39;docker.fish-completion\u0026#39; to \u0026#39;/opt/homebrew/share/fish/vendor_ ==\u0026gt; Linking Binary \u0026#39;docker-compose.fish-completion\u0026#39; to \u0026#39;/opt/homebrew/share/fish ==\u0026gt; Linking Binary \u0026#39;docker-compose.zsh-completion\u0026#39; to \u0026#39;/opt/homebrew/share/zsh/s ==\u0026gt; Linking Binary \u0026#39;docker.bash-completion\u0026#39; to \u0026#39;/opt/homebrew/etc/bash_completio ğŸº docker was successfully installed! docker ìµœì´ˆ ì„¤ì¹˜ì‹œ ì˜¤ë˜ê±¸ë¦¬ë‹ˆ ì¸ë‚´ì‹¬ì„ ê°–ê³  ê¸°ë‹¤ë¦°ë‹¤.\n$ brew list --cask docker iterm2 cask ëª©ë¡ì— dockerê°€ ì„¤ì¹˜ë˜ì—ˆë‹¤.\nëŸ°ì¹˜íŒ¨ë“œì—ë„ Docker ì•„ì´ì½˜ì´ ìƒì„±ëë‹¤.\n2. minikube ì„¤ì¹˜ # $ brew install minikube Updating Homebrew... ==\u0026gt; Auto-updated Homebrew! Updated 2 taps (homebrew/core and homebrew/cask). ==\u0026gt; New Formulae tailscale ==\u0026gt; Updated Formulae Updated 23 formulae. ==\u0026gt; Updated Casks Updated 33 casks. ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/minikube/manifests/1.24.0 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/minikube/blobs/sha256:3672e4faa ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Pouring minikube--1.24.0.arm64_monterey.bottle.tar.gz ==\u0026gt; Caveats zsh completions have been installed to: /opt/homebrew/share/zsh/site-functions ==\u0026gt; Summary ğŸº /opt/homebrew/Cellar/minikube/1.24.0: 9 files, 67.3MB ~ \u0026gt; minikube v1.24.0ì˜ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤.\n$ minikube version minikube version: v1.24.0 commit: 76b94fb3c4e8ac5062daf70d60cf03ddcc0a741b ë²„ì „ í™•ì¸ ëª…ë ¹ì–´ê°€ ì˜ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤.\n3. minikube ì‹¤í–‰ # $ minikube start --driver=docker --alsologtostderr ë°©ëŒ€í•œ ë¡œê·¸ ë©”ì„¸ì§€ê°€ ì§€ë‚˜ê°„ë‹¤.\n$ minikube start --driver=docker --alsologtostderr [...] I1109 12:32:56.565222 79576 out.go:297] Setting OutFile to fd 1 ... I1109 12:32:56.565358 79576 out.go:349] isatty.IsTerminal(1) = true I1109 12:32:56.565362 79576 out.go:310] Setting ErrFile to fd 2... I1109 12:32:56.565366 79576 out.go:349] isatty.IsTerminal(2) = true I1109 12:32:56.565476 79576 root.go:313] Updating PATH: /Users/ive/.minikube/bin W1109 12:32:56.565579 79576 root.go:291] Error reading config file at /Users/ive/.minikube/config/config.json: open /Users/ive/.minikube/config/config.json: no such file or directory I1109 12:32:56.565974 79576 out.go:304] Setting JSON to false I1109 12:32:56.596136 79576 start.go:112] hostinfo: {\u0026#34;hostname\u0026#34;:\u0026#34;iveui-MacBookPro.local\u0026#34;,\u0026#34;uptime\u0026#34;:1170918,\u0026#34;bootTime\u0026#34;:1635257858,\u0026#34;procs\u0026#34;:396,\u0026#34;os\u0026#34;:\u0026#34;darwin\u0026#34;,\u0026#34;platform\u0026#34;:\u0026#34;darwin\u0026#34;,\u0026#34;platformFamily\u0026#34;:\u0026#34;Standalone Workstation\u0026#34;,\u0026#34;platformVersion\u0026#34;:\u0026#34;12.0.1\u0026#34;,\u0026#34;kernelVersion\u0026#34;:\u0026#34;21.1.0\u0026#34;,\u0026#34;kernelArch\u0026#34;:\u0026#34;arm64\u0026#34;,\u0026#34;virtualizationSystem\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;virtualizationRole\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;hostId\u0026#34;:\u0026#34;825e9759-178a-503c-934f-4f7b344b3615\u0026#34;} W1109 12:32:56.596248 79576 start.go:120] gopshost.Virtualization returned error: not implemented yet I1109 12:32:56.614964 79576 out.go:176] ğŸ˜„ Darwin 12.0.1 (arm64) ì˜ minikube v1.24.0 ğŸ˜„ Darwin 12.0.1 (arm64) ì˜ minikube v1.24.0 arm64 ì•„í‚¤í…ì³ì˜ minikube v1.24.0 ì´ ì‹¤í–‰ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n[...] I1109 12:39:12.271034 79576 out.go:176] ğŸŒŸ ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass ğŸŒŸ ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass I1109 12:39:12.271085 79576 addons.go:417] enableAddons completed in 830.948958ms I1109 12:39:12.366536 79576 start.go:473] kubectl: 1.22.3, cluster: 1.22.3 (minor skew: 0) I1109 12:39:12.385010 79576 out.go:176] ğŸ„ ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ \u0026#34;minikube\u0026#34; í´ëŸ¬ìŠ¤í„°ì™€ \u0026#34;default\u0026#34; ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ„ ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ \u0026#34;minikube\u0026#34; í´ëŸ¬ìŠ¤í„°ì™€ \u0026#34;default\u0026#34; ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. minikube startê°€ ì™„ë£Œë˜ì—ˆì„ ë•Œ ë§ˆì§€ë§‰ ë©”ì„¸ì§€. ì´ì œ ì¤€ë¹„ëŠ” ëë‚¬ë‹¤.\n$ minikube status minikube type: Control Plane host: Running kubelet: Running apiserver: Running kubeconfig: Configured ìœ„ ê²½ìš° ì •ìƒìƒíƒœì´ë‹¤.\n4. minikube ìƒíƒœ í™•ì¸ # docker í™•ì¸\në„ì»¤ì—ì„œ ì‹¤í–‰ë˜ëŠ” minikube ì»¨í…Œì´ë„ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nminikube dashboard í™•ì¸\n$ minikube addons list |-----------------------------|----------|--------------|-----------------------| | ADDON NAME | PROFILE | STATUS | MAINTAINER | |-----------------------------|----------|--------------|-----------------------| | ambassador | minikube | disabled | unknown (third-party) | | auto-pause | minikube | disabled | google | | csi-hostpath-driver | minikube | disabled | kubernetes | | dashboard | minikube | enabled âœ… | kubernetes | | default-storageclass | minikube | enabled âœ… | kubernetes | | efk | minikube | disabled | unknown (third-party) | | freshpod | minikube | disabled | google | | gcp-auth | minikube | disabled | google | | gvisor | minikube | disabled | google | | helm-tiller | minikube | disabled | unknown (third-party) | | ingress | minikube | disabled | unknown (third-party) | | ingress-dns | minikube | disabled | unknown (third-party) | | istio | minikube | disabled | unknown (third-party) | | istio-provisioner | minikube | disabled | unknown (third-party) | | kubevirt | minikube | disabled | unknown (third-party) | | logviewer | minikube | disabled | google | | metallb | minikube | disabled | unknown (third-party) | | metrics-server | minikube | disabled | kubernetes | | nvidia-driver-installer | minikube | disabled | google | | nvidia-gpu-device-plugin | minikube | disabled | unknown (third-party) | | olm | minikube | disabled | unknown (third-party) | | pod-security-policy | minikube | disabled | unknown (third-party) | | portainer | minikube | disabled | portainer.io | | registry | minikube | disabled | google | | registry-aliases | minikube | disabled | unknown (third-party) | | registry-creds | minikube | disabled | unknown (third-party) | | storage-provisioner | minikube | enabled âœ… | kubernetes | | storage-provisioner-gluster | minikube | disabled | unknown (third-party) | | volumesnapshots | minikube | disabled | kubernetes | |-----------------------------|----------|--------------|-----------------------| dashboard ì¶”ê°€ê¸°ëŠ¥(addons)ì´ ê¸°ë³¸ í™œì„±í™”(enabled) ë˜ì–´ìˆëŠ” ê±¸ í™•ì¸í•œë‹¤.\n$ minikube dashboard ğŸ”Œ ëŒ€ì‹œë³´ë“œë¥¼ í™œì„±í™”í•˜ëŠ” ì¤‘ ... â–ª Using image kubernetesui/dashboard:v2.3.1 â–ª Using image kubernetesui/metrics-scraper:v1.0.7 ğŸ¤” Verifying dashboard health ... ğŸš€ í”„ë¡ì‹œë¥¼ ì‹œì‘í•˜ëŠ” ì¤‘ ... ğŸ¤” Verifying proxy health ... ğŸ‰ Opening http://127.0.0.1:61311/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ in your default browser... GUI ê¸°ë°˜ì˜ minikube ê´€ë¦¬ ì›¹í˜ì´ì§€(Dashbaord)ë¥¼ ì‹¤í–‰í•œë‹¤.\nminikube dashboard ëª…ë ¹ì–´ê°€ ì‹¤í–‰ì´ ë˜ë©´ì„œ ìë™ìœ¼ë¡œ ë¸Œë¼ìš°ì € ì°½ì´ ì—´ë¦¬ë©´ì„œ dashboardê°€ ë³´ì¸ë‹¤. ë!\n$ kubectl get node -o wide NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME minikube Ready control-plane,master 6h18m v1.22.3 192.168.49.2 \u0026lt;none\u0026gt; Ubuntu 20.04.2 LTS 5.10.47-linuxkit docker://20.10.8 minikube ë…¸ë“œê°€ ì‹¤í–‰ì¤‘ì´ë‹¤.\n5. í…ŒìŠ¤íŠ¸ pod ìƒì„± # íŒŒë“œ(pod)ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê°€ì¥ ìµœì†Œí•œì˜ ì˜¤ë¸Œì íŠ¸ ë‹¨ìœ„ì´ë‹¤. 1ê°œì˜ podëŠ” ìµœì†Œ 1ê°œ ì´ìƒì˜ containerë¥¼ í¬í•¨í•œë‹¤.\nYAML ì‘ì„±\n$ vi sample-pod.yaml apiVersion: v1 kind: Pod metadata: name: myapp-pod labels: app: myapp spec: containers: - name: myapp-container image: busybox command: [\u0026#39;sh\u0026#39;, \u0026#39;-c\u0026#39;, \u0026#39;echo Hello Kubernetes! \u0026amp;\u0026amp; sleep 3600\u0026#39;] 1ê°œì˜ íŒŒë“œë¥¼ ìƒì„±í•˜ëŠ” yaml íŒŒì¼ì„ ì‘ì„±í•œë‹¤. yaml íŒŒì¼ì˜ ì €ì¥ê²½ë¡œëŠ” ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.\nyaml íŒŒì¼ëª…ì€ sample-pod.yamlì´ë‹¤.\n$ kubectl get po -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES myapp-pod 1/1 Running 0 11s 172.17.0.3 minikube \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; myapp-pod 1ê°œê°€ minikube ë…¸ë“œì—ì„œ ë™ì‘ì¤‘(Running)ì´ë‹¤. -o wide ì˜µì…˜ì€ ì •ë³´ë¥¼ ìƒì„¸í•˜ê²Œ ì¶œë ¥í•œë‹¤.\n$ kubectl logs pod/myapp-pod Hello Kubernetes! podì˜ ë¡œê·¸ë¥¼ í™•ì¸í•œ ê²°ê³¼, YAMLì— ì‘ì„±í•œëŒ€ë¡œ myapp-podê°€ Hello Kubernetes!ë¥¼ ì¶œë ¥í–ˆë‹¤.\n7. ì‹¤ìŠµí™˜ê²½ ì •ë¦¬ # í…ŒìŠ¤íŠ¸ pod ì‚­ì œ # $ kubectl delete pod --all pod \u0026#34;myapp-pod\u0026#34; deleted ëª¨ë“  podë¥¼ ì‚­ì œí•œë‹¤.\n$ kubectl get po -o wide No resources found in default namespace. podë¥¼ ì‚­ì œí•œ í›„ ì•„ë¬´ëŸ° podë„ ì¡°íšŒë˜ì§€ ì•ŠëŠ”ë‹¤. ëª¨ë“  podê°€ ì •ìƒì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆë‹¤.\nminikube ì¤‘ì§€ # $ minikube stop âœ‹ Stopping node \u0026#34;minikube\u0026#34; ... ğŸ›‘ Powering off \u0026#34;minikube\u0026#34; via SSH ... ğŸ›‘ 1 node stopped. minikubeë¥¼ ì¢…ë£Œí•œë‹¤. ë‹¤ìŒì— minikubeë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ê³  ì‹¶ë‹¤ë©´ minikube start ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤.\n$ minikube status minikube type: Control Plane host: Stopped kubelet: Stopped apiserver: Stopped kubeconfig: Stopped minikubeê°€ ì¤‘ì§€ëœ ìƒíƒœ(Stopped)ì´ë‹¤.\n","date":"Nov 9, 2021","permalink":"/blog/k8s/installing-minikube/","section":"Blogs","summary":"ê°œìš” # M1 CPUë¥¼ ì‚¬ìš©í•˜ëŠ” macì— minikubeë¥¼ ì„¤ì¹˜í•´ kubernetes ì‹¤ìŠµ í™˜ê²½ì„ êµ¬ì¶•í•œë‹¤.","title":"minikube ì„¤ì¹˜"},{"content":"ê°œìš” # íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¥¼ ì´ìš©í•´ autojump í”ŒëŸ¬ê·¸ì¸ê³¼ neofetchë¥¼ ì„¤ì¹˜í•˜ê³  ì ìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 Terminal : iTerm2 + zsh with oh-my-zsh íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.3.2 ì„¤ì¹˜ëŒ€ìƒ autojump 22.5.3 neofetch 7.1.0 ë³¸ë¬¸ # 1. autojump # autojumpëŠ” ë‚´ê°€ ì´ì „ì— ì´ë™í–ˆë˜ ê²½ë¡œë¥¼ ê¸°ì–µí•´ë†“ì•˜ë‹¤ê°€ í•´ë‹¹ ê²½ë¡œë¡œ ë‹¨ë²ˆì— ì´ë™(Jump) í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì˜ í”ŒëŸ¬ê·¸ì¸ì´ë‹¤.\n(1) brew ì„¤ì¹˜ ëª©ë¡ í™•ì¸ # $ brew list ==\u0026gt; Formulae bat\tlibevent\tneovim bdw-gc\tlibffi\tnettle ca-certificates\tlibidn2\topenssl@1.1 cask\tlibnghttp2\tp11-kit coreutils\tlibtasn1\tpcre emacs\tlibtermkey\tpkg-config fzf\tlibtool\treadline gettext\tlibunistring\ttree-sitter gmp\tlibuv\tunbound gnutls\tluajit-openresty\tunibilium guile\tluv\tzsh hugo\tm4\tzsh-completions jansson\tmsgpack kubernetes-cli\tncurses ==\u0026gt; Casks docker\titerm2 brewì— ì„¤ì¹˜ëœ ì†Œí”„íŠ¸ì›¨ì–´ ëª©ë¡ì„ í™•ì¸í•œë‹¤. autojumpë¼ëŠ” ì´ë¦„ì˜ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” í™•ì¸ë˜ì§€ ì•ŠëŠ”ë‹¤.\n(2) ì„¤ì¹˜ # \u0026gt; brew install autojump [...] ==\u0026gt; /opt/homebrew/Cellar/python@3.10/3.10.0_2/bin/python3 -m pip install -v --no-deps --no-index --upgrade --isolated --target=/opt/homebrew/lib/python3.10/site-packages /opt/hom ğŸº /opt/homebrew/Cellar/python@3.10/3.10.0_2: 3,135 files, 57.6MB ==\u0026gt; Installing autojump ==\u0026gt; Pouring autojump--22.5.3_3.arm64_monterey.bottle.tar.gz ==\u0026gt; Caveats Add the following line to your ~/.bash_profile or ~/.zshrc file: [ -f /opt/homebrew/etc/profile.d/autojump.sh ] \u0026amp;\u0026amp; . /opt/homebrew/etc/profile.d/autojump.sh If you use the Fish shell then add the following line to your ~/.config/fish/config.fish: [ -f /opt/homebrew/share/autojump/autojump.fish ]; and source /opt/homebrew/share/autojump/autojump.fish Restart your terminal for the settings to take effect. zsh completions have been installed to: /opt/homebrew/share/zsh/site-functions ==\u0026gt; Summary ğŸº /opt/homebrew/Cellar/autojump/22.5.3_3: 20 files, 170.7KB ==\u0026gt; Caveats ==\u0026gt; autojump Add the following line to your ~/.bash_profile or ~/.zshrc file: [ -f /opt/homebrew/etc/profile.d/autojump.sh ] \u0026amp;\u0026amp; . /opt/homebrew/etc/profile.d/autojump.sh If you use the Fish shell then add the following line to your ~/.config/fish/config.fish: [ -f /opt/homebrew/share/autojump/autojump.fish ]; and source /opt/homebrew/share/autojump/autojump.fish Restart your terminal for the settings to take effect. zsh completions have been installed to: /opt/homebrew/share/zsh/site-functions autojump ì„¤ì¹˜ê°€ ì˜ ëëŠ”ì§€ í™•ì¸í•œë‹¤.\n$ brew list 23:12:50 ==\u0026gt; Formulae autojump\tfzf\tjansson\tlibtermkey\tmpdecimal\tp11-kit\ttree-sitter [...] autojumpê°€ ì„¤ì¹˜ëª©ë¡ì— í¬í•¨ëœ ìƒíƒœì´ë‹¤.\n(3) í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€ # $ cat ~/.zshrc [...] plugins=( git zsh-syntax-highlighting zsh-autosuggestions ) ê¸°ì¡´ zsh ì„¤ì •íŒŒì¼ì´ë‹¤. ì•„ë«ì¤„ì— autojump í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë„ë¡ ì¶”ê°€í•œë‹¤.\n$ vi ~/.zshrc [...] plugins=( git zsh-syntax-highlighting zsh-autosuggestions autojump ) ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•œë‹¤.\n(4) ì ìš© # $ source ~/.zshrc .zshrc íŒŒì¼ì˜ ë³€ê²½ì‚¬í•­ì„ ì¦‰ì‹œ ì ìš©í•œë‹¤.\n(5) ë™ì‘ í…ŒìŠ¤íŠ¸ # $ cd /Users/ive/githubrepos/blog/content/blog $ cd / autojump í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°ì í™˜ê²½ì—ì„œ ê¹Šìˆ™í•œ ê²½ë¡œê¹Œì§€ í•œë²ˆ ë°©ë¬¸í•œ í›„ ìµœìƒë‹¨ ë””ë ‰í† ë¦¬ì¸ root directory(/)ë¡œ ì´ë™í•œë‹¤.\nj \u0026lt;ì í”„í•  ë””ë ‰í† ë¦¬ëª…\u0026gt; ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ autojumpë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n$ pwd / $ j blog /Users/ive/githubrepos/blog/content/blog $ pwd /Users/ive/githubrepos/blog/content/blog ë‹¨ë²ˆì— root directory(/)ì—ì„œ ë¸”ë¡œê·¸ ë ˆí¬ì§€í„°ë¦¬ë¡œ ì´ë™í–ˆë‹¤.\n2. neofetch # neofetchëŠ” í„°ë¯¸ë„ ì°½ì—ì„œ ì»´í“¨í„°ì™€ OSì— ëŒ€í•œ ìœ ìš©í•œ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ëŠ” íˆ´ì´ë‹¤.\n(1) brew ì„¤ì¹˜ ëª©ë¡ í™•ì¸ # $ brew list ==\u0026gt; Formulae bat\tlibevent\tneovim bdw-gc\tlibffi\tnettle ca-certificates\tlibidn2\topenssl@1.1 cask\tlibnghttp2\tp11-kit coreutils\tlibtasn1\tpcre emacs\tlibtermkey\tpkg-config fzf\tlibtool\treadline gettext\tlibunistring\ttree-sitter gmp\tlibuv\tunbound gnutls\tluajit-openresty\tunibilium guile\tluv\tzsh hugo\tm4\tzsh-completions jansson\tmsgpack kubernetes-cli\tncurses ==\u0026gt; Casks docker\titerm2 brewì— ì„¤ì¹˜ëœ ì†Œí”„íŠ¸ì›¨ì–´ ëª©ë¡ì„ í™•ì¸í•œë‹¤. neofetchë¼ëŠ” ì´ë¦„ì˜ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” í™•ì¸ë˜ì§€ ì•ŠìŒ.\n(2) brew ê²€ìƒ‰ # $ brew search neofetch ==\u0026gt; Formulae neofetch onefetch ê²€ìƒ‰ ê²°ê³¼ì—ì„œ neofetchë¼ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ê°€ ìˆë‹¤. neofetchë¥¼ ì„¤ì¹˜í•´ë³¸ë‹¤.\n(3) neofetch ì„¤ì¹˜ # $ brew install neofetch ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/screenresolution/manifests/1.6 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/screenresolution/blobs/sha256:3 ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/neofetch/manifests/7.1.0-2 ######################################################################## 100.0% ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/neofetch/blobs/sha256:78eb3e99d ==\u0026gt; Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh ######################################################################## 100.0% ==\u0026gt; Installing dependencies for neofetch: screenresolution ==\u0026gt; Installing neofetch dependency: screenresolution ==\u0026gt; Pouring screenresolution--1.6.arm64_monterey.bottle.tar.gz ğŸº /opt/homebrew/Cellar/screenresolution/1.6: 5 files, 57.7KB ==\u0026gt; Installing neofetch ==\u0026gt; Pouring neofetch--7.1.0.all.bottle.2.tar.gz ğŸº /opt/homebrew/Cellar/neofetch/7.1.0: 6 files, 350.6KB neofetchê°€ 7.1.0 ë²„ì „ìœ¼ë¡œ ì •ìƒ ì„¤ì¹˜ë˜ì—ˆë‹¤.\n(4) ì ìš© # $ vi ~/.zshrc [...] export PATH=/opt/homebrew/bin:/Library/Frameworks/Python.framework/Versions/3.9/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin neofetch zshì´ ì‹¤í–‰ë  ë•Œ ë§ˆì§€ë§‰ì— neofetch ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ë˜ë„ë¡ ë§ˆì§€ë§‰ ë¼ì¸ì— neofetchë¥¼ ì…ë ¥í•œë‹¤.\nì´ì œ iTerm2ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ zshì´ ì‹¤í–‰ë˜ê³ , ë§ˆì§€ë§‰ ê³¼ì •ì— neofetchê°€ ì‹¤í–‰ëœë‹¤.\n(5) ê²°ê³¼í™•ì¸ # ìƒˆ í„°ë¯¸ë„ì°½ì´ ì—´ë¦´ ë•Œë§ˆë‹¤ neofetch ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ì–´ ë””í…Œì¼í•œ í•˜ë“œì›¨ì–´ ìŠ¤í™, OS ì •ë³´ë¥¼ í‘œì¶œí•´ì¤€ë‹¤.\nì¢Œì¸¡ì— ë‚˜ì˜¤ëŠ” ASCII ê·¸ë¦¼ì€ ì›í•˜ëŠ” ì´ë¯¸ì§€ë¡œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.\nê¸°ë³¸ê°’ì€ ê° ìš´ì˜ì²´ì œì˜ ë¡œê³ ì´ë‹¤. MacBookì˜ ê²½ìš° ê¸°ë³¸ ê°’ìœ¼ë¡œ Apple ë¡œê³ ê°€ ì¶œë ¥ëœë‹¤.\në§ˆì¹˜ë©° # ëŒ“ê¸€ë¡œ ìœ ìš©í•œ zsh í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ì²œí•´ì£¼ë©´ ë‚´ê°€ ì§ì ‘ ì¨ë³´ê³  íŒë‹¨í•œ í›„ ì´ ê¸€ì— ì—…ë°ì´íŠ¸ í•˜ê² ë‹¤.\nì½”ë”©í•˜ëŠ”ê±° ê¸°ì™•ì´ë©´ ì¬ë¯¸ìˆê³  í¸í•˜ê²Œ í•˜ê¸¸ ë°”ë¼ë©´ì„œ ê¸€ì„ ë§ˆì¹œë‹¤. ë!\n","date":"Nov 8, 2021","permalink":"/blog/installing-zsh-plugins/","section":"Blogs","summary":"ê°œìš” # íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¥¼ ì´ìš©í•´ autojump í”ŒëŸ¬ê·¸ì¸ê³¼ neofetchë¥¼ ì„¤ì¹˜í•˜ê³  ì ìš©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.","title":"zsh í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜"},{"content":"ê°œìš” # macOS ë¡œì»¬í™˜ê²½ì—ì„œ Kubernetes ì‹¤ìŠµì„ í•  ìˆ˜ ìˆë„ë¡ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ ê³¼ì •ì„ ì„¤ëª…í•œë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13\u0026quot;, M1, 2020) OS : macOS Monterey 12.0.1 íŒ¨í‚¤ì§€ ê´€ë¦¬ì : Homebrew 3.3.2 Docker Desktop 4.1.1 + Kubernetes v1.21.5 ì ˆì°¨ # 1. Docker ì„¤ì¹˜ # macOSìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¥¼ ì´ìš©í•´ dockerë¥¼ ì„¤ì¹˜í•œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” dockerë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ì•¼í•œë‹¤.\n$ brew install --cask docker ==\u0026gt; Downloading https://desktop.docker.com/mac/main/arm64/69879/Docker.dmg Already downloaded: /Users/ive/Library/Caches/Homebrew/downloads/b5774f18ca8a6d3936c5174f91b93cb1a1a407daa784fe63d9b6300180c7b1ed--Docker.dmg ==\u0026gt; Installing Cask docker ==\u0026gt; Moving App \u0026#39;Docker.app\u0026#39; to \u0026#39;/Applications/Docker.app\u0026#39; ==\u0026gt; Linking Binary \u0026#39;docker-compose.bash-completion\u0026#39; to \u0026#39;/opt/homebrew/etc/bash_c ==\u0026gt; Linking Binary \u0026#39;docker.zsh-completion\u0026#39; to \u0026#39;/opt/homebrew/share/zsh/site-func ==\u0026gt; Linking Binary \u0026#39;docker.fish-completion\u0026#39; to \u0026#39;/opt/homebrew/share/fish/vendor_ ==\u0026gt; Linking Binary \u0026#39;docker-compose.fish-completion\u0026#39; to \u0026#39;/opt/homebrew/share/fish ==\u0026gt; Linking Binary \u0026#39;docker-compose.zsh-completion\u0026#39; to \u0026#39;/opt/homebrew/share/zsh/s ==\u0026gt; Linking Binary \u0026#39;docker.bash-completion\u0026#39; to \u0026#39;/opt/homebrew/etc/bash_completio ğŸº docker was successfully installed! docker ìµœì´ˆ ì„¤ì¹˜ì‹œ ì˜¤ë˜ê±¸ë¦¬ë‹ˆ ì¸ë‚´ì‹¬ì„ ê°–ê³  ê¸°ë‹¤ë¦°ë‹¤.\n$ brew list --cask docker iterm2 cask ëª©ë¡ì— dockerê°€ ì„¤ì¹˜ë˜ì—ˆë‹¤.\nëŸ°ì¹˜íŒ¨ë“œì—ë„ Docker ì•„ì´ì½˜ì´ ìƒì„±ëë‹¤.\n2. kubernetes í™œì„±í™” # ë„ì»¤ê°€ ì •ìƒ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´ ìƒë‹¨ë°”ì— Docker Desktop ì•„ì´ì½˜ì´ ë‚˜íƒ€ë‚œë‹¤.\nìƒë‹¨ë°” Docker ì•„ì´ì½˜ í´ë¦­ â†’ í™˜ê²½ì„¤ì •(Preferences) í´ë¦­ Kubernetes â†’ Enable Kubernetes ì²´í¬ â†’ Apply \u0026amp; Restart 3. kubernetes ìƒíƒœ í™•ì¸ # í´ëŸ¬ìŠ¤í„° ì •ë³´ í™•ì¸\n$ kubectl cluster-info Kubernetes control plane is running at https://kubernetes.docker.internal:6443 CoreDNS is running at https://kubernetes.docker.internal:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use \u0026#39;kubectl cluster-info dump\u0026#39;. kubectl ë²„ì „ í™•ì¸\nkubectlì€ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ì»¤ë§¨ë“œ ë¼ì¸ ë„êµ¬ì´ë‹¤.\n$ kubectl version Client Version: version.Info{Major:\u0026#34;1\u0026#34;, Minor:\u0026#34;22\u0026#34;, GitVersion:\u0026#34;v1.22.3\u0026#34;, GitCommit:\u0026#34;c92036820499fedefec0f847e2054d824aea6cd1\u0026#34;, GitTreeState:\u0026#34;clean\u0026#34;, BuildDate:\u0026#34;2021-10-27T18:34:20Z\u0026#34;, GoVersion:\u0026#34;go1.16.10\u0026#34;, Compiler:\u0026#34;gc\u0026#34;, Platform:\u0026#34;darwin/arm64\u0026#34;} Server Version: version.Info{Major:\u0026#34;1\u0026#34;, Minor:\u0026#34;21\u0026#34;, GitVersion:\u0026#34;v1.21.5\u0026#34;, GitCommit:\u0026#34;aea7bbadd2fc0cd689de94a54e5b7b758869d691\u0026#34;, GitTreeState:\u0026#34;clean\u0026#34;, BuildDate:\u0026#34;2021-09-15T21:04:16Z\u0026#34;, GoVersion:\u0026#34;go1.16.8\u0026#34;, Compiler:\u0026#34;gc\u0026#34;, Platform:\u0026#34;linux/arm64\u0026#34;} 4. pod ìŠ¤í™ ì‘ì„± # kubernetesì—ì„œ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ë ¤ë©´ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì •ë³´ì™€ í•¨ê»˜ ì˜ë„í•œ ìƒíƒœë¥¼ ê¸°ìˆ í•œ ì˜¤ë¸Œì íŠ¸ ìŠ¤í™(spec)ì„ ì œì‹œí•´ì•¼í•œë‹¤.\nì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ì‘ì„± í¬ë§·ì€ YAML í˜¹ì€ JSONì„ ì‚¬ìš©í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ YAMLì´ ë‹¤ë¥¸ í¬ë§·ë³´ë‹¤ ê°€ë…ì„±ì´ ì¢‹ê³  ì‘ì„±ë„ í¸í•´ ë§ì´ë“¤ ì‚¬ìš©í•œë‹¤.\nì¿ ë²„ë„¤í‹°ìŠ¤ êµ¬ì„±ìš”ì†Œì˜ ìµœì†Œ ë‹¨ìœ„ëŠ” í¬ë“œ(Pod)ì´ë‹¤. 1ê°œì˜ podëŠ” 1ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±ëœë‹¤.\nì•„ë˜ëŠ” podë¥¼ ë°°í¬í•˜ëŠ” ê°„ë‹¨í•œ yaml ìƒ˜í”Œ ì½”ë“œì´ë‹¤. vi ì—ë””í„°ë¥¼ ì´ìš©í•´ ê·¸ëŒ€ë¡œ ì‘ì„±í•´ ì €ì¥í•œë‹¤.\n$ cat sample-pod.yaml apiVersion: v1 kind: Pod metadata: name: myapp-pod labels: app: myapp spec: containers: - name: myapp-container image: busybox command: [\u0026#39;sh\u0026#39;, \u0026#39;-c\u0026#39;, \u0026#39;echo Hello Kubernetes! \u0026amp;\u0026amp; sleep 3600\u0026#39;] 5. pod ë°°í¬ # ì‘ì„±í•œ í¬ë“œ ìŠ¤í™(sample-pod.yaml)ì„ ì ìš©í•œë‹¤.\n$ kubectl apply -f sample-pod.yaml pod/myapp-pod created ì‹¤í–‰ ê²°ê³¼ë¡œ pod/myapp-pod created ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ podê°€ ì •ìƒ ìƒì„±ëœ ê²ƒì´ë‹¤.\n6. pod ìƒíƒœí™•ì¸ # í¬ë“œ ì •ë³´ë¥¼ ê°„ë‹¨íˆ ì¶œë ¥\n$ kubectl get pods NAME READY STATUS RESTARTS AGE myapp-pod 0/1 ContainerCreating 0 3s podì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ì¤‘(ContainerCreating)ì¸ ìƒíƒœë‹¤.\nëª‡ ì´ˆ í›„ì— pod ìƒíƒœë¥¼ ë‹¤ì‹œ ì¡°íšŒí•´ë³¸ë‹¤.\n$ kubectl get pods NAME READY STATUS RESTARTS AGE myapp-pod 1/1 Running 0 5s í˜„ì¬ëŠ” podì— ì»¨í…Œì´ë„ˆê°€ ìƒì„±ëœ í›„ ì‹¤í–‰ì¤‘(Running)ì´ë‹¤.\n$ kubectl get po pods í‚¤ì›Œë“œì˜ ì¶•ì•½í˜•ì¸ poë¡œ ì…ë ¥í•´ë„ ëœë‹¤. (pods ë§ê³  ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ë“¤ë„ ëª¨ë‘ ì¶•ì•½í˜•ì´ ì¡´ì¬í•œë‹¤. deploymentsëŠ” deploy, replicasetsëŠ” rsì´ë‹¤.)\nCLI í™˜ê²½ì—ì„œëŠ” í•œ ê¸€ìë¼ë„ ëœ ì¹˜ëŠ”ê²Œ ê³ íš¨ìœ¨ë¡œ ê°€ëŠ” ì§€ë¦„ê¸¸ì´ë‹¤.\ní¬ë“œ ì •ë³´ ìì„¸íˆ ì¶œë ¥\nkubectl get pod ëª…ë ¹ì–´ ë’¤ì— -o wide ì˜µì…˜ì„ ë¶™ì´ë©´ IP, NODE, NOMINATED NODE, READINESS GATES 4ê°€ì§€ ì •ë³´ë¥¼ ë” ë³´ì—¬ì¤€ë‹¤.\n$ kubectl get pods -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES myapp-pod 1/1 Running 0 11s 10.1.0.8 docker-desktop \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 7. ë°°í¬ ê²°ê³¼í™•ì¸ # $ kubectl logs pod/myapp-pod Hello Kubernetes! íŠ¹ì • podì˜ ë¡œê·¸ë¥¼ í™•ì¸í•œë‹¤. sample-pod.yaml íŒŒì¼ì— ì‘ì„±í•œëŒ€ë¡œ podê°€ echo Hello Kubernetes!ë¥¼ ì‹¤í–‰í–ˆë‹¤.\n8. pod ì ‘ì† # myapp-podì˜ myapp-container ì•ˆìœ¼ë¡œ shell ì ‘ì†ì„ ì‹œë„í•´ë³¸ë‹¤.\nì˜›ë‚  ë²„ì „ì˜ kubernetesì—ì„œëŠ” pod ì ‘ì†ì‹œ kubectl exec -it [POD] [COMMAND] ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í–ˆì—ˆë‹¤. í•˜ì§€ë§Œ í•´ë‹¹ ëª…ë ¹ì–´ëŠ” ì‹ ê·œ ëª…ë ¹ì–´ë¡œ ëŒ€ì²´(depreacted) ë˜ì–´ ê³§ ë‹¤ìŒ ë²„ì „ì—ì„œ ì‚¬ë¼ì§ˆ ì˜ˆì •ì´ë‹¤. ëª…ë ¹ì–´ ì‚¬ìš©ì— ì£¼ì˜í•œë‹¤.\n$ kubectl exec -it myapp-pod /bin/sh -c myapp-container kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead. ëª…ë ¹ì–´ í˜•ì‹\nkubernetes ê¶Œê³ ì‚¬í•­ì— ë”°ë¼ ì•„ë˜ì˜ ì‹ ê·œ kubectl exec ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.\n$ kubectl exec \u0026lt;POD_NAME\u0026gt; -c \u0026lt;CONTAINER_NAME\u0026gt; -it -- \u0026lt;COMMAND\u0026gt; ì‹¤ì œ ëª…ë ¹ì–´\n$ kubectl exec myapp-pod -c myapp-container -it -- /bin/sh $ kubectl exec myapp-pod -c myapp-container -it -- /bin/sh # --- ì—¬ê¸°ì„œë¶€í„°ëŠ” ì»¨í…Œì´ë„ˆì˜ shell í™˜ê²½ì— ì§„ì…í•œ ìƒíƒœì´ë‹¤. --- / # hostname myapp-pod / # ifconfig eth0 Link encap:Ethernet HWaddr 5E:DC:25:DF:28:AA inet addr:10.1.0.9 Bcast:10.1.255.255 Mask:255.255.0.0 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1 RX packets:14 errors:0 dropped:0 overruns:0 frame:0 TX packets:1 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:0 RX bytes:1048 (1.0 KiB) TX bytes:42 (42.0 B) lo Link encap:Local Loopback inet addr:127.0.0.1 Mask:255.0.0.0 UP LOOPBACK RUNNING MTU:65536 Metric:1 RX packets:0 errors:0 dropped:0 overruns:0 frame:0 TX packets:0 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:0 (0.0 B) TX bytes:0 (0.0 B) ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸ì´ ëë‚¬ë‹¤ë©´ Ctrl + p, q í‚¤(Escape Sequence)ë¥¼ ì…ë ¥í•´ì„œ containerì˜ shellì—ì„œ ë¹ ì ¸ë‚˜ì˜¨ë‹¤.\nexec attach failed: error on attach stdin: read escape sequence command terminated with exit code 126 $ 9. í¬ë“œ ì‚­ì œ # í•™ìŠµì´ ëë‚¬ìœ¼ë‹ˆ ìƒì„±ëœ podë¥¼ ì‚­ì œí•˜ê³  ì •ë¦¬í•˜ì.\nkubectl delete pod ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ í¬ë“œë¥¼ ì§€ì •í•´ ì‚­ì œë¥¼ í• ìˆ˜ë„ ìˆì§€ë§Œ, ê¹”ë”í•œ ì‚­ì œë¥¼ ìœ„í•´ì„œëŠ” -f ì˜µì…˜ì„ ì´ìš©í•´ yaml íŒŒì¼ì— ì„ ì–¸ëœ ì„¤ì •ì„ ê¸°ë°˜ìœ¼ë¡œ ì‚­ì œí•˜ëŠ” ê±¸ ê¶Œì¥í•œë‹¤.\n$ kubectl delete -f sample-pod.yaml pod \u0026#34;myapp-pod\u0026#34; deleted ì‚­ì œ ì†Œìš”ì‹œê°„ì€ ì•½ 20ì´ˆ ê±¸ë¦°ë‹¤. ì„¤ì •íŒŒì¼ì— ì„ ì–¸ëœ myapp-pod í¬ë“œê°€ ì •ìƒ ì‚­ì œëë‹¤.\nì •ë§ë¡œ í¬ë“œê°€ ì‚­ì œë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.\n$ kubectl get po No resources found in default namespace. ì•„ë¬´ëŸ° í¬ë“œë„ ì¡°íšŒë˜ì§€ ì•ŠëŠ”ë‹¤. ì˜ ì‚­ì œë˜ì—ˆë‹¤. ë!\n","date":"Nov 7, 2021","permalink":"/blog/k8s/installing-k8s-on-mac/","section":"Blogs","summary":"ê°œìš” # macOS ë¡œì»¬í™˜ê²½ì—ì„œ Kubernetes ì‹¤ìŠµì„ í•  ìˆ˜ ìˆë„ë¡ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ ê³¼ì •ì„ ì„¤ëª…í•œë‹¤.","title":"Kubernetes ì„¤ì¹˜"},{"content":"ê°œìš” # ëª¨ë‹ˆí„°ë§ ëŒ€ìƒì¸ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ITSM(IT Service Management) ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux server release 7.x Architecture : x86_64 ì—ì´ì „íŠ¸ SW : ITSM ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ (zagent-rhes3-x64_254) í•´ê²°ë²• # A) ì—ì´ì „íŠ¸ ì„¤ì¹˜ # ë°˜ë“œì‹œ root ê³„ì •ìœ¼ë¡œ ITSM ì—ì´ì „íŠ¸ ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤.\n1. zagent ì„¤ì¹˜íŒŒì¼ ì¤€ë¹„ # $ arch x86_64 í•´ë‹¹ ì„œë²„ëŠ” 64bit ê¸°ë°˜ ì•„í‚¤í…ì³(x86_64)ì´ë‹¤.\nëª¨ë‹ˆí„°ë§ ëŒ€ìƒì„œë²„ì˜ ì•„í‚¤í…ì³ì™€ ë™ì¼í•œ ë²„ì „ì˜ ì—ì´ì „íŠ¸ ì„¤ì¹˜íŒŒì¼ì„ ëª¨ë‹ˆí„°ë§ ëŒ€ìƒ ì„œë²„ì˜ íŒŒì¼ì‹œìŠ¤í…œì— ì—…ë¡œë“œí•œë‹¤.\n$ chmod 700 zagent-rhes3-x64_254 $ chown root:root zagent-rhes3-x64_254 ì„¤ì¹˜íŒŒì¼ì˜ ê¶Œí•œì„ 700(rwx --- ---), ì†Œìœ ì root, ê·¸ë£¹ rootë¡œ ì„¤ì •í•œë‹¤.\n$ ls -lh [...] -rwx------ 1 root root 1.1M 813 2010 zagent-rhes3-x64_254 $ mv zagent-rh78-i386_254 /usr/sbin/zagent ITSM ì—ì´ì „íŠ¸ ì„¤ì¹˜íŒŒì¼ì˜ ì´ë¦„ì„ zagentë¡œ ë³€ê²½í•œë‹¤. ì„¤ì¹˜íŒŒì¼ì„ ì´ë™ì‹œí‚¬ ê²½ë¡œëŠ” ë°˜ë“œì‹œ /usr/sbin/ ì´ì–´ì•¼ í•œë‹¤.\n2. zagent ì„¤ì¹˜ # $ zagent -install Excute user \u0026lt;default: root\u0026gt; ?: [ENTER] INSTALL: \u0026#39;zagent\u0026#39;, Path : \u0026#39;/sbin\u0026#39;, User : \u0026#39;root\u0026#39; Link /etc/rc.d/init.d/zagent /etc/rc.d/rc2.d/S99zagent Link /etc/rc.d/init.d/zagent /etc/rc.d/rc3.d/S99zagent Link /etc/rc.d/init.d/zagent /etc/rc.d/rc4.d/S99zagent Link /etc/rc.d/init.d/zagent /etc/rc.d/rc5.d/S99zagent Install completed ì—”í„°ë¥¼ ì…ë ¥í•´ default ê³„ì •(root)ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ ì‹¤í–‰í•œë‹¤.\në¬¸ì œí•´ê²°\nì¦ìƒ : zagent -install ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜ ì‹œë„ì‹œ /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory ì—ëŸ¬ê°€ ë°œìƒí•˜ë©° ì„¤ì¹˜ê°€ ë¶ˆê°€ëŠ¥í•¨ ì›ì¸ : ì„¤ì¹˜íŒŒì¼ê³¼ ì„œë²„ê°„ ì•„í‚¤í…ì³ í˜¸í™˜ì„± ë¶ˆì¼ì¹˜ (64ë¹„íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì³ ì„œë²„ì— 32ë¹„íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì³ìš© ì„¤ì¹˜íŒŒì¼ ì‹œë„) ì¡°ì¹˜ë°©ë²• : 64ë¹„íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì³(x86_64)ìš© ì„¤ì¹˜íŒŒì¼ë¡œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤. 3. manager ì„œë²„ ë“±ë¡ # ëª…ë ¹ì–´ í˜•ì‹\n$ zagent -a admin \u0026lt;ITSM_MANAGER_SERVER1_IP\u0026gt; \u0026lt;ITSM_MANAGER_SERVER2_IP\u0026gt; ì‹¤í–‰ ëª…ë ¹ì–´\n$ zagent -a admin 50.50.50.101 50.50.50.102 user 0, /var/zagent: created ZENIUS_PROGRAM_PATH= File Path: \u0026#39;/sbin\u0026#39; Current Path: \u0026#39;/var/zagent\u0026#39; 4. manager ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸ # $ zagent -c ZENIUS_PROGRAM_PATH= File Path: \u0026#39;/sbin\u0026#39; Current Path: \u0026#39;/var/zagent\u0026#39; Try connect to Primary Manager[50.50.50.101:5052] : Success Try connect to Secondary Manager[50.50.50.102:5052] : Success ëª¨ë‹ˆí„°ë§ ëŒ€ìƒì„œë²„ê°€ ITSM Manager ì„œë²„ì˜ TCP 5052 í¬íŠ¸ì™€ í†µì‹ ì´ ë˜ì–´ì•¼ í•œë‹¤.\n+---------------+ 5052 +---------------+ | target server |---------\u0026gt;| ITSM Manager1 | +---------------+ +---------------+ | | 5052 +---------------+ +-----------------\u0026gt;| ITSM Manager2 | +---------------+ ì ‘ì† í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ Success ê°€ ì•„ë‹ ê²½ìš°, ë°©í™”ë²½ê³¼ ê°™ì€ ë³´ì•ˆì¥ë¹„ë‚˜ ëª¨ë‹ˆí„°ë§ ëŒ€ìƒ ì„œë²„ì˜ ìì²´ ë°©í™”ë²½(iptables) ì •ì±…ì„ í™•ì¸í•œë‹¤.\n5. zagent í”„ë¡œì„¸ìŠ¤ ì‹œì‘ # $ zagent -start ZENIUS_PROGRAM_PATH= File Path: \u0026#39;/sbin\u0026#39; Current Path: \u0026#39;/var/zagent\u0026#39; zagent: started (153799) SetMemLimit: 200 MB (OK) SetFDLimit: 1024 (OK) SetCoreLimit: 0 MB (OK) Current Stack Size: 8388608 bytes Hostname: devserver1 IP: 192.168.0.15 MAC Address: xx:xx:xx:46:15:01 OS: Red Hat Enterprise Linux Server release 7.x 6. í”„ë¡œì„¸ìŠ¤ ìƒíƒœ í™•ì¸ # $ ps -ef | grep zagent root 153799 1 0 08:48 ? 00:00:00 zagent -start root 153800 153799 2 08:48 ? 00:00:00 zagent -start root 154157 140259 0 08:48 pts/1 00:00:00 grep --color=auto zagent zagent í”„ë¡œì„¸ìŠ¤ê°€ ì •ìƒ ë™ì‘ì¤‘ì´ë‹¤.\nB) ëª¨ë‹ˆí„°ë§ ëŒ€ìƒì˜ ìˆ˜ì§‘ë˜ëŠ” IP ìˆ˜ì • # ITSM ì›¹í˜ì´ì§€ì—ì„œ ëª¨ë‹ˆí„°ë§ ëŒ€ìƒ ì„œë²„ì˜ IPê°€ ì‹¤ì œ IPì™€ ë‹¤ë¥´ê²Œ ìˆ˜ì§‘ë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ ê²½ìš°ì—ë§Œ ì•„ë˜ ê³¼ì •ì„ ìˆ˜í–‰í•œë‹¤. ìˆ˜ì§‘ë˜ëŠ” IPê°€ ì‹¤ì œ IPì™€ ë™ì¼í•˜ë‹¤ë©´ í•´ë‹¹ ê³¼ì •ì„ ë„˜ê²¨ë„ ëœë‹¤.\n1. ì—ì´ì „íŠ¸ ì¤‘ì§€ # zagent í”„ë¡œì„¸ìŠ¤ê°€ ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœë¼ë©´ ì„¤ì •íŒŒì¼ì„ ìˆ˜ì •í•˜ê¸° ì „ì— ë¨¼ì € zagent -stop ëª…ë ¹ì–´ë¡œ ITSM ì—ì´ì „íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•œë‹¤.\n$ zagent -stop ZENIUS_PROGRAM_PATH= File Path: \u0026#39;/sbin\u0026#39; Current Path: \u0026#39;/var/zagent\u0026#39; Sending signal pid[0][153799], signum[15] Sending signal pid[1][153800], signum[15] zagent is stopped 2. zagent ì„¤ì •íŒŒì¼ í™•ì¸ # zagent ì„¤ì •íŒŒì¼ì˜ ê¸°ë³¸ ê²½ë¡œëŠ” /var/zagent/zagent.iniì´ë‹¤.\nLOCAL_IP ê°’ì— ì‹¤ì œ ì„œë²„ IPë¥¼ ì…ë ¥í•œë‹¤.\n$ vi /var/zagent/zagent.ini USE_WATCHDOG = 1 RESTART_LIMIT = 0 USERID = admin MANAGERIP1 = 50.50.50.101 MANAGERPORT1 = 5052 MANAGERIP2 = 50.50.50.102 MANAGERPORT2 = 5052 ZAGENT_CPU_LIMIT = 50 ZAGENT_MEM_LIMIT = 200 ZAGENT_MAX_CPUTIME = 5 ZAGENT_DISK_LIMIT = 100 ZAGENT_GET_CDROM = 0 SMS_GET_THERM = 1 ZAGENT_CORE_LIMIT = 0 ZAGENT_FD_LIMIT = 1024 LOCALIP = PRO_DISKIO = 0 SMS_GET_DISKINV = 1 NETSTAT_SLEEPCOUNT = 500 NETSTAT_SLEEPTIME = 100 AIXMEM_USEDASCOMP = 0 MAX_WORK_THREADS = 5 MAX_CONNECTION = 6 PROACTIVE_SUPPORT = off HOSTID = 46500 SAVEONOFF = 0 SAVEPERIOD = 0 MANAGERTYPE = 1 USER_HOSTNAME = devserver1 3. zagent ì„¤ì •íŒŒì¼ ìˆ˜ì • # LOCAL_IP ê°’ì„ ì‹¤ì œ ì„œë²„ì˜ IPë¡œ ì…ë ¥í–ˆë‹¤.\n$ vi /var/zagent/zagent.ini USE_WATCHDOG = 1 RESTART_LIMIT = 0 USERID = admin MANAGERIP1 = 50.50.50.101 MANAGERPORT1 = 5052 MANAGERIP2 = 50.50.50.102 MANAGERPORT2 = 5052 ZAGENT_CPU_LIMIT = 50 ZAGENT_MEM_LIMIT = 200 ZAGENT_MAX_CPUTIME = 5 ZAGENT_DISK_LIMIT = 100 ZAGENT_GET_CDROM = 0 SMS_GET_THERM = 1 ZAGENT_CORE_LIMIT = 0 ZAGENT_FD_LIMIT = 1024 LOCALIP = 50.50.50.199 PRO_DISKIO = 0 SMS_GET_DISKINV = 1 NETSTAT_SLEEPCOUNT = 500 NETSTAT_SLEEPTIME = 100 AIXMEM_USEDASCOMP = 0 MAX_WORK_THREADS = 5 MAX_CONNECTION = 6 PROACTIVE_SUPPORT = off HOSTID = 46500 SAVEONOFF = 0 SAVEPERIOD = 0 MANAGERTYPE = 1 USER_HOSTNAME = devserver1 4. zagent í”„ë¡œì„¸ìŠ¤ ì‹œì‘ # $ zagent -start ZENIUS_PROGRAM_PATH= File Path: \u0026#39;/sbin\u0026#39; Current Path: \u0026#39;/var/zagent\u0026#39; zagent: started (158846) SetMemLimit: 200 MB (OK) SetFDLimit: 1024 (OK) SetCoreLimit: 0 MB (OK) Current Stack Size: 8388608 bytes Hostname: devserver1 IP: 50.50.50.199 MAC Address: xx:xx:xx:46:15:01 OS: Red Hat Enterprise Linux Server release 7.x ëª¨ë‹ˆí„°ë§ ëŒ€ìƒìœ¼ë¡œë¶€í„° ìˆ˜ì§‘ëœ IP ì •ë³´ê°€ ì‹¤ì œ ì„œë²„ì˜ IPì™€ ë™ì¼í•˜ê²Œ ë³€ê²½ëœ ìƒíƒœë¥¼ í™•ì¸í–ˆë‹¤.\nIP: 50.50.50.199 ","date":"Nov 5, 2021","permalink":"/blog/installing-zagent-on-linux/","section":"Blogs","summary":"ê°œìš” # ëª¨ë‹ˆí„°ë§ ëŒ€ìƒì¸ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ITSM(IT Service Management) ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.","title":"zagent ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ ì„¤ì¹˜"},{"content":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ì˜ ë¶€íŒ…ìˆœì„œë¥¼ ì„¤ëª…í•œë‹¤.\nì„œë²„ì˜ ì „ì› ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ëª‡ ë¶„ì´ ì§€ë‚˜ë©´ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ê°€ ëœ¬ë‹¤ëŠ” ì‚¬ì‹¤ì€ ëª¨ë‘ê°€ ì•Œê³  ìˆë‹¤. ìš°ë¦¬ê°€ ì „ì› ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ê°€ ëœ¨ê¸° ì „ ê¹Œì§€ì˜ ê³¼ì •ì„ ì²˜ìŒë¶€í„° ë”°ë¼ê°€ë³´ì.\nì°¸ê³ ë¡œ ë¦¬ëˆ…ìŠ¤ì˜ ë¶€íŒ…ìˆœì„œ, RAIDì˜ ê° ë ˆë²¨ë³„ ì„¤ëª…ì€ ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ ë©´ì ‘ì‹œ ë‹¨ê³¨ ì§ˆë¬¸ì´ë‹ˆ ì¤‘ìš”ë„ê°€ ë†’ë‹¤.\në¦¬ëˆ…ìŠ¤ ë¶€íŒ…ìˆœì„œ 6ë‹¨ê³„ # +---+----------+-------------------------------------------------+ | 1 | BIOS | BIOSê°€ MBRì„ ì‹¤í–‰í•œë‹¤. | +---+----------+-------------------------------------------------+ | 2 | MBR | MBR(Master Boot Record)ê°€ GRUBì„ ì‹¤í–‰í•œë‹¤. | +---+----------+-------------------------------------------------+ | 3 | GRUB | GRUB(Grand Unified Bootloader)ê°€ Kernelì„ ì‹¤í–‰í•œë‹¤.| +---+----------+-------------------------------------------------+ | 4 | Kernel | Kernelì´ /sbin/initì„ ì‹¤í–‰í•œë‹¤. | +---+----------+-------------------------------------------------+ | 5 | Init | Init í”„ë¡œì„¸ìŠ¤ê°€ ëŸ°ë ˆë²¨ í”„ë¡œê·¸ë¨ë“¤ì„ ì‹¤í–‰í•œë‹¤. | +---+----------+-------------------------------------------------+ | 6 | Runlevel | ëŸ°ë ˆë²¨ í”„ë¡œê·¸ë¨ë“¤ì´ /etc/rc.d/rc*.d ë¥¼ ì‹¤í–‰í•œë‹¤. | +---+----------+-------------------------------------------------+ ë³¸ë¡  # 1. BIOS # BIOSëŠ” ê¸°ë³¸ ì…ì¶œë ¥ ì‹œìŠ¤í…œ(Basic Input/Output System)ì˜ ì•½ìì´ë‹¤. ì¼ë¶€ ì‹œìŠ¤í…œ ë¬´ê²°ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤. ë¶€íŠ¸ë¡œë” í”„ë¡œê·¸ë¨ì„ ê²€ìƒ‰, ë¡œë“œ ë° ì‹¤í–‰í•œë‹¤. BIOSëŠ” í”Œë¡œí”¼, CD-ROM ë˜ëŠ” í•˜ë“œ ë“œë¼ì´ë¸Œì—ì„œ ë¶€íŠ¸ ë¡œë”ë¥¼ ì°¾ëŠ”ë‹¤. BIOS ì‹œì‘ ì¤‘ì— í‚¤(ì¼ë°˜ì ìœ¼ë¡œ F2 ë˜ëŠ” F12 ì´ë©° ì‹œìŠ¤í…œë§ˆë‹¤ ë‹¤ë¥´ë‹¤)ë¥¼ ëˆŒëŸ¬ ë¶€íŒ… ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ë¶€íŠ¸ ë¡œë” í”„ë¡œê·¸ë¨ì´ ê°ì§€ë˜ì–´ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ë©´ BIOSê°€ ì´ë¥¼ ì œì–´í•œë‹¤. ìš”ì•½ : BIOSëŠ” MBR ë¶€íŠ¸ ë¡œë”ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì‹¤í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤. 2. MBR # MBRì€ ë§ˆìŠ¤í„° ë¶€íŠ¸ ë ˆì½”ë“œ(Master Boot Record)ì˜ ì•½ìì´ë‹¤. MBRì€ ë¶€íŒ… ë””ìŠ¤í¬ì˜ ì²« ë²ˆì§¸ ì„¹í„°ì— ìœ„ì¹˜í•´ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì²«ë²ˆì§¸ ë””ìŠ¤í¬ ì¥ì¹˜ëª…ì„ ì˜ë¯¸í•˜ëŠ” /dev/hda ë˜ëŠ” /dev/sdaì´ë‹¤. MBRì€ í¬ê¸°ê°€ 512ë°”ì´íŠ¸ì´ë‹¤. ì—¬ê¸°ì—ëŠ” ì„¸ ê°€ì§€ êµ¬ì„± ìš”ì†Œê°€ ìˆë‹¤. Bootstrap code : 446bytes í¬ê¸°ì˜ ì²«ë²ˆì§¸ ë¶€íŠ¸ ë¡œë” ì •ë³´ Partition table : 64bytes í¬ê¸°ì˜ íŒŒí‹°ì…˜ í…Œì´ë¸” ì •ë³´ Signature : ë§ˆì§€ë§‰ 2ë°”ì´íŠ¸ëŠ” MBR ìœ íš¨ì„± ì²´í¬ ì˜ì—­ìœ¼ë¡œ í•­ìƒ 0x55AA ê°’ì´ ë“¤ì–´ê°„ë‹¤. (Signature ê°’ì´ 0x55AAê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°’ì¼ ê²½ìš° ë¶€íŒ…ì‹œ Operating System not found ì—ëŸ¬ì™€ í•¨ê»˜ ë¶€íŒ…ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.) MBRì—ëŠ” GRUB(êµ¬ ì‹œìŠ¤í…œì˜ ê²½ìš° LILO)ì— ëŒ€í•œ ì •ë³´ê°€ ë“¤ì–´ ìˆë‹¤. ìš”ì•½ : MBRì€ GRUB ë¶€íŠ¸ ë¡œë”ë¥¼ ë¡œë“œí•˜ê³  ì‹¤í–‰í•œë‹¤. 3. GRUB # GRUBì€ Grand Unified Bootloaderì˜ ì•½ìì´ë‹¤.\nì‹œìŠ¤í…œì— ì—¬ëŸ¬ ê°œì˜ ì»¤ë„ ì´ë¯¸ì§€ê°€ ì„¤ì¹˜ëœ ê²½ìš° ì‹¤í–‰í•  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤.\nGRUBëŠ” ë¶€íŒ…ì‹œ ì‹œì‘ í™”ë©´ì„ í‘œì‹œí•˜ê³  ì‚¬ìš©ìê°€ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ ì„ íƒì„ í•  ë•Œê¹Œì§€ ëª‡ ì´ˆ ë™ì•ˆ ê¸°ë‹¤ë¦°ë‹¤. ì•„ë¬´ ì„ íƒë„ í•˜ì§€ ì•Šìœ¼ë©´ grub ì„¤ì •íŒŒì¼ì— ì§€ì •ëœ ëŒ€ë¡œ ê¸°ë³¸ ì»¤ë„ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•œë‹¤.\nGRUBì€ íŒŒì¼ ì‹œìŠ¤í…œì— ëŒ€í•œ ì •ë³´ë¥¼ ê°–ê³  ìˆë‹¤. êµ¬ë²„ì „ì˜ ë¦¬ëˆ…ìŠ¤ ë¶€íŠ¸ë¡œë”ì¸ LILO(Linux Loader)ëŠ” íŒŒì¼ ì‹œìŠ¤í…œì„ ì´í•´í•˜ì§€ ëª»í–ˆë‹¤.\nGRUBì˜ ì„¤ì • íŒŒì¼ì€ /boot/grub/grub.confì´ë‹¤. (/etc/grub.confëŠ” ì´ íŒŒì¼ì— ëŒ€í•œ ë§í¬íŒŒì¼). ë‹¤ìŒì€ CentOSì˜ grub.conf ìƒ˜í”Œì´ë‹¤.\n#boot=/dev/sda default=0 timeout=5 splashimage=(hd0,0)/boot/grub/splash.xpm.gz hiddenmenu title CentOS (2.6.18-194.el5PAE) root (hd0,0) kernel /boot/vmlinuz-2.6.18-194.el5PAE ro root=LABEL=/ initrd /boot/initrd-2.6.18-194.el5PAE.img ìœ„ì˜ ì •ë³´ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ GRUB ì„¤ì •íŒŒì¼ì—ëŠ” ì»¤ë„ê³¼ initrd ì´ë¯¸ì§€ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.\nìš”ì•½ : GRUBì€ ì»¤ë„ ë° initrd ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì‹¤í–‰í•œë‹¤.\n4. Kernel # GRUB ì„¤ì •íŒŒì¼(grub.conf)ì˜ root=ì— ì§€ì •ëœ ëŒ€ë¡œ ë£¨íŠ¸ íŒŒì¼ ì‹œìŠ¤í…œì„ ë””ìŠ¤í¬ ì¥ì¹˜ì— ë§ˆìš´íŠ¸í•œë‹¤. ì»¤ë„ì€ /sbin/init í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. initëŠ” Linux Kernelì—ì„œ ì‹¤í–‰ë˜ëŠ” ì²« ë²ˆì§¸ í”„ë¡œê·¸ë¨ì´ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ ID(PID)ê°€ 1ì´ë‹¤. ì‹œê°„ë‚  ë•Œ ps -ef | grep init ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ init í”„ë¡œì„¸ìŠ¤ì˜ pidë¥¼ í•œ ë²ˆ í™•ì¸í•´ë³´ì. initrdëŠ” ì´ˆê¸° RAM ë””ìŠ¤í¬(initial ram disk)ì˜ ì•½ìë¡œ ë©”ëª¨ë¦¬ìƒì˜ ê°€ìƒ ë””ìŠ¤í¬ì´ë©°, initrdëŠ” ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì´ ë¶€íŒ…ë˜ê³  ì‹¤ì œ ë£¨íŠ¸ íŒŒì¼ ì‹œìŠ¤í…œì´ ë§ˆìš´íŠ¸ë  ë•Œê¹Œì§€ ì»¤ë„ì— ì˜í•´ ì„ì‹œ ë£¨íŠ¸ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. initrdëŠ” initramfsì´ë¼ëŠ” íŒŒì¼ì‹œìŠ¤í…œì„ ê°–ê³  ìˆë‹¤. initramfsì€ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì´ ì´ˆê¸°ì— ë™ì‘í• ë•Œ í•„ìš”í•œ ë“œë¼ì´ë²„ë‚˜ í”„ë¡œê·¸ë¨, ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë“±ì„ ê°€ì§€ê³  ìˆì–´ í•˜ë“œ ë“œë¼ì´ë¸Œ íŒŒí‹°ì…˜ ë° ê¸°íƒ€ í•˜ë“œì›¨ì–´ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤. 5. Init # /etc/inittab ì„¤ì •íŒŒì¼ì„ ì°¸ì¡°í•´ Linux ìš´ì˜ì²´ì œì˜ ì‹¤í–‰ ìˆ˜ì¤€(Run Level)ì„ ê²°ì •í•œë‹¤. ë‹¤ìŒì€ ì„¤ì • ê°€ëŠ¥í•œ Run Level ì´ë‹¤. 0 â€“ ì¢…ë£Œ (Halt) 1 â€“ ë‹¨ì¼ ì‚¬ìš©ì ëª¨ë“œ (Single user mode) 2 â€“ NFSê°€ ì—†ëŠ” ë‹¤ì¤‘ ì‚¬ìš©ì (Multiuser, without NFS) 3 â€“ ì „ì²´ ë‹¤ì¤‘ ì‚¬ìš©ì ëª¨ë“œ (Full multiuser mode) 4 â€“ ë¯¸ì‚¬ìš© (unused) 5 â€“ X11 (GUI) 6 â€“ ì¬ë¶€íŒ… (Reboot) Init í”„ë¡œì„¸ìŠ¤ëŠ” /etc/inittabì—ì„œ ê¸°ë³¸ Run Levelì„ í™•ì¸í•œ í›„ ê° ë ˆë²¨ì— ë§ê²Œ í”„ë¡œê·¸ë¨ë“¤ì„ ë¡œë“œí•œë‹¤. ì‹œìŠ¤í…œì—ì„œ grep initdefault /etc/inittabì„ ì‹¤í–‰í•˜ì—¬ ê¸°ë³¸ ì‹¤í–‰ ìˆ˜ì¤€ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ìŠ¤ìŠ¤ë¡œ ì„œë²„ ì¥ì• ë¥¼ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ /etc/inittab ì„¤ì •íŒŒì¼ì„ ì—´ì–´ Default run levelì„ 0 ë˜ëŠ” 6 ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤. ì´ì œ ìš°ë¦¬ëŠ” 0ê³¼ 6ì´ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ ì•Œê¸° ë•Œë¬¸ì— ì•„ë§ˆë„ ê·¸ë ‡ê²Œ í•˜ì§€ëŠ” ì•Šê² ì§€ë§Œ. ì¼ë°˜ì ìœ¼ë¡œ Runlevelì„ 3 ë˜ëŠ” 5ë¡œ ì„¤ì •í•œë‹¤. 6. Runlevel programs # Linux ì‹œìŠ¤í…œì´ ë¶€íŒ…ë  ë•Œ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ starting sendmail â€¦ OKì™€ ê°™ì€ ë©”ì„¸ì§€ê°€ ì´ì— í•´ë‹¹í•œë‹¤. ì´ëŸ¬í•œ í”„ë¡œê·¸ë¨ë“¤ì€ Run level ë””ë ‰í† ë¦¬(/etc/rc.d/rc*.d/)ì— ì˜í•´ ìë™ì‹¤í–‰ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ë“¤ì´ë‹¤. ê¸°ë³¸ ì´ˆê¸°í™” ë ˆë²¨(Run Level) ì„¤ì •ì— ë”°ë¼ ì‹œìŠ¤í…œì€ ë‹¤ìŒ ë””ë ‰í† ë¦¬ ì¤‘ í•˜ë‚˜ë¥¼ ê³¨ë¼ ê·¸ ì•ˆì— ë‚˜ì—´ëœ í”„ë¡œê·¸ë¨ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤. ì‹¤í–‰ ë ˆë²¨ 0 â€“ /etc/rc.d/rc0.d/ ì‹¤í–‰ ë ˆë²¨ 1 â€“ /etc/rc.d/rc1.d/ ì‹¤í–‰ ë ˆë²¨ 2 â€“ /etc/rc.d/rc2.d/ ì‹¤í–‰ ë ˆë²¨ 3 â€“ /etc/rc.d/rc3.d/ ì‹¤í–‰ ë ˆë²¨ 4 â€“ /etc/rc.d/rc4.d/ ì‹¤í–‰ ë ˆë²¨ 5 â€“ /etc/rc.d/rc5.d/ ì‹¤í–‰ ë ˆë²¨ 6 â€“ /etc/rc.d/rc6.d/ /etc ì•„ë˜ì— ì§ì ‘ ì´ ë””ë ‰í† ë¦¬ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‹¬ë³¼ë¦­ ë§í¬ë„ ìˆë‹¤. ë”°ë¼ì„œ /etc/rc0.dëŠ” /etc/rc.d/rc0.dì— ì—°ê²°ë˜ì–´ ìˆë‹¤. /etc/rc.d/rc*.d/ ë””ë ‰í† ë¦¬ì—ì„œ ì²«ê¸€ìê°€ Sì™€ Kë¡œ ì‹œì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ë“¤ì„ ë³¼ ìˆ˜ ìˆë‹¤. ì²«ê¸€ìê°€ Së¡œ ì‹œì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì€ ìë™ì ìœ¼ë¡œ ì‹œì‘(Startup) ëœë‹¤. ì²«ê¸€ìê°€ Kë¡œ ì‹œì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì€ ìë™ì ìœ¼ë¡œ ì¢…ë£Œ(Kill) ëœë‹¤. í”„ë¡œê·¸ë¨ ì´ë¦„ì—ì„œ Sì™€ K ë°”ë¡œ ì˜†ì— ìˆ«ìê°€ ìˆë‹¤. í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë˜ê±°ë‚˜ ì¢…ë£Œë˜ì–´ì•¼ í•˜ëŠ” ì‹œí€€ìŠ¤ ë²ˆí˜¸ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, S12syslogëŠ” ì‹œí€€ìŠ¤ ë²ˆí˜¸ê°€ 12ì¸ syslog ë°ëª¬ì„ ì‹œì‘í•œë‹¤. S80sendmailì€ ì‹œí€€ìŠ¤ ë²ˆí˜¸ê°€ 80ì¸ sendmail ë°ëª¬ì„ ì‹œì‘í•œë‹¤. ë”°ë¼ì„œ syslog í”„ë¡œê·¸ë¨ì€ sendmailì˜ ì‹œí€€ìŠ¤ ë²ˆí˜¸ë³´ë‹¤ ë” ë‚®ê¸° ë•Œë¬¸ì— sendmail í”„ë¡œê·¸ë¨ë³´ë‹¤ ë¨¼ì € ì‹œì‘ëœë‹¤. ","date":"Nov 2, 2021","permalink":"/blog/linux-boot-sequence/","section":"Blogs","summary":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ì˜ ë¶€íŒ…ìˆœì„œë¥¼ ì„¤ëª…í•œë‹¤.","title":"ë¦¬ëˆ…ìŠ¤ ë¶€íŒ…ìˆœì„œ"},{"content":"ê°œìš” # Hugo-theme-codex í…Œë§ˆë¥¼ ì‚¬ìš©í•˜ëŠ” ë¸”ë¡œê·¸ì—ì„œ ëŒ“ê¸€ í”ŒëŸ¬ê·¸ì¸ì¸ utterances ê¸°ëŠ¥ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.\nì‚¬ì‹¤ ì–¸ì  ê°„ í•´ì•¼ì§€ í•˜ë©´ì„œ ê³„ì† ë¯¸ë£¨ê³  ìˆë˜ ë¸”ë¡œê·¸ ìœ ì§€ë³´ìˆ˜ë¥¼ í• ë¡œìœˆ ê¸°ë…ìœ¼ë¡œ ì‹¤ì‹œí•˜ê²Œ ë˜ì—ˆë‹¤.\nTIL(Today I Learned) í¬ìŠ¤íŠ¸ëŠ” ê¾¸ì¤€íˆ ì‘ì„±í•˜ê³  ìˆëŠ”ë°, ì •ì‘ ë¸”ë¡œê·¸ ìœ ì§€ë³´ìˆ˜ëŠ” ë¯¸ë£¨ê³  ìˆì—ˆë‹¤.\ní™˜ê²½ # í•˜ë“œì›¨ì–´ : Apple / MacBook Pro (13\u0026quot;, M1, 2020) ì‚¬ì´íŠ¸ ì •ì  ìƒì„±ê¸° : hugo v0.88.1 $ hugo version hugo v0.88.1+extended darwin/arm64 BuildDate=unknown í…Œë§ˆ : hugo-theme-codex v1.6.0 $ git submodule -f568a96d9b35bfa63c5e5f7feb7e799f7c995cb4 public 9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da themes/hugo-theme-codex (v1.6.0) ëŒ“ê¸€ í”ŒëŸ¬ê·¸ì¸ : Utterances ëª©í‘œ # ë¸”ë¡œê·¸ ë ˆì´ì•„ì›ƒì— Utterances í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ ëŒ“ê¸€(Comment) ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.\ní•´ê²°ë²• # 1. utterances ì„¤ì¹˜ # ë¸”ë¡œê·¸ ë ˆí¬ì§€í„°ë¦¬(repo)ì— Utterances ì•±ì„ ì„¤ì¹˜í•œë‹¤.\nUtterancesë¥¼ ì‚¬ìš©í•˜ë©´ ëŒ“ê¸€ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë° ë“œëŠ” ì‹œê°„ì€ 10ë¶„ì´ë©´ ì¶©ë¶„í•˜ë‹¤. ê·¸ë§Œí¼ ê°„ë‹¨í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\në¸”ë¡œê·¸ ë ˆí¬ì§€í„°ë¦¬ì˜ ê³µê°œ ìƒíƒœëŠ” Publicìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ë§Œ Utterances í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.\nutterances ì„¤ì¹˜ í™ˆí˜ì´ì§€ì— ì ‘ì†í•œ í›„ ë³¸ì¸ì˜ ê¹ƒí—ˆë¸Œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•œë‹¤.\nì´í›„ ìš°ì¸¡ì— ì´ˆë¡ìƒ‰ Install ë²„íŠ¼ í´ë¦­\nOnly select repositories â†’ ë¸”ë¡œê·¸ repo ì„ íƒ (ë‚´ ê²½ìš°ëŠ” seyslee/blog)\n2. utternaces ì‘ì„± # A) repo # utterances ê³µì‹ í™ˆí˜ì´ì§€ì— ì ‘ì†í•œë‹¤. ì¤‘ê°„ì— configuration ì´í›„ \u0026lsquo;repo:\u0026rsquo; ê°’ì´ ìˆë‹¤.\nì´ ê°’ì— ì†Œìœ ìì™€ ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„ì„ ì…ë ¥í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‚˜ê°™ì€ ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í–ˆë‹¤.\nrepo: seyslee/blog B) Blog Post â†”ï¸ Issue Mapping # ë¸”ë¡œê·¸ ê¸€ê³¼ Issueë¥¼ ì–´ë–»ê²Œ Mapping í•  ê²ƒì¸ì§€ ì •í•˜ëŠ” ì„¤ì •ì´ë‹¤.\nê¸°ë³¸ê°’ì¸ Issue title contains page pathnameë¡œ ì„ íƒí•œë‹¤.\nC) Issue Label # blog-comment ë¡œ ì…ë ¥. ì•„ë¬´ ì…ë ¥ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ì¸ Commentë¡œ ì„¤ì •ëœë‹¤.\nIssue Labelì€ ì˜µì…˜ê°’(Optional)ì´ê¸° ë•Œë¬¸ì— Default ê°’ì¸ Commentë¥¼ ì‚¬ìš©í•´ë„ ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ì—ëŠ” ì „í˜€ ì§€ì¥ì—†ë‹¤.\nD) Theme # ëŒ“ê¸€ì°½ í…Œë§ˆëŠ” ê°ì ì›í•˜ëŠ” ê±¸ë¡œ ì„ íƒí•˜ë©´ ëœë‹¤.\në‚´ ë¸”ë¡œê·¸ í…Œë§ˆì¸ hugo-theme-codexëŠ” í°ìƒ‰ ê³„ì—´ì´ê¸° ë•Œë¬¸ì— ê°™ì€ ìƒ‰ìƒì— ë§ì¶° ê¸°ë³¸ê°’ì¸ GitHub Lightë¡œ ì„ íƒí–ˆë‹¤.\nE) Enable Utterances # repo ì •ë³´, ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì™€ ì´ìŠˆê°„ ë§µí•‘ ë°©ì‹, ì´ìŠˆ ë¼ë²¨, í…Œë§ˆë¥¼ ì„ ì •í–ˆë‹¤ë©´ ìµœì¢…ì ìœ¼ë¡œ Utterances í”ŒëŸ¬ê·¸ì¸ì˜ ì½”ë“œê°€ ìë™ ì™„ì„±ëœë‹¤.\n\u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;seyslee/blog\u0026#34; issue-term=\u0026#34;pathname\u0026#34; label=\u0026#34;blog-comment\u0026#34; theme=\u0026#34;github-light\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; Utterances ìƒì„±ì‹œ ì…ë ¥í•œ ê°’ì´ ì‚¬ìš©ìë§ˆë‹¤ ê°ê° ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ìœ„ ì½”ë“œëŠ” ë‚´ ê²½ìš°ì—ë§Œ í•´ë‹¹ë˜ë‹ˆ ì°¸ê³ ë§Œ í•˜ì.\nì´ì œ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë ˆì´ì•„ì›ƒ íŒŒì¼(.html)ì˜ ì ì ˆí•œ ìœ„ì¹˜ì— Utterances ì½”ë“œë¥¼ ë¶™ì—¬ë„£ëŠ” ì‘ì—…ë§Œ í•˜ë©´ ëë‚œë‹¤.\n3. ë¸”ë¡œê·¸ ë ˆì´ì•„ì›ƒì— ì½”ë“œ ì¶”ê°€ # ë¸”ë¡œê·¸ í…Œë§ˆë§ˆë‹¤ ë ˆì´ì•„ì›ƒ íŒŒì¼ì˜ ê²½ë¡œë‚˜ êµ¬ì¡°ê°€ ë‹¤ë¥´ë‹¤. í•´ë‹¹ ê¸€ì€ í˜„ì¬ ì €ìê°€ ì‚¬ìš©ì¤‘ì¸ í…Œë§ˆì¸ hugo-theme-codex ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë§Œì•½ ë‹¤ë¥¸ ë¸”ë¡œê·¸ í…Œë§ˆë¥¼ ì‚¬ìš©ì¤‘ì´ë¼ë©´ ë„ì›€ì´ ì•ˆë  ìˆ˜ë„ ìˆë‹¤.\nì‘ì—…ê²½ë¡œ\nblog (/) # seyslee/blog â””â”€ themes â””â”€ hugo-theme-codex â””â”€ layouts â””â”€ _default â””â”€ single.html # ì‘ì—…ëŒ€ìƒ! ê°œë³„ í¬ìŠ¤íŠ¸ì— ëŒ€í•œ ë ˆì´ì•„ì›ƒ íŒŒì¼. hugo-theme-codex í…Œë§ˆì˜ ê²½ìš° ê°œë³„ í¬ìŠ¤íŠ¸ì— ëŒ€í•œ ë ˆì´ì•„ì›ƒì€ single.html íŒŒì¼ì— ì„ ì–¸ë˜ì–´ ìˆë‹¤.\nëª¨ë“  í¬ìŠ¤íŠ¸ì— ëŒ“ê¸€ ê¸°ëŠ¥ì„ ì¼ê´„ ì ìš©í•˜ë ¤ë©´ single.html íŒŒì¼ì„ ì—´ì–´ì„œ Utterances ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ë©´ ëœë‹¤.\në³€ê²½ì „ single.html\n{{ define \u0026#34;styles\u0026#34; }} {{ $.Scratch.Set \u0026#34;style_opts\u0026#34; (dict \u0026#34;src\u0026#34; \u0026#34;scss/pages/post.scss\u0026#34; \u0026#34;dest\u0026#34; \u0026#34;css/post.css\u0026#34;) }} {{ end }} {{ define \u0026#34;main\u0026#34; }} {{ $dateFormat := .Site.Params.dateFormat | default \u0026#34;Jan 2 2006\u0026#34; }} \u0026lt;div class=\u0026#34;flex-wrapper\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post__container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;post__header\u0026#34;\u0026gt; \u0026lt;h1 id=\u0026#34;post__title\u0026#34;\u0026gt;{{.Title}}\u0026lt;/h1\u0026gt; {{ if .Date }}\u0026lt;time datetime=\u0026#34;{{ .Date }}\u0026#34; class=\u0026#34;post__date\u0026#34;\u0026gt;{{ .Date.Format $dateFormat }}\u0026lt;/time\u0026gt; {{ end }} \u0026lt;/header\u0026gt; \u0026lt;article class=\u0026#34;post__content\u0026#34;\u0026gt; {{ partial \u0026#34;anchored-headings.html\u0026#34; .Content }} {{ if or .Params.math .Site.Params.math }} {{ partial \u0026#34;math.html\u0026#34; . }} {{ end }} \u0026lt;/article\u0026gt; {{ partial \u0026#34;tags.html\u0026#34; .}} {{ partial \u0026#34;post-pagination.html\u0026#34; .}} {{ template \u0026#34;_internal/disqus.html\u0026#34; . }} \u0026lt;footer class=\u0026#34;post__footer\u0026#34;\u0026gt; {{ partial \u0026#34;social-icons.html\u0026#34; .}} \u0026lt;p\u0026gt;{{ replace .Site.Copyright \u0026#34;{year}\u0026#34; now.Year }}\u0026lt;/p\u0026gt; \u0026lt;/footer\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; {{ if .Params.toc }} \u0026lt;div class=\u0026#34;toc-container\u0026#34;\u0026gt; {{ if .Site.Params.showPageTitleInTOC }} \u0026lt;div class=\u0026#34;toc-post-title\u0026#34;\u0026gt;{{ .Title }}\u0026lt;/div\u0026gt; {{ end }} {{ .TableOfContents }} \u0026lt;/div\u0026gt; {{ end }} \u0026lt;/div\u0026gt; {{ end }} {{ define \u0026#34;scripts\u0026#34; }} {{/* Hardcode a specific prismjs version to avoid a redirect on every page load. */}} \u0026lt;script src=\u0026#34;https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{/* Automatically loads the needed languages to highlight the code blocks. */}} \u0026lt;script src=\u0026#34;https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js\u0026#34; data-autoloader-path=\u0026#34;https://unpkg.com/prismjs@1.20.0/components/\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ if .Params.toc }} \u0026lt;script src=\u0026#34;/js/table-of-contents.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ end }} {{ end }} ì¤‘ê°„ì— \u0026lt;footer\u0026gt; ... \u0026lt;/footer\u0026gt; ë¶€ë¶„ì´ ìˆë‹¤. ì´ ë¶€ë¶„ ë°”ë¡œ ìœ—ì¤„ì— ë³µì‚¬í•œ utterances ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µë¶™í•œë‹¤.\n\u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;seyslee/blog\u0026#34; issue-term=\u0026#34;pathname\u0026#34; label=\u0026#34;blog-comment\u0026#34; theme=\u0026#34;github-light\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; ìœ„ utterances ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‚´ í™˜ê²½ì— ì‘ì„±ëœ ì½”ë“œì´ê¸° ë•Œë¬¸ì—, ì´ê±¸ ê·¸ëŒ€ë¡œ ë³¸ì¸ ë¸”ë¡œê·¸ì— ë³µë¶™í•˜ë©´ ì•ˆëœë‹¤.\nê°ì Utterances ì‚¬ì´íŠ¸ì—ì„œ ì…ë ¥í•œ ê°’ì„ í† ëŒ€ë¡œ ìë™ ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ì–´ì•¼ í•œë‹¤.\në³€ê²½í›„ single.html\n{{ define \u0026#34;styles\u0026#34; }} {{ $.Scratch.Set \u0026#34;style_opts\u0026#34; (dict \u0026#34;src\u0026#34; \u0026#34;scss/pages/post.scss\u0026#34; \u0026#34;dest\u0026#34; \u0026#34;css/post.css\u0026#34;) }} {{ end }} {{ define \u0026#34;main\u0026#34; }} {{ $dateFormat := .Site.Params.dateFormat | default \u0026#34;Jan 2 2006\u0026#34; }} \u0026lt;div class=\u0026#34;flex-wrapper\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post__container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;post\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;post__header\u0026#34;\u0026gt; \u0026lt;h1 id=\u0026#34;post__title\u0026#34;\u0026gt;{{.Title}}\u0026lt;/h1\u0026gt; {{ if .Date }}\u0026lt;time datetime=\u0026#34;{{ .Date }}\u0026#34; class=\u0026#34;post__date\u0026#34;\u0026gt;{{ .Date.Format $dateFormat }}\u0026lt;/time\u0026gt; {{ end }} \u0026lt;/header\u0026gt; \u0026lt;article class=\u0026#34;post__content\u0026#34;\u0026gt; {{ partial \u0026#34;anchored-headings.html\u0026#34; .Content }} {{ if or .Params.math .Site.Params.math }} {{ partial \u0026#34;math.html\u0026#34; . }} {{ end }} \u0026lt;/article\u0026gt; {{ partial \u0026#34;tags.html\u0026#34; .}} {{ partial \u0026#34;post-pagination.html\u0026#34; .}} {{ template \u0026#34;_internal/disqus.html\u0026#34; . }} \u0026lt;script src=\u0026#34;https://utteranc.es/client.js\u0026#34; repo=\u0026#34;seyslee/blog\u0026#34; issue-term=\u0026#34;pathname\u0026#34; label=\u0026#34;blog-comment\u0026#34; theme=\u0026#34;github-dark\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34; async\u0026gt; \u0026lt;/script\u0026gt; \u0026lt;footer class=\u0026#34;post__footer\u0026#34;\u0026gt; {{ partial \u0026#34;social-icons.html\u0026#34; .}} \u0026lt;p\u0026gt;{{ replace .Site.Copyright \u0026#34;{year}\u0026#34; now.Year }}\u0026lt;/p\u0026gt; \u0026lt;/footer\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; {{ if .Params.toc }} \u0026lt;div class=\u0026#34;toc-container\u0026#34;\u0026gt; {{ if .Site.Params.showPageTitleInTOC }} \u0026lt;div class=\u0026#34;toc-post-title\u0026#34;\u0026gt;{{ .Title }}\u0026lt;/div\u0026gt; {{ end }} {{ .TableOfContents }} \u0026lt;/div\u0026gt; {{ end }} \u0026lt;/div\u0026gt; {{ end }} {{ define \u0026#34;scripts\u0026#34; }} {{/* Hardcode a specific prismjs version to avoid a redirect on every page load. */}} \u0026lt;script src=\u0026#34;https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{/* Automatically loads the needed languages to highlight the code blocks. */}} \u0026lt;script src=\u0026#34;https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js\u0026#34; data-autoloader-path=\u0026#34;https://unpkg.com/prismjs@1.20.0/components/\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ if .Params.toc }} \u0026lt;script src=\u0026#34;/js/table-of-contents.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; {{ end }} {{ end }} \u0026lt;script\u0026gt; ... \u0026lt;/script\u0026gt; ë¶€ë¶„ì´ ì¶”ê°€ëë‹¤.\n4. ëŒ“ê¸€ì°½ ìƒì„±ì—¬ë¶€ í™•ì¸ # git commit í•´ì„œ ì‹¤ì œ ë¸”ë¡œê·¸ í™˜ê²½ì— ì ìš©í•˜ê¸° ì „ì— ë¨¼ì € localhostì—ì„œ ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.\n$ hugo server -D Start building sites â€¦ hugo v0.88.1+extended darwin/arm64 BuildDate=unknown | EN -------------------+----- Pages | 65 Paginator pages | 0 Non-page files | 0 Static files | 12 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Built in 37 ms Watching for changes in /Users/ive/githubrepos/blog/{archetypes,content,data,layouts,static,themes} Watching for config changes in /Users/ive/githubrepos/blog/config.toml Environment: \u0026#34;development\u0026#34; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop ì´í›„ ë¸”ë¡œê·¸ í™ˆí˜ì´ì§€( http://localhost:1313/)ì— ì ‘ì†í•´ì„œ í™•ì¸í•´ë³¸ ê²°ê³¼, í¬ìŠ¤íŠ¸ í•˜ë‹¨ì— Utterances ëŒ“ê¸€ì°½ì´ ì˜ ì ìš©ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nê·¸ëŸ¼ ë‹¤ë“¤ Hugo ë¸”ë¡œê·¸ ì˜ ì“°ì‹œê¸¸ ë°”ë€ë‹¤. Happy Halloween!\n","date":"Oct 31, 2021","permalink":"/blog/installing-utterances-in-hugo/","section":"Blogs","summary":"ê°œìš” # Hugo-theme-codex í…Œë§ˆë¥¼ ì‚¬ìš©í•˜ëŠ” ë¸”ë¡œê·¸ì—ì„œ ëŒ“ê¸€ í”ŒëŸ¬ê·¸ì¸ì¸ utterances ê¸°ëŠ¥ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","title":"hugo ëŒ“ê¸€ê¸°ëŠ¥ ì¶”ê°€(Utterances)"},{"content":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ëª…ë ¹ì–´ë¥¼ í†µí•´ ìºì‹œ ë©”ëª¨ë¦¬ë¥¼ ì •ë¦¬í•´ ì—¬ìœ  ë©”ëª¨ë¦¬ë¥¼ í™•ë³´í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 5.x Shell : bash í•´ê²°ë²• # 1. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìš”ì•½ í™•ì¸ # $ free -g total used free shared buffers cached Mem: 62 62 0 0 0 55 -/+ buffers/cache: 6 56 Swap: 62 3 59 ì „ì²´ ë©”ëª¨ë¦¬(total) 62GB ì¤‘ 55GBê°€ ìºì‹œ ë©”ëª¨ë¦¬(cached)ë¡œ ì¡í˜€ìˆë‹¤.\n2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìƒì„¸ í™•ì¸ # ê¸°ë³¸ ë‹¨ìœ„(kB)ë¡œ ë³´ê¸° # $ cat /proc/meminfo | column -t MemTotal: 66004284 kB MemFree: 211724 kB Buffers: 759392 kB Cached: 58053888 kB SwapCached: 2245728 kB Active: 11509948 kB Inactive: 53444952 kB HighTotal: 0 kB HighFree: 0 kB LowTotal: 66004284 kB LowFree: 211724 kB SwapTotal: 65537156 kB SwapFree: 62276916 kB Dirty: 1056 kB Writeback: 0 kB AnonPages: 6139572 kB Mapped: 42920 kB Slab: 668696 kB PageTables: 36240 kB NFS_Unstable: 0 kB Bounce: 0 kB CommitLimit: 98539296 kB Committed_AS: 11802812 kB VmallocTotal: 34359738367 kB VmallocUsed: 295112 kB VmallocChunk: 34359442931 kB HugePages_Total: 0 HugePages_Free: 0 HugePages_Rsvd: 0 Hugepagesize: 2048 kB column -t : ì¶œë ¥ê²°ê³¼ë¥¼ ì¹¸ì— ë§ê²Œ ì •ë ¬í•´ì„œ ê°€ë…ì„±ì„ ë†’ì—¬ì£¼ëŠ” ëª…ë ¹ì–´\ní™•ì¸ê²°ê³¼ ì „ì²´ ë©”ëª¨ë¦¬(MemTotal)ì˜ 87%ê°€ ìºì‹œ ë©”ëª¨ë¦¬(Cached)ë¡œ ì¡í˜€ìˆë‹¤.\nGB ë‹¨ìœ„ë¡œ ë³´ê¸° # kB ë‹¨ìœ„ë¡œ ë³´ëŠ”ê²Œ ë¶ˆí¸í•˜ë©´ GB ë‹¨ìœ„ë¡œ ë³€í™˜ì‹œì¼œ ë³¼ ìˆ˜ë„ ìˆë‹¤.\n$ awk \u0026#39;$3==\u0026#34;kB\u0026#34;{$2=$2/1024/1024;$3=\u0026#34;GB\u0026#34;} 1\u0026#39; /proc/meminfo | column -t MemTotal: 62.9466 GB MemFree: 0.191048 GB Buffers: 0.724033 GB Cached: 55.3696 GB SwapCached: 2.14169 GB Active: 10.6456 GB Inactive: 51.3047 GB HighTotal: 0 GB HighFree: 0 GB LowTotal: 62.9466 GB LowFree: 0.191048 GB SwapTotal: 62.5011 GB SwapFree: 59.3919 GB Dirty: 0.00088501 GB Writeback: 0 GB AnonPages: 5.8541 GB Mapped: 0.0409317 GB Slab: 0.636795 GB PageTables: 0.0345459 GB NFS_Unstable: 0 GB Bounce: 0 GB CommitLimit: 93.9744 GB Committed_AS: 11.3072 GB VmallocTotal: 32768 GB VmallocUsed: 0.281441 GB VmallocChunk: 32767.7 GB HugePages_Total: 0 HugePages_Free: 0 HugePages_Rsvd: 0 Hugepagesize: 0.00195312 GB ì „ì²´ ë©”ëª¨ë¦¬(MemTotal) 64GB ì¤‘ì—ì„œ ìºì‹œ ë©”ëª¨ë¦¬(Cached)ë¥¼ 55GB ì“°ê³ , ë²„í¼ ë©”ëª¨ë¦¬(Buffers)ëŠ” 0.7GB ì‚¬ìš©ì¤‘.\nì—¬ìœ  ë©”ëª¨ë¦¬(MemFree) ê°’ì´ 0.1GBë¡œ ë„ˆë¬´ ë‚®ë‹¤.\n3. ìºì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬ # ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ # ìºì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬ ì „ì— ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë³€í™”ë¥¼ ëª¨ë‹ˆí„°ë§ í•˜ê¸° ìœ„í•´ ì„¸ì…˜ì„ í•˜ë‚˜ ë” ë„ì›Œì„œ watch -d -n1 \u0026quot;free -g\u0026quot; ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\n$ watch -d -n1 \u0026#34;free -g\u0026#34; 1ì´ˆ ê°„ê²©ìœ¼ë¡œ free -g ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´.\n-d ì˜µì…˜ì€ ë³€ê²½ëœ ê°’ì„ í•˜ì´ë¼ì´íŒ… í•´ì„œ ê°€ë…ì„±ì„ ë†’ì—¬ì¤€ë‹¤.\nsync # $ sync ìºì‹œ ë©”ëª¨ë¦¬ì— ìˆëŠ” ë³€ë™ì‚¬í•­ì„ í•˜ë“œë””ìŠ¤í¬ì— ì˜®ê²¨ì„œ ì“°ê¸°(Write)\nìºì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬ # $ echo 3 \u0026gt; /proc/sys/vm/drop_caches ìºì‹œ ë©”ëª¨ë¦¬ë¥¼ ì •ë¦¬í•œë‹¤. ì •ë¦¬ëŒ€ìƒì€ pagecache, dentry, inode ì´ë‹¤.\nìºì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬ ì†Œìš”ì‹œê°„ì€ ì„œë²„ í™˜ê²½ê³¼ ìºì‹œ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì— ë”°ë¼ ë‹¤ë¥¸ë° ë³´í†µ 10ì´ˆ ì•ˆìœ¼ë¡œ ì •ë¦¬ê°€ ì™„ë£Œëœë‹¤.\nìš©ì–´ì„¤ëª…\npagecache : íŒŒì¼ì˜ ì…ì¶œë ¥(I/O)ì˜ ì†ë„ì™€ í¼í¬ë¨¼ìŠ¤ë¥¼ ë†’ì´ê¸° ìœ„í•´ ì‹œìŠ¤í…œì´ í• ë‹¹í•œ ë©”ëª¨ë¦¬ ì˜ì—­(ì„ì‹œ ë©”ëª¨ë¦¬ ì €ì¥ì†Œ). ì˜ˆë¥¼ ë“¤ì–´ ì–´ë–¤ ê²½ë¡œì˜ íŒŒì¼ì„ í•œ ë²ˆ ì½ì–´ë“¤ì´ë©´ ì‹œìŠ¤í…œì´ í•´ë‹¹ íŒŒì¼ ë‚´ìš©ì„ ì„ì‹œë©”ëª¨ë¦¬ì— ì €ì¥ì‹œí‚¤ëŠ”ë° ì´í›„ì— í•´ë‹¹ íŒŒì¼ì„ ë‹¤ì‹œ ì½ì„ ë•Œ ì´ë¥¼ ìƒˆë¡œ ì½ì–´ë“¤ì´ì§€ ì•Šê³  ì´ ë©”ëª¨ë¦¬ì—ì„œ ë°”ë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ë””ìŠ¤í¬ì˜ ì½ê¸°/ì“°ê¸° ì†ë„ê°€ ë¹¨ë¼ì§€ë¯€ë¡œ íš¨ìœ¨ì´ ë†’ì•„ì§. ìœˆë„ìš° OSì˜ í˜ì´ì§€ íŒŒì¼ ê°™ì€ ì—­í• . dentry : directory entryì˜ ì¤„ì„ë§ë¡œ ì˜ˆë¥¼ ë“¤ì–´ /usr/share ê°™ì€ ê²½ë¡œì—ì„œ usrê³¼ shareë¥¼ ì§€ì¹­. inode : íŒŒì¼ê³¼ ë””ë ‰í† ë¦¬ì— ê´€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ìë£Œêµ¬ì¡°. ì˜ˆë¥¼ ë“¤ì–´ íŒŒì¼ì˜ í¼ë¯¸ì…˜ ì •ë³´, ë””ìŠ¤í¬ ìƒì˜ íŒŒì¼ì˜ ë¬¼ë¦¬ì  ìœ„ì¹˜, í¬ê¸°, ìƒì„±ëœ ì¼ì‹œ ì •ë³´ ë“±ì„ ì €ì¥. drop_caches ì˜ë¯¸\n$ echo 1 \u0026gt; /proc/sys/vm/drop_caches # To free pagecache $ echo 2 \u0026gt; /proc/sys/vm/drop_caches # To free dentries and inodes $ echo 3 \u0026gt; /proc/sys/vm/drop_caches # To free pagecache, dentries and inodes 4. ë©”ëª¨ë¦¬ ë°˜í™˜ ê²°ê³¼ í™•ì¸ # ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìš”ì•½ í™•ì¸ # $ free -g total used free shared buffers cached Mem: 62 12 50 0 0 5 -/+ buffers/cache: 6 56 Swap: 62 3 59 -g : GB ë‹¨ìœ„ë¡œ ë³´ì—¬ì¤€ë‹¤.\në©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìƒì„¸ í™•ì¸ # $ awk \u0026#39;$3==\u0026#34;kB\u0026#34;{$2=$2/1024/1024;$3=\u0026#34;GB\u0026#34;} 1\u0026#39; /proc/meminfo | column -t MemTotal: 62.9466 GB MemFree: 48.9179 GB Buffers: 0.0405312 GB Cached: 7.78165 GB SwapCached: 2.14169 GB Active: 8.87233 GB Inactive: 4.87525 GB HighTotal: 0 GB HighFree: 0 GB LowTotal: 62.9466 GB LowFree: 48.9179 GB SwapTotal: 62.5011 GB SwapFree: 59.3919 GB Dirty: 0.00118637 GB Writeback: 0 GB AnonPages: 5.92254 GB Mapped: 0.0409355 GB Slab: 0.11797 GB PageTables: 0.0352592 GB NFS_Unstable: 0 GB Bounce: 0 GB CommitLimit: 93.9744 GB Committed_AS: 11.2496 GB VmallocTotal: 32768 GB VmallocUsed: 0.281441 GB VmallocChunk: 32767.7 GB HugePages_Total: 0 HugePages_Free: 0 HugePages_Rsvd: 0 Hugepagesize: 0.00195312 GB ë©”ëª¨ë¦¬ ì „í›„ ë¹„êµí‘œ # ë²„í¼ ë©”ëª¨ë¦¬ëŠ” ì‘ì—…ì „ë¶€í„° í¬ê¸°ê°€ ì‘ì•„ íš¨ê³¼ê°€ ê·¸ë¦¬ ì²´ê°ë˜ì§€ëŠ” ì•Šì§€ë§Œ 94% ì¤„ì˜€ê³ , ìºì‹œ ë©”ëª¨ë¦¬ëŠ” 87% ì¤„ì˜€ë‹¤.\nêµ¬ë¶„ ë²„í¼ ë©”ëª¨ë¦¬ ìºì‹œ ë©”ëª¨ë¦¬ Before 0.7 [GB] 55 [GB] After 0.04 [GB] 7 [GB] 5. ìºì‹œ ë©”ëª¨ë¦¬ ìŠ¤ì¼€ì¤„ë§ ë“±ë¡ # ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ê°€ ë§¤ë²ˆ ìˆ˜ë™ìœ¼ë¡œ ìºì‹œ ë©”ëª¨ë¦¬ë¥¼ ì •ë¦¬í•˜ëŠ” ê±´ ë²ˆê±°ë¡­ê³  ë¶ˆê°€ëŠ¥í•˜ë‹ˆ, ì„œë²„ê°€ ì•Œì•„ì„œ ìë™ ì •ë¦¬í•  ìˆ˜ ìˆë„ë¡ crontabì— ìºì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬ ìŠ¤ì¼€ì¤„ì„ ë“±ë¡í•´ì¤€ë‹¤.\në°˜ë“œì‹œ root ê³„ì •ì—ì„œ crontabì„ ë“±ë¡í•´ì•¼í•œë‹¤.\nì„œë²„ì— ë¶€í•˜ê°€ ë§ì€ ì‹œì ì— drop_cache ê°’ì— 3ì„ ë¶€ì—¬í•˜ëŠ” í–‰ìœ„ëŠ” ì„œë²„ ë©ˆì¶¤ í˜„ìƒì„ ìœ ë°œí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ìºì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬ ìŠ¤ì¼€ì¤„ë§ ë“±ë¡ ì‹œ ì‹¤í–‰ì‹œê°„ì€ ë¶€í•˜(Load)ê°€ ì ì€ ìƒˆë²½ ì‹œê°„ëŒ€ë¡œ ì„¤ì •í•´ì•¼ë§Œ í•œë‹¤.\nCron ì»¤ë‹í˜ì´í¼(Cheatsheet) # # * * * * * command to be executed # - - - - - # | | | | | # | | | | +----\u0026gt; Day of Week (0 - 6) (0 = Sunday ... 6 = Saturday) # | | | +------\u0026gt; Month (1 - 12) # | | +--------\u0026gt; Day of Month (1 - 31) # | +----------\u0026gt; Hour (0 - 23) # +------------\u0026gt; Minute (0 - 59) crontabì„ ì‘ì„±í•˜ëŠ” ì¼ì´ ê·¸ë¦¬ ë¹ˆë²ˆíˆ ë°œìƒí•˜ëŠ” í¸ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ê°€ë” í—·ê°ˆë¦´ ë•Œê°€ ìˆë‹¤.\ncrontab ìœ—ì¤„ì— ì£¼ì„ì²˜ë¦¬ëœ ì»¤ë‹í˜ì´í¼ë¥¼ ë‹¬ì•„ë†“ìœ¼ë©´ ì‘ì—…ì‹œ ëˆˆ ì•ì— ë°”ë¡œ ì°¸ê³ ìë£Œê°€ ìˆê¸° ë•Œë¬¸ì— í¸ë¦¬í•œ ì„œë²„ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.\nìŠ¤ì¼€ì¤„ë§ ë“±ë¡ # $ crontab -e 0 3 * * * sync \u0026amp;\u0026amp; echo 3 \u0026gt; /proc/sys/vm/drop_caches -e : crontabì„ í¸ì§‘í•œë‹¤.\në§¤ì¼ ìƒˆë²½ 3ì‹œë§ˆë‹¤ ìºì‹œ ë©”ëª¨ë¦¬ë¥¼ ì •ë¦¬í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\nìŠ¤ì¼€ì¤„ë§ í™•ì¸ # $ crontab -l 0 3 * * * sync \u0026amp;\u0026amp; echo 3 \u0026gt; /proc/sys/vm/drop_caches -l : crontabì˜ ì„¤ì • ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.\nì°¸ê³ ìë£Œ # https://kangwoo.github.io/devops/linux/linux-buffer-cache/\nhttps://linux-mm.org/Drop_Caches\n","date":"Oct 28, 2021","permalink":"/blog/cleaning-cache-memory-in-linux/","section":"Blogs","summary":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ëª…ë ¹ì–´ë¥¼ í†µí•´ ìºì‹œ ë©”ëª¨ë¦¬ë¥¼ ì •ë¦¬í•´ ì—¬ìœ  ë©”ëª¨ë¦¬ë¥¼ í™•ë³´í•  ìˆ˜ ìˆë‹¤.","title":"ë¦¬ëˆ…ìŠ¤ ìºì‹œ ë©”ëª¨ë¦¬ ë¹„ìš°ê¸°"},{"content":"í™˜ê²½ # Model : MacBook Pro (13inch, M1, 2020)\nOS : macOS Monterey 12.0.1\n$ sw_vers ProductName:\tmacOS ProductVersion:\t12.0.1 BuildVersion:\t21A559 Shell : zsh\ní„°ë¯¸ë„ : macOS ê¸°ë³¸ í„°ë¯¸ë„\nì¦ìƒ # macOS Catalina 11.6ì—ì„œ macOS Monterey 12.0.1ë¡œ ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ë¥¼ í•œ ì´í›„ë¶€í„° git ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë°˜í™˜ë˜ë©° ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.\n$ git commit -m \u0026#39;rebuilding site 2021ë…„ 10ì›” 27ì¼ ìˆ˜ìš”ì¼ 00ì‹œ 34ë¶„ 04ì´ˆ KST\u0026#39; xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun git commit ëª…ë ¹ì–´ ë¿ë§Œ ì•„ë‹ˆë¼ git push ë˜í•œ ë™ì¼í•œ ì—ëŸ¬ ë©”ì„¸ì§€ì´ë‹¤.\n$ git push origin master xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun ì›ì¸ # macOSì—ì„œ OS ì—…ë°ì´íŠ¸ê°€ ì§„í–‰ë ë•Œë§ˆë‹¤ ìì£¼ ë°œìƒë˜ëŠ” xcode cli ê´€ë ¨ í˜¸í™˜ì„± ì´ìŠˆì´ë‹¤.\nëŒ€í‘œì ì¸ ê°œë°œíˆ´ì¸ git, make, gccê°€ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.\ní•´ê²°ë²• # 1. Xcode CLI ì„¤ì¹˜ # Xcode CLIë§Œ ë”°ë¡œ ì„¤ì¹˜í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n$ xcode-select --install xcode-select: note: install requested for command line developer tools ì´í›„ GUI í™˜ê²½ì—ì„œ [ì„¤ì¹˜] ë²„íŠ¼ì„ ëˆŒëŸ¬ ëª…ë ¹ì–´ ë¼ì¸ ê°œë°œì ë„êµ¬(Command line developer tools)ë¥¼ ì„¤ì¹˜í•˜ë©´ ëœë‹¤.\nì„¤ì¹˜í›„ì— ì´ì „ì— ì•ˆëë˜ ëª…ë ¹ì–´ê°€ ì˜ ì‹¤í–‰ë˜ëŠ” ì§€ í…ŒìŠ¤íŠ¸í•´ë³¸ë‹¤.\n2. Xcode CLI ì´ˆê¸°í™” # Xcode CLIë¥¼ ì„¤ì¹˜í•´ë„ ì¦ìƒì´ ë™ì¼í•˜ë‹¤ê³  í•˜ë©´ xcode CLIë¥¼ ì´ˆê¸°í™”í•œë‹¤. ì´ˆê¸°í™”ì‹œì—ëŠ” root ê¶Œí•œì´ í•„ìš”í•˜ë‹¤.\n$ sudo xcode-select --reset Password: [íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥] 3. git ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸ # $ git commit -m \u0026#39;rebuilding site 2021ë…„ 10ì›” 27ì¼ ìˆ˜ìš”ì¼ 00ì‹œ 45ë¶„ 23ì´ˆ KST\u0026#39; [...] 2 files changed, 28 insertions(+), 3 deletions(-) $ git push origin master Enumerating objects: 9, done. Counting objects: 100% (9/9), done. Delta compression using up to 8 threads Compressing objects: 100% (5/5), done. Writing objects: 100% (5/5), 1.33 KiB | 1.33 MiB/s, done. [...] 5936bbc..902284d master -\u0026gt; master Xcode CLIë¥¼ ì„¤ì¹˜ì™„ë£Œ í›„ ì—ëŸ¬ ë©”ì„¸ì§€ ì—†ì´ git ëª…ë ¹ì–´ê°€ ì‹¤í–‰ëœë‹¤.\n","date":"Oct 27, 2021","permalink":"/blog/fixing-xcrun-error/","section":"Blogs","summary":"í™˜ê²½ # Model : MacBook Pro (13inch, M1, 2020)","title":"macOS xcrun: error í•´ê²°ë²•"},{"content":"ê°œìš” # IBM AIXì˜ í´ë¼ì´ì–¸íŠ¸ ì„œë²„ì—ì„œ NTP ë°ëª¬ì„ ë™ì‘í›„ NTP ì„œë²„ì™€ ì‹œê°„ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.\nì–´ëŠë‚  ë‚´ê°€ ê´€ë¦¬í•˜ëŠ” IBM AIX ì„œë²„ê°€ NTP ë™ê¸°í™”ê°€ ì•ˆë˜ê³  ìˆê¸¸ë˜ ì ê²€í•˜ë©´ì„œ ê³µë¶€í•  ê²¸ ì •ë¦¬í•œ ë©”ë‰´ì–¼ì´ë‹¤.\nì¦ìƒ # IBM AIX í´ë¼ì´ì–¸íŠ¸ì—ì„œ NTP ì„œë²„ì™€ ì‹œê°„ ë™ê¸°í™”ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n$ ntpq -p ntpq: read: A remote host refused an attempted connect operation. ì›ì¸ # NTP ë°ëª¬ì¸ xntpdê°€ ì‹¤í–‰ì¤‘ì´ì§€ ì•Šì•˜ë‹¤.\ní™˜ê²½ # OS : IBM AIX 7.2.0.0 Shell : ksh ì¡°ì¹˜ë°©ë²• # 1. NTP ë°ëª¬ ìƒíƒœí™•ì¸ # IBM AIXì—ì„œ NTP ë°ëª¬ì˜ ì´ë¦„ì€ xntpdì´ë‹¤. ë¦¬ëˆ…ìŠ¤ì˜ ê²½ìš°ëŠ” ntpdì´ë‹¤.\nê°€ì¥ ë¨¼ì € xntpdê°€ ì‹¤í–‰ì¤‘ì¸ì§€ í™•ì¸í•œë‹¤.\n$ ps -ef | grep xntpd root 16449928 8848040 0 08:25:49 pts/0 0:00 grep xntpd xntpd ê°€ ì‹¤í–‰ì¤‘ì´ì§€ ì•Šë‹¤.\n2. NTP ì„¤ì •íŒŒì¼ í™•ì¸ # IBM AIXì˜ NTP ì„¤ì •íŒŒì¼ì˜ ì ˆëŒ€ê²½ë¡œëŠ” /etc/ntp.confë¡œ ë¦¬ëˆ…ìŠ¤ì™€ ë™ì¼í•˜ë‹¤.\nxntpdëŠ” ì‹œì‘ë  ë•Œ /etc/ntp.conf ì„¤ì • ì •ë³´ë¥¼ ì½ëŠ”ë‹¤.\ní•´ë‹¹ ì„¤ì •íŒŒì¼ì„ ìˆ˜ì •í•˜ì.\n$ cat /etc/ntp.conf | grep -v ^# ... broadcastclient driftfile /etc/ntp.drift tracefile /etc/ntp.trace server 10.10.10.123 prefer prefer\nNTP ì„œë²„ IP ë’¤ì— prefer í‚¤ì›Œë“œê°€ ë¶™ì„ ê²½ìš°, í•´ë‹¹ NTP ì„œë²„ì™€ ìš°ì„ ì ìœ¼ë¡œ ì—°ê²°í•œë‹¤.\nëª…ë ¹ì–´ ì„¤ëª…\ngrep -v ^#ëŠ” ì£¼ì„ì„ ì œì™¸í•œ ë‚´ìš©ë§Œ ì¶œë ¥í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\nNTP ì„¤ì •íŒŒì¼ì¸ ntp.conf ìƒë‹¨ì—ëŠ” ì œì¡°ì‚¬ì¸ IBMì—ì„œ ì´ˆê¸° ì‘ì„±í•œ ì£¼ì„ ë¼ì¸ì´ ì•½ 30ì¤„ ì •ë„ë¡œ ë§ë‹¤.\ngrep -v ^# ëª…ë ¹ì–´ë¥¼ ë¶™ì´ë©´ ì£¼ì„ì´ ì•„ë‹Œ ì‹¤ì œ ì„¤ì • ë‚´ìš©ë§Œ í•„í„°ë§í•´ì„œ ì¶œë ¥í•˜ê¸° ë•Œë¬¸ì— ë³´ê¸° í¸í•˜ë‹¤.\n3. NTP ì„œë¹„ìŠ¤ ê¸°ë™ # $ startsrc -s xntpd -a \u0026#34;-x\u0026#34; 0513-059 The xntpd Subsystem has been started. Subsystem PID is 19268504. xntpd ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ì—ˆë‹¤.\nstartsrc ëª…ë ¹ì–´ ì„¤ëª… # -s : ì„œë¹„ìŠ¤ ì´ë¦„ -a : ì„œë¹„ìŠ¤ ì˜µì…˜ íŒŒë¼ë¯¸í„° \u0026quot;-x\u0026quot; : í´ë¼ì´ì–¸íŠ¸ì˜ ì‹œê°„ì´ ë’¤ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ì˜µì…˜ ì‹œê°„ë¡¤ë°± ë°©ì§€ \u0026ldquo;-x\u0026rdquo; # ë§Œì•½ ì°¸ì¡°í•˜ëŠ” NTP ì„œë²„(time server)ê°€ í˜„ì¬ ì‹œê°„ë³´ë‹¤ ê³¼ê±°ì‹œì ìœ¼ë¡œ ì‹œê°„ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ, í•´ë‹¹ NTP ì„œë²„ë¥¼ ì°¸ì¡°í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì‹œê°„ì´ ë’¤ë¡œ ëŒì•„ê°€ëŠ” í˜„ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ xntpd ì‹œì‘ì‹œ, -x ì˜µì…˜ì„ ì¤€ë‹¤. Oracle DB ì„œë²„ì˜ ê²½ìš° ì‹œê°„ ë¡¤ë°±ì´ ë°œìƒí•  ê²½ìš° ì¶©ëŒë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°˜ë“œì‹œ xntpd ì‹œì‘ì‹œ -x ì˜µì…˜ì„ ë„£ì–´ì„œ ì‹œê°„ì´ ë’¤ë¡œ ëŒì•„ê°€ëŠ” ê²ƒ(time backward)ì„ ë°©ì§€í•œë‹¤. 4. NTP ë°ëª¬ ë™ì‘ìƒíƒœ í™•ì¸ # $ ps -ef | grep xntpd root 11010996 8848040 0 08:55:57 pts/0 0:00 grep xntpd root 19268504 3146712 0 08:55:54 - 0:00 /usr/sbin/xntpd -x 19268504 PIDë¥¼ ê°€ì§„ xntpd ë°ëª¬ì´ -x ì˜µì…˜ì´ ë¶™ì€ ìƒíƒœë¡œ ì˜ ë™ì‘ì¤‘ì´ë‹¤.\n$ lssrc -s xntpd Subsystem Group PID Status xntpd tcpip 19268504 active xntpdì˜ PIDëŠ” 19268504, ìƒíƒœëŠ” ë™ì‘ì¤‘(active)ì´ë‹¤.\n5. NTP ìˆ˜ë™ ë™ê¸°í™” ì‹¤í–‰ # $ ntpdate -d 10.10.10.123 26 Oct 09:51:07 ntpdate[16777548]: 3.4y transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) server 10.10.10.123, port 123 stratum 1, precision -19, leap 00, trust 000 refid [GPS], delay 0.02525, dispersion 0.00034 transmitted 4, in filter 4 reference time: e521cf7a.00000000 Tue, Oct 26 2021 9:51:06.000 originate timestamp: e521cf7b.6dd2f12b Tue, Oct 26 2021 9:51:07.429 transmit timestamp: e521cf7b.6dd32000 Tue, Oct 26 2021 9:51:07.429 filter delay: 0.02649 0.02769 0.02525 0.02640 0.00000 0.00000 0.00000 0.00000 filter offset: 0.000229 -0.00127 -0.00016 -0.00039 0.000000 0.000000 0.000000 0.000000 delay 0.02525, dispersion 0.00034 offset -0.000160 26 Oct 09:51:07 ntpdate[16777548]: adjust time server 10.10.10.123 offset -0.00016 ë§Œì•½ ntpdate -d ì‹¤í–‰í›„ no server suitable for synchronization found ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë°œìƒí•  ê²½ìš°, ì•„ë˜ 2ê°€ì§€ ì‚¬í•­ì„ ì ê²€í•´ë³´ì.\nNTP ì„œë²„ì—ì„œ NTP ë°ëª¬(ë¦¬ëˆ…ìŠ¤ì˜ ê²½ìš° ntpd, AIXì˜ ê²½ìš° xntpd)ì´ ì •ìƒ ë™ì‘ì¤‘ì¸ê°€? í´ë¼ì´ì–¸íŠ¸ì™€ NTP ì„œë²„ ì‚¬ì´ì— ìœ„ì¹˜í•œ ë°©í™”ë²½ì—ì„œ NTPìš© í¬íŠ¸ì¸ 123ë²ˆ í¬íŠ¸ê°€ í†µê³¼ í—ˆìš©ë˜ì–´ ìˆëŠ”ê°€? transmitê³¼ receiveê°€ ë°˜ë³µë˜ë©´ NTP ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°„ ì‹œê°„ ë°ì´í„°ë¥¼ ì˜ ì£¼ê³  ë°›ê³  ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.\n... transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) receive(10.10.10.123) transmit(10.10.10.123) ... ì‹œê°„ ì˜¤ì°¨ê°’(offset)ì€ -0.000160 ì´ë‹¤.\n... offset -0.000160 ... 6. NTP ë™ê¸°í™” ì—¬ë¶€ í™•ì¸ # ë“±ë¡ëœ NTP ì„œë²„ì™€ ë™ê¸°í™”ëœ ìƒíƒœì¸ì§€ í™•ì¸í•œë‹¤.\n$ ntpq -p remote refid st t when poll reach delay offset disp ============================================================================== *10.10.10.123 .GPS. 1 u 20 64 377 0.76 0.183 0.20 ntpq ì„¤ëª… # remote : IP ì•ì— * í‘œì‹œê°€ ë¶™ìœ¼ë©´ í•´ë‹¹ NTP ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë™ê¸°í™”ëœ ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤.\nwhen : NTP ì„œë²„ë¡œë¶€í„° ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•œ í›„ ê²½ê³¼ëœ ì‹œê°„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤. ë‹¨ìœ„ëŠ” ì´ˆ(second).\npoll : í´ë¼ì´ì–¸íŠ¸ê°€ NTP ì„œë²„ì— ë™ê¸°í™” ìš”ì²­í•˜ëŠ” ì£¼ê¸°. ë‹¨ìœ„ëŠ” ì´ˆ(second).\nreach : ìµœê·¼ 8ë²ˆ Poll ìš”ì²­ì— ëŒ€í•œ NTP ì„œë²„ì˜ ì‘ë‹µ ì—¬ë¶€. reachëŠ” 8ì§„ìˆ˜ë¡œ í‘œê¸°ëœ ê°’ì´ë‹¤. ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ì˜¤ë¥´ë©´ì„œ 377ì— ë„ë‹¬í•˜ë©´ ë™ê¸°í™”ê°€ ì™„ë£Œëœë‹¤.\nreach 10ì§„ìˆ˜ 2ì§„ìˆ˜ í•´ì„ 1 1 0 0 0 0 0 0 0 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 1ë²ˆ ì„±ê³µ 3 3 0 0 0 0 0 0 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 2ë²ˆ ì„±ê³µ 7 7 0 0 0 0 0 1 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 3ë²ˆ ì„±ê³µ 17 15 0 0 0 0 1 1 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 4ë²ˆ ì„±ê³µ 37 31 0 0 0 1 1 1 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 5ë²ˆ ì„±ê³µ 77 63 0 0 1 1 1 1 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 6ë²ˆ ì„±ê³µ 177 127 0 1 1 1 1 1 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 7ë²ˆ ì„±ê³µ 377 255 1 1 1 1 1 1 1 1 ìµœê·¼ 8ë²ˆ ì‹œë„ì¤‘ 8ë²ˆ ì„±ê³µ delay : ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì‹œê°„. ë‹¨ìœ„ëŠ” ë°€ë¦¬ì´ˆ(millisecond). delay ê°’ì´ 5ë³´ë‹¤ ì‘ì•„ì•¼ í•œë‹¤.\n7. NTP ìë™ì‹œì‘ ì„¤ì • # /etc/rc.tcpipëŠ” ë¶€íŒ…ì‹œ TCP/IP ë°ëª¬ë“¤ê³¼ Subsystemì„ í˜¸ì¶œí•˜ëŠ” ì„¤ì • íŒŒì¼ì´ë‹¤.\nì„œë²„ê°€ ë¦¬ë¶€íŒ… ë˜ë”ë¼ë„ NTP ë°ëª¬ì„ ìë™ì‹œì‘ í•˜ë„ë¡ ì„¤ì •íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.\në³€ê²½ ì „ ì„¤ì •íŒŒì¼ # $ vi /etc/rc.tcpip ... # Start up Network Time Protocol (NTP) daemon #start /usr/sbin/xntpd \u0026#34;$src_running\u0026#34; \u0026#34;-x\u0026#34; start /usr/sbin/xntpd ... ë¼ì¸ì˜ ì£¼ì„ì„ ì œê±°í•´ì„œ ì„œë²„ ì¬ë¶€íŒ… í›„ì—ë„ NTP Daemonì´ ìë™ ê¸°ë™ë˜ë„ë¡ ì„¤ì •í•œë‹¤.\nì‹œê°„ë¡¤ë°±ì„ ë°©ì§€í•˜ëŠ” -x ì˜µì…˜ë„ ì„ ì–¸ë˜ì–´ ìˆëŠ”ì§€ ì˜ í™•ì¸í•œë‹¤.\në³€ê²½ í›„ ì„¤ì •íŒŒì¼ # $ vi /etc/rc.tcpip ... # Start up Network Time Protocol (NTP) daemon start /usr/sbin/xntpd \u0026#34;$src_running\u0026#34; \u0026#34;-x\u0026#34; ì°¸ê³ ìë£Œ # AIX ê³µì‹ë¬¸ì„œ: xntpd ë°ëª¬\n","date":"Oct 26, 2021","permalink":"/blog/starting-ntpd-in-aix/","section":"Blogs","summary":"ê°œìš” # IBM AIXì˜ í´ë¼ì´ì–¸íŠ¸ ì„œë²„ì—ì„œ NTP ë°ëª¬ì„ ë™ì‘í›„ NTP ì„œë²„ì™€ ì‹œê°„ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","title":"AIX NTP ë°ëª¬ ì„¤ì •"},{"content":"ê°œìš” # VMware ESXi í˜¸ìŠ¤íŠ¸ ì„œë²„ë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆë‹¤.\në°°ê²½ì§€ì‹ # ESXi í˜¸ìŠ¤íŠ¸ì˜ Shutdown # VMware ESXi í˜¸ìŠ¤íŠ¸ ì„œë²„ì˜ ê²½ìš° ì¼ë°˜ x86 ë¦¬ëˆ…ìŠ¤ ì„œë²„ì²˜ëŸ¼ shutdown -h now ëª…ë ¹ì–´ë¡œ ì„œë²„ë¥¼ ëŒ ìˆ˜ ì—†ë‹¤.\nshutdown ëª…ë ¹ì–´ ìì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.\n# shutdown -h now -sh: shutdown: not found ë°˜ë©´ reboot ëª…ë ¹ì–´ëŠ” ESXiì—ì„œë„ ì¡´ì¬í•˜ê³  ì˜ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì°¨ì›ìœ¼ë¡œ ì‹¤í–‰í•´ì„œëŠ” ì•ˆë˜ë‹ˆ ì£¼ì˜!\ní™˜ê²½ # OS : VMware ESXi 5.1.0 Shell : sh (ESXi shell) ID : root í•´ê²°ë²• # í˜¸ìŠ¤íŠ¸ ì„œë²„ì˜ ì¢…ë£Œë¥¼ ìœ„í•´ì„œ í•´ë‹¹ í˜¸ìŠ¤íŠ¸ë¥¼ ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ(Maintenance Mode)ë¡œ ì „í™˜í•œ í›„, esxcli ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ ì¢…ë£Œí•œë‹¤.\n1. root ë¡œê·¸ì¸ # $ login root Password: \u0026lt;root íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥\u0026gt; The time and date of this login have been sent to the system logs. VMware offers supported, powerful system administration tools. Please see www.vmware.com/go/sysadmintools for details. The ESXi Shell can be disabled by an administrative user. See the vSphere Security documentation for more information. # ìœ ì € ê³„ì •ì¼ ê²½ìš° login root ëª…ë ¹ì–´ë¡œ root ë¡œê·¸ì¸ì„ í•œë‹¤.\nì„œë²„ ì¢…ë£Œ(Shutdown)ë‚˜ ì„œë²„ ì¬ì‹œì‘(reboot)ì€ ë°˜ë“œì‹œ root ê¶Œí•œì—ì„œ ì§„í–‰ë˜ì–´ì•¼ í•œë‹¤.\n2. êµ¬ë™ì¤‘ì¸ VM ë¦¬ìŠ¤íŠ¸ í™•ì¸ # # esxcli vm process list # ê²°ê³¼ê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í•´ë‹¹ í˜¸ìŠ¤íŠ¸ì—ì„œ êµ¬ë™ì¤‘ì¸ ê°€ìƒë¨¸ì‹ (VM, Virutal Machine)ì´ ì—†ëŠ” ìƒíƒœì´ë‹¤.\ní•´ë‹¹ í˜¸ìŠ¤íŠ¸ ìœ„ì—ì„œ êµ¬ë™ì¤‘ì¸ ê°€ìƒë¨¸ì‹ ì´ ìˆì„ ê²½ìš° vSphere Clientë¥¼ ì´ìš©í•´ ë¯¸ë¦¬ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ë¡œ ì˜®ê²¨ë†“ì.\n3. ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ í™•ì¸ # # esxcli system maintenanceMode get Disabled Disabled : ìœ ì§€ë³´ìˆ˜ ëª¨ë“œê°€ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŒ\n4. ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ í™œì„±í™” # # esxcli system maintenanceMode set --enable true ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ ê°’ì„ trueë¡œ ì„¤ì •í•œë‹¤. ìœ ì§€ë³´ìˆ˜ ëª¨ë“œê°€ ì„¤ì •ë˜ë©´ vSphere Clientì—ì„œë„ í˜¸ìŠ¤íŠ¸ ì•„ì´ì½˜ì´ ë°”ë¦¬ê²Œì´íŠ¸ê°€ ì³ì§„ í˜¸ìŠ¤íŠ¸ ì•„ì´ì½˜ìœ¼ë¡œ ë³€ê²½ëœë‹¤. ë°˜ëŒ€ë¡œ ìœ ì§€ë³´ìˆ˜ ëª¨ë“œë¥¼ ë„ëŠ” ë°©ë²•ì€ esxcli system maintenanceMode set --enable false ë¥¼ ì‹¤í–‰í•œë‹¤.\n# esxcli system maintenanceMode get Enabled Enabled : ìœ ì§€ë³´ìˆ˜ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆë‹¤.\n5. ì„œë²„ ì¢…ë£Œ # ì‹¤í–‰ ëª…ë ¹ì–´ ì˜ˆì‹œ # # esxcli system shutdown poweroff --reason=\u0026#34;Memory replacement.\u0026#34; ì‘ì—…ì‚¬ìœ (--reason)ì—ëŠ” ë°˜ë“œì‹œ ì„œë²„ ì¢…ë£Œì¡°ì¹˜(shutdown)í•˜ëŠ” ì‚¬ìœ ë¥¼ ìƒì„¸íˆ ì ì–´ì¤€ë‹¤.\nì• ì´ˆì— ì‘ì—…ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.\npoweroff ëª…ë ¹ì–´ ì‚¬ìš©ë²• í™•ì¸ # # esxcli system shutdown poweroff Error: Missing required parameter -r|--reason Usage: esxcli system shutdown poweroff [cmd options] Description: poweroff Power off the system. The host must be in maintenance mode. Cmd options: -d|--delay=\u0026lt;long\u0026gt; Delay interval in seconds -r|--reason=\u0026lt;str\u0026gt; Reason for performing the operation (required) í˜¸ìŠ¤íŠ¸ ì„œë²„ì˜ poweroff ì‹¤í–‰ì„ ìœ„í•´ì„œëŠ” ì‘ì—… ì‚¬ìœ (--reason) ê°’ì„ í•„ìˆ˜ì ìœ¼ë¡œ ì…ë ¥í•´ì•¼ ì„œë²„ê°€ êº¼ì§„ë‹¤.\nì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì„ ê²½ìš° ì‘ì—…ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ë¼ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë‚˜ì˜¤ë©´ì„œ, shutdown ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.\n# esxcli system shutdown poweroff Error: Missing required parameter -r|--reason [...] ","date":"Oct 25, 2021","permalink":"/blog/shutdown-esxi-host/","section":"Blogs","summary":"ê°œìš” # VMware ESXi í˜¸ìŠ¤íŠ¸ ì„œë²„ë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆë‹¤.","title":"ESXi í˜¸ìŠ¤íŠ¸ ì„œë²„ ë„ê¸°"},{"content":"ê°œìš” # Oracle DBì—ì„œ ì•„ì¹´ì´ë¸Œ ë¡œê·¸(Archive Log)ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ëª¨ë“œë¥¼ ë³€ê²½í•œë‹¤.\ní™˜ê²½ # OS : HP-UX B.11.31 Shell : sh (POSIX shell) DB : Oracle Database 10g í•´ê²°ë²• # 1. DB ë¡œê·¸ì¸ # $ sqlplus / as sysdba oracle ê³„ì •ì—ì„œ sysdba ê¶Œí•œìœ¼ë¡œ Oracle Databaseì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.\n2. ì•„ì¹´ì´ë¸Œ ë¡œê·¸ ì„¤ì • í™•ì¸ # SQL\u0026gt; archive log list Database log mode No Archive Mode Automatic archival Disabled Archive destination /oracle/arch Oldest online log sequence 7989 Current log sequence 7991 í˜„ì¬ Database log modeëŠ” No Archive Modeë¡œ ì•„ì¹´ì´ë¸Œ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤.\nNo Archive Modeë¥¼ Archive Modeë¡œ í™œì„±í™” í•´ì£¼ê¸° ìœ„í•´ì„œëŠ” SQL alterë¬¸ìœ¼ë¡œ ì„¤ì •ì„ ë³€ê²½í•œ í›„ DB ì¸ìŠ¤í„´ìŠ¤ì˜ ì¬ê¸°ë™ì´ í•„ìš”í•˜ë‹¤.\nNo Archive Mode vs Archive Mode # No Archive Log ModeëŠ” Oracle Database ì„¤ì¹˜ì‹œ ê¸°ë³¸ê°’ì´ë©°, ëª‡ ê°œì˜ redo ë¡œê·¸ íŒŒì¼ì„ ëŒë ¤ì„œ ë³€ê²½ì‚¬í•­ì„ ê¸°ë¡í•´ë‘ëŠ” ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ, ì¼ì • ê°¯ìˆ˜ì˜ redo ë¡œê·¸ íŒŒì¼ ì´ì „ì˜ ë³€ê²½ê¸°ë¡ì€ ë³´ê´€í•˜ì§€ ì•Šê³  ë°€ë ¤ë‚˜ ì‚¬ë¼ì§€ê²Œ ëœë‹¤.\nArchive ModeëŠ” ì´ì™€ ë‹¬ë¦¬ redo íŒŒì¼ì— ë³€ê²½ì‚¬í•­ì„ ë‹¤ ì“´í›„ íŒŒì¼ì— ë®ì–´ì“°ê¸° ì „ì— ì´ì „ íŒŒì¼ì„ ë‹¤ë¥¸ ê³³ì— ë³µì‚¬í•´ ë³´ê´€í•´ë‘ëŠ” ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ ìš©ëŸ‰ë§Œ ì—¬ìœ ê°€ ìˆë‹¤ë©´ ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ë®ì–´ì“°ì—¬ì§€ì§€ ì•Šê³  ë³´ê´€ëœë‹¤.\n3. DB ì¢…ë£Œ í›„ mount # SQL\u0026gt; shutdown immediate; DBë¥¼ ë‚´ë ¤ì¤€ë‹¤.\nSQL\u0026gt; startup mount; ORACLE instance started. [...] Database mounted. Database altered. ë©”ì„¸ì§€ê°€ ë–¨ì–´ì§€ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœ ê²ƒì´ë‹¤.\nì‹¤ì œ ìš´ì˜ì„œë²„ì—ì„œ startup mount ì‹¤í–‰ì‹œ ì†Œìš”ì‹œê°„ì´ 5~10ë¶„ ê±¸ë¦´ ìˆ˜ ìˆë‹¤.\n4. ì•„ì¹´ì´ë¸Œ ë¡œê·¸ ì„¤ì • ë³€ê²½ # SQL\u0026gt; alter database archivelog; Database altered. ì•„ì¹´ì´ë¸Œ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” alterë¬¸ì´ë‹¤. Database altered. ë©”ì„¸ì§€ê°€ ë–¨ì–´ì§€ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœ ê²ƒì´ë‹¤.\n5. DB open # SQL\u0026gt; alter database open; Database altered. 6. ì‘ì—… ê²°ê³¼í™•ì¸ # Database log mode í™•ì¸\nSQL\u0026gt; archive log list Database log mode Archive Mode [...] Database log mode ê°’ì´ No Archive Modeì—ì„œ Archive Mode ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\nInstance ìƒíƒœ í™•ì¸\nSQL\u0026gt; SELECT instance_name, status FROM v$instance; INSTANCE_NAME STATUS ------------------ ------------ DEV OPEN DB ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœê°’(STATUS)ì´ OPEN ì¼ ê²½ìš° ì •ìƒì´ë‹¤.\n","date":"Oct 25, 2021","permalink":"/blog/enabling-archive-log-in-oracle/","section":"Blogs","summary":"ê°œìš” # Oracle DBì—ì„œ ì•„ì¹´ì´ë¸Œ ë¡œê·¸(Archive Log)ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ëª¨ë“œë¥¼ ë³€ê²½í•œë‹¤.","title":"ì˜¤ë¼í´ ì•„ì¹´ì´ë¸Œ ë¡œê·¸ í™œì„±í™” ì„¤ì •"},{"content":"ê°œìš” # IBM AIXì˜ kshì—ì„œ ëª…ë ¹ì–´ ì‹¤í–‰ê¸°ë¡(history)ì— ì‹¤í–‰ì‹œê°„ì„ í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.\ní™˜ê²½ # OS : IBM AIX 7.2.0.0 Shell : ksh ë¬¸ì œì  # ëª…ë ¹ì–´ ì‹¤í–‰ê¸°ë¡ì— ì‹¤í–‰ì‹œê°„(Timestamp)ê°€ í‘œê¸°ë˜ì§€ ì•ŠëŠ”ë‹¤.\n$ fc -t [...] 641 ? :: su - oracle 642 ? :: vi /etc/environments 643 ? :: fc -t ëª…ë ¹ì–´ ì‹¤í–‰ì‹œê°„(time field)ì´ ë¬¼ìŒí‘œë¡œ í‘œì‹œë˜ì–´ ì •í™•í•œ ëª…ë ¹ì–´ ì‹¤í–‰ì‹œê°„ì„ í™•ì¸í•  ìˆ˜ ì—†ë‹¤.\nëª…ë ¹ì–´ ì‹¤í–‰ ì‹œê°„ì˜ ì¤‘ìš”ì„± # ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ê°€ ì¥ì• ì²˜ë¦¬(Troubleshooting) ì‹œ ëª…ë ¹ì–´ ì‹¤í–‰ì‹œê°„ì„ í†µí•´ ì¥ì•  ì›ì¸ì„ ë°œê²¬í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆë‹¤.\nì„œë²„ í™˜ê²½ì—ì„œëŠ” ì‚¬ëŒì— ì˜í•´ ìœ ë°œë˜ëŠ” ì¥ì• (Human Fault)ê°€ ìƒê°ë³´ë‹¤ ë§ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤.\në¬´ì—‡ë³´ë‹¤ ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œê°„ì„ ì²´í¬í•˜ëŠ” ì¼ì€ ì¥ì• ì²˜ë¦¬ì‹œ ê°„ë‹¨í•˜ë©´ì„œë„ ê´€ë¦¬ìì—ê²Œ ë§ì€ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ê¸° ë•Œë¬¸ì—,\nì‹¤í–‰í•œ ëª…ë ¹ì–´ì— ì‹¤í–‰ì‹œê°„ê¹Œì§€ ê¸°ë¡í•˜ë„ë¡ ì„¤ì •í•´ë†“ëŠ”ë‹¤ë©´ ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ì„œë²„ ê´€ë¦¬ê°€ ë” í¸í•´ì§„ë‹¤.\ní•´ê²°ë²• # IBM AIX 5.3 ë²„ì „ ì´í›„ë¶€í„° kshì—ì„œ timestamp ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. í™˜ê²½ì„¤ì •(/etc/environment) íŒŒì¼ì— ìƒˆ ê°’ì„ ì¶”ê°€í•´ ëª…ë ¹ì–´ ê¸°ë¡ì— ì‹œê°„ì„ í‘œê¸°í•  ìˆ˜ ìˆë‹¤.\n1. ì‘ì—…ì „ environment íŒŒì¼ í™•ì¸ # $ cat /etc/environment [...] PATH=/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java7_64/jre/bin:/usr/java7_64/bin TZ=Asia/Seoul LANG=en_US LOCPATH=/usr/lib/nls/loc ê¸°ì¡´ì—ëŠ” EXTENDED_HISTORY íŒŒë¼ë¯¸í„°ê°€ ì—†ë‹¤.\n2. environment íŒŒì¼ ìˆ˜ì • # $ cat /etc/environment [...] PATH=/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java7_64/jre/bin:/usr/java7_64/bin TZ=Asia/Seoul LANG=en_US LOCPATH=/usr/lib/nls/loc EXTENDED_HISTORY=ON vi í¸ì§‘ê¸°ë¡œ /etc/environment íŒŒì¼ì„ ì—´ê³  ë§¨ ì•„ë«ì¤„ì— EXTENDED_HISTORY íŒŒë¼ë¯¸í„°ì— ON ê°’ì„ ì¶”ê°€í•œë‹¤.\n/etc/environment íŒŒì¼ì— EXTENDED_HISTORY íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ë©´ ì „ì²´ ê³„ì •ì— í•´ë‹¹ ì„¤ì •ì´ ì ìš©ëœë‹¤.\n3. ë¡œê·¸ì•„ì›ƒ í›„ ì¬ë¡œê·¸ì¸ # $ exit 4. ëª…ë ¹ì–´ ì‹¤í–‰ê¸°ë¡ í™•ì¸ # $ fc -t 662 2021/10/23 10:16:58 :: cat .sh_history | more 663 2021/10/23 10:17:07 :: ls 664 2021/10/23 10:17:16 :: vi .sh_history 665 2021/10/23 10:17:36 :: vi .sh_history 666 2021/10/23 10:17:38 :: ls 667 2021/10/23 10:17:39 :: fc -t 668 2021/10/23 10:17:44 :: vi .sh_history 669 2021/10/23 10:17:53 :: fc -t 670 2021/10/23 10:24:09 :: fc -t 671 2021/10/23 10:24:12 :: id 672 2021/10/23 10:24:13 :: clear 673 2021/10/23 10:24:15 :: fc -t 674 2021/10/23 10:24:18 :: clear 675 2021/10/23 10:24:21 :: ping 127.0.0.1 676 2021/10/23 10:24:24 :: clear 677 2021/10/23 10:24:28 :: fc -t ì´ì œ ëª…ë ¹ì–´ ì‹¤í–‰ì‹œê°„ì´ í‘œì‹œëœë‹¤. history -t ëª…ë ¹ì–´ë„ fc -t ëª…ë ¹ì–´ì™€ ì™„ì „ ë™ì¼í•œ ê¸°ëŠ¥ì„ í•˜ë‹ˆ ê¸°í˜¸ì— ë§ì¶° ì‚¬ìš©í•˜ë©´ ëœë‹¤.\n$ history -t 690 2021/10/23 10:32:03 :: id 691 2021/10/23 10:32:03 :: ls 692 2021/10/23 10:32:04 :: pwd 693 2021/10/23 10:32:05 :: pwd 694 2021/10/23 10:32:06 :: ls 695 2021/10/23 10:32:07 :: clear 696 2021/10/23 10:32:08 :: clear 697 2021/10/23 10:32:09 :: id 698 2021/10/23 10:32:11 :: date 699 2021/10/23 10:32:15 :: cat /etc/passwd 700 2021/10/23 10:32:16 :: clear 701 2021/10/23 10:32:17 :: clear 702 2021/10/23 10:32:18 :: id 703 2021/10/23 10:32:19 :: id 704 2021/10/23 10:32:20 :: pwd 705 2021/10/23 10:32:24 :: history -t ","date":"Oct 23, 2021","permalink":"/blog/enabling-history-timestamp-in-aix/","section":"Blogs","summary":"ê°œìš” # IBM AIXì˜ kshì—ì„œ ëª…ë ¹ì–´ ì‹¤í–‰ê¸°ë¡(history)ì— ì‹¤í–‰ì‹œê°„ì„ í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.","title":"AIX History ì‹œê°„ ì„¤ì •"},{"content":"ê°œìš” # IBM AIXì—ì„œ ê³„ì •ì´ ì ê¸´ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì ê¸´ ê³„ì •ì„ í•´ì œí•  ìˆ˜ ìˆë‹¤.\nì¦ìƒ # OS ê³„ì •ì´ ì ê²¨ì„œ ì›ê²© ë¡œê·¸ì¸(SSH)ì´ ë¶ˆê°€ëŠ¥í•œ ìƒí™©\ní™˜ê²½ # OS : IBM AIX 7.2.0.0 Shell : ksh í•´ê²°ë°©ì•ˆ # ì‰˜ì—ì„œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ ê³„ì •ì˜ ì ê¸ˆìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì ê¸ˆì„ í•´ì œí•˜ë©´ ëœë‹¤.\nê³„ì • íŒ¨ìŠ¤ì›Œë“œ ì œì–´ì™€ ê´€ë ¨ëœ ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ root ê¶Œí•œì„ ì–»ì–´ ì‹¤í–‰í•´ì•¼ë§Œ í•œë‹¤.\n1. ë¡œê·¸ì¸ ì‹¤íŒ¨íšŒìˆ˜ í™•ì¸ # ëª…ë ¹ì–´ í˜•ì‹\n$ lsuser -a \u0026lt;ì†ì„±ëª…\u0026gt; \u0026lt;ê³„ì •ëª…\u0026gt; ëª…ë ¹ì–´ ì˜ˆì‹œ\n$ lsuser -a unsuccessful_login_count devuser1 devuser1 unsuccessful_login_count=6 devuser1 ê³„ì •ì—ì„œ ë¡œê·¸ì¸ì„ 6ë²ˆ ì‹¤íŒ¨í•œ ì´ë ¥ì´ ìˆë‹¤.\n2. ê³„ì •ìƒíƒœ í™•ì¸ # ëª…ë ¹ì–´ í˜•ì‹\n$ lsuser -a \u0026lt;ì†ì„±ëª…\u0026gt; \u0026lt;ê³„ì •ëª…\u0026gt; ëª…ë ¹ì–´ ì˜ˆì‹œ\n$ lsuser -a account_locked devuser1 devuser1 account_locked=true devuser1 ê³„ì •ì˜ account_locked ê°’ì´ trueì´ë¯€ë¡œ ê³„ì •ì´ ì ê¸´ ìƒíƒœì´ë‹¤.\n3. ë¡œê·¸ì¸ ì‹¤íŒ¨íšŒìˆ˜ ì´ˆê¸°í™” # devuser1 ê³„ì •ì˜ ë¡œê·¸ì¸ ì‹¤íŒ¨íšŒìˆ˜(unsuccessful_login_count) ê°’ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì´ˆê¸°í™”í•œë‹¤.\n$ chsec -f /etc/security/lastlog -a unsuccessful_login_count=0 -s devuser1 ëª…ë ¹ì–´ ì˜µì…˜\n-f : íŒŒì¼ëª…(File) ì˜µì…˜\n-a : ì†ì„± ì˜µì…˜(Attribute)\n-s : ê³„ì •ëª…(Stanza)\n4. ê³„ì •ì ê¸ˆ í•´ì œ # ëª…ë ¹ì–´ í˜•ì‹\n$ chuser \u0026lt;ì†ì„±ëª…\u0026gt;=\u0026lt;ê°’\u0026gt; \u0026lt;ê³„ì •ëª…\u0026gt; ëª…ë ¹ì–´ ì˜ˆì‹œ\n$ chuser account_locked=false devuser1 devuser1 account_locked=false account_locked ì†ì„±ê°’ì„ trueì—ì„œ falseë¡œ ë³€ê²½í•´ì„œ devuser1 ê³„ì • ì ê¸ˆì„ í•´ì œí•œë‹¤.\nì¶”ê°€ì •ë³´ # ì´ ë¶€ë¶„ë¶€í„°ëŠ” ë³¸ë¬¸ì¸ \u0026lsquo;ì ê¸´ OS ê³„ì • í’€ê¸°\u0026rsquo; ë©”ë‰´ì–¼ê³¼ëŠ” ë¬´ê´€í•˜ë‚˜ ì•Œê³  ìˆìœ¼ë©´ ìœ ìš©í•œ ëª…ë ¹ì–´ì´ë‹¤.\nA. ê³„ì • ì ê·¸ëŠ” ë°©ë²• # ì¢…ì¢… ì„œë²„ì˜ ë³´ì•ˆê°•í™”ë¥¼ ëª©ì ìœ¼ë¡œ ê´€ë¦¬ìê°€ ì¥ê¸°ê°„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìš´íœ´ ê³„ì •ì„ ì ê¸ˆì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•œë‹¤.\n1. ê³„ì • ì ê¸ˆ ì‹¤í–‰ # $ chuser account_locked=true devuser1 2. ê³„ì •ìƒíƒœ í™•ì¸ # $ lsuser -a account_locked devuser1 devuser1 account_locked=true devuser1 ê³„ì •ì˜ account_locked ê°’ì´ trueì´ë¯€ë¡œ í˜„ì¬ ê³„ì •ì´ ì ê¸´ ìƒíƒœì´ë‹¤.\nB. ê³„ì • ì ê¸ˆ ì„ê³„ê°’ ì„¤ì • # ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©(brute-force attack)ì€ íŠ¹ì • ì•”í˜¸ë¥¼ í’€ê¸° ìœ„í•´ ê°€ëŠ¥í•œ ëª¨ë“  ê°’ì„ ëŒ€ì…í•´ ì•”í˜¸ë¥¼ ëš«ëŠ” ê³µê²© ê¸°ë²•ì´ë‹¤.\në¬´ì‘ìœ„ ëŒ€ì… ê³µê²©ì„ ë°©ì–´í•˜ëŠ” ëŒ€í‘œì ì¸ ë°©ë²•ì€ ì„œë²„ ë³´ì•ˆì„¤ì •ì—ì„œ ê³„ì • ì ê¸ˆ ì„ê³„ê°’ì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤.\nì•„ë˜ëŠ” AIX ì„œë²„ì—ì„œ ì—¬ëŸ¬ë²ˆ ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ ê³„ì •ì´ ì ê¸°ëŠ” ì„¤ì •ë°©ë²•ì´ë‹¤.\n1. user ì„¤ì •íŒŒì¼ í™•ì¸ # $ cat /etc/security/user [...] default: loginretries = 0 loginretries : ê³„ì • ì ê¸ˆ ì„ê³„ê°’ (ê³„ì • ì ê·¸ê¸° ì „ ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜) loginretries = 0ì€ ë¡œê·¸ì¸ ì‹œë„ ê°€ëŠ¥ íšŸìˆ˜ê°€ ë¬´ì œí•œì´ë©°, ê³„ì • ì ê¸ˆ ì„ê³„ê°’ì´ ì„¤ì •ë˜ì§€ ì•Šì€ ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤.\n2. ê³„ì • ì ê¸ˆ ì„ê³„ê°’ ìˆ˜ì • # $ vi /etc/security/user [...] default: loginretries = 5 vi í¸ì§‘ê¸°ë¥¼ ì‚¬ìš©í•´ì„œ loginretries ê°’ì„ 0ì—ì„œ 5ë¡œ ìˆ˜ì •í•œë‹¤. ê¸°ë³¸ì defaultìœ¼ë¡œ ëª¨ë“  ê³„ì •ì´ 5ë²ˆ ë¡œê·¸ì¸ì´ ì‹¤íŒ¨í•˜ë©´, ê³„ì •ì´ ì ê¸°ê²Œ ëœë‹¤.\nì‘ì—… ë.\n","date":"Oct 20, 2021","permalink":"/blog/unlocking-account-in-aix/","section":"Blogs","summary":"ê°œìš” # IBM AIXì—ì„œ ê³„ì •ì´ ì ê¸´ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì ê¸´ ê³„ì •ì„ í•´ì œí•  ìˆ˜ ìˆë‹¤.","title":"AIX ê³„ì •ì ê¸ˆ í•´ì œ"},{"content":" Summary # Younsung Steve Lee\nCloud Engineer @Watcha\nKubernetesì™€ Cloud Infrastructureì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ì•„ì•„ë¥¼ ë‹¬ê³  ì‚½ë‹ˆë‹¤ Up to 3ì” / 1 day ì „ìì±…Ridibooks ë•í›„ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì†Œì„¤ì€ ìœ„ëŒ€í•œ ê°œì¸ ë¹„ 2022ë…„ 5ì›” ê¸°ì¤€ìœ¼ë¡œ 100ê¶Œì˜ ì „ìì±…ì„ ìˆ˜ì§‘ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì–¸ì–´ëŠ” Python. ì•„ë¦„ë‹¤ì›€ì´ ì¶”í•œ ê²ƒë³´ë‹¤ ë‚«ë‹¤ Beautiful is better than ugly.\në‹¨ìˆœí•¨ì´ ë³µì¡í•œ ê²ƒë³´ë‹¤ ë‚«ë‹¤ Simple is better than complex.\n- The Zen of Python\në¯¸ë‹ˆë©€ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì˜¤í”ˆì†ŒìŠ¤ ì»¤ë®¤ë‹ˆí‹°ì— ê¸°ì—¬í•˜ê³ , í…Œí¬ì™€ ê´€ë ¨ëœ ê¸€ì“°ëŠ” ì¼ì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì• ìì¼í•˜ê²Œ ìƒí™œí•˜ë©° ì¢‹ì€ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë¡œ í–‰ë³µí•˜ê²Œ ì¼í•˜ê³  ìˆìŠµë‹ˆë‹¤. Work Experience # 2022/02 â€• Present\nCloud Engineer @Watcha\nì—…ë¬´ ë³‘ëª© ì§€ì ì¸ í´ë¼ìš°ë“œ ê¶Œí•œ ê´€ë¦¬ë¥¼ í•´ê²°í•˜ê³  ì‚¬ë‚´ ê°œë°œì ê²½í—˜DX, Developer Experience í–¥ìƒì„ ìœ„í•´ í´ë¼ìš°ë“œ ê¶Œí•œ ì‹ ì²­/ìŠ¹ì¸ í”Œë«í¼ì¸ ConsoleMeë¥¼ êµ¬ì¶•í•˜ê³  ìš´ì˜ 2013/12 â€• 2022/02\nSystem Engineer @KDN\n260ëŒ€ì˜ VMVirtual Machine ë° ë¬¼ë¦¬ì„œë²„ ìœ ì§€ë³´ìˆ˜ ë° ìš´ì˜ SAN ìŠ¤í† ë¦¬ì§€ ë° SAN ìŠ¤ìœ„ì¹˜ ìœ ì§€ë³´ìˆ˜ ë° ìš´ì˜ DNS ì‚¬ë‚´ ê°•ì‚¬ 2ë…„ ì—°ì† ì¶œê°• ì‰˜ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ì„ í†µí•œ OS ë³´ì•ˆì¡°ì¹˜ ìë™í™” Skills # Certification # AWS Certified Solutions Architect - Associate\nCCNP Data Center\nCCNP Enterprise\nContact # seyslee cysl@kakao.com\n","date":"Oct 18, 2021","permalink":"/about/","section":"","summary":"Summary # Younsung Steve Lee","title":"About"},{"content":"ê°œìš” # IBM AIX ìš´ì˜ì²´ì œì—ì„œ CPU ê´€ë ¨ ìƒì„¸ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\ní™•ì¸ ê°€ëŠ¥í•œ ì£¼ìš”ì •ë³´\nCPU ì œì›ì •ë³´ (ëª¨ë¸ëª…, Clock Speed ë“±) ë¬¼ë¦¬ CPU ìˆ˜ ì „ì²´ ë¬¼ë¦¬ì½”ì–´ ìˆ˜ ì „ì²´ ë…¼ë¦¬ì½”ì–´ ìˆ˜ í™˜ê²½ # OS : IBM AIX 7.2.0.0 Shell : ksh ì „ì œì¡°ê±´ # ì—†ìŒ\nTL;DR # Too long; didn\u0026rsquo;t read\nì‹œê°„ì´ ì—†ëŠ” ë¶„ë“¤ì„ ìœ„í•´ ëª…ë ¹ì–´ë§Œ ìš”ì•½í•œë‹¤.\n# 1. CPU ì†Œì¼“ í™•ì¸ $ lscfg -vp | grep WAY # 2. CPU ëª¨ë¸ëª… ë° í´ëŸ­ í™•ì¸ $ prtconf | grep Processor # 3. ë¬¼ë¦¬ì½”ì–´, ë…¼ë¦¬ì½”ì–´ ìˆ˜ í™•ì¸ $ smtctl # 4. ë¬¼ë¦¬ì½”ì–´ ìˆ˜ í™•ì¸ \u0008$ lsdev -Cc processor # 5. ë…¼ë¦¬ì½”ì–´ ìˆ˜ í™•ì¸ $ bindprocessor -q # 6. ì „ì²´ CPU ìˆ˜ í™•ì¸ $ lparstat -i í™•ì¸ë°©ë²• # 1. CPU ì†Œì¼“ í™•ì¸ # $ lscfg -vp | grep WAY 06-WAY PROC CUOD: 06-WAY PROC CUOD: 06-WAY PROC CUOD: : ê° 1ì¤„ì€ ë¬¼ë¦¬ì  CPU ì¹© 1ê°œë¥¼ ì˜ë¯¸í•œë‹¤. ê²°ê³¼ê°’ì´ 2ì¤„ì´ë¯€ë¡œ í•´ë‹¹ ì„œë²„ëŠ” 2ê°œì˜ ë¬¼ë¦¬ì  CPU ì¹©ì´ ì¥ì°©ëœ ìƒíƒœì´ë‹¤. 06-WAY : CPU 1ê°œë‹¹ ì½”ì–´ìˆ˜ê°€ 6ê°œì„ì„ ì˜ë¯¸í•œë‹¤. ì „ì²´ ë¬¼ë¦¬ì½”ì–´ ìˆ˜ ê³„ì‚° : 6 Core x 2 CPU = 12 Core 2. CPU ëª¨ë¸ëª… ë° í´ëŸ­ í™•ì¸ # $ prtconf | grep Processor Processor Type: PowerPC_POWER8 Processor Implementation Mode: POWER 8 Processor Version: PV_8_Compat Number Of Processors: 2 Processor Clock Speed: 3891 MHz Model Implementation: Multiple Processor, PCI bus + proc0 Processor + proc8 Processor ì£¼ìš”ì •ë³´\nProcessor Type : CPU ëª¨ë¸ëª… Number Of Processors : ë¬¼ë¦¬ì ì¸ CPU ì†Œì¼“ ìˆ˜ Processor Clock Speed : í•´ë‹¹ CPUì˜ Clock ì†ë„ 3. ë¬¼ë¦¬ì½”ì–´, ë…¼ë¦¬ì½”ì–´ ìˆ˜ í™•ì¸ # SMT ì„¤ì • í™•ì¸ # SMTSimultaneous Multi-ThreadingëŠ” ë¬¼ë¦¬ì½”ì–´ë¥¼ ì—¬ëŸ¬ê°œì˜ Threadë¡œ ë‚˜ëˆ„ëŠ” ê¸°ìˆ ì„ ì˜ë¯¸í•œë‹¤.\nSMTëŠ” Intelì˜ HTTHyper-Threading Technologyì™€ ë¹„ìŠ·í•œ ë©€í‹°ìŠ¤ë ˆë”© ê¸°ìˆ ì´ë‹¤.\n$ smtctl This system is SMT capable. This system supports up to 8 SMT threads per processor. SMT is currently enabled. SMT boot mode is not set. SMT threads are bound to the same physical processor. proc0 has 4 SMT threads. Bind processor 0 is bound with proc0 Bind processor 1 is bound with proc0 Bind processor 2 is bound with proc0 Bind processor 3 is bound with proc0 proc8 has 4 SMT threads. Bind processor 4 is bound with proc8 Bind processor 5 is bound with proc8 Bind processor 6 is bound with proc8 Bind processor 7 is bound with proc8 ì„œë²„ì—ì„œ SMT ê¸°ëŠ¥ì„ ì‚¬ìš©ì¤‘ì´ë‹¤. (SMT is currently enabled) ë¬¼ë¦¬ì½”ì–´ ìˆ˜ 2ê°œ, ë…¼ë¦¬ì½”ì–´ ìˆ˜ 8ê°œ ë¬¼ë¦¬ì½”ì–´ ìˆ˜ í™•ì¸ # $ lsdev -Cc processor proc0 Available 00-00 Processor proc8 Available 00-08 Processor ë¬¼ë¦¬ì½”ì–´ëŠ” ì´ 2ê°œì´ë‹¤. (proc0, proc8)\nì´ ë¬¼ë¦¬ì½”ì–´ë“¤ì´ SMTSimultaneous Multi-Threadingë¡œ ì¸í•˜ì—¬ ë‹¤ì¤‘ì˜ ë…¼ë¦¬ì½”ì–´Threadë¡œ ë‚˜ë‰œë‹¤.\në…¼ë¦¬ì½”ì–´ ìˆ˜ í™•ì¸ # $ bindprocessor -q The available processors are: 0 1 2 3 4 5 6 7 ë…¼ë¦¬ì½”ì–´ëŠ” ì´ 8ê°œì´ë‹¤. (Bind processor 0, 1, 2, 3, 4, 5, 6, 7) 4. ì „ì²´ CPU ìˆ˜ í™•ì¸ # lparstat ëª…ë ¹ì–´ëŠ” LPARLogical Partition ê´€ë ¨ëœ CPU ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.\n$ lparstat -i Node Name : devserver Partition Name : dev1 Partition Number : 1 Type : Dedicated-SMT-4 Mode : Capped Entitled Capacity : 2.00 Partition Group-ID : 32769 Shared Pool ID : - Online Virtual CPUs : 2 Maximum Virtual CPUs : 12 Minimum Virtual CPUs : 1 Online Memory : 61696 MB Maximum Memory : 61696 MB Minimum Memory : 30720 MB Variable Capacity Weight : - Minimum Capacity : 1.00 Maximum Capacity : 12.00 Capacity Increment : 1.00 Maximum Physical CPUs in system : 12 Active Physical CPUs in system : 12 Active CPUs in Pool : - Shared Physical CPUs in system : 0 Maximum Capacity of Pool : 0 Entitled Capacity of Pool : 0 Unallocated Capacity : - Physical CPU Percentage : 100.00% Unallocated Weight : - Memory Mode : Dedicated Total I/O Memory Entitlement : - Variable Memory Capacity Weight : - Memory Pool ID : - Physical Memory in the Pool : - Hypervisor Page Size : - Unallocated Variable Memory Capacity Weight: - Unallocated I/O Memory entitlement : - Memory Group ID of LPAR : - Desired Virtual CPUs : 2 Desired Memory : 61696 MB Desired Variable Capacity Weight : - Desired Capacity : 2.00 Target Memory Expansion Factor : - Target Memory Expansion Size : - Power Saving Mode : Disabled Sub Processor Mode : - Online Virtual CPUs ê°’ì„ ì£¼ëª©í•´ë³´ì.\n$ lparstat -i [...] Online Virtual CPUs : 2 Maximum Virtual CPUs : 12 IBM AIX ì „ìš© HMCHardware Management Consoleì„ ì´ìš©í•´ ì „ì²´ 12ì½”ì–´(Maximum Virtual CPUs)ì¤‘ 2ì½”ì–´(Online Virtual CPUs)ë§Œ í™œì„±í™”í–ˆê¸° ë•Œë¬¸ì—, Online Virtual CPUs ê°’ì´ 2ì´ë‹¤.\n","date":"Oct 15, 2021","permalink":"/blog/checking-cpu-info-in-aix/","section":"Blogs","summary":"ê°œìš” # IBM AIX ìš´ì˜ì²´ì œì—ì„œ CPU ê´€ë ¨ ìƒì„¸ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","title":"AIX CPU ì •ë³´ ë° ì „ì²´ ì½”ì–´ìˆ˜ í™•ì¸"},{"content":"ê°œìš” # CLI í™˜ê²½ì—ì„œ ipmitool ëª…ë ¹ì–´ë¡œ HP iLO IP ì£¼ì†Œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nOSì— ipmitool íŒ¨í‚¤ì§€ë§Œ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ë©´ iLO IPë¥¼ ì›ê²©ìœ¼ë¡œë„ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, ë²ˆê±°ë¡­ê²Œ ë°ì´í„°ì„¼í„°ì— ë“¤ì–´ê°ˆ í•„ìš” ì—†ë‹¤.\ní™˜ê²½ # Vendor : HP Model : ProLiant DL380 Gen9 OS : Red Hat Enterprise Linux Server release 6.5 (Santiago) Shell : bash Package : ipmitool-1.8.11 ë°°ê²½ì§€ì‹ # IPMI (Intelligent Platform Management Interface) # ì„œë²„ ê´€ë¦¬ë¥¼ ìœ„í•œ ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤ë¡œ ì›ê²©ì§€ë‚˜ ë¡œì»¬ì„œë²„ì˜ ìƒíƒœë¥¼ íŒŒì•…í•˜ê³  ì œì–´í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ë”°ë¼ì„œ ë§ì€ ìˆ˜ì˜ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²½ìš°ì— ì•„ì£¼ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ì´ ë  ìˆ˜ ìˆë‹¤.\nìš”ì¦˜ ë‚˜ì˜¤ëŠ” ëŒ€ë¶€ë¶„ì˜ ì„œë²„ìš© ë©”ì¸ë³´ë“œì—ì„œëŠ” ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\ní•´ê²°ë²• # 1. ipmi íŒ¨í‚¤ì§€ í™•ì¸ # $ rpm -qa | grep ipmitool ipmitool-1.8.11-16.el6.x86_64 ipmitool 1.8.11 ë²„ì „ì˜ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤.\n2. ipmi ì„œë¹„ìŠ¤ ì‹œì‘ # $ service ipmi start Starting ipmi drivers: [ OK ] ipmi ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•œë‹¤.\n3. iLO IP í™•ì¸ # $ ipmitool lan print Set in Progress : Set Complete Auth Type Support : Auth Type Enable : Callback : : User : : Operator : : Admin : : OEM : IP Address Source : Static Address IP Address : 192.168.0.120 Subnet Mask : 255.255.255.0 MAC Address : 98:f2:b3:3b:fa:3e SNMP Community String : BMC ARP Control : ARP Responses Enabled, Gratuitous ARP Disabled Default Gateway IP : 0.0.0.0 802.1q VLAN ID : Disabled 802.1q VLAN Priority : 0 RMCP+ Cipher Suites : 0,1,2,3 Cipher Suite Priv Max : XuuaXXXXXXXXXXX : X=Cipher Suite Unused : c=CALLBACK : u=USER : o=OPERATOR : a=ADMIN : O=OEM ì„œë²„ í•˜ë“œì›¨ì–´ ì œì¡°ì‚¬ê°€ HPì¼ ê²½ìš°, ipmitool lan print ëª…ë ¹ì–´ ê²°ê³¼ì— ë‚˜ì˜¤ëŠ” IP Address ëŠ” iLO IPì™€ ë™ì¼í•œ ì˜ë¯¸ì´ë‹¤.\nipmi ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ë˜ì–´ ìˆì§€ ì•Šì„ ê²½ìš°, ì œëŒ€ë¡œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê²°ê³¼ê°€ ì˜ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤ë©´ ipmi ì„œë¹„ìŠ¤ ê¸°ë™ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.\n4. iLO IP ì„¤ì • # ## (1) ê³ ì •(Static) IP ì„¤ì • $ ipmitool lan set 1 ipsrc static ## (2) IP ì„¤ì • $ ipmitool lan set 1 ipaddr 10.10.10.10 ## (3) Subnet Mask ì„¤ì • $ ipmitool lan set 1 netmask 255.255.255.0 ## (4) Default Gateway IP ì„¤ì • $ ipmitool lan set 1 defgw ipaddr 10.10.10.1 ì„œë²„ í•˜ë“œì›¨ì–´ í™˜ê²½ì— ë”°ë¼ channel ë²ˆí˜¸ëŠ” ë°˜ë“œì‹œ 1ì´ ì•„ë‹Œ ë‹¤ë¥¸ ìˆ˜ì¼ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜í•˜ì.\nipmitool lan set ëª…ë ¹ì–´ í˜•ì‹\nipmitool lan set ëª…ë ¹ì–´ë§Œ ì¹˜ë©´ ì„¤ì • ê´€ë ¨ ëª…ë ¹ì–´ ì „ì²´ ë©”ë‰´ì–¼ì´ ë‚˜ì˜¤ë¯€ë¡œ ì°¸ê³ í•  ìˆ˜ ìˆë‹¤.\n$ ipmitool lan set usage: lan set \u0026lt;channel\u0026gt; \u0026lt;command\u0026gt; \u0026lt;parameter\u0026gt; LAN set command/parameter options: ipaddr \u0026lt;x.x.x.x\u0026gt; Set channel IP address netmask \u0026lt;x.x.x.x\u0026gt; Set channel IP netmask macaddr \u0026lt;xâŒxâŒx:x\u0026gt; Set channel MAC address defgw ipaddr \u0026lt;x.x.x.x\u0026gt; Set default gateway IP address defgw macaddr \u0026lt;xâŒxâŒx:x\u0026gt; Set default gateway MAC address bakgw ipaddr \u0026lt;x.x.x.x\u0026gt; Set backup gateway IP address bakgw macaddr \u0026lt;xâŒxâŒx:x\u0026gt; Set backup gateway MAC address password \u0026lt;password\u0026gt; Set session password for this channel snmp \u0026lt;community string\u0026gt; Set SNMP public community string user Enable default user for this channel access \u0026lt;on|off\u0026gt; Enable or disable access to this channel alert \u0026lt;on|off\u0026gt; Enable or disable PEF alerting for this channel arp respond \u0026lt;on|off\u0026gt; Enable or disable BMC ARP responding arp generate \u0026lt;on|off\u0026gt; Enable or disable BMC gratuitous ARP generation arp interval \u0026lt;seconds\u0026gt; Set gratuitous ARP generation interval vlan id \u0026lt;off|\u0026lt;id\u0026gt;\u0026gt; Disable or enable VLAN and set ID (1-4094) vlan priority \u0026lt;priority\u0026gt; Set vlan priority (0-7) auth \u0026lt;level\u0026gt; \u0026lt;type,..\u0026gt; Set channel authentication types level = CALLBACK, USER, OPERATOR, ADMIN type = NONE, MD2, MD5, PASSWORD, OEM ipsrc \u0026lt;source\u0026gt; Set IP Address source none = unspecified source static = address manually configured to be static dhcp = address obtained by BMC running DHCP bios = address loaded by BIOS or system software cipher_privs XXXXXXXXXXXXXXX Set RMCP+ cipher suite privilege levels X = Cipher Suite Unused c = CALLBACK u = USER o = OPERATOR a = ADMIN O = OEM 5. iLO ì„¤ì • ë³€ê²½ì‚¬í•­ ì ìš© # $ ipmitool mc reset cold IP ì„¤ì • ì ìš©ì„ ìœ„í•´ BMCBaseboard Management Controllerë¥¼ ë¦¬ë¶€íŒ…í•´ì¤€ë‹¤.\nBMCBaseboard Management Controller\nIPMIIntelligent Platform Management Interface ìœ í‹¸ë¦¬í‹°ì˜ í•µì‹¬ í•˜ë“œì›¨ì–´ ì¹©ìœ¼ë¡œ, ê´€ë¦¬ìë“¤ì´ ì„œë²„ì™€ ë°ìŠ¤í¬í†±ì— ëŒ€í•œ ì›ê²©ìœ¼ë¡œ ê¸´ê¸‰ ëª¨ë‹ˆí„°ë§í•˜ëŠ”ë° í™œìš©í•œë‹¤.\nBMC ì¹©ì˜ í•µì‹¬ê¸°ëŠ¥ì€ CPU, Fan, ì „ì›ë¶€(Power Supply), VGAVideo Graphic Array ì¹´ë“œ ë“± ê° í•˜ë“œì›¨ì–´ ë¶€í’ˆ(Component)ì— ì„¤ì¹˜ëœ ì„¼ì„œë“¤ê³¼ í†µì‹ ì„ í†µí•´ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ê¸°ë¡í•˜ë©° ì›ê²©ìœ¼ë¡œ ë³µêµ¬, ì œì–´ ë“±ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.\nì´ê²ƒìœ¼ë¡œ ì„¤ì •ì‘ì—…ì€ ëë‚œë‹¤.\n","date":"Oct 13, 2021","permalink":"/blog/checking-ilo-ip-on-cli/","section":"Blogs","summary":"ê°œìš” # CLI í™˜ê²½ì—ì„œ ipmitool ëª…ë ¹ì–´ë¡œ HP iLO IP ì£¼ì†Œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","title":"ipmitool ëª…ë ¹ì–´ë¡œ HP iLO IP í™•ì¸"},{"content":"ê°œìš” # WebtoB ë¼ì´ì„¼ìŠ¤ë¥¼ êµì²´í•˜ëŠ” ì ˆì°¨ì´ë‹¤.\nì–´ëŠë‚  ê°œë°œíŒ€ìœ¼ë¡œë¶€í„° WebtoB ë¼ì´ì„¼ìŠ¤ êµì²´ ìš”ì²­ì´ ë“¤ì–´ì˜¨ ê²ƒì´ ë°œë‹¨ì´ë‹¤.\në°°ê²½ì§€ì‹ # ì›¹íˆ¬ë¹„(WebtoB)\ní•œêµ­ì˜ í‹°ë§¥ìŠ¤ì†Œí”„íŠ¸ì—ì„œ ê°œë°œí•œ ì›¹ì„œë²„ ì†Œí”„íŠ¸ì›¨ì–´.\nê¸°ì¡´ ì›¹ì„œë²„ê°€ ê°€ì§€ê³  ìˆëŠ” êµ¬ì¡°ì ì¸ ë¬¸ì œë¥¼ í˜ì‹ ì ìœ¼ë¡œ ê°œì„ í•´ ì„±ëŠ¥ ë° ì•ˆì •ì„±ì— íƒì›”í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì°¨ì„¸ëŒ€ ì›¹ì„œë²„ ì œí’ˆì´ë‹¤.\nì£¼ë¡œ WAS í”„ë¡œê·¸ë¨ì¸ Jeusì™€ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.\nì‘ì—…ì ˆì°¨ # 1. ë¼ì´ì„¼ìŠ¤ ë‹¤ìš´ë¡œë“œ # WebtoB ë¼ì´ì„¼ìŠ¤ëŠ” í‹°ë§¥ìŠ¤ì†Œí”„íŠ¸ì—ì„œ ìš´ì˜í•˜ëŠ” ê¸°ìˆ ì§€ì› í˜ì´ì§€ì¸ Technetì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆë‹¤.\n2. ê¸°ì¡´ ë¼ì´ì„¼ìŠ¤ ìƒíƒœ í™•ì¸ # ìœ ì €ë³€ê²½\n$ su - tmax $ ì´ë²ˆ ì‘ì—…ì€ tmax ê³„ì •ìœ¼ë¡œ ì§„í–‰í•´ì•¼í•œë‹¤.\nWebtoB í™ˆ ë””ë ‰í† ë¦¬ë¡œ ì´ë™\nWebtoB í™ˆ ë””ë ‰í† ë¦¬ëŠ” ì„œë²„ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.\nWebtoB í™ˆ ë””ë ‰í† ë¦¬ í™˜ê²½ë³€ìˆ˜($WEBTOBDIR) ë˜í•œ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.\n$ cd $WEBTOBDIR $ pwd /home/tmax/webtob WebToB ì„¤ì¹˜ ê²½ë¡œë¡œ ì´ë™í•œ í›„, license ë””ë ‰í† ë¦¬ë¡œ ë“¤ì–´ê°„ë‹¤.\n$ cd license ê¸°ì¡´ ë¼ì´ì„¼ìŠ¤ ìƒíƒœ í™•ì¸\nlicense ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ wsadmin ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ ë¼ì´ì„¼ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ wsadmin -i license.dat ############################################## License Information (file: ./license.dat) ############################################## License seqno: WDE-xxxx-xxx-xxxx License issue date: 2021/5/14 License type: DEMO Expiration date: 2021/7/14 Edition: Enterprise License check by hostname: testserver Unlimited license ë¼ì´ì„¼ìŠ¤ ë§Œë£Œì¼(Expiration date)ì„ ë³´ë‹ˆ ì„ì‹œë¡œ ë°œê¸‰ë°›ì€ ë°ëª¨ ë¼ì´ì„¼ìŠ¤ê°€ ë§Œë£Œí•˜ê¸° ì§ì „ì´ë‹¤.\n3. ë¼ì´ì„¼ìŠ¤ íŒŒì¼ ì—…ë¡œë“œ # ê¸°ì¡´ ë¼ì´ì„¼ìŠ¤ íŒŒì¼ëª… ë³€ê²½\n$ cd /home/tmax/webtob/license $ mv license.dat license.dat.old ê¸°ì¡´ ì„ì‹œ ë¼ì´ì„¼ìŠ¤ íŒŒì¼ëª…ì€ license.datì´ë‹¤.\nlicense.datì„ license.dat.old ë¡œ íŒŒì¼ëª… ë³€ê²½í•œë‹¤.\nì‹ ê·œ ë¼ì´ì„¼ìŠ¤ íŒŒì¼ëª… ë³€ê²½\nì‹ ê·œ ì •ì‹ ë¼ì´ì„¼ìŠ¤ íŒŒì¼ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ íŒŒì¼ëª…ì„ license.dat ìœ¼ë¡œ ë³€ê²½í•œë‹¤.\n$ mv license_standard_new.dat license.dat 4. ë¼ì´ì„¼ìŠ¤ íŒŒì¼ ê¶Œí•œì„¤ì • # ê¸°ì¡´ WebtoB ë¼ì´ì„¼ìŠ¤ íŒŒì¼(license.dat)ì„ ì°¸ê³ í•˜ì—¬ ì†Œìœ ìì™€ ê·¸ë£¹ëª…ì„ ë™ì¼í•˜ê²Œ ë§ì¶°ì¤€ë‹¤.\n$ chown tmax:web license.dat ë¼ì´ì„¼ìŠ¤ íŒŒì¼ì˜ ì†Œìœ ìëŠ” tmax, ê·¸ë£¹ì€ webìœ¼ë¡œ ì„¤ì •í•œë‹¤.\n$ ls -l ï¿½ï¿½ 66 [...] -rw-r--r-- 1 tmax web 80 6ï¿½ï¿½ 23ï¿½ï¿½ 13:44 license.dat -rw-r--r-- 1 tmax web 80 6ï¿½ï¿½ 1ï¿½ï¿½ 14:03 license.dat.old ê¸°ì¡´ ë¼ì´ì„¼ìŠ¤ íŒŒì¼(license.dat.old)ì˜ ì†Œìœ ì, ê·¸ë£¹ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •ë˜ì—ˆë‹¤.\n5. ì›¹ì„œë²„ í™˜ê²½ì„¤ì • ì»´íŒŒì¼ # $ wscfl -i http.m Current configuration: Number of client handler(HTH) = 1 Supported maximum user per node = 8163 Supported maximum user per handler = 8163 Successfully created the configuration file (/home/tmax/webtob/config/wsconfig) for node testserver. The host name of the running machine is testserver. 6. WebtoB ì¬ì‹œì‘ # ë³€ê²½ëœ ë¼ì´ì„¼ìŠ¤ í™˜ê²½ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” WebtoB ì„œë²„ë¥¼ ë‚´ë ¸ë‹¤ê°€ ì˜¬ë ¤ì•¼ í•œë‹¤.\nWebtoB ì¤‘ì§€\nwsdown ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í›„ y í‚¤ë¥¼ ëˆŒëŸ¬ì„œ WebtoB ì„œë²„ë¥¼ ë‚´ë¦°ë‹¤.\n$ wsdown Do you really want to shut down WebtoB? (y : n): y WSDOWN for node(testserver) is starting: WSDOWN: SERVER(html:0) downed: Wed Jun 23 13:50:45 2021 WSDOWN: SERVER(html:1) downed: Wed Jun 23 13:50:45 2021 WSDOWN: HTL downed: Wed Jun 23 13:50:45 2021 WSDOWN: HTH downed: Wed Jun 23 13:50:45 2021 WSDOWN: WSM downed: Wed Jun 23 13:50:45 2021 WSDOWN: WebtoB is down WebtoB ì‹œì‘\nWebtoB ì„œë²„ë¥¼ ë‹¤ì‹œ ì˜¬ë¦°ë‹¤.\n$ wsboot Booting WebtoB on node (testserver) Starting WSM at Wed Jun 23 13:50:48 2021 Starting HTL at Wed Jun 23 13:50:48 2021 Starting HTH at Wed Jun 23 13:50:48 2021 Current WebtoB Configuration: Number of client handlers (HTH) = 1 Supported maximum user per node = 8163 Supported maximum user per handler = 8163 Starting SVR(htmls) at Wed Jun 23 13:50:48 2021 Starting SVR(htmls) at Wed Jun 23 13:50:48 2021 WebtoBì˜ ì£¼ìš” í”„ë¡œì„¸ìŠ¤ì¸ wsm, htl, hth, htmls ê°€ ì •ìƒì ìœ¼ë¡œ êµ¬ë™ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nWebtoB ì£¼ìš” í”„ë¡œì„¸ìŠ¤ë³„ ì—­í• \nWSM(WebtoB System Manager)\nì „ì²´ì ì¸ WebtoB ì‹œìŠ¤í…œì˜ ìš´ìš© í”„ë¡œì„¸ìŠ¤ë¡œì¨ ì‹œìŠ¤í…œì˜ ìš´ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê³ , HTL/HTH í”„ë¡œì„¸ìŠ¤ ë° ëª¨ë“  ì„œë²„ í”„ë¡œì„¸ìŠ¤ë“¤ì„ ê´€ë¦¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì´ë‹¤. WebtoB ì‹œìŠ¤í…œì„ ê¸°ë™í•  ë•Œ WSMì€ ê°€ì¥ ë¨¼ì € ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ê³  ì‹œìŠ¤í…œì´ ì¢…ë£Œë  ë•Œì—ëŠ” ê°€ì¥ ë‚˜ì¤‘ì— ì¢…ë£Œëœë‹¤.\nHTL(HTTP Listener)\nHTLì€ í´ë¼ì´ì–¸íŠ¸ì™€ WebtoB ê°„ì˜ ì—°ê²°ì„ ê´€ë¦¬í•˜ëŠ” Listener í”„ë¡œì„¸ìŠ¤ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ ì²˜ìŒ WebtoBì— ì ‘ì†í•  ë•Œì—ëŠ” HTLê³¼ ì—°ê²°ì„ ë§ºì–´ í†µì‹ ì´ ì´ë£¨ì–´ì§„ë‹¤. í•˜ì§€ë§Œ ì„œë¹„ìŠ¤ ìš”ì²­ì´ ìˆì„ ê²½ìš° ë‚´ë¶€ì ìœ¼ë¡œ HTHì™€ ì—°ê²°ì´ ë˜ì–´ ëª¨ë“  ì„œë¹„ìŠ¤ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§„ë‹¤.\nHTH(HTTP Handler)\ní´ë¼ì´ì–¸íŠ¸ í•¸ë“¤ëŸ¬ë¼ê³ ë„ í•˜ë©° ì‹¤ì§ˆì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì—…ë¬´ ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ë¥¼ ì¤‘ê³„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì´ë‹¤. HTHëŠ” ì„œë²„ í”„ë¡œì„¸ìŠ¤ë“¤ê³¼ì˜ í†µì‹ ì„ í†µí•´ ëª¨ë“  ì‹¤ì œì ì¸ ë°ì´í„°ì˜ íë¦„ì„ ê´€ë¦¬í•œë‹¤. ì¦‰ í´ë¼ì´ì–¸íŠ¸ì˜ ì„œë¹„ìŠ¤ ìš”ì²­ì„ ë°›ì•„ ê·¸ì— í•´ë‹¹í•˜ëŠ” ì—…ë¬´ë¥¼ ì²˜ë¦¬í•˜ë©° ê·¸ ê²°ê³¼ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ë‹¤ì‹œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë˜ëŒë ¤ì¤€ë‹¤.\nHTMLS(HTML Server)\nHTML ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” HTML ì„œë²„ í”„ë¡œì„¸ìŠ¤ì´ë‹¤.\n7. ë¼ì´ì„¼ìŠ¤ \u0026amp; í”„ë¡œì„¸ìŠ¤ ìƒíƒœ í™•ì¸ # ë¼ì´ì„¼ìŠ¤ ì ìš© ìƒíƒœ í™•ì¸\n$ wsadmin -i license.dat ############################################### License Information (file: license.dat) ############################################### License seqno: WRS-xxxx-xxx-xxxx License issue date: 2021/6/14 License type: REAL Edition: Standard License check by hostname: testserver 32 CPU license Standard Edition, 32 CPU License ë¡œ ì •ìƒ ì ìš© í™•ì¸.\nWebtoB í”„ë¡œì„¸ìŠ¤ ìƒíƒœ í™•ì¸\n$ ps -ef | egrep \u0026#39;htm|htl|hth|htmls\u0026#39; tmax 1582 1 0 13:50:49 pts/5 0:00 htmls -l 0x2 -I webtob1_1577 -b 1577 -s html tmax 1578 1 0 13:50:49 pts/5 0:00 wsm -l 0x2 -I webtob1_1577 -b 1577 tmax 1581 1 0 13:50:49 pts/5 0:00 htmls -l 0x2 -I webtob1_1577 -b 1577 -s html tmax 1580 1 0 13:50:49 pts/5 0:00 hth -l 0x2 -I webtob1_1577 -b 1577 root 1579 1 0 13:50:49 pts/5 0:00 htl -l 0x2 -I webtob1_1577 -b 1577 wsm, hth, htl, htmls í”„ë¡œì„¸ìŠ¤ê°€ êµ¬ë™ì¤‘ì¸ ê±¸ í™•ì¸í–ˆë‹¤.\nì‘ì—… ë.\n","date":"Oct 8, 2021","permalink":"/blog/changing-webtob-license/","section":"Blogs","summary":"ê°œìš” # WebtoB ë¼ì´ì„¼ìŠ¤ë¥¼ êµì²´í•˜ëŠ” ì ˆì°¨ì´ë‹¤.","title":"WebtoB ë¼ì´ì„¼ìŠ¤ êµì²´"},{"content":"ê°œìš” # ORA-12516 ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Oracle DB ë¦¬ì†ŒìŠ¤ íŒŒë¼ë¯¸í„°ì˜ Processes ê°’ì„ ë³€ê²½í•˜ê³  ì ìš©í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 5.5 (Tikanga) Shell : bash DB : Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - Production ì¦ìƒ # SQL\u0026gt; select count(*) from adm.share_table@link_datanet * ERROR at line 1: ORA-12516: TNS:listener could not find available handler with matching protocol stack ë‹¤ë¥¸ ì„œë²„ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•œ ì„œë²„ì— DB Link ì¡°íšŒì‹œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜í•´ ì¡°íšŒí•  ìˆ˜ ì—†ëŠ” ë¬¸ì œì´ë‹¤.\nì›ì¸ # ORA-12516: TNS:listener could not find available handler with matching protocol stack ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê°€ì¥ ëŒ€í‘œì ì¸ ì›ì¸ì€ ì˜¤ë¼í´ DBì— ë¶™ì„ ìˆ˜ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ í˜¹ì€ ì„¸ì…˜ì˜ ê°œìˆ˜ê°€ ìµœëŒ€ì¹˜ì— ë„ë‹¬í–ˆê¸° ë•Œë¬¸ì´ë‹¤.\nì´ë¯¸ ì ‘ì†ë˜ì–´ ìˆëŠ” ì„¸ì…˜ì€ ì˜ ë™ì‘í•˜ì§€ë§Œ ìƒˆë¡œìš´ í”„ë¡œê·¸ë¨ì´ DBì— ì ‘ì†í•  ë•Œ DBëŠ” ì´ë¯¸ ìì‹ ì´ í—ˆìš©í•  ìˆ˜ ìˆëŠ” ì—°ê²°ì˜ ìµœëŒ€ì¹˜ì— ë„ë‹¬í–ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ê³  ì—°ê²° ì‹¤íŒ¨ê°€ ë°œìƒí•œë‹¤.\nì¡°ì¹˜ë°©ë²• # 1. sqlplus ì ‘ì† # $ sqlplus / as sysdba SQL*Plus: Release 10.2.0.4.0 - Production on Wed Oct 6 11:00:47 2021 Copyright (c) 1982, 2007, Oracle. All Rights Reserved. Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - Production With the Partitioning, OLAP, Data Mining and Real Application Testing options SQL\u0026gt; 2. ë¦¬ì†ŒìŠ¤ íŒŒë¼ë¯¸í„° í™•ì¸ # SQL\u0026gt; SET LINESIZE 200; SQL\u0026gt; SELECT * FROM V$RESOURCE_LIMIT; RESOURCE_NAME CURRENT_UTILIZATION MAX_UTILIZATION INITIAL_ALLOCATION LIMIT_VALUE ------------------------------ ------------------- --------------- -------------------- -------------------- processes 247 250 250 250 sessions 250 255 280 280 enqueue_locks 20 37 3840 3840 enqueue_resources 21 81 1452 UNLIMITED ges_procs 0 0 0 0 ges_ress 0 0 0 UNLIMITED ges_locks 0 0 0 UNLIMITED ges_cache_ress 0 0 0 UNLIMITED ges_reg_msgs 0 0 0 UNLIMITED ges_big_msgs 0 0 0 UNLIMITED ges_rsv_msgs 0 0 0 0 RESOURCE_NAME CURRENT_UTILIZATION MAX_UTILIZATION INITIAL_ALLOCATION LIMIT_VALUE ------------------------------ ------------------- --------------- -------------------- -------------------- gcs_resources 0 0 0 0 gcs_shadows 0 0 0 0 dml_locks 0 79 1232 UNLIMITED temporary_table_locks 0 3 UNLIMITED UNLIMITED transactions 3 21 308 UNLIMITED branches 2 18 308 UNLIMITED cmtcallbk 0 2 308 UNLIMITED sort_segment_locks 0 5 UNLIMITED UNLIMITED max_rollback_segments 12 15 308 65535 max_shared_servers 1 1 UNLIMITED UNLIMITED parallel_max_servers 0 0 160 3600 processes ê°’ì´ ìµœëŒ€ 250ê°œ ì¤‘ í˜„ì¬ 247ì„ ì‚¬ìš©ì¤‘ì´ë‹¤.\nprocesses, sessions ê°’ì˜ ì˜ë¯¸\nprocessesëŠ” ë™ì‹œì— Oracleì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” OS ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê°’ì´ë‹¤.\nprocesses ê°’ì—ëŠ” ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤, Job í”„ë¡œì„¸ìŠ¤, ë³‘ë ¬ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ ë“±ì˜ ìˆ˜ê°€ í¬í•¨ëœë‹¤.\nprocesses ê°’ì„ ë³€ê²½í•˜ë©´ sessions ê°’ë„ ìë™ìœ¼ë¡œ (processes x 1.1) + 5 ë¡œ ì„¤ì •ëœë‹¤.\n3. spfile ì¡´ì¬ìœ ë¬´ í™•ì¸ # SQL\u0026gt; SHOW PARAMETER SPFILE; NAME TYPE VALUE ------------------------------------ ----------- ------------------------------ spfile string /oracle/10g/dbs/spfiledba.ora spfile\nspfileì€ Server Parameter Fileì˜ ì•½ìë¡œ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ íŒŒë¼ë¯¸í„° ì„¤ì • íŒŒì¼ì´ë‹¤. spfileì€ Oracle 9i ë²„ì „ë¶€í„° ì§€ì›ë˜ëŠ” ê¸°ëŠ¥ì´ë¯€ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ DB ë²„ì „ì„ í™•ì¸í•œë‹¤. spfileì€ ALTER SYSTEM ëª…ë ¹ì–´ë¥¼ í†µí•´ ìš´ì˜ì¤‘ì— íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì • í•  ìˆ˜ ìˆë‹¤. spfileì˜ ì¥ì ì€ ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ì§€ ì•Šê³  ìš´ì˜ì¤‘ì— ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì´ë‹¤. spfileì€ ê¸°ë³¸ì ìœ¼ë¡œ binary íŒŒì¼ì´ê¸° ë•Œë¬¸ì— í…ìŠ¤íŠ¸ í¸ì§‘ê¸°(vi editor, nano ë“±)ë¥¼ ì´ìš©í•´ ìˆ˜ì •í•˜ë©´ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. 4. spfile ì„¤ì • í™•ì¸ # $ strings /oracle/10g/dbs/spfiledba.ora [...] *.open_cursors=300 *.pga_aggregate_target=241172480 *.processes=250 *.remote_login_passwordfile=\u0026#39;EXCLUSIVE\u0026#39; *.resource_limit=TRUE *.resource_manager_plan=\u0026#39;\u0026#39; *.service_names=\u0026#39;dba\u0026#39;,\u0026#39;DBA.REGRESS.RDBMS.DEV.US.ORACLE.COM\u0026#39; *.sga_target=608174080 *.undo_management=\u0026#39;AUTO\u0026#39; *.undo_retention=900 *.undo_tablespace=\u0026#39;UNDOTBS1\u0026#39; *.user_dump_dest=\u0026#39;/oracle/admin/dba/udump\u0026#39; *.utl_file_dir=\u0026#39;/BACKUP/logminer\u0026#39; spfileì€ binary í˜•ì‹ì˜ íŒŒì¼ì´ë¯€ë¡œ cat ëª…ë ¹ì–´ê°€ ì•„ë‹Œ strings ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì½ì–´ì•¼í•œë‹¤.\nspfileì„ í™•ì¸í•´ë³´ë‹ˆ í˜„ì¬ processes ê°’ì´ 250ì´ë‹¤.\n5. ë¦¬ì†ŒìŠ¤ íŒŒë¼ë¯¸í„° ìˆ˜ì • # ëª…ë ¹ì–´ í˜•ì‹\nSQL\u0026gt; alter system set processes=\u0026lt;INT\u0026gt; scope=spfile; ì‹¤ì œ ëª…ë ¹ì–´\nSQL\u0026gt; alter system set processes=400 scope=spfile; System altered. processes ê°’ì„ 400ìœ¼ë¡œ ë³€ê²½í•œë‹¤. System altered ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ ì •ìƒ ì ìš©ëœ ê²ƒì´ë‹¤.\n6. spfile ë³€ê²½ í™•ì¸ # $ strings /oracle/10g/dbs/spfiledba.ora [...] *.open_cursors=300 *.pga_aggregate_target=241172480 *.processes=400 *.remote_login_passwordfile=\u0026#39;EXCLUSIVE\u0026#39; *.resource_limit=TRUE *.resource_manager_plan=\u0026#39;\u0026#39; *.service_names=\u0026#39;dba\u0026#39;,\u0026#39;DBA.REGRESS.RDBMS.DEV.US.ORACLE.COM\u0026#39; *.sga_target=608174080 *.undo_management=\u0026#39;AUTO\u0026#39; *.undo_retention=900 *.undo_tablespace=\u0026#39;UNDOTBS1\u0026#39; *.user_dump_dest=\u0026#39;/oracle/admin/dba/udump\u0026#39; *.utl_file_dir=\u0026#39;/BACKUP/logminer\u0026#39; processes ê°’ì´ 400ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\n7. DB ì¬ê¸°ë™ # ì¤‘ì§€ ëª…ë ¹ì–´\nSQL\u0026gt; shutdown immediate; Database closed. Database dismounted. ORACLE instance shut down. ê¸°ë™ ëª…ë ¹ì–´\nSQL\u0026gt; startup; ORACLE instance started. Total System Global Area 608174080 bytes Fixed Size 1268896 bytes Variable Size 373293920 bytes Database Buffers 226492416 bytes Redo Buffers 7118848 bytes Database mounted. Database opened. 8. ë¦¬ì†ŒìŠ¤ íŒŒë¼ë¯¸í„° ë³€ê²½ í™•ì¸ # SQL\u0026gt; SET LINESIZE 200; SQL\u0026gt; SELECT * FROM V$RESOURCE_LIMIT; RESOURCE_NAME CURRENT_UTILIZATION MAX_UTILIZATION INITIAL_ALLOCATION LIMIT_VALUE ------------------------------ ------------------- --------------- -------------------- -------------------- processes 77 86 400 400 sessions 80 89 445 445 enqueue_locks 19 30 5790 5790 enqueue_resources 19 48 2176 UNLIMITED ges_procs 0 0 0 0 ges_ress 0 0 0 UNLIMITED ges_locks 0 0 0 UNLIMITED ges_cache_ress 0 0 0 UNLIMITED ges_reg_msgs 0 0 0 UNLIMITED ges_big_msgs 0 0 0 UNLIMITED ges_rsv_msgs 0 0 0 0 RESOURCE_NAME CURRENT_UTILIZATION MAX_UTILIZATION INITIAL_ALLOCATION LIMIT_VALUE ------------------------------ ------------------- --------------- -------------------- -------------------- gcs_resources 0 0 0 0 gcs_shadows 0 0 0 0 dml_locks 0 51 1956 UNLIMITED temporary_table_locks 0 3 UNLIMITED UNLIMITED transactions 0 11 489 UNLIMITED branches 0 8 489 UNLIMITED cmtcallbk 0 1 489 UNLIMITED sort_segment_locks 0 3 UNLIMITED UNLIMITED max_rollback_segments 13 13 489 65535 max_shared_servers 1 1 UNLIMITED UNLIMITED parallel_max_servers 0 0 160 3600 22 rows selected. processes ì˜ LIMIT_VALUE ê°’ì´ 250ì—ì„œ 400ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\nprocesses íŒŒë¼ë¯¸í„°ì˜ ì˜í–¥ì„ ë°›ëŠ” sessions LIMIT_VALUE ê°’ë„ (processes x 1.1) + 5 ì˜ ê²°ê³¼ì¸ 445ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\n","date":"Oct 6, 2021","permalink":"/blog/oracle-processes-parameter/","section":"Blogs","summary":"ê°œìš” # ORA-12516 ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Oracle DB ë¦¬ì†ŒìŠ¤ íŒŒë¼ë¯¸í„°ì˜ Processes ê°’ì„ ë³€ê²½í•˜ê³  ì ìš©í•  ìˆ˜ ìˆë‹¤.","title":"Oracle processes íŒŒë¼ë¯¸í„° ë³€ê²½"},{"content":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ëª…ë ¹ì–´Commandë¥¼ ì´ìš©í•´ ë©”ì¸ë³´ë“œì˜ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\ní™•ì¸ ê°€ëŠ¥í•œ í•µì‹¬ ì •ë³´\nì „ì²´ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ ê°œìˆ˜ ì‚¬ìš©ì¤‘ì¸ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ ê°œìˆ˜ ì¦ì„¤ ê°€ëŠ¥í•œ ìµœëŒ€ ë©”ëª¨ë¦¬ ìš©ëŸ‰ ë©”ëª¨ë¦¬ ì œì›ì •ë³´ (Part Number, ê·œê²©, ì‚¬ì´ì¦ˆ ë“±) í™˜ê²½ # OS : CentOS Linux release 7.6.1810 (Core) Shell : bash Package : dmidecode 3.1 ì‘ì—…ì ˆì°¨ # 1. dmidecode íŒ¨í‚¤ì§€ í™•ì¸ # $ rpm -qa | grep dmidecode dmidecode-3.1-2.el7.x86_64 dmidecode íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.\n2. ì„œë²„ ë©”ëª¨ë¦¬ í™•ì¸ # $ free -m total used free shared buff/cache available Mem: 31670 2020 237 310 29412 28841 Swap: 32767 2 32765 -mì€ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì„ MBMegabytes ë‹¨ìœ„ë¡œ ì¶œë ¥í•œë‹¤.\nì„œë²„ì˜ ì „ì²´ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ 32GBì´ë‹¤.\n3. ë©”ì¸ë³´ë“œ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ í™•ì¸ (ê°„ë‹¨íˆ) # $ dmidecode -t 17 | egrep \u0026#39;Memory|Size\u0026#39; Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: 16384 MB Memory Device Size: No Module Installed Memory Device Size: 16384 MB Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed Memory Device Size: No Module Installed ì „ì²´ 24ê°œ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ì¤‘ 2ê°œ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ì„ ì‚¬ìš©ì¤‘ì´ë‹¤. 16GB ìš©ëŸ‰ì˜ ë©”ëª¨ë¦¬ 2ê°œê°€ ì¥ì°©ëœ ìƒíƒœì´ë‹¤.\nNo Module Installed ëŠ” ë¹ˆ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ì„ ì˜ë¯¸í•œë‹¤.\nTip. dmidecode -t ë’¤ì˜ ìˆ«ì ì˜ë¯¸ # -t ì˜µì…˜ ë’¤ì˜ ìˆ«ìëŠ” Type Number ë¥¼ ì˜ë¯¸í•œë‹¤.\nType Number ê°’ë§Œ ë‹¤ë¥´ê²Œ ì£¼ë©´ ë©”ëª¨ë¦¬ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\ndmidecodeì˜ Type Number ëª©ë¡ì€ man dmidecode ëª…ë ¹ì–´ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ man dmidecode [...] DMI TYPES The SMBIOS specification defines the following DMI types: Type Information â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 0 BIOS 1 System 2 Baseboard 3 Chassis 4 Processor 5 Memory Controller 6 Memory Module 7 Cache 8 Port Connector 9 System Slots 10 On Board Devices 11 OEM Strings 12 System Configuration Options 13 BIOS Language 14 Group Associations 15 System Event Log 16 Physical Memory Array 17 Memory Device 18 32-bit Memory Error 19 Memory Array Mapped Address 20 Memory Device Mapped Address 21 Built-in Pointing Device 22 Portable Battery 23 System Reset 24 Hardware Security 25 System Power Controls 26 Voltage Probe 27 Cooling Device 28 Temperature Probe 29 Electrical Current Probe 30 Out-of-band Remote Access 31 Boot Integrity Services 32 System Boot 33 64-bit Memory Error 34 Management Device 35 Management Device Component 36 Management Device Threshold Data 37 Memory Channel 38 IPMI Device 39 Power Supply 40 Additional Information 41 Onboard Devices Extended Information 42 Management Controller Host Interface ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ ì •ë³´ í™•ì¸ì‹œ ìì£¼ ì‚¬ìš©í•˜ëŠ” Type Number\n16 : Physical Memory Array 17 : Memory Device 4. ë©”ì¸ë³´ë“œ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ í™•ì¸ (ìì„¸íˆ) # ë©”ëª¨ë¦¬ì˜ Part Number, ìš©ëŸ‰(Size), í¼íŒ©í„°, ê·œê²©, ì„¤ì •ëœ Clock ë“±ì˜ ìœ ìš©í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n$ dmidecode -t 17 # dmidecode 3.1 Getting SMBIOS data from sysfs. SMBIOS 3.2.1 present. # SMBIOS implementations newer than version 3.1.1 are not # fully supported by this version of dmidecode. Handle 0x001B, DMI type 17, 84 bytes Memory Device Array Handle: 0x000F Error Information Handle: Not Provided Total Width: 72 bits Data Width: 64 bits Size: No Module Installed Form Factor: DIMM Set: None Locator: PROC 1 DIMM 1 Bank Locator: Not Specified Type: Other Type Detail: Synchronous Speed: Unknown Manufacturer: UNKNOWN Serial Number: Not Specified Asset Tag: Not Specified Part Number: NOT AVAILABLE Rank: Unknown Configured Clock Speed: Unknown Minimum Voltage: Unknown Maximum Voltage: Unknown Configured Voltage: Unknown [...] Handle 0x0022, DMI type 17, 84 bytes Memory Device Array Handle: 0x000F Error Information Handle: Not Provided Total Width: 72 bits Data Width: 64 bits Size: 16384 MB Form Factor: DIMM Set: 7 Locator: PROC 1 DIMM 8 Bank Locator: Not Specified Type: DDR4 Type Detail: Synchronous Registered (Buffered) Speed: 2933 MT/s Manufacturer: HPE Serial Number: Not Specified Asset Tag: Not Specified Part Number: P03050-091 Rank: 2 Configured Clock Speed: 2400 MT/s Minimum Voltage: 1.2 V Maximum Voltage: 1.2 V Configured Voltage: 1.2 V [...] Handle 0x0024, DMI type 17, 84 bytes Memory Device Array Handle: 0x000F Error Information Handle: Not Provided Total Width: 72 bits Data Width: 64 bits Size: 16384 MB Form Factor: DIMM Set: 9 Locator: PROC 1 DIMM 10 Bank Locator: Not Specified Type: DDR4 Type Detail: Synchronous Registered (Buffered) Speed: 2933 MT/s Manufacturer: HPE Serial Number: Not Specified Asset Tag: Not Specified Part Number: P03051-091 Rank: 1 Configured Clock Speed: 2400 MT/s Minimum Voltage: 1.2 V Maximum Voltage: 1.2 V Configured Voltage: 1.2 V [...] 5. ë©”ì¸ë³´ë“œê°€ ìµœëŒ€ ì§€ì›í•˜ëŠ” ë©”ëª¨ë¦¬ ìš©ëŸ‰ í™•ì¸ # $ dmidecode -t 16 # dmidecode 3.1 Getting SMBIOS data from sysfs. SMBIOS 3.2.1 present. # SMBIOS implementations newer than version 3.1.1 are not # fully supported by this version of dmidecode. Handle 0x000F, DMI type 16, 23 bytes Physical Memory Array Location: System Board Or Motherboard Use: System Memory Error Correction Type: Multi-bit ECC Maximum Capacity: 3 TB Error Information Handle: Not Provided Number Of Devices: 12 Handle 0x0010, DMI type 16, 23 bytes Physical Memory Array Location: System Board Or Motherboard Use: System Memory Error Correction Type: Multi-bit ECC Maximum Capacity: 3 TB Error Information Handle: Not Provided Number Of Devices: 12 í•´ë‹¹ ì„œë²„ëŠ” ì´ 2ê°œì˜ Memory Arrayë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.\nê° Memory Array ë‹¹ ì§€ì›í•˜ëŠ” ìµœëŒ€ ë©”ëª¨ë¦¬ ìš©ëŸ‰(Maximum Capacity)ì€ 3TBì´ë‹¤.\nê° Memory Array ë‹¹ ì „ì²´ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯(Number of Devices)ì€ 12ê°œì´ë‹¤.\nMemory Arrayê°€ ì´ 2ê°œì´ë¯€ë¡œ, ì„œë²„ ì „ì²´ì— ê½‚ì„ ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ìš©ëŸ‰ì€ 6TB, ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ì€ ì´ 24ê°œì´ë‹¤.\nê²°ë¡  # ì„œë²„ ê´€ë¦¬ìì—ê²Œ ê°€ì¥ ì¤‘ìš”í•œ ì—…ë¬´ëŠ” ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ê³¼ ì„œë¹„ìŠ¤ íë¦„ ì •ë³´, ì œì›Specì„ ì œëŒ€ë¡œ íŒŒì•…í•˜ëŠ” ì¼ì´ë‹¤.\ndmidecodeëŠ” ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ëª…ë ¹ì–´ì´ë‹¤. ì‹¤ë¬´ì—ì„œ ì˜ í™œìš©ë§Œ í•œë‹¤ë©´ ë³´ë‹¤ ë” ë§ì€ í•˜ë“œì›¨ì–´ ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ëª…ì‹¬í•˜ë„ë¡ í•˜ì.\n","date":"Sep 29, 2021","permalink":"/blog/checking-ram-slots-in-linux/","section":"Blogs","summary":"ê°œìš” # ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ëª…ë ¹ì–´Commandë¥¼ ì´ìš©í•´ ë©”ì¸ë³´ë“œì˜ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.","title":"ë¦¬ëˆ…ìŠ¤ ë©”ì¸ë³´ë“œ ë©”ëª¨ë¦¬ ìŠ¬ë¡¯ í™•ì¸"},{"content":"ê°œìš” # ì˜¤ë¼í´ DBì—ì„œ ì„¸ì…˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  Lockì´ ë°œìƒí•œ ë¹„ì •ìƒì ì¸ DB ì„¸ì…˜ì„ ê°•ì œì¢…ë£Œ(Kill)í•  ìˆ˜ ìˆë‹¤.\nì‘ì„±ë°°ê²½ # ê°€ë”ì”© ìš´ì˜ì¤‘ì¸ DBì„œë²„ì—ì„œ Application ì—ëŸ¬ë¡œ Queryê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ë°˜ë³µì‹¤í–‰ë˜ë©´ì„œ ì‹œìŠ¤í…œ ë¶€í•˜ê°€ ê¸‰ì¦í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•œë‹¤.\nì–´ëŠë‚  ê°œë°œìë¡œë¶€í„° ì„¸ì…˜ ê°•ì œì¢…ë£Œ(Kill) ì¡°ì¹˜ ìš”ì²­ì´ ë“¤ì–´ì™€ ì¡°ì¹˜í•œ ê¸°ë¡ì´ë‹¤.\ní™˜ê²½ # OS : HP-UX B.11.31 ID : oracle Shell : sh Database : Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production ì‘ì—…ì ˆì°¨ # 1. oracle ê³„ì • ì ‘ì† # oracle ê³„ì •ìœ¼ë¡œ ë¨¼ì € ë¡œê·¸ì¸í•´ì•¼ í•œë‹¤.\n$ su - oracle 2. DB ì ‘ì† # sysdba ê¶Œí•œìœ¼ë¡œ Oracle DBì— ì ‘ì†í•œë‹¤.\n$ sqlplus / as sysdba SQL*Plus: Release 11.2.0.4.0 Production on Wed Sep 8 15:46:26 2021 Copyright (c) 1982, 2013, Oracle. All rights reserved. Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production SQL\u0026gt; 3. DB ì„¸ì…˜ ìƒíƒœí™•ì¸ # Oracle Session\nClient Device Database Server â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ Acess â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Request â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Client â”œâ”€â”¼â”€â”€â”€(1)â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Oracle â”‚ â”‚ Client â”‚ â”‚ â”‚ â”‚ Application â”‚ â”‚ â”‚ â”‚ Listener â”‚ â”‚ Application â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Session â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜ â”‚ (2) Create (1) established â”‚ Session â”‚ â”‚ Process â”‚ Local Connection â”‚ established â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚ â””â”€â”€â”€â”€â”€â”€â”€(3)â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º Server â”‚ â”‚ Server â”‚ â”‚ Remote â”‚ â”‚ Process â”‚..â”‚ Process â”‚ â”‚ Connection â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Oracle ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì‚¬ìš©ìì™€ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†ì´ ì´ë£¨ì–´ì§€ë©´ ì„¸ì…˜ì„ ìƒì„±í•œë‹¤. ì„¸ì…˜ì€ ì‚¬ìš©ìê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ë˜ì–´ ìˆëŠ” ë™ì•ˆ ê³„ì† ìœ ì§€ë˜ê³ , ê° ì„¸ì…˜ì—ëŠ” Session ID(SID)ì™€ Serial ë²ˆí˜¸(Serial#)ê°€ ë¶€ì—¬ëœë‹¤. Session ID(SID)ì™€ Serial ë²ˆí˜¸(Serial#)ê°€ ê°™ì´ ë¶€ì—¬ë˜ëŠ” ì´ìœ ëŠ” Sessionì´ ì¢…ë£Œë˜ì—ˆìœ¼ë‚˜, ë‹¤ë¥¸ ì„¸ì…˜ì´ ë™ì¼í•œ SIDë¥¼ ê°–ê³  ì‹œì‘ë˜ì—ˆì„ ë•Œ ì„¸ì…˜ ëª…ë ¹ë“¤ì´ ì •í™•í•œ ì„¸ì…˜ì— ì ìš©ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ì„¸ì…˜ì´ ì‚¬ìš©ìì— ì˜í•´ ì‘ì—…ì¤‘ì´ë¼ë©´ ACTIVE ìƒíƒœë¡œ ì‘ì—…ì„ í•˜ê²Œëœë‹¤.\nINACTIVE ìƒíƒœëŠ” ì„¸ì…˜ì€ ì—°ê²°ë˜ì–´ìˆì§€ë§Œ ì‘ì—…ì„ í•˜ê³ ìˆì§€ ì•ŠëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤. ëª…ë ¹ì–´ í˜•ì‹\nSELECT SID, SERIAL#, USERNAME, PROGRAM, STATUS FROM V$SESSION WHERE SID=\u0026#39;\u0026lt;SID\u0026gt;\u0026#39;; ì‹¤í–‰ ëª…ë ¹ì–´\nSQL\u0026gt; SELECT SID, SERIAL#, USERNAME, PROGRAM, STATUS 2 FROM V$SESSION 3 WHERE SID=\u0026#39;657\u0026#39;; SID SERIAL# USERNAME PROGRAM STATUS ---------- ---------- ------------------------------ ------------------------------------------------ -------- 657 13469 DEV SQL Developer ACTIVE Elapsed: 00:00:00.01 4. DB ì„¸ì…˜ ê°•ì œì¢…ë£Œ(Kill) # ì„¸ì…˜ì„ ê°•ì œë¡œ ëŠì–´ë²„ë¦¬ê¸° ìœ„í•´ì„œëŠ” Session ID(SID)ì™€ Serial ë²ˆí˜¸(SERIAL#) ì •ë³´ê°€ í•„ìš”í•˜ë‹¤.\nëª…ë ¹ì–´ í˜•ì‹\nALTER SYSTEM KILL SESSION \u0026#39;\u0026lt;SID\u0026gt;, \u0026lt;SERIAL#\u0026gt;\u0026#39;; ì‹¤í–‰ ëª…ë ¹ì–´\nSQL\u0026gt; ALTER SYSTEM KILL SESSION \u0026#39;657, 13469\u0026#39;; System altered. Elapsed: 00:00:01.01 ì„¸ì…˜ ê°•ì œì¢…ë£Œ(Kill)ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆë‹¤.\n5. DB ì„¸ì…˜ ì¬í™•ì¸ # 13469ë²ˆ Serial Number(SERIAL#)ë¥¼ ê°€ì§„ ì„¸ì…˜ì´ ì‚¬ë¼ì§„ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nSQL\u0026gt; SELECT SID, SERIAL#, USERNAME, PROGRAM, STATUS 2 FROM V$SESSION 3 WHERE SID=\u0026#39;657\u0026#39;; SID SERIAL# USERNAME PROGRAM STATUS ---------- ---------- ------------------------------ ------------------------------------------------ -------- 657 13478 DEV oracle@devdb1 (TNS V1-V3) INACTIVE Elapsed: 00:00:00.00 ì¡°ì¹˜ ì™„ë£Œ.\n","date":"Sep 8, 2021","permalink":"/blog/killing-locked-session-in-oracle-database/","section":"Blogs","summary":"ê°œìš” # ì˜¤ë¼í´ DBì—ì„œ ì„¸ì…˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  Lockì´ ë°œìƒí•œ ë¹„ì •ìƒì ì¸ DB ì„¸ì…˜ì„ ê°•ì œì¢…ë£Œ(Kill)í•  ìˆ˜ ìˆë‹¤.","title":"ì˜¤ë¼í´ ì„¸ì…˜ í™•ì¸í•˜ê³  Kill"},{"content":"ê°œìš” # íŒŒì¼ì‹œìŠ¤í…œ ìš©ëŸ‰ì´ ë¶€ì¡±í•œ ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•´ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ë°ì´í„° íŒŒì¼ì„ ë‹¤ë¥¸ íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œë¡œ ì´ë™ì‹œì¼œ Filesystem Fullë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì¥ì• ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.\në¬¸ì œì  # /vol1 íŒŒì¼ì‹œìŠ¤í…œì˜ ì‚¬ìš©ë¥ ì´ 90% ì´ˆê³¼ Filesystem Fullë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì¥ì•  ë°œìƒ ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•¨ $ df -h Filesystem Size Used Avail Use% Mounted on /dev/sda5 63G 30G 30G 50% / /dev/sda2 39G 14G 23G 38% /oracle /dev/sda1 99M 12M 82M 13% /boot tmpfs 32G 0 32G 0% /dev/shm /dev/emcpowera 600G 538G 63G 90% /vol1 /dev/emcpowerb 600G 12G 589G 4% /vol2 í•´ê²°ë°©ì•ˆ # í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ë°ì´í„° íŒŒì¼ì„ ì—¬ìœ ê³µê°„ì´ ìˆëŠ” íŒŒì¼ì‹œìŠ¤í…œìœ¼ë¡œ ì´ë™ì‹œí‚¨ í›„ ë°ì´í„° íŒŒì¼ì˜ ê²½ë¡œ ì„¤ì •ì„ ë³€ê²½í•œë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 5.3 (Tikanga) Kernel : 2.6.18-128.el5 ID : oracle Shell : bash Database : Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production [DB] DB ì´ì¤‘í™” : Oracle RAC(Real Application Clusters) ì‚¬ìš©ì¤‘ [DB] DB ì¸ìŠ¤í„´ìŠ¤ : DEV1, DEV2 ì´ 2ê°œ ì‚¬ìš©ì¤‘ ì¡°ì¹˜ë°©ë²• # 1. DB ì ‘ì† # # su - oracle $ sqlplus / as sysdba SQL*Plus: Release 10.2.0.4.0 - Production on Tue Sep 7 11:00:04 2021 Copyright (c) 1982, 2007, Oracle. All Rights Reserved. Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production With the Partitioning, Real Application Clusters, Data Mining and Real Application Testing options 2. ë°ì´í„°íŒŒì¼ ì •ë³´ í™•ì¸ # SQL ì¶œë ¥ê²°ê³¼ ì‚¬ì´ì¦ˆ ìµœì í™”\nSQL\u0026gt; SET LINESIZE 200; SQL\u0026gt; SET PAGESIZE 200; SQL\u0026gt; COL FILE_NAME FOR A40; SQL\u0026gt; COL TABLESPACE_NAME FOR A20; í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ë°ì´í„° íŒŒì¼ ì¡°íšŒ\nDBA_DATA_FILES ë°ì´í„° ì‚¬ì „ì—ì„œ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ë°ì´í„° íŒŒì¼ í¬ê¸°ì™€ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ì‚¬ì´ì¦ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nSQL\u0026gt; SELECT TABLESPACE_NAME, ROUND(BYTES/1024/1024/1024) AS GB, FILE_NAME FROM DBA_DATA_FILES WHERE FILE_NAME LIKE \u0026#39;%/vol1/DBF/%\u0026#39;; TABLESPACE_NAME GB FILE_NAME -------------------- ---------- ---------------------------------------- TEST_TS 32 /vol1/DBF/TESTINFO3.DBF TEST_TS 32 /vol1/DBF/TESTINFO4.DBF TEST_TS 32 /vol1/DBF/TESTINFO5.DBF TEST_TS 32 /vol1/DBF/TESTINFO6.DBF ë°ì´í„° íŒŒì¼ ì •ë³´ë¥¼ í™•ì¸ í›„ exit ëª…ë ¹ì–´ë¡œ sqlplusì—ì„œ ë¹ ì ¸ë‚˜ì˜¨ë‹¤.\nSQL\u0026gt; exit Disconnected from Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production With the Partitioning, Real Application Clusters, Data Mining and Real Application Testing options 3. ë°ì´í„° íŒŒì¼ ì‹¤ì œê²½ë¡œ í™•ì¸ # íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œì— ë°ì´í„° íŒŒì¼ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” ì§€ í™•ì¸í•œë‹¤.\n# ls -lh /vol1/DBF/ total 128G -rw-r----- 1 oracle dba 32G Aug 9 2010 TESTINFO3.DBF -rw-r----- 1 oracle dba 32G Aug 9 2010 TESTINFO4.DBF -rw-r----- 1 oracle dba 32G Aug 9 2010 TESTINFO5.DBF -rw-r----- 1 oracle dba 32G Aug 9 2010 TESTINFO6.DBF 32GB ìš©ëŸ‰ì˜ ë°ì´í„° íŒŒì¼ 4ê°œê°€ ì¡´ì¬í•œë‹¤. /vol1 ì— ìˆëŠ” 4ê°œì˜ ë°ì´í„° íŒŒì¼ì„ /vol2 ë¡œ ì´ë™ì‹œí‚¤ì.\n4. ì„œë¹„ìŠ¤ ì¤‘ì§€ # ë°ì´í„° íŒŒì¼ì„ ì´ë™ì‹œí‚¤ê¸° ì „ì— ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ ì¢…ë£Œí•œë‹¤.\nsrvctl : Clusterì˜ ìì›(Resource)ì¸ Listener, Instance, Disk Group, Network ë“±ê³¼ ê°™ì€ ì˜¤ë¼í´ì„ êµ¬ì„±í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ê´€ë¦¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´. ëª…ë ¹ì–´ í˜•ì‹\n$ srvctl stop database -d \u0026lt;db_unique_name\u0026gt; ì‹¤í–‰ ëª…ë ¹ì–´\n$ srvctl stop database -d DEV ë§Œì•½ ìœ„ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ì§€ ì•Šì„ ê²½ìš° ê° DB Instance ê°œë³„ë¡œ ì¢…ë£Œí•œë‹¤.\nëª…ë ¹ì–´ í˜•ì‹\n$ srvctl stop instance -d \u0026lt;db_unique_name\u0026gt; -i \u0026lt;instance_name\u0026gt; ì‹¤í–‰ ëª…ë ¹ì–´\n$ srvctl stop instance -d DEV -i DEV1 $ srvctl stop instance -d DEV -i DEV2 5. ë°ì´í„°íŒŒì¼ ë³µì‚¬ # /vol1ì— ìˆëŠ” ë°ì´í„° íŒŒì¼ì„ /vol2ë¡œ ì´ë™ì‹œí‚¨ë‹¤.\n$ cp -rp /vol1/DBF/TESTINFO3.DBF /vol2/DBF/ $ cp -rp /vol1/DBF/TESTINFO4.DBF /vol2/DBF/ $ cp -rp /vol1/DBF/TESTINFO5.DBF /vol2/DBF/ $ cp -rp /vol1/DBF/TESTINFO6.DBF /vol2/DBF/ cp ëª…ë ¹ì–´ ì˜µì…˜ ì„¤ëª…\n-r (\u0026ndash;recursive) : í•˜ìœ„ ë””ë ‰í† ë¦¬ ë° íŒŒì¼ê¹Œì§€ ëª¨ë‘ ë³µì‚¬ -p : ì›ë³¸íŒŒì¼ì˜ ì†Œìœ ì£¼, ê·¸ë£¹, ê¶Œí•œ, ì‹œê°„ì •ë³´ë¥¼ ë³´ì¡´í•˜ì—¬ ë³µì‚¬ 6. ì„œë¹„ìŠ¤ ì‹œì‘ # DB ì ‘ì†\nsysdba ê¶Œí•œìœ¼ë¡œ DBì— ì ‘ì†í•œë‹¤.\n$ sqlplus / as sysdba DB íŒŒì¼ì‹œìŠ¤í…œ ê¸°ë™\nSQL\u0026gt; startup mount ë°ì´í„° íŒŒì¼ ê²½ë¡œ ë³€ê²½ì„¤ì •(Rename)\nSQL\u0026gt; alter database rename file \u0026#39;/vol1/DBF/TESTINFO3.DBF\u0026#39; to \u0026#39;/vol2/DBF/TESTINFO3.DBF\u0026#39;; SQL\u0026gt; alter database rename file \u0026#39;/vol1/DBF/TESTINFO4.DBF\u0026#39; to \u0026#39;/vol2/DBF/TESTINFO4.DBF\u0026#39;; SQL\u0026gt; alter database rename file \u0026#39;/vol1/DBF/TESTINFO5.DBF\u0026#39; to \u0026#39;/vol2/DBF/TESTINFO5.DBF\u0026#39;; SQL\u0026gt; alter database rename file \u0026#39;/vol1/DBF/TESTINFO6.DBF\u0026#39; to \u0026#39;/vol2/DBF/TESTINFO6.DBF\u0026#39;; í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ë°ì´í„° íŒŒì¼ ì¡°íšŒ\nSQL\u0026gt; SELECT TABLESPACE_NAME, ROUND(BYTES/1024/1024/1024) AS GB, FILE_NAME FROM DBA_DATA_FILES WHERE FILE_NAME LIKE \u0026#39;%/vol2/DBF/%\u0026#39;; TABLESPACE_NAME GB FILE_NAME -------------------- ---------- ---------------------------------------- TEST_TS 32 /vol2/DBF/TESTINFO3.DBF TEST_TS 32 /vol2/DBF/TESTINFO4.DBF TEST_TS 32 /vol2/DBF/TESTINFO5.DBF TEST_TS 32 /vol2/DBF/TESTINFO6.DBF ë°ì´í„° íŒŒì¼ì˜ ê²½ë¡œFILE_NAMEê°€ /vol1ì—ì„œ /vol2ë¡œ ì •ìƒ ë³€ê²½ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nDB ì„œë¹„ìŠ¤ ì‹œì‘\nSQL\u0026gt; alter database open; openì˜ ì˜ë¯¸\nì˜¨ë¼ì¸ ë°ì´í„° íŒŒì¼ê³¼ ì˜¨ë¼ì¸ Redo ë¡œê·¸ íŒŒì¼ì˜ ì¡´ì¬ ë° ì •í•©ì„±ì„ í™•ì¸í•œ í›„, í•´ë‹¹ íŒŒì¼ë“¤ì„ ì—´ì–´ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¡œ ë§Œë“ ë‹¤.\n7. ë°ì´í„° íŒŒì¼ ì‚¬ìš©ì—¬ë¶€ í™•ì¸ # $ fuser /vol1/DBF/TESTINFO3.DBF /vol1/DBF/TESTINFO4.DBF /vol1/DBF/TESTINFO5.DBF /vol1/DBF/TESTINFO6.DBF $ fuserë¡œ ì´ì „ ë°ì´í„° íŒŒì¼ì„ í™•ì¸ì‹œ PID ê°’ì´ ì¶œë ¥ë˜ì§€ ì•Šì•„ì•¼ ì •ìƒì´ë‹¤.\nPID ê°’ì´ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ëŠ” í•´ë‹¹ ë°ì´í„° íŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì—†ë‹¤ëŠ” ëœ»ì´ë‹¤.\n8. ê¸°ì¡´ ë°ì´í„° íŒŒì¼ ì‚­ì œ # ì‚­ì œ ì‘ì—…ì€ ì¸ì  ì‹¤ìˆ˜Human Faultë¥¼ ìœ ë°œí•  ìˆ˜ ìˆëŠ” ìœ„í—˜í•œ ì‘ì—…ì´ë‹¤.\nê¸°ì¡´ ë°ì´í„° íŒŒì¼ì„ ì‚­ì œí•˜ê¸° ì „ì— í˜„ì¬ ë‚´ê°€ ì‘ì—…í•˜ë ¤ëŠ” ë°ì´í„° íŒŒì¼ì˜ ë²ˆí˜¸, ì ˆëŒ€ê²½ë¡œë¥¼ ì˜ í™•ì¸í•˜ê³  ì‚­ì œí•˜ë„ë¡ í•œë‹¤.\n$ rm -f /vol1/DBF/TESTINFO3.DBF $ rm -f /vol1/DBF/TESTINFO4.DBF $ rm -f /vol1/DBF/TESTINFO5.DBF $ rm -f /vol1/DBF/TESTINFO6.DBF 9. DB ì„œë¹„ìŠ¤ ì¢…ë£Œ # ê¸°ì¡´ ë°ì´í„° íŒŒì¼ì„ ì‚­ì œí•œ í›„ ì´ìƒ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ DBë¥¼ ë‹¤ì‹œ ì¬ê¸°ë™í•´ì¤€ë‹¤.\nSQL\u0026gt; shutdown immediate 10. DB ì„œë¹„ìŠ¤ ì‹œì‘ # ëª…ë ¹ì–´ í˜•ì‹\n$ srvctl start database -d \u0026lt;db_unique_name\u0026gt; ì‹¤í–‰ ëª…ë ¹ì–´\n$ srvctl start database -d DEV 11. ì‚¬ìš©ë¥  í™•ì¸ # ì‰˜ í™˜ê²½ìœ¼ë¡œ ë¹ ì ¸ë‚˜ì˜¨ ë‹¤ìŒ, íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©ë¥ ì„ í™•ì¸í•œë‹¤.\n$ df -h Filesystem Size Used Avail Use% Mounted on /dev/sda5 63G 30G 30G 50% / /dev/sda2 39G 16G 22G 41% /oracle /dev/sda1 99M 12M 82M 13% /boot tmpfs 32G 0 32G 0% /dev/shm /dev/emcpowera 600G 408G 193G 68% /vol1 /dev/emcpowerb 600G 143G 458G 24% /vol2 /vol1 íŒŒì¼ì‹œìŠ¤í…œì˜ ì‚¬ìš©ë¥ ì´ 90%ì—ì„œ 68%ë¡œ ê°ì†Œëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì‘ì—…ê²°ê³¼\n/vol1 : ì‘ì—… ì „ ì‚¬ìš©ë¥  90% â†’ ì‘ì—… í›„ ì‚¬ìš©ë¥  68% /vol2 : ì‘ì—… ì „ ì‚¬ìš©ë¥  4% â†’ ì‘ì—… í›„ ì‚¬ìš©ë¥  24% ê²°ë¡  # í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ë°ì´í„° íŒŒì¼ì„ ì˜®ê¸°ëŠ” ì‘ì—…ì„ í†µí•´ íŒŒì¼ì‹œìŠ¤í…œ Fullë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì¥ì• ë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.\nì¸ì  ì‹¤ìˆ˜Human Faultê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ë°ì´í„° íŒŒì¼ ì´ë™, ì‚­ì œ ê³¼ì •ì—ì„œëŠ” ì¬ì°¨ í™•ì¸ í›„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì•¼í•œë‹¤.\n","date":"Sep 8, 2021","permalink":"/blog/moving-datafile-in-oracle-database/","section":"Blogs","summary":"ê°œìš” # íŒŒì¼ì‹œìŠ¤í…œ ìš©ëŸ‰ì´ ë¶€ì¡±í•œ ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•´ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ì˜ ë°ì´í„° íŒŒì¼ì„ ë‹¤ë¥¸ íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œë¡œ ì´ë™ì‹œì¼œ Filesystem Fullë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì¥ì• ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.","title":"ì˜¤ë¼í´ ë°ì´í„° íŒŒì¼ ì˜®ê¸°ê¸°"},{"content":"ì¦ìƒ # DB ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê°±ì‹ í•˜ëŠ” ìƒí™©ì—ì„œ ORA-28007: the password cannot be reused ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ì„œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê°±ì‹ í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.\nì—ëŸ¬ ë©”ì„¸ì§€\nSQL\u0026gt; ALTER USER MAXGAUGE IDENTIFIED BY \u0026#34;...\u0026#34;; ALTER USER MAXGAUGE IDENTIFIED BY \u0026#34;...\u0026#34;; * ERROR at line 1: ORA-28007: the password cannot be reused ì›ì¸ # ORA-28007: the password cannot be reusedëŠ” ë™ì¼í•œ íŒ¨ìŠ¤ì›Œë“œë¥¼ Limit ê°œìˆ˜ë§Œí¼ ë³€ê²½í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì´ë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 5.10 (Tikanga) ID : oracle Shell : bash Database : Oracle Database 11g Release 11.2.0.3.0 - Production í•´ê²°ë²• # 1. Oracle ì ‘ì† # oracle ê³„ì •ìœ¼ë¡œ ì ‘ì†í•œë‹¤.\n$ id uid=501(oracle) gid=501(dba) groups=501(dba) sysdba ê¶Œí•œì„ ì–»ì–´ sys ê³„ì • ì ‘ì†í•œë‹¤.\n$ sqlplus sys as sysdba SQL*Plus: Release 11.2.0.3.0 Production on Thu Sep 2 13:28:01 2021 Copyright (c) 1982, 2011, Oracle. All rights reserved. Enter password: \u0026lt;Password ì…ë ¥\u0026gt; Connected to: Oracle Database 11g Release 11.2.0.3.0 - Production SQL\u0026gt; Connected to: ë©”ì„¸ì§€ì™€ í•¨ê»˜ Oracle DBì— ì •ìƒ ì ‘ì†ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n2. ê³„ì •ì˜ í”„ë¡œí•„ í™•ì¸ # SQL\u0026gt; set linesize 200; SQL\u0026gt; SELECT USERNAME, ACCOUNT_STATUS, PROFILE FROM DBA_USERS WHERE USERNAME=\u0026#39;MAXGAUGE\u0026#39;; USERNAME ACCOUNT_STATUS PROFILE ------------------------------ -------------------------------- ------------------------------ MAXGAUGE EXPIRED DEFAULT MAXGAUGE ê³„ì •ì´ ë§Œë£Œëœ(EXPIRED) ìƒíƒœì´ë©°, Default Profile ì„ ì‚¬ìš©í•˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n3. í”„ë¡œí•„ ì„¤ì •í™•ì¸ # SQL\u0026gt; SELECT * FROM DBA_PROFILES WHERE PROFILE=\u0026#39;DEFAULT\u0026#39;; PROFILE RESOURCE_NAME RESOURCE LIMIT ------------------------------ -------------------------------- -------- ---------------------------------------- DEFAULT COMPOSITE_LIMIT KERNEL UNLIMITED DEFAULT SESSIONS_PER_USER KERNEL UNLIMITED DEFAULT CPU_PER_SESSION KERNEL UNLIMITED DEFAULT CPU_PER_CALL KERNEL UNLIMITED DEFAULT LOGICAL_READS_PER_SESSION KERNEL UNLIMITED DEFAULT LOGICAL_READS_PER_CALL KERNEL UNLIMITED DEFAULT IDLE_TIME KERNEL UNLIMITED DEFAULT CONNECT_TIME KERNEL UNLIMITED DEFAULT PRIVATE_SGA KERNEL UNLIMITED DEFAULT FAILED_LOGIN_ATTEMPTS PASSWORD 3 DEFAULT PASSWORD_LIFE_TIME PASSWORD 90 DEFAULT PASSWORD_REUSE_TIME PASSWORD 356 DEFAULT PASSWORD_REUSE_MAX PASSWORD 10 DEFAULT PASSWORD_VERIFY_FUNCTION PASSWORD VERIFY_FUNCTION DEFAULT PASSWORD_LOCK_TIME PASSWORD 3 DEFAULT PASSWORD_GRACE_TIME PASSWORD 5 ì•”í˜¸ ì¬ì‚¬ìš© ë°©ì§€ì™€ ê´€ë ¨ëœ ì„¤ì •ê°’\nDatabase SQL Reference - CREATE PROFILE\nParameter ì´ë¦„ ì„¤ëª… PASSWORD_REUSE_TIME ì£¼ì–´ì§„ ë‚  ìˆ˜ ë™ì•ˆ ì•”í˜¸ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ ì§€ì •. (PASSWORD_REUSE_TIME ê°’ì´ 5ì¼ ê²½ìš°, 5ì¼ ì•ˆì—ëŠ” ë˜‘ê°™ì€ ì•”í˜¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.) PASSWORD_REUSE_MAX ì‚¬ìš©í–ˆë˜ ì•”í˜¸ë¥¼ ê¸°ì–µí•˜ëŠ” íšŸìˆ˜. ì‚¬ìš©í–ˆë˜ ì•”í˜¸ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê±¸ ë°©ì§€í•˜ëŠ” ëª©ì ì˜ ì„¤ì •ê°’. ìœ„ ë‘ ì„¤ì •ê°’ì€ ì‚¬ìš©ìê°€ ì§€ì •ëœ ê¸°ê°„ ë™ì•ˆ ì•”í˜¸ë¥¼ ì¬ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œ í•œë‹¤. ì´ ë‘ íŒŒë¼ë¯¸í„°ëŠ” ë°˜ë“œì‹œ ê°™ì´ ì„¤ì •í•´ì•¼ ë™ì‘í•œë‹¤. 4. ë³´ì•ˆì„¤ì • í•´ì œ # ë¶ˆê°€í”¼í•˜ê²Œ íŒ¨ìŠ¤ì›Œë“œ ì¬ì‚¬ìš©ì´ í•„ìš”í•  ê²½ìš°, ì•”í˜¸ ì¬ì‚¬ìš© ë°©ì§€ì™€ ê´€ë ¨ëœ ì„¤ì •ê°’ì„ í•´ì œí•œë‹¤.\nPASSWORD_REUSE_TIMEê³¼ PASSWORD_REUSE_MAX íŒŒë¼ë¯¸í„°ë¥¼ ëª¨ë‘ UNLIMITEDë¡œ ì„¤ì •í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë‘ íŒŒë¼ë¯¸í„°ë¥¼ ëª¨ë‘ ë¬´ì‹œí•œë‹¤. SQL\u0026gt; ALTER PROFILE DEFAULT LIMIT PASSWORD_REUSE_TIME UNLIMITED; Profile altered. PASSWORD_REUSE_TIME íŒŒë¼ë¯¸í„°ë¥¼ ë¹„í™œì„±í™”í•œë‹¤.\nSQL\u0026gt; ALTER PROFILE DEFAULT LIMIT PASSWORD_REUSE_MAX UNLIMITED; Profile altered. PASSWORD_REUSE_MAX íŒŒë¼ë¯¸í„°ë¥¼ ë¹„í™œì„±í™”í•œë‹¤.\n5. íŒ¨ìŠ¤ì›Œë“œ ê°±ì‹  # ëª…ë ¹ì–´ í˜•ì‹\nSQL\u0026gt; ALTER USER \u0026lt;ê³„ì • ì´ë¦„\u0026gt; IDENTIFIED BY \u0026#34;\u0026lt;ê°±ì‹ í•  íŒ¨ìŠ¤ì›Œë“œ\u0026gt;\u0026#34;; ëª…ë ¹ì–´ ì˜ˆì‹œ\nSQL\u0026gt; ALTER USER MAXGAUGE IDENTIFIED BY \u0026#34;change!me!please\u0026#34;; User altered. ìƒˆ íŒ¨ìŠ¤ì›Œë“œë¡œ ê°±ì‹  ì™„ë£Œë˜ì—ˆë‹¤.\n6. ê³„ì • ìƒíƒœ í™•ì¸ # SQL\u0026gt; SELECT USERNAME, ACCOUNT_STATUS, PROFILE FROM DBA_USERS WHERE USERNAME=\u0026#39;MAXGAUGE\u0026#39;; USERNAME ACCOUNT_STATUS PROFILE ------------------------------ -------------------------------- ------------------------------ MAXGAUGE OPEN DEFAULT MAXGAUGE ê³„ì •ì´ ì ê¸ˆí•´ì œOPEN ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆë‹¤.\n7. ë³´ì•ˆì„¤ì • ì›ë³µí•˜ê¸° # íŒ¨ìŠ¤ì›Œë“œ ê°±ì‹ ì„ ì™„ë£Œí–ˆìœ¼ë©´ í•´ì œí–ˆë˜ ì•”í˜¸ ì¬ì‚¬ìš© ë°©ì§€ ê´€ë ¨ ì„¤ì •ê°’ì„ ë‹¤ì‹œ ëŒë ¤ë†“ëŠ”ë‹¤.\nSQL\u0026gt; ALTER PROFILE DEFAULT LIMIT PASSWORD_REUSE_TIME 356; Profile altered. SQL\u0026gt; ALTER PROFILE DEFAULT LIMIT PASSWORD_REUSE_MAX 10; Profile altered. ê²°ë¡  # ë¶ˆê°€í”¼í•˜ê²Œ íŒ¨ìŠ¤ì›Œë“œ ì¬ì‚¬ìš©ì´ í•„ìš”í•  ê²½ìš° ìœ„ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.\nê·¸ëŸ¬ë‚˜ ë¬´ë¶„ë³„í•œ íŒ¨ìŠ¤ì›Œë“œ ì¬ì‚¬ìš©ì€ ë³´ì•ˆ ì·¨ì•½ì ì´ë‹¤.\në²ˆê±°ë¡­ë”ë¼ë„ ì™„ì „íˆ ìƒˆë¡œìš´ íŒ¨ìŠ¤ì›Œë“œë¡œ ê°±ì‹ í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ë©° ì •ìƒì ì¸ ì¡°ì¹˜ ë°©ë²•ì´ë‹¤.\n","date":"Sep 4, 2021","permalink":"/blog/tip-for-oracle-28007-the-password-cannot-be-reused/","section":"Blogs","summary":"ì¦ìƒ # DB ê³„ì •ì˜ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê°±ì‹ í•˜ëŠ” ìƒí™©ì—ì„œ ORA-28007: the password cannot be reused ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ì„œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê°±ì‹ í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.","title":"ORA-28007 ì¡°ì¹˜ë°©ë²•"},{"content":"ê°œìš” # ê°€ìƒë¨¸ì‹ ì— VMware Tools ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.\në°°ê²½ì§€ì‹ # VMware Tools # ê°€ìƒ ë¨¸ì‹ ì— ì„¤ì¹˜ëœ ê²ŒìŠ¤íŠ¸(Guest) ìš´ì˜ì²´ì œì˜ ì„±ëŠ¥ê³¼ ê°€ìƒ ë¨¸ì‹ ì˜ ê´€ë¦¬ ê¸°ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì†Œí”„íŠ¸ì›¨ì–´ ì§‘í•©ì´ë‹¤.\nVMware Tools ë°ëª¬ì€ ê°€ìƒë¨¸ì‹ ì˜ IP, Hostname ë“±ì˜ ì •ë³´ë¥¼ ìˆ˜ì§‘í•´ ê°€ìƒí™” ê´€ë¦¬ í”„ë¡œê·¸ë¨(vSphere Client)ì— í‘œì¶œí•´ì¤€ë‹¤.\nì›í™œí•œ ê°€ìƒí™” ì‹œìŠ¤í…œ ìš´ì˜ì„ ìœ„í•´ì„œ ëª¨ë“  ê°€ìƒë¨¸ì‹ ì— VMware Toolsë¥¼ ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤.\ní™˜ê²½ # ESXi : ESXi 5.x vSphere Client ê´€ë¦¬ì ê³„ì •ì— ë¡œê·¸ì¸ë˜ì–´ ìˆì–´ì•¼ í•¨ ê°€ìƒë¨¸ì‹ ì˜ ID : root ê°€ìƒë¨¸ì‹ ì˜ Shell : bash ì‘ì—…ì ˆì°¨ # 1. root ë¡œê·¸ì¸ # VMware Tools ì„¤ì¹˜ ì‘ì—…ì€ root ê³„ì •ìœ¼ë¡œë§Œ ê°€ëŠ¥í•˜ë‹¤. ê°€ìƒë¨¸ì‹ ì— ì ‘ì† í›„ root ê³„ì •ì— ë¡œê·¸ì¸í•œë‹¤.\n$ su - Password: [íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥] # 2. VMware Tools ì„¤ì¹˜ / ì—…ê·¸ë ˆì´ë“œ ë²„íŠ¼ í´ë¦­ # vSphere Client ì ‘ì† â†’ \u0026lsquo;ê°€ìƒë¨¸ì‹ \u0026rsquo; ì˜¤ë¥¸ìª½ ë§ˆìš°ìŠ¤ í´ë¦­ â†’ \u0026lsquo;VMware Tools ì„¤ì¹˜ / ì—…ê·¸ë ˆì´ë“œ\u0026rsquo; ë²„íŠ¼ í´ë¦­\n3. ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— CD-ROM mount # # mount /dev/cdrom /mnt mount: block device /dev/sr0 is write-protected, mounting read-only 4. VMware Tools ì„¤ì¹˜íŒŒì¼ ë³µì‚¬ # CD-ROM ì„ mountí•œ ê²½ë¡œì¸ /mnt ë¡œ ì´ë™í•œë‹¤.\n# cd /mnt # ls VMwareTools-9.0.10-1481436.tar.gz manifest.txt VMwareTools-9.0.10-1481436.tar.gz íŒŒì¼ì„ /tmp ë¡œ ë³µì‚¬í•œë‹¤.\n# cp VMwareTools-9.0.10-1481436.tar.gz /tmp 5. VMware Tools ì„¤ì¹˜íŒŒì¼ ì••ì¶•í•´ì œ # # tar -zxvf VMwareTools-9.0.10-1481436.tar.gz [...] vmware-tools-distrib/etc/scripts/vmware/ vmware-tools-distrib/etc/scripts/vmware/network 6. VMware Tools ì„¤ì¹˜ # VMware Tools ì„¤ì¹˜ì‹œ ë°©ë²•ì€ 2ê°€ì§€ê°€ ìˆë‹¤.\nê¸°ë³¸ ì„¤ì •ê°’(Default) ì„¤ì¹˜ ì»¤ìŠ¤í…€ ì„¤ì¹˜ ê°ì í™˜ê²½ì— ë§ê²Œ ì„¤ì¹˜í•œë‹¤. íŠ¹ë³„í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´, ì¼ë°˜ì ìœ¼ë¡œ ê¸°ë³¸ ì„¤ì •ê°’ ì„¤ì¹˜ë¥¼ í•´ë„ ëª¨ë‹ˆí„°ë§ ë° ì •ë³´ìˆ˜ì§‘ ê¸°ëŠ¥ì— ì „í˜€ ë¬¸ì œì—†ë‹¤.\në°©ë²•1. ê¸°ë³¸ ì„¤ì •ê°’(Default) ì„¤ì¹˜\n# cd /tmp/vmware-tools-distrib/ # ls FILES INSTALL bin doc etc installer lib vmware-install.pi # ./vmware-install.pi -default VMware Toolsë¥¼ ê¸°ë³¸ ì„¤ì •ê°’(-default)ìœ¼ë¡œ ì„¤ì¹˜í•œë‹¤.\në°©ë²•2. ì»¤ìŠ¤í…€ ì„¤ì¹˜\n# cd /tmp/vmware-tools-distrib/ # ls FILES INSTALL bin doc etc installer lib vmware-install.pi # ./vmware-install.pi ì„¤ì¹˜ ê³¼ì •ì—ì„œ ì—¬ëŸ¬ê°€ì§€ ì„¤ì¹˜í™˜ê²½ ê°’ë“¤ì„ ë¬¼ì–´ë³´ëŠ”ë°, ëª¨ë‘ ì—”í„°ë¥¼ ëˆŒëŸ¬ Default ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤.\n[...] Enjoy, --the VMware team Found VMware Tools CDROM mounted at /mnt. Ejecting device /dev/sr0 ... VMware Toolsê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ëì„ ë•Œ ë§ˆì§€ë§‰ ë¬¸êµ¬.\n7. VMware Tools ë™ì‘ì—¬ë¶€ í™•ì¸ # # ps -ef | grep vmtoolsd root 19777 1 0 13:17 ? 00:00:00 /usr/sbin/vmtoolsd VMware Tools ë°ëª¬(vmtoolsd)ì´ ì •ìƒ ì‹¤í–‰ì¤‘ì¸ ê±¸ í™•ì¸í•œë‹¤.\n# vmtoolsd -v VMware Tools daemon, version 9.0.10.29005 (build-1481436) VMware Tools ë°ëª¬ì´ ë²„ì „ ì •ë³´ë¥¼ ì •ìƒ ë°˜í™˜í•˜ëŠ” ê±° í™•ì¸.\nì‘ì—… ë!\nì°¸ê³ ìë£Œ # VMware Tools ì„¤ì¹˜\nìœ„ ë§í¬ëŠ” VMware ê³µì‹ë¬¸ì„œë¡œ í•œêµ­ì–´ë¡œ ì¹œì ˆí•˜ê²Œ ì‘ì„±ëœ ê°€ì´ë“œë‹¤.\nìœ„ ë‚´ìš©ë„ ê°™ì´ ì°¸ì¡°í•˜ë©´ ë¬¸ì œ í•´ê²°ì— ë„ì›€ì´ ëœë‹¤.\n","date":"Aug 30, 2021","permalink":"/blog/installing-vmware-tools/","section":"Blogs","summary":"ê°œìš” # ê°€ìƒë¨¸ì‹ ì— VMware Tools ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.","title":"VMware Tools ì„¤ì¹˜"},{"content":"í™˜ê²½ # OS : CentOS Linux release 8.3.2011 Shell : Bash Package : cockpit ì¦ìƒ # ì„œë²„ì— ë¡œê·¸ì¸í•  ë•Œë§ˆë‹¤ ì„¸ì…˜ì— ë¶ˆí•„ìš”í•œ Welcome Message ì¶œë ¥ëœë‹¤. Cockpit ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë‹ˆ ë©”ì„¸ì§€ë¥¼ í‘œì¶œë˜ì§€ ì•Šë„ë¡ ì˜êµ¬ ì‚­ì œí•œë‹¤.\nActivate the web console with: systemctl enable --now cockpit.socket [testserver ~]# ë°°ê²½ì§€ì‹ # Cockpit # Cockpitì˜ ì‚¬ì „ì  ì˜ë¯¸ëŠ” ë¹„í–‰ê¸° ì¡°ì¢…ì„ì„ ì˜ë¯¸í•œë‹¤.\në¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ Cockpit ì€ Fedora Project ì—ì„œ ë‚˜ì˜¨ ì›¹ UI ê¸°ë°˜ì˜ ëª¨ë‹ˆí„°ë§ ë° ê´€ë¦¬ íˆ´ì´ë‹¤.\nCockpitì„ ì´ìš©í•˜ë©´ ë³„ë„ í”„ë¡œê·¸ë¨ ì„¤ì¹˜ ì—†ì´ë„ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ì›ê²©ì ‘ì†í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ì°¸ê³ ë¡œ Cockpit Web Consoleì˜ ê¸°ë³¸í¬íŠ¸ëŠ” TCP 9090ì´ë‹¤.\nì„œë¹„ìŠ¤ ìµœì†Œí™”ì˜ ì›ì¹™ # ëª¨ë“  ì„œë²„ëŠ” ìµœì†Œí•œì˜ ì„œë¹„ìŠ¤ë¡œë§Œ ìš´ì˜ë˜ì–´ì•¼ í•œë‹¤. ì•„ë¬´ë¦¬ ê¸°ëŠ¥ì´ ìœ ìš©í•´ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì„œë¹„ìŠ¤ë¼ë©´ ë°˜ë“œì‹œ ë¹„í™œì„±í™”(Disable) ì¡°ì¹˜ë¥¼ í•œë‹¤. ì„œë¹„ìŠ¤ ìµœì†Œí™”ì˜ ëª©ì ì—ëŠ” í¬ê²Œ 2ê°€ì§€ê°€ ìˆë‹¤. ë³´ì•ˆ í–¥ìƒê³¼ ë¶ˆí•„ìš”í•œ ìì› ë‚­ë¹„ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ë‹¤.\në‚´ê°€ ê·¼ë¬´í•˜ëŠ” ë°ì´í„°ì„¼í„°ëŠ” ì´ ì›ì¹™ì„ ì§€í‚¤ê¸° ìœ„í•´ Cockpit ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.\ní•´ê²°ë²• # 1. motd ë””ë ‰í† ë¦¬ ì´ë™ # motdë€ message of the dayì˜ ì¤„ì„ë§ë¡œ ìœ ì €ê°€ ë¡œê·¸ì¸ì‹œ íŠ¹ì • ë©”ì‹œì§€ë¥¼ ë›°ìš°ëŠ”ê±¸ ë§í•œë‹¤. CentOSì—ì„œëŠ” /etc/motd íŒŒì¼ì— ì „ë‹¬í•  ë©”ì‹œì§€ë¥¼ ì ì–´ ë†“ëŠ”ë‹¤.\nmotd.d ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë³„ë¡œ motd ë©”ì„¸ì§€ë¥¼ ëª¨ì•„ë†“ì€ ë””ë ‰í† ë¦¬ì´ë‹¤.\n[testserver ~]# cd /etc/motd.d 2. motd íŒŒì¼ í™•ì¸ # motd.d ë””ë ‰í† ë¦¬ ì•ˆì— cockpit ë§í¬ íŒŒì¼ì´ ë“¤ì–´ìˆëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n[testserver motd.d]# ls lrwxrwxrwx. 1 root root 17. 8ì›” 25ì¼ 2020 cockpit -\u0026gt; /run/cockpit/motd 3. motd íŒŒì¼ ì‚­ì œ # [testserver motd.d]# rm -f cockpit [testserver motd.d]# rm -f : ì‚­ì œ ì—¬ë¶€ë¥¼ ë¬»ì§€ ì•Šê³  ê°•ì œ(force)ë¡œ íŒŒì¼ì„ ì‚­ì œí•œë‹¤.\n4. ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ # ë‹¤ì‹œ ë¡œê·¸ì¸í•´ë³´ë©´ Cockpit ê´€ë ¨ motd ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.\nLast login: Tue May 11 20:09:04 2021 from 10.10.10.10 [testserver ~]$ ì°¸ê³ ìë£Œ # https://www.programmersought.com/article/14417225140/\n","date":"Aug 23, 2021","permalink":"/blog/disabling-motd-of-cockpit/","section":"Blogs","summary":"í™˜ê²½ # OS : CentOS Linux release 8.","title":"Cockpit ë¡œê·¸ì¸ ë©”ì„¸ì§€ ë¹„í™œì„±í™”"},{"content":"ê°œìš” # Brocade ì œì¡°ì‚¬ì˜ SAN Switch ì¥ë¹„ì—ì„œ Zoning ì„¤ì • í›„ ì ìš©í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # Model : Brocade DS6510 Kernel : 2.6.14.2 Fabric OS : v8.0.2d ì ˆì°¨ # 1. ì¥ë¹„ ì ‘ì† # Serial Cable ì„ ì´ìš©í•œ ì—°ê²° ë˜ëŠ” SSH ê¸°ë³¸í¬íŠ¸(TCP/22)ë¡œ ì ‘ì†í•œë‹¤.\n2. Alias ìƒì„± # Alias ìƒì„± ì‘ì—…ì€ í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ, ê´€ë¦¬ì ë©”ë‰´ì–¼ ê¸°ì¤€ìœ¼ë¡œ ë§¤ìš° ê¶Œì¥ë˜ëŠ” ì ˆì°¨ë‹¤.\nì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ê²Œ Zoneì— ì†í•œ êµ¬ì„± ì¥ë¹„ë“¤ì˜ ì´ë¦„ì„ ì ì–´ë†“ëŠ” ì ˆì°¨ì´ê¸° ë•Œë¬¸ì´ë‹¤.\nAlias : Switch ì˜ Port ë²ˆí˜¸ í˜¹ì€ WWN ì„ ì•Œê¸°ì‰½ê²Œ ë³„ì¹­(Alias)ìœ¼ë¡œ ì§€ì •í•˜ì—¬, Zone Memberì˜ í™•ì¸ì„ ì‰½ê²Œ í•©ë‹ˆë‹¤. \u0026gt; alicreate \u0026#34;WEBWAS1_P2\u0026#34;, \u0026#34;21:00:00:24;ff:33:a3:4c\u0026#34; 3. Zone ìƒì„± # \u0026gt; zonecreate \u0026#34;WEBWAS1_P2_SN87118_S5_P1_V_SN87119_S5_P1_V\u0026#34;, \u0026#34;WEBWAS1_P2; SN87118_S5_P1_V; SN87119_S5_P1_V\u0026#34; 4. cfg ì¶”ê°€ # ëª…ë ¹ì–´ í˜•ì‹\n\u0026gt; cfgadd \u0026#34;\u0026lt;config_name\u0026gt;\u0026#34;, \u0026#34;\u0026lt;zone_name\u0026gt;; \u0026lt;zone_name\u0026gt;; ...; \u0026lt;zone_name\u0026gt;\u0026#34; ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” configì— ìƒˆë¡œ ë§Œë“  zoneì„ ì¶”ê°€í•œë‹¤. ì—¬ê¸°ì„œ cfgëŠ” ì„¤ì •(Configuration)ì„ ì˜ë¯¸í•œë‹¤.\nëª…ë ¹ì–´ ì˜ˆì‹œ\n\u0026gt; cfgadd \u0026#34;ds6510_top_cfg\u0026#34;, \u0026#34;WEBWAS1_P2_SN87118_S5_P1_V_SN87119_S5_P1_V\u0026#34; 5. ì„¤ì • ì €ì¥ # ì„¤ì •ì„ ì €ì¥í•œë‹¤.\n\u0026gt; cfgsave [...] Do you want to save the Defined zoning configuration only? (yes, y, no, n): [no] cfgsave ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šì„ ê²½ìš°, íœ˜ë°œì„± ì˜ì—­ì— Configê°€ ì¡´ì¬í•˜ë¯€ë¡œ Switch ë¦¬ë¶€íŒ… ì‹œ ì„¤ì •í•œ Zone ì •ë³´ê°€ ì‚¬ë¼ì§€ë¯€ë¡œ ì£¼ì˜í•œë‹¤.\n6. cfg ì ìš© # \u0026gt; cfgenable \u0026#34;ds6510_top_cfg\u0026#34; ","date":"Aug 23, 2021","permalink":"/blog/configuring-zoning-on-brocade-fc-switch-using-ds6510/","section":"Blogs","summary":"ê°œìš” # Brocade ì œì¡°ì‚¬ì˜ SAN Switch ì¥ë¹„ì—ì„œ Zoning ì„¤ì • í›„ ì ìš©í•  ìˆ˜ ìˆë‹¤.","title":"Brocade DS6510ì—ì„œ Zoning ì„¤ì •í•˜ê¸°"},{"content":"ê°œìš” # CentOS 7 + HP ProLiant ì„œë²„ ì¡°í•©ì— ssacli(Smart Storage Administrator CLI) íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤. ssacli(Smart Storage Administrator CLI) ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ RAID êµ¬ì„±ì •ë³´ì™€ ë””ìŠ¤í¬ ìš©ëŸ‰, RPM, Serial Number ë“±ì˜ ë””ìŠ¤í¬ ìƒì„¸ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í™˜ê²½ # OS : CentOS Linux release 7.6.1810 (Core) Kernel : 3.10.0 Shell : bash ì ˆì°¨ # 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ ë‹¤ìš´ë¡œë“œ # hpssacli\nHPE SSA CLI(HPE Smart Storage Administrator CLI)ëŠ” HPE Smart Arrays ì»¨íŠ¸ë¡¤ëŸ¬ ë° HPE SAS HBAë¥¼ ì‹ ì†í•˜ê²Œ ì„¤ì¹˜, êµ¬ì„± ë° ê´€ë¦¬í•˜ëŠ” ë‹¨ì¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” Storage ê´€ë¦¬ í”„ë¡œê·¸ë¨ì´ë‹¤.\nì¤„ì—¬ì„œ hpssacli ë¼ê³  ë¶€ë¥¸ë‹¤.\nì„¤ì¹˜íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë§í¬\nHPE Software Delivery Repository\në‚´ ê²½ìš°ëŠ” https://downloads.linux.hpe.com/SDR/repo/mcp/centos/8/x86_64/current/ ì— ìœ„ì¹˜í•œ ssacli-4.17-6.0.x86_64.rpm 15MB ìš©ëŸ‰ì˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì•˜ë‹¤.\nê° ì„œë²„ì˜ ìš´ì˜ì²´ì œ, CPU ì•„í‚¤í…ì³ê°€ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì— ë³¸ì¸ì˜ í™˜ê²½ì— ë§ê²Œ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì•„ì„œ ë‹¤ìš´ë¡œë“œ ë°›ëŠ”ë‹¤.\nì´ ê¸€ì—ì„œ ìš´ì˜ì²´ì œì™€ CPU ì•„í‚¤í…ì³ì˜ ì¢…ë¥˜ ë° í™•ì¸ë°©ë²•ê¹Œì§€ëŠ” ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.\n2. íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ ì—…ë¡œë“œ # FTP ë˜ëŠ” SFTPë¥¼ ì´ìš©í•´ ì„œë²„ì— íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤.\n$ pwd /root/rpms ë‚´ ê²½ìš° íŒ¨í‚¤ì§€ ì„¤ì¹˜íŒŒì¼ì˜ ì´ë¦„ì€ ssacli-4.17-6.0.x86_64.rpm ì´ë‹¤. ssacli v4.17 íŒ¨í‚¤ì§€ íŒŒì¼ì˜ ìš©ëŸ‰ì€ ì•½ 15MB ì´ë‹¤.\n$ ls -lh /root/rpms -rw-rw-r-- 1 testuser testuser 15M 8ì›” 3 10:41 ssacli-4.17-6.0.x86_64.rpm 3. ssacli ì„¤ì¹˜ # íŒ¨í‚¤ì§€ ì„¤ì¹˜\nRed Hat Enterprise Linuxì™€ CentOSì˜ ê²½ìš° íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¡œ rpmì„ ì‚¬ìš©í•œë‹¤.\níŒ¨í‚¤ì§€ ì„¤ì¹˜ ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ê¶Œí•œ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´, ë°˜ë“œì‹œ root ê³„ì •ìœ¼ë¡œ ì „í™˜í•œ í›„ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ëª…ë ¹ì–´ rpm -ivh \u0026lt;íŒ¨í‚¤ì§€ ì´ë¦„\u0026gt;.rpm ë¥¼ ì‹¤í–‰í•œë‹¤.\n$ rpm -ivh ssacli-4.17-6.0.x86_64.rpm ì¤€ë¹„ ì¤‘... ################################# [100%] Updating / installing... íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸\nì„¤ì¹˜ëœ ssacli RPM íŒ¨í‚¤ì§€ ì •ë³´ë¥¼ í™•ì¸í•œë‹¤.\n$ rpm -qi ssacli Name : ssacli Version : 4.17 Release : 6.0 Architecture: x86_64 Install Date: 2021ë…„ 08ì›” 03ì¼ (í™”) ì˜¤ì „ 10ì‹œ 47ë¶„ 35ì´ˆ Group : Applications/System Size : 42277683 License : See ssacli.license Signature : RSA/SHA256, 2020ë…„ 01ì›” 14ì¼ (í™”) ì˜¤ì „ 04ì‹œ 23ë¶„ 30ì´ˆ, Key ID cxxxaddexxcxbxxx Source RPM : ssacli-4.17-6.0.src.rpm Build Date : 2020ë…„ 01ì›” 14ì¼ (í™”) ì˜¤ì „ 04ì‹œ 26ë¶„ 18ì´ˆ Build Host : abls12ex6404.sde.rdlabs.hpecorp.net Relocations : (not relocatable) Packager : Hewlett Packard Enterprise Development LP Vendor : Hewlett Packard Enterprise Development LP URL : http://www.hpe.com Summary : Command Line Smart Storage Administrator Description : The Command Line Smart Storage Administrator is the storage management application suite for Proliant Servers. Description ë€ì—ëŠ” í•´ë‹¹ íŒ¨í‚¤ì§€ì— ëŒ€í•œ ê°„ëµí•  ì„¤ëª…ì´ ì í˜€ìˆë‹¤. HP ProLiant ëª¨ë¸ì— ì œê³µë˜ëŠ” ìŠ¤í† ë¦¬ì§€ ê´€ë¦¬ í”„ë¡œê·¸ë¨ì´ë¼ê³  í•œë‹¤.\n[...] Description : The Command Line Smart Storage Administrator is the storage management application suite for Proliant Servers. Smart Storage Administrator ëª¨ë“œ ì ‘ì†\n$ ssacli Smart Storage Administrator CLI 4.17.6.0 Detecting Controllers...Done. Type \u0026#34;help\u0026#34; for a list of supported commands. Type \u0026#34;exit\u0026#34; to close the console. =\u0026gt; SSA(Smart Storage Administrator) ëª¨ë“œì— ì ‘ì†í•˜ë©´ í”„ë¡¬í”„íŠ¸ê°€ =\u0026gt; ëª¨ì–‘ìœ¼ë¡œ ë°”ë€ë‹¤.\n4. RAID ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬ì„± ìƒíƒœ í™•ì¸ # ëª…ë ¹ì–´ í˜•ì‹\n=\u0026gt; ctrl all show config Shellì—ì„œ ssacli ëª¨ë“œì— ì ‘ì†í•˜ì§€ ì•Šê³  ssacli ëª…ë ¹ì–´ë¥¼ í•œ ë²ˆì— ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n$ ssacli ctrl all show config ëª…ë ¹ì–´ ê²°ê³¼\n=\u0026gt; ctrl all show config HPE Smart Array P408i-a SR Gen10 in Slot 0 (Embedded) (sn: PWXKVxxxHDKCQx) Internal Drive Cage at Port 1I, Box 1, OK Internal Drive Cage at Port 2I, Box 0, OK Port Name: 1I (Mixed) Port Name: 2I (Mixed) Array A (SAS, Unused Space: 0 MB) logicaldrive 1 (558.88 GB, RAID 1, OK) physicaldrive 1I:1:1 (port 1I:box 1:bay 1, SAS HDD, 600 GB, OK) physicaldrive 1I:1:2 (port 1I:box 1:bay 2, SAS HDD, 600 GB, OK) SEP (Vendor ID HPE, Model Smart Adapter) 379 (WWID: xxxxxEC0xxCxBAxx, Port: Unknown) 600GB ë¬¼ë¦¬ ë””ìŠ¤í¬ 2ê°œê°€ RAID 1ìœ¼ë¡œ êµ¬ì„±ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ëª¨ë“  ë””ìŠ¤í¬ ìƒíƒœëŠ” ì •ìƒ(OK)ì´ë‹¤.\n5. íŠ¹ì • PD(Physical Drive) ìƒíƒœ í™•ì¸ # ëª…ë ¹ì–´ í˜•ì‹\n=\u0026gt; ctrl slot=\u0026lt;slot_number\u0026gt; pd \u0026lt;PortNumber\u0026gt;:\u0026lt;BoxNumber\u0026gt;:\u0026lt;BayNumber\u0026gt; show ctrl all show config ëª…ë ¹ì–´ì—ì„œ í™•ì¸í•œ Port, Box, Bay ë²ˆí˜¸ë¥¼ í† ëŒ€ë¡œ íŠ¹ì • ë””ìŠ¤í¬ì˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ 1I:1:2 ì˜ ê²½ìš° 1I Port, 1ë²ˆ Box, 2ë²ˆ bayì— ì¥ì°©í•œ ë¬¼ë¦¬ ë””ìŠ¤í¬ì´ë‹¤.\nëª…ë ¹ì–´ ê²°ê³¼\n=\u0026gt; ctrl slot=0 pd 1I:1:1 show HPE Smart Array P408i-a SR Gen10 in Slot 0 (Embedded) Array A physicaldrive 1I:1:1 Port: 1I Box: 1 Bay: 1 Status: OK Drive Type: Data Drive Interface Type: SAS Size: 600 GB Drive exposed to OS: False Logical/Physical Block Size: 512/512 Rotational Speed: 10000 Firmware Revision: HPD2 Serial Number: xxUxAxELFFxF WWID: 00000000E000E000 Model: HP EG000600JWJNH Current Temperature (C): 37 Maximum Temperature (C): 42 PHY Count: 2 PHY Transfer Rate: 12.0Gbps, Unknown PHY Physical Link Rate: 12.0Gbps, Unknown PHY Maximum Link Rate: 12.0Gbps, 12.0Gbps Drive Authentication Status: OK Carrier Application Version: 11 Carrier Bootloader Version: 6 Sanitize Erase Supported: True Sanitize Estimated Max Erase Time: 4 hour(s), 1 minute(s) Unrestricted Sanitize Supported: True Shingled Magnetic Recording Support: None Drive Unique ID: 00000000E000E000 ëª…ë ¹ì–´ ê²°ê³¼ì—ì„œ ì¸í„°í˜ì´ìŠ¤ ì¢…ë¥˜(Interace Type), ë””ìŠ¤í¬ ìš©ëŸ‰(Size), RPM(Rotational Speed), Serial Number, ì „ì†¡ì†ë„(PHY Transfer Rate) ë“± ìƒì„¸í•œ ì •ë³´ê¹Œì§€ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. ì‹¬ì§€ì–´ ë””ìŠ¤í¬ì˜ í˜„ì¬ ì˜¨ë„(Current Temperature)ê¹Œì§€ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.\n6. SSA ëª¨ë“œ ë‚˜ê°€ê¸° # exit ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì„œ SSA ëª¨ë“œë¥¼ ë¹ ì ¸ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤.\n=\u0026gt; exit $ ì´ê±¸ë¡œ SSA ì„¤ì¹˜ ë° ê°„ë‹¨ ì‚¬ìš©ë²•ì€ ìµí˜”ë‹¤.\nê²°ë¡  # ì„œë²„ ê´€ë¦¬ ì—…ë¬´ ì¤‘ ì¤‘ìš” í…ŒìŠ¤í¬ë¡œ ë½‘íˆëŠ” ê²ƒ ì¤‘ í•˜ë‚˜ëŠ” ì„œë²„ì˜ ë¬¼ë¦¬ ë””ìŠ¤í¬ ë° RAID êµ¬ì„± ê´€ë¦¬ì´ë‹¤.\nHPEì—ì„œ ë§Œë“  ì„œë²„ì˜ ê²½ìš°, SSA CLIë¥¼ í†µí•´ ë””ìŠ¤í¬ ì œì›ê³¼ ìƒíƒœ, RAID ìƒíƒœë¥¼ ìì„¸íˆ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në¬´ì—‡ë³´ë‹¤ ssacli ëª…ë ¹ì–´ë¥¼ ì˜ í™œìš©í•˜ë©´ ì„œë²„ì— ê½‚íŒ ë””ìŠ¤í¬ ìˆ˜ëŸ‰ì´ë‚˜ ëª¨ë¸ëª…ì„ ì¡°ì‚¬í•˜ëŸ¬ ë°ì´í„°ì„¼í„°ì— ë“¤ì–´ê°ˆ ì¼ì´ ì—†ë‹¤.\nì´ ê¸€ì„ ì½ëŠ” ë¶„ë“¤ì€ ëŒ€ë¶€ë¶„ ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ë‚˜ ì–´ë“œë¯¼ì¼ ê²ƒ ê°™ì€ë°, ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ”ê±° ê¸°ì™•ì´ë©´ HPE ì„œë²„ì—ëŠ” ëª¨ë‘ SSA CLIë¥¼ ê¹”ì•„ë†“ë„ë¡ í•˜ì.\nì²˜ìŒì—” íŒ¨í‚¤ì§€ ì„¤ì¹˜ ê³¼ì •ì´ ê·€ì°®ê² ì§€ë§Œ, ì¥ê¸°ì  ê´€ì ì—ì„œ í›¨ì”¬ ì„œë²„ ê´€ë¦¬ê°€ í¸í•´ì§ˆ ê²ƒì´ë‹¤.\n","date":"Aug 3, 2021","permalink":"/blog/installing-hpssacli-on-centos7/","section":"Blogs","summary":"ê°œìš” # CentOS 7 + HP ProLiant ì„œë²„ ì¡°í•©ì— ssacli(Smart Storage Administrator CLI) íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤.","title":"CentOS 7ì—ì„œ hpssacli ì„¤ì¹˜ ë° ì‚¬ìš©ë²•"},{"content":"ê°œìš” # EMC Networker ì†”ë£¨ì…˜ì„ í†µí•´ ë°±ì—…ì„ ë°›ê¸° ìœ„í•´ ë°±ì—… ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux release 6.5 Shell : bash ì„¤ì¹˜ì ˆì°¨ # 1. rpm ì„¤ì¹˜íŒŒì¼ ì—…ë¡œë“œ # [root@testserver1 rpm]# ls lgtoclnt-18.2.0.5-1.x86_64.rpm lgtoxtdclnt-18.2.0.5-1.x86_64.rpm 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜ # ë°˜ë“œì‹œ lgtoclnt ë¥¼ ë¨¼ì € ì„¤ì¹˜í›„, lgtoxtdclnt ë¥¼ ì„¤ì¹˜í•´ì•¼ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœë‹¤.\nlgtoclnt íŒ¨í‚¤ì§€ ì„¤ì¹˜\n[root@testserver1 rpm]# rpm -ivh lgtoclnt-18.2.0.5-1.x86_64.rpm warning: lgtoclnt-18.2.0.5-1.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID c5dfe03d: NOKEY Preparing... ########################################### [100%] 1:lgtoclnt ########################################### [100%] lgtoclnt íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆë‹¤.\nlgtoxtdclnt íŒ¨í‚¤ì§€ ì„¤ì¹˜\n[root@testserver1 rpm]# rpm -iv lgtoxtdclnt-18.2.0.5-1.x86_64.rpm warning: lgtoxtdclnt-18.2.0.5-1.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID c5dfe03d: NOKEY Preparing... ########################################### [100%] 1:lgtoxtdclnt ########################################### [100%] [root@testserver1 rpm]# lgtoxtdclnt íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆë‹¤.\n3. í˜¸ìŠ¤íŠ¸ íŒŒì¼ ìˆ˜ì • # /etc/hosts íŒŒì¼ì— ì¶”ê°€í•  ë‚´ìš©\në°±ì—… ê´€ë¦¬ì„œë²„ì˜ IP ì£¼ì†Œ, Hostname ìê¸° ìì‹ ì˜ IP ì£¼ì†Œ, Hostname [root@testserver1 rpm]# cat /etc/hosts 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 [...] ### EMC NETWORKER ### 1.1.1.1 testserver1 2.2.2.2 BACKUP_MANAGEMENT_SERVER_HOSTNAME 4. NetWorker ì„œë¹„ìŠ¤ ì‹œì‘ # [root@testserver1 ~]# service networker start [root@testserver1 ~]# 5. NetWorker í”„ë¡œì„¸ìŠ¤ í™•ì¸ # [root@testserver1 ~]# ps -ef | grep nsr root 53433 1 0 13:14 ? 00:00:00 /usr/sbin/nsrexecd NetWorker ë°ëª¬ì¸ nsrexecd í”„ë¡œì„¸ìŠ¤ê°€ êµ¬ë™ì¤‘ì´ë‹¤.\n","date":"Jul 31, 2021","permalink":"/blog/installing-emc-network-on-linux/","section":"Blogs","summary":"ê°œìš” # EMC Networker ì†”ë£¨ì…˜ì„ í†µí•´ ë°±ì—…ì„ ë°›ê¸° ìœ„í•´ ë°±ì—… ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.","title":"ë¦¬ëˆ…ìŠ¤ì—ì„œ EMC Networker ì—ì´ì „íŠ¸ ì„¤ì¹˜"},{"content":"ê°œìš” # HP-UX ìš´ì˜ì²´ì œì—ì„œ SSH root ë¡œê·¸ì¸ ê¸ˆì§€ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # OS : HP-UX B.11.31 Shell : sh (POSIX Shell) ì„¤ì •ë°©ë²• # 1. ì„¤ì •íŒŒì¼ í™•ì¸ # SSH ì„¤ì •íŒŒì¼ì˜ ê¸°ë³¸ ê²½ë¡œëŠ” /opt/ssh/etc/sshd_config ì´ë‹¤.\n$ vi /opt/ssh/etc/sshd_config [...] PermitRootLogin yes PermitRootLogin yes ë¥¼ no ë¡œ ë³€ê²½\n$ vi /opt/ssh/etc/sshd_config [...] PermitRootLogin no 2. SSH ì„œë¹„ìŠ¤ ì¤‘ì§€ # ë³€ê²½ëœ SSH ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œ SSH ì„œë¹„ìŠ¤(secsh)ë¥¼ ì¤‘ì§€í•œ í›„, ë‹¤ì‹œ ê¸°ë™ì‹œí‚¨ë‹¤.\nSSHë¥¼ ì¤‘ì§€í•˜ë”ë¼ë„ ì´ë¯¸ ë¡œê·¸ì¸ ìƒíƒœì¸ ì›ê²© ì„¸ì…˜ì€ ëŠê¸°ì§€ ì•ŠëŠ”ë‹¤.\n$ /sbin/init.d/secsh stop HP-UX Secure Shell stopped 3. SSH ì„œë¹„ìŠ¤ ì‹œì‘ # SSH ì„œë¹„ìŠ¤(secsh)ë¥¼ ë‹¤ì‹œ ì‹œì‘í•œë‹¤.\n$ /sbin/init.d/secsh start HP-UX Secure Shell started 4. SSH ì„œë¹„ìŠ¤ í™•ì¸ # $ ps -ef | grep ssh ì°¸ê³ ìë£Œ # How to Disable Root SSH Login in HP-UX?\n","date":"Jul 31, 2021","permalink":"/blog/disabling-direct-root-login-in-hp-ux/","section":"Blogs","summary":"ê°œìš” # HP-UX ìš´ì˜ì²´ì œì—ì„œ SSH root ë¡œê·¸ì¸ ê¸ˆì§€ ì„¤ì •ì„ í•  ìˆ˜ ìˆë‹¤.","title":"HP-UX root ì§ì ‘ ë¡œê·¸ì¸ ê¸ˆì§€"},{"content":"ê°œìš” # history ëª…ë ¹ì–´ ì‹¤í–‰ì‹œ ë‚ ì§œì™€ ì‹œê°„ì„ í‘œì‹œí•´ì£¼ë„ë¡ ì„¤ì •í•œë‹¤.\nhistory ëª…ë ¹ì–´ì— ì‹œê°„ì´ í‘œì‹œë  ë•Œ ì¥ì \níŠ¹ì • ì„œë²„ë¥¼ ìœ ì§€ ê´€ë¦¬í•˜ëŠ” ì‚¬ëŒì´ 1ëª…ì´ ì•„ë‹Œ ì—¬ëŸ¬ ëª…ì¸ ê²½ìš° ê° ê³„ì •ë§ˆë‹¤ ëª…ë ¹ì–´ê°€ ì–¸ì œ ìˆ˜í–‰ë˜ì—‡ëŠ”ì§€ ë³¼ ìˆ˜ ìˆë‹¤.\nì„œë²„ë¥¼ í˜¼ì ê´€ë¦¬í•˜ë”ë¼ë„ ì‹œìŠ¤í…œ ê´€ë¦¬ì ìŠ¤ìŠ¤ë¡œê°€ ì–¸ì œ ë¬´ì—‡ì„ í•˜ê±°ë‚˜ ë³€ê²½í–ˆëŠ”ì§€ ì •í™•íˆ ê¸°ì–µí•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì— íŠ¹íˆ ìœ ìš©í•˜ë‹¤.\ní™˜ê²½ # OS : Red Hat Enterprise Linux Server release 6.2 (Santiago) Architecture : x86_64 Shell : bash ì¡°ì¹˜ë°©ë²• # 1. ì„¤ì •íŒŒì¼ ìˆ˜ì • # $ vi /etc/profile [...] HISTTIMEFORMAT=\u0026#34;[%F %T] \u0026#34; export HISTTIMEFORMAT ì„¤ì •ê°’ í•´ì„\nHISTTIMEFORMAT : history ëª…ë ¹ì–´ì˜ ì‹œê°„ê°’ì— ëŒ€í•œ ë¯¸ë¦¬ ì§€ì •ëœ í™˜ê²½ë³€ìˆ˜ ì´ë¦„ %F : ë‚ ì§œ (ë…„-ì›”-ì¼) %T : ì‹œê°„ (ì‹œ:ë¶„:ì´ˆ) /etc/profile\nì‹œìŠ¤í…œ ì‚¬ìš©ì ì „ì²´ì— ì ìš©í•  Shell í™˜ê²½ ë³€ìˆ˜ë¥¼ ë‹´ê³  ìˆëŠ” ì„¤ì •íŒŒì¼. /etc/profileì˜ ì ìš© ëŒ€ìƒì€ ëª¨ë“  ì‚¬ìš©ìì´ë©° ì‹œìŠ¤í…œì— ë¡œê·¸ì¸í•  ë•Œë§ˆë‹¤ /etc/profileì„ ì½ì–´ë“¤ì´ë©° ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.\n2. ì„¤ì •íŒŒì¼ ì ìš© # HISTTIMEFORMAT ë³€ìˆ˜ë¥¼ ì¶”ê°€í•œ ë‚´ìš©ì„ /etc/profileì— ë°”ë¡œ ì ìš©ì‹œí‚¨ë‹¤.\n$ source /etc/profile 3. ë¡œê·¸ì•„ì›ƒ # ë³€ê²½ëœ ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš© ì¤‘ì¸ ê³„ì •ì„ ë¡œê·¸ì•„ì›ƒí•œë‹¤.\n$ logout 4. í…ŒìŠ¤íŠ¸ # $ history [...] 504 [2015-01-07 15:17:58] ls 505 [2015-01-07 15:18:07] source /etc/profile 506 [2015-01-07 15:18:10] history history ëª…ë ¹ì–´ ì‹¤í–‰ì‹œ ì™¼ìª½ì— ëª…ë ¹ì–´ê°€ ì‹¤í–‰ëœ ë‚ ì§œì™€ ì‹œê°„ì´ í‘œì‹œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì°¸ê³ ìë£Œ # https://www.hahwul.com/2015/01/07/history-view-date-and-time-in-history/\nhttps://www.geeksforgeeks.org/histtimeformat-variable-in-linux-with-example/\n","date":"Jul 31, 2021","permalink":"/blog/enabling-history-timestamp-in-linux/","section":"Blogs","summary":"ê°œìš” # history ëª…ë ¹ì–´ ì‹¤í–‰ì‹œ ë‚ ì§œì™€ ì‹œê°„ì„ í‘œì‹œí•´ì£¼ë„ë¡ ì„¤ì •í•œë‹¤.","title":"ë¦¬ëˆ…ìŠ¤ historyì— ì‹œê°„ í‘œì‹œ"},{"content":"ê°œìš” # hugo ê¸°ë°˜ì˜ ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.\ní™˜ê²½ # Hardware : MacBook Pro (13-inch, M1, 2020) OS : macOS Big Sur 11.5 Shell : zsh Hugo : hugo v0.86.0+extended darwin/arm64 (brewë¥¼ ì´ìš©í•´ì„œ ì„¤ì¹˜) brew : Homebrew 3.2.5 ì „ì œì¡°ê±´ # íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” macOS í™˜ê²½\nGithub ê³„ì •\në¸”ë¡œê·¸ ë§Œë“œëŠ” ë°©ë²• # 1. ë ˆí¬ì§€í„°ë¦¬ ìƒì„± # ë¸”ë¡œê·¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ë ˆí¬ì§€í„°ë¦¬ 2ê°œë¥¼ ìƒˆë¡œ ìƒì„±í•œë‹¤.\nì™œ ë¸”ë¡œê·¸ë¥¼ ìš´ì˜í•˜ëŠ” ë°ì— ë ˆí¬ì§€í„°ë¦¬ê°€ 2ê°œë‚˜ í•„ìš”í• ê¹Œ. ê°œë°œìš© ë ˆí¬ì§€í„°ë¦¬ëŠ” ë§ ê·¸ëŒ€ë¡œ ì†ŒìŠ¤ ì›ë³¸ ì €ì¥ ë° ê´€ë¦¬ìš©ì´ë©°, ì„œë¹„ìŠ¤ìš© ë ˆí¬ì§€í„°ë¦¬ëŠ” ê°œë°œìš© ë ˆí¬ì§€í„°ë¦¬ë¥¼ ë¹Œë“œí•œ ê²°ê³¼ë¬¼ì´ ë‹´ê¸´ ë ˆí¬ì§€í„°ë¦¬ì´ë‹¤.\nì‚¬ì‹¤ ê°œë°œìš© ë ˆí¬ì§€í„°ë¦¬ë¥¼ ê¼­ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ ë¸”ë¡œê·¸ëŠ” ìš´ì˜ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ë‘˜ ë‹¤ ì¼ê´„ì ìœ¼ë¡œ Github ë ˆí¬ì§€í„°ë¦¬ë¡œ ê´€ë¦¬í•˜ë©´ í¸í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ëŒ€í‘œì ì¸ ì¥ì ìœ¼ë¡œ ê°œë°œìš© ë ˆí¬ì§€í„°ë¦¬ì˜ Commit logë¥¼ ë³´ë©´ì„œ ë¸”ë¡œê·¸ ì‘ì—…ì´ë‚˜ ê¸€ ì‘ì„±, ë³€ê²½ì— ëŒ€í•œ ì´ë ¥ë„ ì¶”ì  ê°€ëŠ¥í•˜ë‹¤.\nê°œë°œìš©(Development) ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„ : blog\nì„œë¹„ìŠ¤ìš©(Production) ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„ : iiivvveee.github.io\n(ë³¸ì¸ì˜ Github usernameì„ ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„ ë§¨ ì•ì— ë„£ì–´ì¤€ë‹¤. Github ìœ ì €ë„¤ì„ì´ seysleeì¼ ê²½ìš°, ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„ì€ seyslee.github.ioê°€ ëœë‹¤.)\n2. Hugo ì„¤ì¹˜ # Hugo ë¸”ë¡œê·¸ë¥¼ ìƒì„±í•˜ë ¤ë©´ hugo ë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ì•¼í•œë‹¤.\nmacOSìš© íŒ¨í‚¤ì§€ ê´€ë¦¬ìì¸ Homebrewë¥¼ ì‚¬ìš©ì¤‘ì´ë¼ë©´ ì•„ë˜ ëª…ë ¹ì–´ í•œ ì¤„ë¡œ ì‰½ê²Œ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë‹¤.\në§Œì•½ Homebrewê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ brew ê³µì‹í™ˆí˜ì´ì§€ë¥¼ ë°©ë¬¸í•´ì„œ ì„¤ì¹˜í•œë‹¤.\nbrewë¥¼ ì´ìš©í•œ hugo ì„¤ì¹˜\n$ brew install hugo hugo ë²„ì „ í™•ì¸\nì •ìƒì ìœ¼ë¡œ hugoê°€ ì„¤ì¹˜ê°€ ë˜ì—ˆë‹¤ë©´ hugoì˜ ë²„ì „ì´ ì¶œë ¥ë˜ì–´ì•¼ í•œë‹¤.\n$ hugo version hugo v0.86.0+extended darwin/arm64 BuildDate=unknown 3. ì‚¬ì´íŠ¸ ìƒì„± # í”„ë¡œì íŠ¸ í´ë”ë¥¼ ë§Œë“¤ ê²½ë¡œë¡œ ì´ë™í•œë‹¤.\në‚´ ê²½ìš°ëŠ” github_repos ë¼ëŠ” í´ë” ì•ˆì— ëª¨ë“  ë ˆí¬ì§€í„°ë¦¬ë¥¼ ê´€ë¦¬í•˜ëŠ” êµ¬ì„±ì´ê¸° ë•Œë¬¸ì— github_repos í´ë” ì•ˆì— blog í´ë”ë¥¼ ë”°ë¡œ ìƒì„±í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.\ní˜„ì¬ ì‘ì—… êµ¬ì„±ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n$ pwd /Users/ive/github_repos ## íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë³¸ í”„ë¡œì íŠ¸ ê²½ë¡œ / â””â”€â”€ Users â””â”€â”€ ive â””â”€â”€ github_repos â””â”€â”€ blog \u0026lt;== ë‚´ê°€ ìƒˆë¡œ ë§Œë“¤ ë¸”ë¡œê·¸ í´ë” ì‚¬ì´íŠ¸ ìƒì„± ëª…ë ¹ì–´ í˜•ì‹\n$ hugo new site \u0026lt;í”„ë¡œì íŠ¸ ì´ë¦„(í´ë”ëª…)\u0026gt; ë‚´ê°€ ì‹¤í–‰í•œ ëª…ë ¹ì–´\nì‚¬ì´íŠ¸ ìƒì„± ì „ì— í˜„ì¬ ì‘ì—…ê²½ë¡œë¥¼ ë¯¸ë¦¬ í™•ì¸í•œë‹¤.\n$ pwd /Users/ive/github_repos ì‚¬ì´íŠ¸ ìƒì„±\nblogë¼ëŠ” ì´ë¦„ì˜ ë””ë ‰í† ë¦¬ë¥¼ í˜„ì¬ ê²½ë¡œì— ìƒì„±í•˜ê³ , í•´ë‹¹ ë””ë ‰í† ë¦¬ ì•ˆì— ë¸”ë¡œê·¸ í™˜ê²½ì„ ìë™ êµ¬ì„±í•œë‹¤.\n$ hugo new site blog Congratulations! Your new Hugo site is created in /Users/ive/github_repos/blog. Just a few more steps and you\u0026#39;re ready to go: 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026#34;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026#34; command. 2. Perhaps you want to add some content. You can add single files with \u0026#34;hugo new \u0026lt;SECTIONNAME\u0026gt;/\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026#34;. 3. Start the built-in live server via \u0026#34;hugo server\u0026#34;. Visit https://gohugo.io/ for quickstart guide and full documentation. Congratulations!ë©”ì„¸ì§€ê°€ ë‚˜ì˜¤ê³  ì •ìƒì ìœ¼ë¡œ blog í´ë”ê°€ ìƒì„±ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n$ pwd /Users/ive/github_repos $ ls PycharmProjects nodejs-with-docker-toyproj blog ps gs-gradle seyslee jenkins-pipeline-toyproj í˜„ì¬ ê²½ë¡œì— blog ë””ë ‰í† ë¦¬ê°€ ìƒˆë¡œ ìƒì„±ë˜ì—ˆë‹¤!\n4. í…Œë§ˆ ë‹¤ìš´ë¡œë“œ # í˜„ì¬ ë¸”ë¡œê·¸ í…Œë§ˆëŠ” hugo-theme-codexë¥¼ ì‚¬ìš© ì¤‘ì´ë‹¤.\në¸”ë¡œê·¸ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™í•œ í›„ git init ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ ë¸”ë¡œê·¸ í´ë”ì— git í™˜ê²½ì„ êµ¬ì„±í•œë‹¤.\n$ pwd /Users/ive/github_repos/blog $ git init ì„œë¸Œëª¨ë“ˆ(Submodule)ì˜ ê°œë…\nGitì˜ ì„œë¸Œëª¨ë“ˆ(Submodule)ì´ë€ í•˜ë‚˜ì˜ ì €ì¥ì†Œ(Repository) ì•ˆì— ìˆëŠ” ë˜ ë‹¤ë¥¸ ë³„ê°œì˜ ì €ì¥ì†Œì´ë‹¤. ë³´í†µ ë‹¤ë¥¸ ì›ê²© ì €ì¥ì†Œë¥¼ ê°€ì ¸ì™€(Pull) ì„œë¸Œëª¨ë“ˆë¡œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.\ní…Œë§ˆ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œë¥¼ ì„œë¸Œëª¨ë“ˆë¡œ ê°€ì ¸ì˜¤ê¸°\nì•„ë˜ ëª…ë ¹ì–´ëŠ” hugo-theme-codex í…Œë§ˆ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œë¥¼ ë‚´ ì €ì¥ì†Œ ë‚´ ì„œë¸Œëª¨ë“ˆë¡œ ê°€ì ¸ì˜¤ëŠ” ëª…ë ¹ì–´ì´ë‹¤.\n$ git submodule add https://github.com/jakewies/hugo-theme-codex.git themes/hugo-theme-codex . â”œâ”€â”€ archetypes â”œâ”€â”€ content â”œâ”€â”€ data â”œâ”€â”€ layouts â”œâ”€â”€ resources â”œâ”€â”€ static â””â”€â”€ themes â””â”€â”€ hugo-theme-codex \u0026lt;===[submodule]=== https://github.com/jakewies/hugo-theme-codex git submoduleÂ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ submodule ëª©ë¡ì´ ìƒì„±ëœ ê±¸ í™•ì¸í•œë‹¤.\n$ git submodule 9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da themes/hugo-theme-codex (v1.6.0) ì„¤ì •íŒŒì¼(config.toml) ìƒì„±\nê·¸ ë‹¤ìŒ themes/hugo-theme-codex/exampleSite/config.toml íŒŒì¼ì„ ë³µì‚¬í•´ ì´ˆê¸°ì— ìƒì„±ëœ config.toml ì— ë®ì–´ì“´ë‹¤.\n. â”œâ”€â”€ archetypes â”œâ”€â”€ config.toml \u0026lt;== ì´ˆê¸°ì— ìƒì„±ëœ config.toml [...] â””â”€â”€ themes â””â”€â”€ hugo-theme-codex â””â”€â”€ exampleSite â””â”€â”€ config.toml \u0026lt;== ë³µì‚¬í•  config.toml êµì²´í•œ config.toml ì„¤ì •íŒŒì¼ì„ ì—´ì–´ë³´ë©´ ë§¨ ìœ—ì¤„ì— themesDir ê°’ì´ ìˆë‹¤.\nì´ ë¼ì¸ê³¼ ì£¼ì„ì„ ì‚­ì œí•˜ê³  ì €ì¥í•œë‹¤.\n# REMOVE THIS themesDir = \u0026#34;../../\u0026#34; ì¶”ê°€ì ì¸ ë¸”ë¡œê·¸ ì„¤ì • ë³€ê²½ì€ hugo-theme-codex ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•œë‹¤.\nindex í˜ì´ì§€ ì„¤ì •\ncontent/_index.md íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì‚¬ì´íŠ¸ì˜ ì´ˆê¸°í™”ë©´(index) í˜ì´ì§€ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.\n.md í™•ì¥ìëŠ” markdown íŒŒì¼ì„ ì˜ë¯¸í•œë‹¤.\n_index.mdíŒŒì¼ ìœ„ì¹˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n. â”œâ”€â”€ archetypes â”œâ”€â”€ config.toml [...] â””â”€â”€ content â””â”€â”€ _index.md \u0026lt;== ë©”ì¸ í˜ì´ì§€ ì„¤ì •íŒŒì¼ _index.md íŒŒì¼ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.\n--- heading: \u0026#34;Hi, I\u0026#39;m Codex\u0026#34; subheading: \u0026#34;A minimal blog theme for hugo.\u0026#34; handle: \u0026#34;hugo-theme-codex\u0026#34; --- ì´í›„ ë³¸ì¸ì˜ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •í•œë‹¤.\n--- heading: \u0026#34;Younsung Lee\u0026#34; subheading: \u0026#34;ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´\u0026#34; handle: \u0026#34;seyslee\u0026#34; --- í…ŒìŠ¤íŠ¸\n$ hugo server -D hugo server : ìƒì„±í•œ í˜ì´ì§€ë¥¼ ë¹Œë“œí•˜ê¸° ì „, localhost ì—ì„œ ë¯¸ë¦¬ í™•ì¸í•´ë³´ê¸° ìœ„í•œ ì›¹ì„œë²„ ì‹¤í–‰ ëª…ë ¹ì–´.\n-D : draft ì†ì„±ì´ true ì¸ ê¸€ë„ ë³´ì´ë„ë¡ í•˜ëŠ” ì˜µì…˜ Start building sites â€¦ hugo v0.86.0+extended darwin/arm64 BuildDate=unknown | EN -------------------+----- Pages | 23 Paginator pages | 0 Non-page files | 0 Static files | 12 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Built in 19 ms Watching for changes in /Users/ive/github_repos/blog/{archetypes,content,data,layouts,static,themes} Watching for config changes in /Users/ive/github_repos/blog/config.toml Environment: \u0026#34;development\u0026#34; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop ë§ˆì§€ë§‰ì— Web Server is available at http://localhost:1313/ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë˜ë©´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœ ê²ƒì´ë‹¤.\nì¸í„°ë„· ë¸Œë¼ìš°ì €ë¥¼ ì—´ì–´ http://localhost:1313/ ìœ¼ë¡œ ì ‘ì†í•œë‹¤. Index í˜ì´ì§€ê°€ ì˜ ìˆ˜ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.\ní˜ì´ì§€ í™•ì¸ì„ ë§ˆì¹œ í›„ì— Ctrl + C í‚¤ë¥¼ ëˆŒëŸ¬ ê°œë°œí™˜ê²½ì˜ ì›¹ ì„œë²„ë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆë‹¤.\n5. ë¦¬ëª¨íŠ¸ ì¶”ê°€ # ëª…ë ¹ì–´ í˜•ì‹\n$ git remote add origin \u0026lt;ë¸”ë¡œê·¸ ì‘ì„±ìš© ë ˆí¬ì§€í„°ë¦¬ì˜ URL\u0026gt; git remote : í˜„ì¬ í”„ë¡œì íŠ¸ì— ë“±ë¡ëœ ë¦¬ëª¨íŠ¸ ì €ì¥ì†Œë¥¼ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´. ì´ ëª…ë ¹ì–´ëŠ” ë¦¬ëª¨íŠ¸ ì €ì¥ì†Œì˜ ë‹¨ì¶• ì´ë¦„ì„ ë³´ì—¬ì¤€ë‹¤. ë ˆí¬ì§€í„°ë¦¬ë¥¼ ë³µì œ(Clone)í•˜ë©´ originì´ë¼ëŠ” ë¦¬ëª¨íŠ¸ ì €ì¥ì†Œê°€ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ê¸° ë•Œë¬¸ì— originì´ë¼ëŠ” ì´ë¦„ì„ ë³¼ ìˆ˜ ìˆë‹¤.\norigin : ì¶•ì•½í˜• ì´ë¦„ì„ ë§í•œë‹¤.\në¸”ë¡œê·¸ ì‘ì„±ìš© ë ˆí¬ì§€í„°ë¦¬ì˜ URL : https://github.com/\u0026lt;Github ìœ ì €ë„¤ì„\u0026gt;/\u0026lt;ë¸”ë¡œê·¸ìš© ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„\u0026gt;\në‚´ê°€ ì‹¤í–‰í•œ ëª…ë ¹ì–´\ní•„ìì˜ ê²½ìš° Github ìœ ì €ë„¤ì„ëŠ” iiivvveee, ë¸”ë¡œê·¸ ì‘ì„±ìš© ë ˆí¬ì§€í„°ë¦¬ì˜ ì´ë¦„ì€ blogì´ë‹¤.\nê·¸ ê²°ê³¼ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ ë¦¬ëª¨íŠ¸ë¥¼ ì¶”ê°€í–ˆë‹¤.\n$ git remote add origin https://github.com/iiivvveee/blog ^-------^ ^--^ | | | +--\u0026gt; ë¸”ë¡œê·¸ìš© ë ˆí¬ì§€í„°ë¦¬ ì´ë¦„ +---------\u0026gt; Github ìœ ì €ë„¤ì„ ë¦¬ëª¨íŠ¸ ì €ì¥ì†Œê°€ ì •ìƒì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ git remote -v ëª…ë ¹ì–´ë¡œ í™•ì¸í•œë‹¤.\n-v ì˜µì…˜ì„ ì£¼ë©´ ë“±ë¡ëœ ë¦¬ëª¨íŠ¸ ì €ì¥ì†Œì˜ ì´ë¦„ê³¼ URLì„ ê°™ì´ ë³¼ ìˆ˜ ìˆë‹¤.\n$ git remote -v origin https://github.com/iiivvveee/blog (fetch) origin https://github.com/iiivvveee/blog (push) 6. ì„œë¸Œëª¨ë“ˆ ì¶”ê°€ # $ git submodule add -b master https://github.com/iiivvveee/iiivvveee.github.io.git public ì„œë¸Œëª¨ë“ˆì„ ì¶”ê°€í›„ ì •ìƒì ìœ¼ë¡œ ì ìš©ë˜ì—ˆëŠ”ì§€ git submodule ëª…ë ¹ì–´ë¡œ í™•ì¸í•œë‹¤.\n$ git submodule -a3a5abf8f39e7b6dcaf49431c90f4e963591e35d public 9e911e331c90fcd56ae5d01ae5ecb2fa06ba55da themes/hugo-theme-codex (v1.6.0) public í´ë”ê°€ submodule ë¡œ ì¶”ê°€ëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n7. í…ŒìŠ¤íŠ¸ # hugo server : ìƒì„±í•œ í˜ì´ì§€ë¥¼ ë¹Œë“œí•˜ê¸° ì „, localhost ì—ì„œ ë¯¸ë¦¬ í™•ì¸í•´ë³´ê¸° ìœ„í•œ ì›¹ì„œë²„ ì‹¤í–‰ ëª…ë ¹ì–´.\n-D : draft ì†ì„±ì´ true ì¸ ê¸€ë„ ë³´ì´ë„ë¡ í•˜ëŠ” ì˜µì…˜ $ hugo server -D Start building sites â€¦ hugo v0.86.0+extended darwin/arm64 BuildDate=unknown | EN -------------------+----- Pages | 10 Paginator pages | 0 Non-page files | 0 Static files | 12 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Built in 27 ms Watching for changes in /Users/ive/github_repos/blog/{archetypes,content,data,layouts,static,themes} Watching for config changes in /Users/ive/github_repos/blog/config.toml Environment: \u0026#34;development\u0026#34; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Hugo ì˜ ê¸°ë³¸í¬íŠ¸ëŠ” 1313 ì´ë‹¤. ì´ ë•Œ, Hugoì˜ ê°•ì ì¸ ë¹ ë¥¸ ì†ë„ê°€ ì²´ê°ëœë‹¤. Build í•˜ëŠ” ì‹œê°„ì´ ê²¨ìš° 27ms ë°–ì— ì•ˆê±¸ë¦°ë‹¤.\nChange detected, rebuilding site. 2021-07-31 01:36:42.676 +0900 Source changed \u0026#34;/Users/ive/github_repos/blog/content/blog/installing-hugo-github-blog.md\u0026#34;: CREATE Total in 7 ms ê°œë°œí™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë™ì•ˆ HugoëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ì„ ì²´í¬í•´ ë°˜ì˜í•˜ëŠ” ê¸°ëŠ¥ë„ ìˆë‹¤.\nhugo serverëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë³€ê²½í•œ ì‚¬í•­ì´ ìˆëŠ”ì§€ íŒŒì¼ì„ í•­ìƒ ê°ì‹œí•˜ê³  ì‚¬ì´íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì¬êµ¬ì¶•í•˜ëŠ” ê¸°ëŠ¥ì„ ê°–ê³  ìˆë‹¤.\nì¦‰, ë¸”ë¡œê·¸ì˜ ê²Œì‹œê¸€ì„ í•œ ê¸€ìë¼ë„ ìˆ˜ì •í•˜ë©´ ê·¸ ì¦‰ì‹œ hugo serverê°€ ìˆ˜ì •ì‚¬í•­ì„ ë°˜ì˜í•´ì„œ ë³€ê²½ëœ ì›¹ì‚¬ì´íŠ¸ë¡œ ë‹¤ì‹œ ë³´ì—¬ì¤€ë‹¤.\nê¸€ì„ ì‘ì„±í•˜ëŠ” ì‚¬ëŒì˜ ì…ì¥ì—ì„œ ë‚´ê°€ ì…ë ¥í•œ ë³€ê²½ì‚¬í•­ì„ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ì„œ ë§¤ìš° í¸ë¦¬í•˜ë‹¤.\në¸Œë¼ìš°ì €ë¥¼ í‚¤ê³  ì£¼ì†Œì°½ì— http://localhost:1313/ ì„ ì…ë ¥í•´ ì ‘ì†í•œë‹¤. ë‚´ê°€ ë§Œë“  ë¸”ë¡œê·¸ í™”ë©´ì´ ì˜ ë³´ì¼ ê²ƒì´ë‹¤.\n8. ê²Œì‹œê¸€ ì‘ì„± # ìƒˆ ê²Œì‹œê¸€ì„ ìƒì„±í•  ë•ŒëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.\nëª…ë ¹ì–´ í˜•ì‹\n$ hugo new blog/\u0026lt;ê²Œì‹œê¸€ ì´ë¦„\u0026gt;.md ì‹¤ì œ ì‹¤í–‰í•œ ëª…ë ¹ì–´\n$ hugo new blog/new-post.md /Users/ive/github_repos/blog/content/blog/new-post.md created ê²Œì‹œê¸€ì´ ìƒì„±ë˜ëŠ” ê²½ë¡œ\nhugo-theme-codex í…Œë§ˆ ê¸°ì¤€ìœ¼ë¡œ ê²Œì‹œê¸€ì€ ./content/blog/ ë””ë ‰í† ë¦¬ ì•„ë˜ì— ìƒì„±ë˜ì–´ì•¼ ì •ìƒì ìœ¼ë¡œ í‘œì¶œëœë‹¤.\ní…Œë§ˆë§ˆë‹¤ ê²Œì‹œê¸€ì´ ìœ„ì¹˜í•´ì•¼í•˜ëŠ” ê²½ë¡œëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. í…Œë§ˆ í˜ì´ì§€ì—ì„œ ì•ˆë‚´í•´ì£¼ëŠ” ê°€ì´ë“œ ë¬¸ì„œë¥¼ ì •ë…í•˜ê³  ê²Œì‹œê¸€ì„ í•´ë‹¹ ê²½ë¡œì— ë§ê²Œ ìƒì„±í•œë‹¤.\n. â”œâ”€â”€ archetypes â”œâ”€â”€ content â”‚ â””â”€â”€ blog â”‚ â””â”€â”€ new-post.md \u0026lt;== ìƒˆë¡œ ìƒì„±ëœ ê²Œì‹œê¸€ â”œâ”€â”€ data â”œâ”€â”€ layouts â”œâ”€â”€ public â”œâ”€â”€ resources â”œâ”€â”€ static â”œâ”€â”€ deploy.sh â””â”€â”€ themes â””â”€â”€ hugo-theme-codex ê¸€ ì‘ì„±ì‹œ ì£¼ì˜ì‚¬í•­\n--- title: \u0026#34;Hugo x github ë¸”ë¡œê·¸ ì„¤ì¹˜ ë°©ë²•\u0026#34; date: 2021-07-31T00:29:09+09:00 lastmod: 2021-07-31T00:33:04+09:00 slug: \u0026#34;\u0026#34; description: \u0026#34;Hugo ì™€ Github ë¥¼ ì‚¬ìš©í•´ ë¸”ë¡œê·¸ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•\u0026#34; keywords: [] draft: false tags: [\u0026#34;Linux\u0026#34;, \u0026#34;OS\u0026#34;] math: false toc: true --- Front Matter ì„¤ëª…\ntitle : ê²Œì‹œê¸€ì˜ ì œëª© date : ê²Œì‹œê¸€ì˜ ìµœì´ˆ ì‘ì„±ì‹œê°„ lastmod : ê²Œì‹œê¸€ì˜ ë§ˆì§€ë§‰ ìˆ˜ì •ì‹œê°„ description : ê²Œì‹œê¸€ì˜ ì„¤ëª…ê¸€. ê²€ìƒ‰ì—”ì§„ ìµœì í™”(SEO, Search Engine Optimization)ë¥¼ ìœ„í•´ì„œ ê²Œì‹œê¸€ ì œëª©(title)ì— ë‹´ê¸´ ë‚´ìš©ì„ í’€ì–´ ê°„ë‹¨í•˜ê²Œ ì ì–´ë†“ëŠ”ë‹¤. draft : draft: true ì¼ ê²½ìš°, ì‹¤ì œ ë°°í¬í™˜ê²½ì—ì„œ í•´ë‹¹ ê²Œì‹œê¸€ì€ ë³´ì´ì§€ ì•Šê²Œ ëœë‹¤. ì‘ì„±í•œ ê¸€ì„ ê°œë°œ í™˜ê²½ì´ ì•„ë‹Œ ì‹¤ì œ í™˜ê²½ì—ë„ ê²Œì‹œí•˜ê³  ì‹¶ë‹¤ë©´ ë°˜ë“œì‹œ draft: false ê°’ì„ ì„¤ì •í•´ì£¼ì. tags : ê²Œì‹œê¸€ì˜ íƒœê·¸ toc : table of contentì˜ ì•½ì. Front Matterì˜ ê°’ì´ toc: true ì¼ ê²½ìš° ë§ˆí¬ë‹¤ìš´ ê¸°ë°˜ì˜ ê²Œì‹œê¸€ ëª©ì°¨ë¥¼ ì •ë¦¬í•´ì„œ ë³´ì—¬ì¤€ë‹¤.\n9. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± # ì•ìœ¼ë¡œ Hugo ë¸”ë¡œê·¸ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ 2ê°œì˜ ë ˆí¬ì§€í„°ë¦¬ì— ëª¨ë‘ Commit í•´ì•¼í•œë‹¤. êµ¬ë¶„ëœ ë ˆí¬ì§€í„°ë¦¬ ê²½ë¡œë§ˆë‹¤ ë“¤ì–´ê°€ì„œ commitê³¼ pushë¥¼ ì´ 2ë²ˆ í•´ì•¼í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆë‹¤.\n# Repository name : iiivvveee.github.io $ cd public $ git add . $ git commit -m \u0026#34;First commit\u0026#34; $ git push origin master # Repository name : blog $ cd .. $ git add . $ git commit -m $ git push origin master 2ê°œì˜ ë ˆí¬ì§€í„°ë¦¬ ê´€ë¦¬ëŠ” ë³µì¡í•˜ê³  ê·€ì°®ìœ¼ë‹ˆ ì»¨í…ì¸  ë°°í¬ë¥¼ ìë™í™”í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.\në¸”ë¡œê·¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì•ˆì— deploy.sh ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë§Œë“ ë‹¤.\n. â”œâ”€â”€ archetypes â”œâ”€â”€ content â”œâ”€â”€ data â”œâ”€â”€ layouts â”œâ”€â”€ public â”œâ”€â”€ resources â”œâ”€â”€ static â”œâ”€â”€ deploy.sh \u0026lt;== ìš°ë¦¬ê°€ ì‘ì„±í•  ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ â””â”€â”€ themes â””â”€â”€ hugo-theme-codex deploy.sh ì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤. 7ë²ˆ ë¼ì¸ì— hugo -t \u0026lt;ìì‹ ì´ ì‚¬ìš©í•˜ëŠ” í…Œë§ˆ ì´ë¦„\u0026gt; ì€ ìì‹ ì˜ í™˜ê²½ì— ë§ê²Œ ë³€ê²½í•´ì¤€ë‹¤.\n#!/bin/bash echo -e \u0026#34;\\033[0;32mDeploying updates to GitHub...\\033[0m\u0026#34; # Build the project. # hugo -t \u0026lt;ì—¬ëŸ¬ë¶„ì˜ í…Œë§ˆ\u0026gt; hugo -t hugo-theme-codex # Go To Public folder, sub module commit cd public # Add changes to git. git add . # Commit changes. msg=\u0026#34;rebuilding site `date`\u0026#34; if [ $# -eq 1 ] then msg=\u0026#34;$1\u0026#34; fi git commit -m \u0026#34;$msg\u0026#34; # Push source and build repos. git push origin master # Come Back up to the Project Root cd .. # blog ì €ì¥ì†Œ Commit \u0026amp; Push git add . msg=\u0026#34;rebuilding site `date`\u0026#34; if [ $# -eq 1 ] then msg=\u0026#34;$1\u0026#34; fi git commit -m \u0026#34;$msg\u0026#34; git push origin master 10. ë°°í¬ ì‹¤í–‰ # ê²Œì‹œê¸€ì„ ì‘ì„± í›„ ë¸”ë¡œê·¸ì— ê²Œì‹œí•˜ê³  ì‹¶ì€ ìƒí™©ì—ì„œëŠ” ë°°í¬ìš© ì‰˜ìŠ¤í¬ë¦½íŠ¸ì¸ deploy.sh ë§Œ ì‹¤í–‰í•˜ë©´ ëœë‹¤.\në°°í¬ìš© ì‰˜ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì„ ìœ„í•´ ë¸”ë¡œê·¸ í”„ë¡œì íŠ¸ í´ë”ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œë‹¤.\n$ pwd /Users/ive/github_repos/blog ë°°í¬ìš© ì‰˜ìŠ¤í¬ë¦½íŠ¸(deploy.sh)ì´ í˜„ì¬ ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•˜ëŠ” ì§€ í™•ì¸í•œë‹¤.\n$ ls -lh total 16 drwxr-xr-x 3 ive staff 96B 7 30 20:00 archetypes -rw-r--r-- 1 ive staff 2.5K 1 2 22:41 config.toml drwxr-xr-x 6 ive staff 192B 12 7 23:45 content -rwxr-xr-x@ 1 ive staff 585B 1 2 22:05 deploy.sh drwxr-xr-x 5 ive staff 160B 12 8 00:39 layouts drwxr-xr-x 16 ive staff 512B 1 6 21:32 public drwxr-xr-x 4 ive staff 128B 8 1 14:43 resources drwxr-xr-x 5 ive staff 160B 1 2 23:22 static drwxr-xr-x 4 ive staff 128B 7 30 20:03 themes deploy.sh íŒŒì¼ì´ í˜„ì¬ ê²½ë¡œì— ì¡´ì¬í•œë‹¤.\nê·¸ ë‹¤ìŒ bash ëª…ë ¹ì–´ë¡œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼(deploy.sh)ì„ ì‹¤í–‰í•œë‹¤.\nmacOS í™˜ê²½ì€ í„°ë¯¸ë„ì—ì„œ bash ëª…ë ¹ì–´ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•œë‹¤.\n$ bash deploy.sh bash deploy.sh Deploying updates to GitHub... Start building sites â€¦ hugo v0.86.0+extended darwin/arm64 BuildDate=unknown | EN -------------------+----- Pages | 14 Paginator pages | 0 Non-page files | 0 Static files | 12 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0 Total in 33 ms [...] remote: Resolving deltas: 100% (5/5), completed with 5 local objects. To https://github.com/iiivvveee/blog fa10865..e13e834 master -\u0026gt; master ì •ìƒì ìœ¼ë¡œ ê²Œì‹œê¸€ì´ ë°°í¬ ì™„ë£Œëë‹¤.\nì°¸ê³ ìë£Œ # HUGO Quick Start ê³µì‹ë¬¸ì„œ\në¸”ë¡œê·¸ êµ¬ì¶•ê¸° 1 (Hugo + github.io)\në¸”ë¡œê·¸ êµ¬ì¶•ê¸° (1) Hugo + Githubìœ¼ë¡œ ê°œì¸ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°\në” ë‚˜ì•„ê°€ì„œ # ëŒ“ê¸€ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°\nê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ëŠ” ëŒ“ê¸€ ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.\nUtterances í”ŒëŸ¬ê·¸ì¸ì„ ì´ìš©í•´ì„œ ë¸”ë¡œê·¸ ëŒ“ê¸€ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ê¸€ì„ ì°¸ê³ í•˜ë©´ ëœë‹¤.\n","date":"Jul 31, 2021","permalink":"/blog/installing-hugo-github-blog/","section":"Blogs","summary":"ê°œìš” # hugo ê¸°ë°˜ì˜ ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.","title":"Hugo x github ë¸”ë¡œê·¸ ì„¤ì¹˜ ë°©ë²•"}]