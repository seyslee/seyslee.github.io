<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>minikube ë©€í‹°ë…¸ë“œ êµ¬ì„± &#183; seyslee</title><meta name=title content="minikube ë©€í‹°ë…¸ë“œ êµ¬ì„± &#183; seyslee"><meta name=description content="seyslee"><link rel=canonical href=https://seyslee.github.io/blog/k8s/multinode-in-minikube/><link type=text/css rel=stylesheet href=/css/main.bundle.min.980311a18ad0b55ec626a015b02d8161dc5f9d2c385a9806100e43c16f86e2fd1b824521ff0017c49f7a84d11834247d5741e87d58473a289ef870e9f3d13c02.css integrity="sha512-mAMRoYrQtV7GJqAVsC2BYdxfnSw4WpgGEA5DwW+G4v0bgkUh/wAXxJ96hNEYNCR9V0HofVhHOiie+HDp89E8Ag=="><script type=text/javascript src=/js/appearance.min.12e98742cd283574d030a7fe55f29597df4ee214f7ff7075b4d19a64d046a602753c715295550be7899b661619cec89c679049d36c624681671a8013c1249896.js integrity="sha512-EumHQs0oNXTQMKf+VfKVl99O4hT3/3B1tNGaZNBGpgJ1PHFSlVUL54mbZhYZzsicZ5BJ02xiRoFnGoATwSSYlg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9ae0a991bb442898e9bc60cf318b4de3ff878325ff3821625a5564b32b2f66aec0e7f7d0e00ca3ac7df59d9f01c18c88b6bdd213184f86ac9ce06d7bdffbadf8.js integrity="sha512-muCpkbtEKJjpvGDPMYtN4/+HgyX/OCFiWlVksysvZq7A5/fQ4AyjrH31nZ8BwYyItr3SExhPhqyc4G173/ut+A==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="minikube ë©€í‹°ë…¸ë“œ êµ¬ì„±"><meta property="og:description" content="minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤."><meta property="og:type" content="article"><meta property="og:url" content="https://seyslee.github.io/blog/k8s/multinode-in-minikube/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-11-10T15:46:40+09:00"><meta property="article:modified_time" content="2021-11-10T15:46:40+09:00"><meta property="og:site_name" content="seyslee"><meta name=twitter:card content="summary"><meta name=twitter:title content="minikube ë©€í‹°ë…¸ë“œ êµ¬ì„±"><meta name=twitter:description content="minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blogs","name":"minikube ë©€í‹°ë…¸ë“œ êµ¬ì„±","headline":"minikube ë©€í‹°ë…¸ë“œ êµ¬ì„±","description":"minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","abstract":"ê°œìš” # minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œ(1 master node \u002b 2 worker node)ë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.","inLanguage":"en","url":"https:\/\/seyslee.github.io\/blog\/k8s\/multinode-in-minikube\/","author":{"@type":"Person","name":"Younsung Lee"},"copyrightYear":"2021","dateCreated":"2021-11-10T15:46:40\u002b09:00","datePublished":"2021-11-10T15:46:40\u002b09:00","dateModified":"2021-11-10T15:46:40\u002b09:00","keywords":["devops","kubernetes"],"mainEntityOfPage":"true","wordCount":"907"}]</script><meta name=author content="Younsung Lee"><link href=mailto:ivecloudblack@gmail.com rel=me><link href=https://github.com/seyslee rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>seyslee</a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/blog/ title=Blogs>post</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>tag</a></li></ul></nav></header><div class=relative><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">minikube ë©€í‹°ë…¸ë“œ êµ¬ì„±</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2021-11-10 15:46:40 +0900 +0900">Nov 10, 2021</time></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#ê°œìš”>ê°œìš”</a></li><li><a href=#í™˜ê²½>í™˜ê²½</a></li><li><a href=#ë³¸ë¡ >ë³¸ë¡ </a><ul><li><ul><li><a href=#1-ë©€í‹°ë…¸ë“œ-ìƒì„±>1. ë©€í‹°ë…¸ë“œ ìƒì„±</a></li><li><a href=#2-ë…¸ë“œ-ë¦¬ìŠ¤íŠ¸-í™•ì¸>2. ë…¸ë“œ ë¦¬ìŠ¤íŠ¸ í™•ì¸</a></li><li><a href=#3-ë…¸ë“œ-ìƒíƒœ-í™•ì¸-minikube>3. ë…¸ë“œ ìƒíƒœ í™•ì¸ (minikube)</a></li><li><a href=#4-ë…¸ë“œ-ìƒíƒœ-í™•ì¸-kubernetes>4. ë…¸ë“œ ìƒíƒœ í™•ì¸ (kubernetes)</a></li><li><a href=#5-deployment-êµ¬ì„±>5. deployment êµ¬ì„±</a></li><li><a href=#6-minikube-ì¢…ë£Œ>6. minikube ì¢…ë£Œ</a></li><li><a href=#ì‹¤ìŠµí™˜ê²½-ì „ì²´-ì‚­ì œ>ì‹¤ìŠµí™˜ê²½ ì „ì²´ ì‚­ì œ</a></li></ul></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><h1 id=ê°œìš” class="relative group">ê°œìš” <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b0%9c%ec%9a%94 aria-label=Anchor>#</a></span></h1><p>minikubeë¥¼ ì´ìš©í•´ 3ëŒ€ì˜ ë…¸ë“œ(1 master node + 2 worker node)ë¥¼ ìƒì„±í•´ì„œ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.</p><br><h1 id=í™˜ê²½ class="relative group">í™˜ê²½ <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%99%98%ea%b2%bd aria-label=Anchor>#</a></span></h1><ul><li><strong>Hardware</strong> : macBook Pro (13", M1, 2020)</li><li><strong>OS</strong> : macOS Monterey 12.0.1</li><li><strong>minikube v1.24.0</strong></li></ul><p>ë…¸ë“œ 3ëŒ€ë¥¼ ìƒì„±í•  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— í•˜ë“œì›¨ì–´ì˜ ë©”ëª¨ë¦¬ ë¦¬ì†ŒìŠ¤ê°€ ìµœì†Œ 8GB ì´ìƒì€ ë˜ì–´ì•¼ ì•ˆì •ì ìœ¼ë¡œ ì‹¤ìŠµí•  ìˆ˜ ìˆë‹¤.</p><br><h1 id=ë³¸ë¡  class="relative group">ë³¸ë¡  <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%eb%b3%b8%eb%a1%a0 aria-label=Anchor>#</a></span></h1><h3 id=1-ë©€í‹°ë…¸ë“œ-ìƒì„± class="relative group">1. ë©€í‹°ë…¸ë“œ ìƒì„± <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#1-%eb%a9%80%ed%8b%b0%eb%85%b8%eb%93%9c-%ec%83%9d%ec%84%b1 aria-label=Anchor>#</a></span></h3><p><strong>ì˜µì…˜ì„¤ëª…</strong></p><p><code>--nodes=&lt;ë…¸ë“œ ìˆ˜></code> : ìƒì„±í•  ë…¸ë“œì˜ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤. Default ê°’ì€ 1ê°œ. ë‚˜ëŠ” 4ê°œê¹Œì§€ë§Œ ì‹œë„í•´ë´¤ëŠ”ë°, ë§¥ë¶ì— ì•„ì§ ë¬¸ì œëŠ” ì—†ë‹¤.</p><p><code>-p &lt;í”„ë¡œíŒŒì¼ëª…></code> : í”„ë¡œíŒŒì¼(Profile)ì„ ë”°ë¡œ ì§€ì •í•´ì„œ ì‘ì—…ì˜ì—­ì„ ë¶„ë¦¬í•œë‹¤. multinode-lab í”„ë¡œíŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì–´ ì‘ì—…ì˜ì—­ì„ êµ¬ë¶„ì§“ê³ , ë…¸ë“œ 3ëŒ€ë¥¼ ìƒì„±í•œë‹¤.</p><p><code>--driver=&lt;ë“œë¼ì´ë²„ ì´ë¦„></code> : ì–´ë–¤ ê°€ìƒí™˜ê²½ì— ë…¸ë“œë¥¼ ìƒì„±í•  ê²ƒì¸ì§€ ê²°ì •í•œë‹¤. ë”°ë¡œ ë“œë¼ì´ë²„ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ minikubeì—ì„œ íƒìƒ‰í•œ í›„ ì•Œì•„ì„œ ì§€ì •í•´ ìƒì„±í•´ì¤€ë‹¤. ë“œë¼ì´ë²„ì˜ ê²½ìš° ê°ì ì‹¤í–‰í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. (e.g. <code>minikube start --driver=docker</code>)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ minikube start --nodes<span class=o>=</span><span class=m>3</span> -p multinode-lab
</span></span><span class=line><span class=cl>ğŸ˜„  <span class=o>[</span>multinode-lab<span class=o>]</span> Darwin 12.0.1 <span class=o>(</span>arm64<span class=o>)</span> ì˜ minikube v1.24.0
</span></span><span class=line><span class=cl>âœ¨  ìë™ì ìœ¼ë¡œ docker ë“œë¼ì´ë²„ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë“œë¼ì´ë²„ ëª©ë¡: virtualbox, ssh
</span></span><span class=line><span class=cl>ğŸ‘  multinode-lab í´ëŸ¬ìŠ¤í„°ì˜ multinode-lab ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì‹œì‘í•˜ëŠ” ì¤‘
</span></span><span class=line><span class=cl>ğŸšœ  ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  Creating docker container <span class=o>(</span><span class=nv>CPUs</span><span class=o>=</span>2, <span class=nv>Memory</span><span class=o>=</span>1988MB<span class=o>)</span> ...
</span></span><span class=line><span class=cl>ğŸ³  ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘
</span></span><span class=line><span class=cl>    â–ª ì¸ì¦ì„œ ë° í‚¤ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>    â–ª ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ë¶€íŒ…...
</span></span><span class=line><span class=cl>    â–ª RBAC ê·œì¹™ì„ êµ¬ì„±í•˜ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”—  Configuring CNI <span class=o>(</span>Container Networking Interface<span class=o>)</span> ...
</span></span><span class=line><span class=cl>ğŸ”  Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸...
</span></span><span class=line><span class=cl>    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
</span></span><span class=line><span class=cl>ğŸŒŸ  ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ğŸ‘  Starting worker node multinode-lab-m02 in cluster multinode-lab
</span></span><span class=line><span class=cl>ğŸšœ  ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  Creating docker container <span class=o>(</span><span class=nv>CPUs</span><span class=o>=</span>2, <span class=nv>Memory</span><span class=o>=</span>1988MB<span class=o>)</span> ...
</span></span><span class=line><span class=cl>ğŸŒ  ë„¤íŠ¸ì›Œí¬ ì˜µì…˜ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤
</span></span><span class=line><span class=cl>    â–ª <span class=nv>NO_PROXY</span><span class=o>=</span>192.168.58.2
</span></span><span class=line><span class=cl>ğŸ³  ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘
</span></span><span class=line><span class=cl>    â–ª env <span class=nv>NO_PROXY</span><span class=o>=</span>192.168.58.2
</span></span><span class=line><span class=cl>ğŸ”  Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ğŸ‘  Starting worker node multinode-lab-m03 in cluster multinode-lab
</span></span><span class=line><span class=cl>ğŸšœ  ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  Creating docker container <span class=o>(</span><span class=nv>CPUs</span><span class=o>=</span>2, <span class=nv>Memory</span><span class=o>=</span>1988MB<span class=o>)</span> ...
</span></span><span class=line><span class=cl>ğŸŒ  ë„¤íŠ¸ì›Œí¬ ì˜µì…˜ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤
</span></span><span class=line><span class=cl>    â–ª <span class=nv>NO_PROXY</span><span class=o>=</span>192.168.58.2,192.168.58.3
</span></span><span class=line><span class=cl>ğŸ³  ì¿ ë²„ë„¤í‹°ìŠ¤ v1.22.3 ì„ Docker 20.10.8 ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘
</span></span><span class=line><span class=cl>    â–ª env <span class=nv>NO_PROXY</span><span class=o>=</span>192.168.58.2
</span></span><span class=line><span class=cl>    â–ª env <span class=nv>NO_PROXY</span><span class=o>=</span>192.168.58.2,192.168.58.3
</span></span><span class=line><span class=cl>ğŸ”  Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸...
</span></span><span class=line><span class=cl>ğŸ„  ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ <span class=s2>&#34;multinode-lab&#34;</span> í´ëŸ¬ìŠ¤í„°ì™€ <span class=s2>&#34;default&#34;</span> ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
</span></span></code></pre></div><p>minikubeëŠ” ë…¸ë“œë¥¼ ìƒì„±í•˜ë©´ì„œ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸(CNI, Container Network Interface)ê¹Œì§€ ìë™ êµ¬ì„±í•´ì¤€ë‹¤.</p><p>ë…¸ë“œ 1ëŒ€ë‹¹ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì˜ 2 CPU, ì•½ 2GBì˜ ë©”ëª¨ë¦¬ê°€ í• ë‹¹ëœë‹¤.</p><br><h3 id=2-ë…¸ë“œ-ë¦¬ìŠ¤íŠ¸-í™•ì¸ class="relative group">2. ë…¸ë“œ ë¦¬ìŠ¤íŠ¸ í™•ì¸ <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#2-%eb%85%b8%eb%93%9c-%eb%a6%ac%ec%8a%a4%ed%8a%b8-%ed%99%95%ec%9d%b8 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ minikube node list -p multinode-lab
</span></span><span class=line><span class=cl>multinode-lab	192.168.58.2
</span></span><span class=line><span class=cl>multinode-lab-m02	192.168.58.3
</span></span><span class=line><span class=cl>multinode-lab-m03	192.168.58.4
</span></span></code></pre></div><p>3ëŒ€ì˜ ë©€í‹°ë…¸ë“œë¡œ êµ¬ì„±ë˜ì—ˆë‹¤.</p><ul><li>Master Node 1ëŒ€ : <code>multinode-lab</code></li><li>Worker Node 2ëŒ€ : <code>multinode-lab-m02</code>, <code>multinode-lab-m03</code></li></ul><br><h3 id=3-ë…¸ë“œ-ìƒíƒœ-í™•ì¸-minikube class="relative group">3. ë…¸ë“œ ìƒíƒœ í™•ì¸ (minikube) <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3-%eb%85%b8%eb%93%9c-%ec%83%81%ed%83%9c-%ed%99%95%ec%9d%b8-minikube aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ minikube status -p multinode-lab
</span></span><span class=line><span class=cl>multinode-lab
</span></span><span class=line><span class=cl>type: Control Plane
</span></span><span class=line><span class=cl>host: Running
</span></span><span class=line><span class=cl>kubelet: Running
</span></span><span class=line><span class=cl>apiserver: Running
</span></span><span class=line><span class=cl>kubeconfig: Configured
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>multinode-lab-m02
</span></span><span class=line><span class=cl>type: Worker
</span></span><span class=line><span class=cl>host: Running
</span></span><span class=line><span class=cl>kubelet: Running
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>multinode-lab-m03
</span></span><span class=line><span class=cl>type: Worker
</span></span><span class=line><span class=cl>host: Running
</span></span><span class=line><span class=cl>kubelet: Running
</span></span></code></pre></div><p>3ëŒ€ì˜ ë…¸ë“œê°€ ëª¨ë‘ ì •ìƒ ì‹¤í–‰ì¤‘(<code>Running</code>)ì´ë‹¤. <code>type:</code> ê°’ì„ ë³´ë©´ í•´ë‹¹ ë…¸ë“œê°€ Master node(Control plane)ì¸ì§€ Worker nodeì¸ì§€ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.</p><br><h3 id=4-ë…¸ë“œ-ìƒíƒœ-í™•ì¸-kubernetes class="relative group">4. ë…¸ë“œ ìƒíƒœ í™•ì¸ (kubernetes) <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#4-%eb%85%b8%eb%93%9c-%ec%83%81%ed%83%9c-%ed%99%95%ec%9d%b8-kubernetes aria-label=Anchor>#</a></span></h3><p><code>kubectl</code> ëª…ë ¹ì–´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ ìƒíƒœë¥¼ í™•ì¸í•´ë³´ì.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get no
</span></span><span class=line><span class=cl>NAME                STATUS   ROLES                  AGE     VERSION
</span></span><span class=line><span class=cl>multinode-lab       Ready    control-plane,master   3m32s   v1.22.3
</span></span><span class=line><span class=cl>multinode-lab-m02   Ready    &lt;none&gt;                 3m10s   v1.22.3
</span></span><span class=line><span class=cl>multinode-lab-m03   Ready    &lt;none&gt;                 2m43s   v1.22.3
</span></span></code></pre></div><p>kubernetesì—ì„œë„ ë…¸ë“œ 3ëŒ€ê°€ ì •ìƒì ìœ¼ë¡œ ì¸ì‹ë˜ì—ˆë‹¤.</p><p>ë…¸ë“œì˜ <code>ROLES</code> ê°’ì´ <code>control-plane,master</code>ì´ë©´ ë§ˆìŠ¤í„° ë…¸ë“œ, <code>&lt;none></code>ì´ë©´ ì›Œì»¤ë…¸ë“œì´ë‹¤.</p><br><h3 id=5-deployment-êµ¬ì„± class="relative group">5. deployment êµ¬ì„± <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#5-deployment-%ea%b5%ac%ec%84%b1 aria-label=Anchor>#</a></span></h3><p><strong>yaml ì‘ì„±</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>$ cat nginx-deploy.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment           </span><span class=w> </span><span class=c># íƒ€ì…ì€ Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>               </span><span class=c># 3ê°œì˜ Podë¥¼ ìœ ì§€í•œë‹¤.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>                 </span><span class=c># Deploymentì— ì†í•˜ëŠ” Podì˜ ì¡°ê±´</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>            </span><span class=c># labelì˜ app ì†ì„±ì˜ ê°’ì´ nginx ì¸ Podë¥¼ ì°¾ì•„ë¼.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app: nginx          # labels í•„ë“œë¥¼ ì‚¬ìš©í•´ì„œ app</span><span class=p>:</span><span class=w> </span><span class=l>nginx ë ˆì´ë¸”ì„ ë¶™í˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>           </span><span class=c># containerì— ëŒ€í•œ ì •ì˜</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx        </span><span class=w> </span><span class=c># containerì˜ ì´ë¦„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx:1.7.9 </span><span class=w> </span><span class=c># Docker Hubì— ì—…ë¡œë“œëœ nginx:1.7.9 ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span></code></pre></div><p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ 3ëŒ€ì˜ podë¥¼ ë°°í¬í•˜ëŠ” deployment yamlì„ ì‘ì„±í•œë‹¤.</p><br><p><strong>deployment ìƒì„±</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl apply -f nginx-deploy.yaml
</span></span><span class=line><span class=cl>deployment.apps/nginx-deployment created
</span></span></code></pre></div><p>ì‘ì„±í•œ yaml íŒŒì¼ì„ ì ìš©í•´ deploymentë¥¼ ìƒì„±í•œë‹¤.</p><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get po -o wide
</span></span><span class=line><span class=cl>NAME                                READY   STATUS              RESTARTS   AGE   IP       NODE                NOMINATED NODE   READINESS GATES
</span></span><span class=line><span class=cl>nginx-deployment-5d59d67564-7nvnj   0/1     ContainerCreating   <span class=m>0</span>          8s    &lt;none&gt;   multinode-lab-m03   &lt;none&gt;           &lt;none&gt;
</span></span><span class=line><span class=cl>nginx-deployment-5d59d67564-8zhz7   0/1     ContainerCreating   <span class=m>0</span>          8s    &lt;none&gt;   multinode-lab-m03   &lt;none&gt;           &lt;none&gt;
</span></span><span class=line><span class=cl>nginx-deployment-5d59d67564-f2wdw   0/1     ContainerCreating   <span class=m>0</span>          8s    &lt;none&gt;   multinode-lab-m02   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p>3ê°œì˜ Podê°€ ìƒì„±(<code>ContainerCreating</code>)ì¤‘ì´ë‹¤. ì ì‹œ ê¸°ë‹¤ë¦¬ë©´ ìƒíƒœê°€ <code>Running</code>ìœ¼ë¡œ ë°”ë€Œë©° pod ìƒì„±ì´ ì™„ë£Œëœë‹¤.</p><br><p>ì´ì œ 3ëŒ€ podê°€ ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚°ë˜ì–´ ë°°í¬ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get po -o wide
</span></span><span class=line><span class=cl>NAME                                READY   STATUS    RESTARTS   AGE     IP           NODE                NOMINATED NODE   READINESS GATES
</span></span><span class=line><span class=cl>nginx-deployment-5d59d67564-7nvnj   1/1     Running   <span class=m>0</span>          2m16s   10.244.2.2   multinode-lab-m03   &lt;none&gt;           &lt;none&gt;
</span></span><span class=line><span class=cl>nginx-deployment-5d59d67564-8zhz7   1/1     Running   <span class=m>0</span>          2m16s   10.244.2.3   multinode-lab-m03   &lt;none&gt;           &lt;none&gt;
</span></span><span class=line><span class=cl>nginx-deployment-5d59d67564-f2wdw   1/1     Running   <span class=m>0</span>          2m16s   10.244.1.2   multinode-lab-m02   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p><code>multinode-lab-m02</code> ë…¸ë“œì— pod 1ëŒ€, <code>multinode-lab-m03</code>ì— pod 2ëŒ€ê°€ ë¶„ì‚° ë°°í¬ë˜ì—ˆìŒ.</p><br><h3 id=6-minikube-ì¢…ë£Œ class="relative group">6. minikube ì¢…ë£Œ <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#6-minikube-%ec%a2%85%eb%a3%8c aria-label=Anchor>#</a></span></h3><p>minikubeëŠ” ì‹¤ìŠµí™˜ê²½ì˜ ë¦¬ì†ŒìŠ¤(CPU, ë©”ëª¨ë¦¬)ë¥¼ ë§ì´ ì ìœ í•˜ê³  ì‚¬ìš©í•œë‹¤. ì§€ì†ì ìœ¼ë¡œ ì¼œë†“ëŠ” ê±´ ë©íƒ‘ ìƒíƒœì— ì¢‹ì§€ ì•Šê¸° ë•Œë¬¸ì— minikube ì‹¤ìŠµì´ ëë‚œ í›„ì—ëŠ” ë°˜ë“œì‹œ ì¢…ë£Œí•´ì£¼ì.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ minikube stop -p multinode-lab
</span></span><span class=line><span class=cl>âœ‹  Stopping node <span class=s2>&#34;multinode-lab&#34;</span>  ...
</span></span><span class=line><span class=cl>ğŸ›‘  Powering off <span class=s2>&#34;multinode-lab&#34;</span> via SSH ...
</span></span><span class=line><span class=cl>âœ‹  Stopping node <span class=s2>&#34;multinode-lab-m02&#34;</span>  ...
</span></span><span class=line><span class=cl>ğŸ›‘  Powering off <span class=s2>&#34;multinode-lab-m02&#34;</span> via SSH ...
</span></span><span class=line><span class=cl>âœ‹  Stopping node <span class=s2>&#34;multinode-lab-m03&#34;</span>  ...
</span></span><span class=line><span class=cl>ğŸ›‘  Powering off <span class=s2>&#34;multinode-lab-m03&#34;</span> via SSH ...
</span></span><span class=line><span class=cl>ğŸ›‘  <span class=m>3</span> nodes stopped.
</span></span></code></pre></div><p>3ëŒ€ì˜ ë…¸ë“œê°€ ì •ìƒ ì¢…ë£Œë˜ì—ˆë‹¤.</p><br><p><strong>ë…¸ë“œìƒíƒœ í™•ì¸</strong></p><p>ë…¸ë“œ 3ëŒ€ì˜ ìƒíƒœë¥¼ í™•ì¸í•´ë³¸ë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ minikube status -p multinode-lab
</span></span><span class=line><span class=cl>multinode-lab
</span></span><span class=line><span class=cl>type: Control Plane
</span></span><span class=line><span class=cl>host: Stopped
</span></span><span class=line><span class=cl>kubelet: Stopped
</span></span><span class=line><span class=cl>apiserver: Stopped
</span></span><span class=line><span class=cl>kubeconfig: Stopped
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>multinode-lab-m02
</span></span><span class=line><span class=cl>type: Worker
</span></span><span class=line><span class=cl>host: Stopped
</span></span><span class=line><span class=cl>kubelet: Stopped
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>multinode-lab-m03
</span></span><span class=line><span class=cl>type: Worker
</span></span><span class=line><span class=cl>host: Stopped
</span></span><span class=line><span class=cl>kubelet: Stopped
</span></span></code></pre></div><p><code>multinode-lab</code>, <code>multinode-lab-m02</code>, <code>multinode-lab03</code> ë…¸ë“œê°€ ëª¨ë‘ ì •ìƒ ì¢…ë£Œ(<code>Stopped</code>)ë˜ì—ˆë‹¤.</p><br><h3 id=ì‹¤ìŠµí™˜ê²½-ì „ì²´-ì‚­ì œ class="relative group">ì‹¤ìŠµí™˜ê²½ ì „ì²´ ì‚­ì œ <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%8b%a4%ec%8a%b5%ed%99%98%ea%b2%bd-%ec%a0%84%ec%b2%b4-%ec%82%ad%ec%a0%9c aria-label=Anchor>#</a></span></h3><p>ì‹¤ìŠµí™˜ê²½ êµ¬ì¶• ì¤‘ì— ì¤‘ì§€, ì‹œì‘ì´ ì•ˆë˜ê±°ë‚˜ ì˜¤ë¥˜ê°€ ì§€ì† ë°œìƒí•œë‹¤ë©´ ìƒì„±ëœ ì‹¤ìŠµí™˜ê²½ ì„¤ì •ê³¼ íŒŒì¼ì„ ì™„ì „íˆ ì‚­ì œí•œ í›„ êµ¬ì¶• ê³¼ì •ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œë„í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•ì´ë‹¤.</p><p>ì´ë¯¸ ë©€í‹°ë…¸ë“œì˜ ì‹¤ìŠµí™˜ê²½ì´ ì •ìƒì ìœ¼ë¡œ êµ¬ì„±ëœ ì‚¬ëŒì€ ì‹¤ìŠµí™˜ê²½ ì „ì²´ ì‚­ì œë¥¼ ì•ˆí•´ë„ ëœë‹¤.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ minikube delete --all --profile<span class=o>=</span><span class=s1>&#39;multinode-lab&#39;</span>
</span></span><span class=line><span class=cl>ğŸ”¥  docker ì˜ <span class=s2>&#34;minikube&#34;</span> ë¥¼ ì‚­ì œí•˜ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  /Users/ive/.minikube/machines/minikube ì œê±° ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ’€  <span class=s2>&#34;minikube&#34;</span> í´ëŸ¬ìŠ¤í„° ê´€ë ¨ ì •ë³´ê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤
</span></span><span class=line><span class=cl>ğŸ”¥  docker ì˜ <span class=s2>&#34;multinode-lab&#34;</span> ë¥¼ ì‚­ì œí•˜ëŠ” ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  /Users/ive/.minikube/machines/multinode-lab ì œê±° ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  /Users/ive/.minikube/machines/multinode-lab-m02 ì œê±° ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ”¥  /Users/ive/.minikube/machines/multinode-lab-m03 ì œê±° ì¤‘ ...
</span></span><span class=line><span class=cl>ğŸ’€  <span class=s2>&#34;multinode-lab&#34;</span> í´ëŸ¬ìŠ¤í„° ê´€ë ¨ ì •ë³´ê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤
</span></span><span class=line><span class=cl>ğŸ”¥  ëª¨ë“  í”„ë¡œí•„ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤
</span></span></code></pre></div><p>ìœ„ ëª…ë ¹ì–´ëŠ” ë„ì»¤ì— ì˜¬ë¼ê°„ ê°€ìƒ ë…¸ë“œ ì „ì²´ë¥¼ ì‚­ì œí•˜ê³  ê´€ë ¨ ì„¤ì •ê³¼ íŒŒì¼ê¹Œì§€ ëª¨ë‘ ì‚­ì œí•œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹¤ìŠµí™˜ê²½ì—ì„œ ê³„ì† ì—ëŸ¬ê°€ ë‚  ê²½ìš°, ìœ„ ë°©ë²•ìœ¼ë¡œ ì™„ì „ì‚­ì œí•˜ê³  ë‹¤ì‹œ êµ¬ì„±í•˜ë©´ í•´ê²°ë˜ëŠ” ì—ëŸ¬ë„ ë§ë‹¤.</p></div></section><footer class="pt-8 max-w-prose print:hidden"><script src=https://utteranc.es/client.js repo=seyslee/seyslee.github.io issue-term=pathname label=blog-comment theme=github-dark crossorigin=anonymous async></script></footer></article></main><footer class="py-10 print:hidden"><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Younsung Lee</p></div></div></footer></div></body></html>