<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>필수 쿠버네티스 관리 툴 &#183; seyslee</title><meta name=title content="필수 쿠버네티스 관리 툴 &#183; seyslee"><meta name=description content="seyslee"><link rel=canonical href=https://seyslee.github.io/blog/k8s/setup-k8s-tools/><link type=text/css rel=stylesheet href=/css/main.bundle.min.b48975bbd6c4fb86531cbdd0c02019dd556591de76cb3cd4b65f99408610039504f2f978a70784ae9adde42ca5df40cdbccfea526ba2f1562efcca9d67ee73a1.css integrity="sha512-tIl1u9bE+4ZTHL3QwCAZ3VVlkd52yzzUtl+ZQIYQA5UE8vl4pweErprd5Cyl30DNvM/qUmui8VYu/MqdZ+5zoQ=="><script type=text/javascript src=/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1+ko+UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="필수 쿠버네티스 관리 툴"><meta property="og:description" content="쿠버네티스를 쉽고 효율적으로 관리하기 위해 k9s, kubecolor 등의 유틸리티 툴을 설치하고 사용하는 방법을 안내합니다."><meta property="og:type" content="article"><meta property="og:url" content="https://seyslee.github.io/blog/k8s/setup-k8s-tools/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-03-21T23:34:40+09:00"><meta property="article:modified_time" content="2022-03-26T01:01:40+09:00"><meta property="og:site_name" content="seyslee"><meta name=twitter:card content="summary"><meta name=twitter:title content="필수 쿠버네티스 관리 툴"><meta name=twitter:description content="쿠버네티스를 쉽고 효율적으로 관리하기 위해 k9s, kubecolor 등의 유틸리티 툴을 설치하고 사용하는 방법을 안내합니다."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blogs","name":"필수 쿠버네티스 관리 툴","headline":"필수 쿠버네티스 관리 툴","description":"쿠버네티스를 쉽고 효율적으로 관리하기 위해 k9s, kubecolor 등의 유틸리티 툴을 설치하고 사용하는 방법을 안내합니다.","abstract":"개요 # 멀티 클러스터 기반의 쿠버네티스를 관리할 때 생산성Productivity을 높여주는 플러그인들을 설치하고 사용하는 방법을 안내하는 문서이다.","inLanguage":"en","url":"https:\/\/seyslee.github.io\/blog\/k8s\/setup-k8s-tools\/","author":{"@type":"Person","name":"Younsung Lee"},"copyrightYear":"2022","dateCreated":"2022-03-21T23:34:40\u002b09:00","datePublished":"2022-03-21T23:34:40\u002b09:00","dateModified":"2022-03-26T01:01:40\u002b09:00","keywords":["dev","kubernetes"],"mainEntityOfPage":"true","wordCount":"761"}]</script><meta name=author content="Younsung Lee"><link href=mailto:ivecloudblack@gmail.com rel=me><link href=https://github.com/seyslee rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>seyslee</a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/blog/ title=Blogs>post</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>tag</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">필수 쿠버네티스 관리 툴</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-03-21 23:34:40 +0900 +0900">Mar 21, 2022</time><span class="px-2 text-primary-500">&#183;</span><time datetime="2022-03-26 01:01:40 +0900 +0900">Updated: Mar 26, 2022</time></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#개요>개요</a></li><li><a href=#환경>환경</a></li><li><a href=#전제조건>전제조건</a></li><li><a href=#플러그인-목록>플러그인 목록</a><ul><li><a href=#1-k9s>1. k9s</a></li><li><a href=#2-kubecolor>2. kubecolor</a></li><li><a href=#3-krew>3. krew</a></li><li><a href=#4-stern>4. stern</a></li><li><a href=#5-tree>5. tree</a></li><li><a href=#6-kubectx--kubens>6. kubectx & kubens</a></li><li><a href=#7-kubectl-자동완성>7. kubectl 자동완성</a></li></ul></li><li><a href=#마치며>마치며</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><h2 id=개요 class="relative group">개요 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b0%9c%ec%9a%94 aria-label=Anchor>#</a></span></h2><p>멀티 클러스터 기반의 쿠버네티스를 관리할 때 생산성<sup>Productivity</sup>을 높여주는 플러그인들을 설치하고 사용하는 방법을 안내하는 문서이다.</p><p> </p><h2 id=환경 class="relative group">환경 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%99%98%ea%b2%bd aria-label=Anchor>#</a></span></h2><ul><li><strong>OS</strong> : macOS Monterey 12.3 (M1 Pro)</li><li><strong>Shell</strong> : zsh + oh-my-zsh</li><li><strong>Terminal</strong> : iTerm 2</li><li><strong>mac용 패키지 관리자</strong> : Homebrew 3.4.3</li></ul><p> </p><h2 id=전제조건 class="relative group">전제조건 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%a0%84%ec%a0%9c%ec%a1%b0%ea%b1%b4 aria-label=Anchor>#</a></span></h2><p><strong>brew</strong><br>macOS 패키지 관리자인 brew가 이미 설치된 환경이어야 합니다.<br>이 글에서는 brew 설치방법을 다루지 않습니다.</p><p> </p><h2 id=플러그인-목록 class="relative group">플러그인 목록 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%94%8c%eb%9f%ac%ea%b7%b8%ec%9d%b8-%eb%aa%a9%eb%a1%9d aria-label=Anchor>#</a></span></h2><h3 id=1-k9s class="relative group">1. k9s <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#1-k9s aria-label=Anchor>#</a></span></h3><h4 id=설명 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85 aria-label=Anchor>#</a></span></h4><p>쿠버네티스 전체 관리 툴. 알록달록한 컬러 표시, 표시된 정보가 실시간으로 바뀌는 Interactive 기능, TUI<sup>Terminal User Interface</sup> 기반이라 <code>kubectl</code> 명령어 입력 없이 방향키와 단축키만으로 클러스터와 관련된 모든 작업이 가능해진다.</p><h4 id=설치방법 class="relative group">설치방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%b9%98%eb%b0%a9%eb%b2%95 aria-label=Anchor>#</a></span></h4><p>homebrew로 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ brew install k9s
</span></span></code></pre></div><h4 id=사용법-예시 class="relative group">사용법 예시 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%82%ac%ec%9a%a9%eb%b2%95-%ec%98%88%ec%8b%9c aria-label=Anchor>#</a></span></h4><p>쿠버네티스 클러스터에 접근 가능한 환경에서 아래 명령어를 실행하면 k9s 관리 창이 뜬다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ k9s
</span></span></code></pre></div><p><figure><img class="my-0 rounded-md" src=./1.png alt></figure></p><p>위 스크린샷은 k9s에서 전체 파드를 보고 있는 화면이다.</p><p>자세한 k9s 조작법은 <a href=https://github.com/derailed/k9s>k9s 깃허브 레포지터리</a>를 참고한다.</p><p> </p><h3 id=2-kubecolor class="relative group">2. kubecolor <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#2-kubecolor aria-label=Anchor>#</a></span></h3><h4 id=설명-1 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85-1 aria-label=Anchor>#</a></span></h4><p>가독성 향상 플러그인. kubectl 명령어 결과의 각 컬럼에 색깔을 표시해서 출력해준다. kubectl 명령어 결과값에 가독성을 높여줌.</p><p>2022년 3월 기준으로, 만든 사람이 플러그인 업데이트를 잘 안하고 있는 것으로 확인됨.</p><h4 id=설치방법-1 class="relative group">설치방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%b9%98%eb%b0%a9%eb%b2%95-1 aria-label=Anchor>#</a></span></h4><p>homebrew로 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ brew install kubecolor
</span></span></code></pre></div><h4 id=사용법-예시-1 class="relative group">사용법 예시 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%82%ac%ec%9a%a9%eb%b2%95-%ec%98%88%ec%8b%9c-1 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubecolor get pod
</span></span></code></pre></div><p><code>kubectl</code> 명령어에 컬러 표시를 항상 적용하고 싶다면, 쉘 설정파일 안에 alias 설정을 추가하면 더 편하게 사용 가능하다. 아래는 zsh 기준의 설정방법.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ vi ~/.zshrc
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=c1># kubecolor</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>kubectl</span><span class=o>=</span>kubecolor
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p> </p><h3 id=3-krew class="relative group">3. krew <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3-krew aria-label=Anchor>#</a></span></h3><h4 id=설명-2 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85-2 aria-label=Anchor>#</a></span></h4><p>패키지 관리자. krew는 kubectl 플러그인 패키지 매니저이다. 쿠버네티스 전용 homebrew라고 이해하면 된다.</p><h4 id=설치방법-2 class="relative group">설치방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%b9%98%eb%b0%a9%eb%b2%95-2 aria-label=Anchor>#</a></span></h4><p>homebrew로 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ brew install krew
</span></span></code></pre></div><h4 id=사용법-예시-2 class="relative group">사용법 예시 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%82%ac%ec%9a%a9%eb%b2%95-%ec%98%88%ec%8b%9c-2 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl krew list
</span></span><span class=line><span class=cl>PLUGIN          VERSION
</span></span><span class=line><span class=cl>ctx             v0.9.4
</span></span><span class=line><span class=cl>krew            v0.4.3
</span></span><span class=line><span class=cl>ns              v0.9.4
</span></span><span class=line><span class=cl>tree            v0.4.1
</span></span></code></pre></div><p>krew로 설치한 플러그인 목록을 출력하는 명령어이다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl krew update
</span></span></code></pre></div><p>krew로 설치한 플러그인 전체의 최신 버전을 확인하는 명령어.</p><p> </p><h3 id=4-stern class="relative group">4. stern <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#4-stern aria-label=Anchor>#</a></span></h3><h4 id=설명-3 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85-3 aria-label=Anchor>#</a></span></h4><p>여러 대의 파드, 컨테이너 동시 모니터링 가능. stern과 비슷한 기능을 하는 플러그인으로는 kail이 있다.</p><h4 id=설치방법-3 class="relative group">설치방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%b9%98%eb%b0%a9%eb%b2%95-3 aria-label=Anchor>#</a></span></h4><p>homebrew로 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ brew install stern
</span></span></code></pre></div><h4 id=사용법 class="relative group">사용법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%82%ac%ec%9a%a9%eb%b2%95 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ stern -n prometheus sample-prom-pod
</span></span></code></pre></div><p><code>-n</code> : 네임스페이스 지정<br><code>sample-prom-pod</code> : (예시) 파드 이름에 <code>sample-prom-pod</code>가 포함된 파드들의 로그만 실시간 모니터링<sup>tail</sup>한다.</p><p> </p><h3 id=5-tree class="relative group">5. tree <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#5-tree aria-label=Anchor>#</a></span></h3><h4 id=설명-4 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85-4 aria-label=Anchor>#</a></span></h4><p>kubernetes 리소스 간의 관계를 트리형태로 쉽게 표현해준다.</p><h4 id=설치방법-4 class="relative group">설치방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%b9%98%eb%b0%a9%eb%b2%95-4 aria-label=Anchor>#</a></span></h4><p>krew로 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl krew install tree
</span></span></code></pre></div><h4 id=사용법-예시-3 class="relative group">사용법 예시 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%82%ac%ec%9a%a9%eb%b2%95-%ec%98%88%ec%8b%9c-3 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl tree deploy sample-redis
</span></span><span class=line><span class=cl>NAMESPACE  NAME                                    READY  REASON  AGE
</span></span><span class=line><span class=cl>sample     Deployment/sample-redis                 -              138d
</span></span><span class=line><span class=cl>sample     ├─ReplicaSet/sample-redis-000df0b0    -              138d
</span></span><span class=line><span class=cl>sample     ├─ReplicaSet/sample-redis-x00x0c000   -              125d
</span></span><span class=line><span class=cl>sample     └─ReplicaSet/sample-redis-xx0b00xxc   -              67d
</span></span><span class=line><span class=cl>sample       └─Pod/sample-redis-xx5x00xxc-zqbrk  True           2d12h
</span></span></code></pre></div><p>특정 Deployment에 속한 ReplicaSet과 Pod 정보를 트리 형태로 표현해준다.</p><p> </p><h3 id=6-kubectx--kubens class="relative group">6. kubectx & kubens <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#6-kubectx--kubens aria-label=Anchor>#</a></span></h3><p>쿠버네티스의 컨텍스트를 여러개 사용하고 있거나, 네임스페이스를 여러개 사용하고 있을 때 필요한 플러그인들이다. 몇 글자 안되는 짧은 명령어로 클러스터 간의 이동, 네임스페이스 간의 이동이 가능하므로 멀티 클러스터 환경을 관리하는 엔지니어라면 반드시 사용하는 걸 추천한다.</p><h4 id=설명-5 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85-5 aria-label=Anchor>#</a></span></h4><p>kubectx는 컨텍스트를 쉽게 변경할 수 있도록 도움을 준다. <code>kubectl config use-context dev-cluster</code> 같은 긴 명령어를 사용하지 않아도 된다.</p><p>kubens는 기본 네임스페이스를 변경할 수 있도록 도와준다. 이 두 도구 모드 [Tab] 완성기능을 지원한다. 그 뿐만 아니라, fzf<sup>fuzzy finder</sup>를 설치하면 대화식 메뉴를 제공하기 때문에, 더 편하게 사용할 수 있다.</p><h4 id=설치방법-5 class="relative group">설치방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%b9%98%eb%b0%a9%eb%b2%95-5 aria-label=Anchor>#</a></span></h4><p>krew로 설치한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl krew install kubectx
</span></span><span class=line><span class=cl>$ kubectl krew install kubens
</span></span></code></pre></div><p>설치 후 툴은 <code>kubectl ctx</code> 및 <code>kubectl ns</code> 명령어로 사용할 수 있다.<br><code>kubectl</code> 명령어가 <code>k</code>로 alias 설정되어 있다면 <code>k ctx</code>, <code>k ns</code>로 더 축약해서 사용 가능하다.</p><h4 id=사용법-예시-4 class="relative group">사용법 예시 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%82%ac%ec%9a%a9%eb%b2%95-%ec%98%88%ec%8b%9c-4 aria-label=Anchor>#</a></span></h4><p>fzf 플러그인이 같이 설치되어 있는 상태에서 실행하면, 아래처럼 방향키를 통해 이동해서 선택 가능한 대화식 메뉴로 동작한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl ctx
</span></span><span class=line><span class=cl>&gt; docker-desktop
</span></span><span class=line><span class=cl>  dev-cluster
</span></span><span class=line><span class=cl>  qa-cluster
</span></span><span class=line><span class=cl>  prod-cluster
</span></span><span class=line><span class=cl>  4/4
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl ns
</span></span><span class=line><span class=cl>  default
</span></span><span class=line><span class=cl>  redis
</span></span><span class=line><span class=cl>&gt; prometheus
</span></span><span class=line><span class=cl>  grafana
</span></span><span class=line><span class=cl>  nginx
</span></span><span class=line><span class=cl>  5/5
</span></span></code></pre></div><p> </p><h3 id=7-kubectl-자동완성 class="relative group">7. kubectl 자동완성 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#7-kubectl-%ec%9e%90%eb%8f%99%ec%99%84%ec%84%b1 aria-label=Anchor>#</a></span></h3><h4 id=설명-6 class="relative group">설명 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%eb%aa%85-6 aria-label=Anchor>#</a></span></h4><p>kubectl 자동완성은 플러그인은 아니고, kubectl에서 기본 지원하는 기능으로 추가 설치는 필요없다.</p><h4 id=설정방법 class="relative group">설정방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%84%a4%ec%a0%95%eb%b0%a9%eb%b2%95 aria-label=Anchor>#</a></span></h4><p>아래는 kubectl 자동완성 기능 설정 방법이다. (zsh 기준)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ vi ~/.zshrc
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=c1># kubectl autocompletion</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> &lt;<span class=o>(</span>kubectl completion zsh<span class=o>)</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>zsh 시작 시 <code>kubectl</code>의 자동완성 기능을 기본 활성화한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>source</span> ~/.zshrc
</span></span></code></pre></div><p>변경한 설정내용을 바로 적용한다.</p><p>이제 kubectl 명령어 입력 후 [tab] 키를 눌러본다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl <span class=o>[</span>tab<span class=o>]</span>
</span></span></code></pre></div><p>[tab] 키를 누르면 아래와 같이 <code>kubectl</code> 명령어 다음에 올 수 있는 하위 명령어 리스트가 출력된다. 이 상태에서 [tab] 키를 한 번 더 누르면 대화형 메뉴처럼 방향키와 엔터로 선택 가능하다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl
</span></span><span class=line><span class=cl>alpha          -- Commands <span class=k>for</span> features in alpha
</span></span><span class=line><span class=cl>annotate       -- 자원에 대한 주석을 업데이트합니다
</span></span><span class=line><span class=cl>api-resources  -- Print the supported API resources on the server
</span></span><span class=line><span class=cl>api-versions   -- Print the supported API versions on the server, in the form of <span class=s2>&#34;group/version&#34;</span>
</span></span><span class=line><span class=cl>apply          -- Apply a configuration to a resource by file name or stdin
</span></span><span class=line><span class=cl>attach         -- Attach to a running container
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><h4 id=참고사항 class="relative group">참고사항 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%b0%b8%ea%b3%a0%ec%82%ac%ed%95%ad aria-label=Anchor>#</a></span></h4><p>내 경우는 kubecolor랑 kubectl 자동완성<sup>autocomplete</sup>을 동시에 사용하면 버그가 발생했다. 따라서 두 기능을 같이 사용하는 것은 권장하지 않는다.</p><p>현재 이 이슈는 3월 28일 기준으로 아직 해결되지 않은 상태이다. 해당 깃허브 이슈는 <a href=https://github.com/hidetatz/kubecolor/issues/78>autocompletion bug #78</a>에 등록되어 있다.</p><p> </p><h2 id=마치며 class="relative group">마치며 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%eb%a7%88%ec%b9%98%eb%a9%b0 aria-label=Anchor>#</a></span></h2><p>유용한 쿠버네티스 플러그인을 추가로 발견할 때마다 글을 업데이트하고 있습니다.<br>이 외에 공유하고 싶은 쿠버네티스 플러그인이 있다면 언제든 댓글로 남겨주세요.</p></div></section><footer class="pt-8 max-w-prose print:hidden"><script src=https://utteranc.es/client.js repo=seyslee/seyslee.github.io issue-term=pathname label=blog-comment theme=github-dark crossorigin=anonymous async></script></footer></article></main><footer class="py-10 print:hidden"><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Younsung Lee</p></div></div></footer></div></body></html>