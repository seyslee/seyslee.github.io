<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>리눅스 부팅순서 &#183; seyslee</title><meta name=title content="리눅스 부팅순서 &#183; seyslee"><meta name=description content="seyslee"><link rel=canonical href=https://seyslee.github.io/blog/linux-boot-sequence/><link type=text/css rel=stylesheet href=/css/main.bundle.min.4237a54696344545847852e66642dc3be0dbc6296c3890031b5dfb8c9aaf683fc56c227436ecf341b430c4c690554013087987403de93d86e94529f0f48a3ab8.css integrity="sha512-QjelRpY0RUWEeFLmZkLcO+DbxilsOJADG137jJqvaD/FbCJ0NuzzQbQwxMaQVUATCHmHQD3pPYbpRSnw9Io6uA=="><script type=text/javascript src=/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1+ko+UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="리눅스 부팅순서"><meta property="og:description" content="리눅스 부팅 순서를 상세하게 설명합니다."><meta property="og:type" content="article"><meta property="og:url" content="https://seyslee.github.io/blog/linux-boot-sequence/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-11-02T23:59:40+09:00"><meta property="article:modified_time" content="2021-11-03T00:20:09+09:00"><meta property="og:site_name" content="seyslee"><meta name=twitter:card content="summary"><meta name=twitter:title content="리눅스 부팅순서"><meta name=twitter:description content="리눅스 부팅 순서를 상세하게 설명합니다."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blogs","name":"리눅스 부팅순서","headline":"리눅스 부팅순서","description":"리눅스 부팅 순서를 상세하게 설명합니다.","abstract":"개요 # 리눅스의 부팅순서를 설명한다.","inLanguage":"en","url":"https:\/\/seyslee.github.io\/blog\/linux-boot-sequence\/","author":{"@type":"Person","name":"Younsung Lee"},"copyrightYear":"2021","dateCreated":"2021-11-02T23:59:40\u002b09:00","datePublished":"2021-11-02T23:59:40\u002b09:00","dateModified":"2021-11-03T00:20:09\u002b09:00","keywords":["os","linux","hardware"],"mainEntityOfPage":"true","wordCount":"780"}]</script><meta name=author content="Younsung Lee"><link href=mailto:ivecloudblack@gmail.com rel=me><link href=https://github.com/seyslee rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>seyslee</a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/blog/ title=Blogs>post</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>tag</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">리눅스 부팅순서</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2021-11-02 23:59:40 +0900 +0900">Nov 2, 2021</time><span class="px-2 text-primary-500">&#183;</span><time datetime="2021-11-03 00:20:09 +0900 +0900">Updated: Nov 3, 2021</time></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#개요>개요</a></li><li><a href=#리눅스-부팅순서-6단계>리눅스 부팅순서 6단계</a></li><li><a href=#본론>본론</a><ul><li><ul><li><a href=#1-bios>1. BIOS</a></li><li><a href=#2-mbr>2. MBR</a></li><li><a href=#3-grub>3. GRUB</a></li><li><a href=#4-kernel>4. Kernel</a></li><li><a href=#5-init>5. Init</a></li><li><a href=#6-runlevel-programs>6. Runlevel programs</a></li></ul></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><h1 id=개요 class="relative group">개요 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b0%9c%ec%9a%94 aria-label=Anchor>#</a></span></h1><p>리눅스의 부팅순서를 설명한다.</p><p>서버의 전원 버튼을 누르고 몇 분이 지나면 로그인 프롬프트가 뜬다는 사실은 모두가 알고 있다. 우리가 전원 버튼을 누르고 로그인 프롬프트가 뜨기 전 까지의 과정을 처음부터 따라가보자.</p><p><strong>참고로 리눅스의 부팅순서, RAID의 각 레벨별 설명은 시스템 엔지니어 면접시 단골 질문이니 중요도가 높다.</strong></p><br><h1 id=리눅스-부팅순서-6단계 class="relative group">리눅스 부팅순서 6단계 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%eb%a6%ac%eb%88%85%ec%8a%a4-%eb%b6%80%ed%8c%85%ec%88%9c%ec%84%9c-6%eb%8b%a8%ea%b3%84 aria-label=Anchor>#</a></span></h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=m>1</span> <span class=p>|</span> BIOS     <span class=p>|</span> BIOS가 MBR을 실행한다.                             <span class=p>|</span>
</span></span><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=m>2</span> <span class=p>|</span> MBR      <span class=p>|</span> MBR<span class=o>(</span>Master Boot Record<span class=o>)</span>가 GRUB을 실행한다.         <span class=p>|</span>
</span></span><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=m>3</span> <span class=p>|</span> GRUB     <span class=p>|</span> GRUB<span class=o>(</span>Grand Unified Bootloader<span class=o>)</span>가 Kernel을 실행한다.<span class=p>|</span>
</span></span><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=m>4</span> <span class=p>|</span> Kernel   <span class=p>|</span> Kernel이 /sbin/init을 실행한다.                    <span class=p>|</span>
</span></span><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=m>5</span> <span class=p>|</span> Init     <span class=p>|</span> Init 프로세스가 런레벨 프로그램들을 실행한다.             <span class=p>|</span>
</span></span><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span><span class=line><span class=cl><span class=p>|</span> <span class=m>6</span> <span class=p>|</span> Runlevel <span class=p>|</span> 런레벨 프로그램들이 /etc/rc.d/rc*.d 를 실행한다.        <span class=p>|</span>
</span></span><span class=line><span class=cl>+---+----------+-------------------------------------------------+
</span></span></code></pre></div><br><h1 id=본론 class="relative group">본론 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%eb%b3%b8%eb%a1%a0 aria-label=Anchor>#</a></span></h1><h3 id=1-bios class="relative group">1. BIOS <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#1-bios aria-label=Anchor>#</a></span></h3><ul><li>BIOS는 기본 입출력 시스템(Basic Input/Output System)의 약자이다.</li><li>일부 시스템 무결성 검사를 수행한다.</li><li>부트로더 프로그램을 검색, 로드 및 실행한다.</li><li>BIOS는 플로피, CD-ROM 또는 하드 드라이브에서 부트 로더를 찾는다. BIOS 시작 중에 키(일반적으로 F2 또는 F12 이며 시스템마다 다르다)를 눌러 부팅 순서를 변경할 수 있다.</li><li>부트 로더 프로그램이 감지되어 메모리에 로드되면 BIOS가 이를 제어한다.</li><li><strong>요약</strong> : BIOS는 MBR 부트 로더를 불러오고 실행하는 역할을 한다.</li></ul><h3 id=2-mbr class="relative group">2. MBR <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#2-mbr aria-label=Anchor>#</a></span></h3><ul><li>MBR은 마스터 부트 레코드(Master Boot Record)의 약자이다.</li><li>MBR은 부팅 디스크의 첫 번째 섹터에 위치해있다. 일반적으로 첫번째 디스크 장치명을 의미하는 <code>/dev/hda</code> 또는 <code>/dev/sda</code>이다.</li><li>MBR은 크기가 512바이트이다. 여기에는 세 가지 구성 요소가 있다.<ol><li>Bootstrap code : 446bytes 크기의 첫번째 부트 로더 정보</li><li>Partition table : 64bytes 크기의 파티션 테이블 정보</li><li>Signature : 마지막 2바이트는 MBR 유효성 체크 영역으로 항상 0x55AA 값이 들어간다. (Signature 값이 0x55AA가 아닌 다른 값일 경우 부팅시 <code>Operating System not found</code> 에러와 함께 부팅이 불가능하다.)</li></ol></li><li>MBR에는 GRUB(구 시스템의 경우 LILO)에 대한 정보가 들어 있다.</li><li><strong>요약</strong> : MBR은 GRUB 부트 로더를 로드하고 실행한다.</li></ul><h3 id=3-grub class="relative group">3. GRUB <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3-grub aria-label=Anchor>#</a></span></h3><ul><li><p>GRUB은 Grand Unified Bootloader의 약자이다.</p></li><li><p>시스템에 여러 개의 커널 이미지가 설치된 경우 실행할 이미지를 선택할 수 있다.</p></li><li><p>GRUB는 부팅시 시작 화면을 표시하고 사용자가 리눅스 커널 선택을 할 때까지 몇 초 동안 기다린다. 아무 선택도 하지 않으면 grub 설정파일에 지정된 대로 기본 커널 이미지를 로드한다.</p></li><li><p>GRUB은 파일 시스템에 대한 정보를 갖고 있다. 구버전의 리눅스 부트로더인 LILO(Linux Loader)는 파일 시스템을 이해하지 못했다.</p></li><li><p>GRUB의 설정 파일은 <code>/boot/grub/grub.conf</code>이다. (<code>/etc/grub.conf</code>는 이 파일에 대한 링크파일). 다음은 CentOS의 <code>grub.conf</code> 샘플이다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#boot=/dev/sda</span>
</span></span><span class=line><span class=cl><span class=nv>default</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>timeout</span><span class=o>=</span><span class=m>5</span>
</span></span><span class=line><span class=cl><span class=nv>splashimage</span><span class=o>=(</span>hd0,0<span class=o>)</span>/boot/grub/splash.xpm.gz
</span></span><span class=line><span class=cl>hiddenmenu
</span></span><span class=line><span class=cl>title CentOS <span class=o>(</span>2.6.18-194.el5PAE<span class=o>)</span>
</span></span><span class=line><span class=cl>          root <span class=o>(</span>hd0,0<span class=o>)</span>
</span></span><span class=line><span class=cl>          kernel /boot/vmlinuz-2.6.18-194.el5PAE ro <span class=nv>root</span><span class=o>=</span><span class=nv>LABEL</span><span class=o>=</span>/
</span></span><span class=line><span class=cl>          initrd /boot/initrd-2.6.18-194.el5PAE.img
</span></span></code></pre></div></li><li><p>위의 정보에서 알 수 있듯이 GRUB 설정파일에는 커널과 initrd 이미지가 포함되어 있다.</p></li><li><p><strong>요약</strong> : GRUB은 커널 및 initrd 이미지를 불러오고 실행한다.</p></li></ul><h3 id=4-kernel class="relative group">4. Kernel <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#4-kernel aria-label=Anchor>#</a></span></h3><ul><li>GRUB 설정파일(<code>grub.conf</code>)의 <code>root=</code>에 지정된 대로 루트 파일 시스템을 디스크 장치에 마운트한다.</li><li>커널은 <code>/sbin/init</code> 프로세스를 실행합니다.</li><li><code>init</code>는 Linux Kernel에서 실행되는 첫 번째 프로그램이기 때문에 프로세스 ID(PID)가 1이다. 시간날 때 <code>ps -ef | grep init</code> 명령어를 입력해서 init 프로세스의 pid를 한 번 확인해보자.</li><li>initrd는 초기 RAM 디스크(initial ram disk)의 약자로 메모리상의 가상 디스크이며, initrd는 리눅스 커널이 부팅되고 실제 루트 파일 시스템이 마운트될 때까지 커널에 의해 임시 루트 파일 시스템으로 사용된다.</li><li>initrd는 initramfs이라는 파일시스템을 갖고 있다. initramfs은 리눅스 커널이 초기에 동작할때 필요한 드라이버나 프로그램, 바이너리 파일 등을 가지고 있어 하드 드라이브 파티션 및 기타 하드웨어에 액세스하는 데 도움을 준다.</li></ul><h3 id=5-init class="relative group">5. Init <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#5-init aria-label=Anchor>#</a></span></h3><ul><li><code>/etc/inittab</code> 설정파일을 참조해 Linux 운영체제의 실행 수준(Run Level)을 결정한다.</li><li>다음은 설정 가능한 Run Level 이다.<ul><li>0 – 종료 (Halt)</li><li>1 – 단일 사용자 모드 (Single user mode)</li><li>2 – NFS가 없는 다중 사용자 (Multiuser, without NFS)</li><li>3 – 전체 다중 사용자 모드 (Full multiuser mode)</li><li>4 – 미사용 (unused)</li><li>5 – X11 (GUI)</li><li>6 – 재부팅 (Reboot)</li></ul></li><li>Init 프로세스는 <code>/etc/inittab</code>에서 기본 Run Level을 확인한 후 각 레벨에 맞게 프로그램들을 로드한다.</li><li>시스템에서 <code>grep initdefault /etc/inittab</code>을 실행하여 기본 실행 수준을 확인할 수 있다.</li><li>스스로 서버 장애를 만들고 싶다면 <code>/etc/inittab</code> 설정파일을 열어 Default run level을 0 또는 6 으로 설정하면 된다. 이제 우리는 0과 6이 무엇을 의미하는지 알기 때문에 아마도 그렇게 하지는 않겠지만.</li><li>일반적으로 Runlevel을 3 또는 5로 설정한다.</li></ul><h3 id=6-runlevel-programs class="relative group">6. Runlevel programs <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#6-runlevel-programs aria-label=Anchor>#</a></span></h3><ul><li>Linux 시스템이 부팅될 때 다양한 서비스가 시작되는 것을 볼 수 있다. 예를 들어 <code>starting sendmail … OK</code>와 같은 메세지가 이에 해당한다. 이러한 프로그램들은 Run level 디렉토리(<code>/etc/rc.d/rc*.d/</code>)에 의해 자동실행되는 프로세스들이다.</li><li>기본 초기화 레벨(Run Level) 설정에 따라 시스템은 다음 디렉토리 중 하나를 골라 그 안에 나열된 프로그램들을 순차적으로 실행한다.<ul><li>실행 레벨 0 – <code>/etc/rc.d/rc0.d/</code></li><li>실행 레벨 1 – <code>/etc/rc.d/rc1.d/</code></li><li>실행 레벨 2 – <code>/etc/rc.d/rc2.d/</code></li><li>실행 레벨 3 – <code>/etc/rc.d/rc3.d/</code></li><li>실행 레벨 4 – <code>/etc/rc.d/rc4.d/</code></li><li>실행 레벨 5 – <code>/etc/rc.d/rc5.d/</code></li><li>실행 레벨 6 – <code>/etc/rc.d/rc6.d/</code></li></ul></li><li><code>/etc</code> 아래에 직접 이 디렉토리에 사용할 수 있는 심볼릭 링크도 있다. 따라서 <code>/etc/rc0.d</code>는 <code>/etc/rc.d/rc0.d</code>에 연결되어 있다.</li><li><code>/etc/rc.d/rc*.d/</code> 디렉토리에서 첫글자가 S와 K로 시작하는 프로그램들을 볼 수 있다.</li><li>첫글자가 <code>S</code>로 시작하는 프로그램은 자동적으로 시작(Startup) 된다.</li><li>첫글자가 <code>K</code>로 시작하는 프로그램은 자동적으로 종료(Kill) 된다.</li><li>프로그램 이름에서 S와 K 바로 옆에 숫자가 있다. 프로그램이 시작되거나 종료되어야 하는 시퀀스 번호이다.</li><li>예를 들어, <code>S12syslog</code>는 시퀀스 번호가 12인 syslog 데몬을 시작한다. <code>S80sendmail</code>은 시퀀스 번호가 80인 sendmail 데몬을 시작한다. 따라서 syslog 프로그램은 sendmail의 시퀀스 번호보다 더 낮기 때문에 sendmail 프로그램보다 먼저 시작된다.</li></ul></div></section><footer class="pt-8 max-w-prose print:hidden"><script src=https://utteranc.es/client.js repo=seyslee/seyslee.github.io issue-term=pathname label=blog-comment theme=github-dark crossorigin=anonymous async></script></footer></article></main><footer class="py-10 print:hidden"><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Younsung Lee</p></div></div></footer></div></body></html>