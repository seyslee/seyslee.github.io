<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>EC2 디스크 증설 &#183; seyslee</title><meta name=title content="EC2 디스크 증설 &#183; seyslee"><meta name=description content="seyslee"><link rel=canonical href=https://seyslee.github.io/blog/extending-linux-fs-after-resizing-ebs-volume/><link type=text/css rel=stylesheet href=/css/main.bundle.min.b48975bbd6c4fb86531cbdd0c02019dd556591de76cb3cd4b65f99408610039504f2f978a70784ae9adde42ca5df40cdbccfea526ba2f1562efcca9d67ee73a1.css integrity="sha512-tIl1u9bE+4ZTHL3QwCAZ3VVlkd52yzzUtl+ZQIYQA5UE8vl4pweErprd5Cyl30DNvM/qUmui8VYu/MqdZ+5zoQ=="><script type=text/javascript src=/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1+ko+UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="EC2 디스크 증설"><meta property="og:description" content="디스크 여유공간이 부족한 상황일 때 Linux EC2의 EBS 볼륨을 늘리는 방법을 알려주는 문서"><meta property="og:type" content="article"><meta property="og:url" content="https://seyslee.github.io/blog/extending-linux-fs-after-resizing-ebs-volume/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-04-15T18:37:30+09:00"><meta property="article:modified_time" content="2022-04-16T10:53:33+09:00"><meta property="og:site_name" content="seyslee"><meta name=twitter:card content="summary"><meta name=twitter:title content="EC2 디스크 증설"><meta name=twitter:description content="디스크 여유공간이 부족한 상황일 때 Linux EC2의 EBS 볼륨을 늘리는 방법을 알려주는 문서"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blogs","name":"EC2 디스크 증설","headline":"EC2 디스크 증설","description":"디스크 여유공간이 부족한 상황일 때 Linux EC2의 EBS 볼륨을 늘리는 방법을 알려주는 문서","abstract":"개요 # EC2 인스턴스의 디스크 공간이 부족한 상황에서는 EBS 볼륨 용량을 늘리거나 파일시스템에 불필요한 파일들을 정리해서 여유공간을 다시 확보하는 조치가 필요하다.","inLanguage":"en","url":"https:\/\/seyslee.github.io\/blog\/extending-linux-fs-after-resizing-ebs-volume\/","author":{"@type":"Person","name":"Younsung Lee"},"copyrightYear":"2022","dateCreated":"2022-04-15T18:37:30\u002b09:00","datePublished":"2022-04-15T18:37:30\u002b09:00","dateModified":"2022-04-16T10:53:33\u002b09:00","keywords":["os","linux","aws"],"mainEntityOfPage":"true","wordCount":"735"}]</script><meta name=author content="Younsung Lee"><link href=mailto:ivecloudblack@gmail.com rel=me><link href=https://github.com/seyslee rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>seyslee</a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/blog/ title=Blogs>post</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>tag</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">EC2 디스크 증설</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-04-15 18:37:30 +0900 +0900">Apr 15, 2022</time></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#개요>개요</a></li><li><a href=#환경>환경</a></li><li><a href=#전제조건>전제조건</a></li><li><a href=#해결방법>해결방법</a><ul><li><a href=#aws-management-console>AWS Management Console</a></li><li><a href=#ec2>EC2</a></li></ul></li><li><a href=#결론>결론</a></li><li><a href=#참고자료>참고자료</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><h2 id=개요 class="relative group">개요 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b0%9c%ec%9a%94 aria-label=Anchor>#</a></span></h2><p>EC2 인스턴스의 디스크 공간이 부족한 상황에서는 EBS 볼륨 용량을 늘리거나 파일시스템에 불필요한 파일들을 정리해서 여유공간을 다시 확보하는 조치가 필요하다.</p><p>이 문서에서는 Linux EC2 인스턴스의 EBS<sup>Elastic Block Storage</sup> Volume의 용량을 늘리는 방법을 소개한다.</p><p> </p><h2 id=환경 class="relative group">환경 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%99%98%ea%b2%bd aria-label=Anchor>#</a></span></h2><ul><li><strong>OS</strong> : Amazon Linux 2</li><li><strong>Type</strong> : t2.micro</li><li><strong>EBS Volume</strong><ul><li><strong>Type</strong>: gp3</li><li><strong>Size</strong>: 10GiB → gp3 30GiB (xfs 타입)</li></ul></li><li><strong>Shell</strong> : bash</li><li><strong>ID</strong> : ec2-user</li></ul><p> </p><p><strong>gp3</strong><br>배경지식으로 설명하자면 EBS 볼륨은 되도록이면 gp2 타입의 다음 세대인 gp3 타입을 사용하도록 하자. 비용이나 성능 측면에서 모두 월등하다.<br>참고로 gp2 타입은 2014년에 처음 출시되었다.</p><p>AWS 블로그 포스팅에 따르면 gp3의 최고 성능은 gp2 볼륨의 최대 처리량보다 4배 빠르다고 한다. 가격도 기존 gp2 볼륨 타입보다 20% 저렴하다.</p><p><a href=https://aws.amazon.com/ko/blogs/korea/new-amazon-ebs-gp3-volume-lets-you-provision-performance-separate-from-capacity-and-offers-20-lower-price/>AWS 블로그 포스팅</a></p><p> </p><h2 id=전제조건 class="relative group">전제조건 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%a0%84%ec%a0%9c%ec%a1%b0%ea%b1%b4 aria-label=Anchor>#</a></span></h2><ul><li>AWS Management Console에 미리 로그인되어 있어야 함</li><li>SSH나 Session Manager 등으로 EC2 Instance에 원격접속 가능한 네트워크 환경</li></ul><p> </p><h2 id=해결방법 class="relative group">해결방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%95%b4%ea%b2%b0%eb%b0%a9%eb%b2%95 aria-label=Anchor>#</a></span></h2><h3 id=aws-management-console class="relative group">AWS Management Console <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#aws-management-console aria-label=Anchor>#</a></span></h3><p>EBS<sup>Elastic Block Storage</sup> Volume의 용량을 늘리는 작업은 AWS Management Console에서 진행해야한다.</p><p>충분한 권한을 가진 AWS 계정으로 로그인했다는 전제하에 다음 과정을 진행한다.</p><p><figure><img class="my-0 rounded-md" src=./1.png alt="Volumes 화면"></figure></p><p>EC2 서비스 메뉴 → 왼쪽 사이드바 메뉴 → Volumes 클릭</p><p>이후 작업대상 EC2에 부착된 EBS Volume을 체크해준다.</p><p> </p><p><figure><img class="my-0 rounded-md" src=./2.png alt="Modify volume 화면"></figure></p><p>우측 상단에 Actions → Modify volume 클릭.</p><p> </p><p><figure><img class="my-0 rounded-md" src=./3.png alt="Size 변경 화면"></figure></p><p>EBS 볼륨의 용량 값(<code>Size (GiB)</code>)을 원하는 값으로 늘린다.<br>현재 시나리오에서는 10GB를 30GB로 변경헀다.</p><p> </p><p><figure><img class="my-0 rounded-md" src=./4.png alt="Modify 선택시 안내문"></figure></p><p>위 안내문을 요약하자면 다음과 같다.</p><ul><li>AWS Console에서 늘리면 작업이 끝나는 게 아니라, EC2 인스턴스에 접속해서 일련의 추가 명령어 실행을 해야 완벽히 적용된다.</li><li>AWS Console 영역에서 EBS Volume 용량 변경이 완료되는 데에는 몇 분 정도 소요될 수 있다.</li><li>EBS Volume 용량 변경이 시작될 때부터 EBS Volume의 비용은 바뀐 용량 기준으로 청구된다.</li></ul><p>안내문 내용을 이해했다면 [Modify] 버튼을 클릭한다.</p><p> </p><h3 id=ec2 class="relative group">EC2 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ec2 aria-label=Anchor>#</a></span></h3><h4 id=1-ec2-접속 class="relative group">1. EC2 접속 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#1-ec2-%ec%a0%91%ec%86%8d aria-label=Anchor>#</a></span></h4><p>EC2에 SSH 또는 Session Manager를 통해 접속한다.<br>각자 환경에서 접속 가능한 방법으로 EC2에 연결하면 된다.</p><p> </p><h4 id=2-디스크-구성-및-타입-확인 class="relative group">2. 디스크 구성 및 타입 확인 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#2-%eb%94%94%ec%8a%a4%ed%81%ac-%ea%b5%ac%ec%84%b1-%eb%b0%8f-%ed%83%80%ec%9e%85-%ed%99%95%ec%9d%b8 aria-label=Anchor>#</a></span></h4><p>root 파일시스템의 타입이 <code>xfs</code>인 걸 확인할 수 있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ df -hT
</span></span><span class=line><span class=cl>Filesystem     Type      Size  Used Avail Use% Mounted on
</span></span><span class=line><span class=cl>devtmpfs       devtmpfs  474M     <span class=m>0</span>  474M   0% /dev
</span></span><span class=line><span class=cl>tmpfs          tmpfs     483M     <span class=m>0</span>  483M   0% /dev/shm
</span></span><span class=line><span class=cl>tmpfs          tmpfs     483M  404K  483M   1% /run
</span></span><span class=line><span class=cl>tmpfs          tmpfs     483M     <span class=m>0</span>  483M   0% /sys/fs/cgroup
</span></span><span class=line><span class=cl>/dev/xvda1     xfs        10G  1.6G  8.5G  16% /
</span></span><span class=line><span class=cl>tmpfs          tmpfs      97M     <span class=m>0</span>   97M   0% /run/user/0
</span></span></code></pre></div><p> </p><h4 id=3-lsblk-확인 class="relative group">3. lsblk 확인 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3-lsblk-%ed%99%95%ec%9d%b8 aria-label=Anchor>#</a></span></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ lsblk
</span></span><span class=line><span class=cl>NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
</span></span><span class=line><span class=cl>xvda    202:0    <span class=m>0</span>  30G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─xvda1 202:1    <span class=m>0</span>  10G  <span class=m>0</span> part /
</span></span></code></pre></div><p>루트 볼륨 <code>/dev/xvda</code>는 <code>/dev/xvda1</code> 파티션 하나로만 구성되어 있다.</p><p>xvda 볼륨 전체용량은 <code>30G</code>이지만 xvda1 파티션의 용량은 <code>10G</code>만 할당되어 있으므로 확장이 필요하다.</p><p> </p><h4 id=4-볼륨-확장 class="relative group">4. 볼륨 확장 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#4-%eb%b3%bc%eb%a5%a8-%ed%99%95%ec%9e%a5 aria-label=Anchor>#</a></span></h4><p><code>xvda1</code> 파티션의 용량을 확장시킨다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ sudo growpart /dev/xvda <span class=m>1</span>
</span></span><span class=line><span class=cl>CHANGED: <span class=nv>partition</span><span class=o>=</span><span class=m>1</span> <span class=nv>start</span><span class=o>=</span><span class=m>4096</span> old: <span class=nv>size</span><span class=o>=</span><span class=m>20967391</span> <span class=nv>end</span><span class=o>=</span><span class=m>20971487</span> new: <span class=nv>size</span><span class=o>=</span><span class=m>62910431</span> <span class=nv>end</span><span class=o>=</span><span class=m>62914527</span>
</span></span></code></pre></div><p><code>xvda1</code> 파티션의 용량이 정상적으로 변경(<code>CHANGED</code>)된 걸 확인할 수 있다.</p><p> </p><h4 id=5-lsblk-재확인 class="relative group">5. lsblk 재확인 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#5-lsblk-%ec%9e%ac%ed%99%95%ec%9d%b8 aria-label=Anchor>#</a></span></h4><p><code>lsblk</code> 명령어를 다시 실행한다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ lsblk
</span></span><span class=line><span class=cl>NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
</span></span><span class=line><span class=cl>xvda    202:0    <span class=m>0</span>  30G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─xvda1 202:1    <span class=m>0</span>  30G  <span class=m>0</span> part /
</span></span></code></pre></div><p><code>xvda1</code> 파티션이 <code>10G</code>에서 <code>30G</code>로 확장된 걸 확인할 수 있다.</p><p> </p><p>루트 파일시스템(<code>/</code>)의 디스크 사용률을 확인했을 때는 <code>16%</code>로 그대로이다.</p><p>아직 마지막 명령어가 남아있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ df -h
</span></span><span class=line><span class=cl>Filesystem      Size  Used Avail Use% Mounted on
</span></span><span class=line><span class=cl>devtmpfs        474M     <span class=m>0</span>  474M   0% /dev
</span></span><span class=line><span class=cl>tmpfs           483M     <span class=m>0</span>  483M   0% /dev/shm
</span></span><span class=line><span class=cl>tmpfs           483M  436K  483M   1% /run
</span></span><span class=line><span class=cl>tmpfs           483M     <span class=m>0</span>  483M   0% /sys/fs/cgroup
</span></span><span class=line><span class=cl>/dev/xvda1       10G  1.6G  8.5G  16% /
</span></span><span class=line><span class=cl>tmpfs            97M     <span class=m>0</span>   97M   0% /run/user/0
</span></span></code></pre></div><p> </p><h4 id=6-파일시스템-확장-xfs class="relative group">6. 파일시스템 확장 (xfs) <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#6-%ed%8c%8c%ec%9d%bc%ec%8b%9c%ec%8a%a4%ed%85%9c-%ed%99%95%ec%9e%a5-xfs aria-label=Anchor>#</a></span></h4><p>각 볼륨에서 파일 시스템을 확장하려면 <code>xfs_growfs</code> 명령을 사용하면 된다.</p><p>아래 명령어는 루트 파일시스템(<code>/</code>)을 확장시킨다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ sudo xfs_growfs -d /
</span></span><span class=line><span class=cl>meta-data<span class=o>=</span>/dev/xvda1             <span class=nv>isize</span><span class=o>=</span><span class=m>512</span>    <span class=nv>agcount</span><span class=o>=</span>6, <span class=nv>agsize</span><span class=o>=</span><span class=m>524159</span> <span class=nv>blks</span>
</span></span><span class=line><span class=cl>         <span class=o>=</span>                       <span class=nv>sectsz</span><span class=o>=</span><span class=m>512</span>   <span class=nv>attr</span><span class=o>=</span>2, <span class=nv>projid32bit</span><span class=o>=</span><span class=nv>1</span>
</span></span><span class=line><span class=cl>         <span class=o>=</span>                       <span class=nv>crc</span><span class=o>=</span><span class=m>1</span>        <span class=nv>finobt</span><span class=o>=</span><span class=m>1</span> <span class=nv>spinodes</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>data</span>     <span class=o>=</span>                       <span class=nv>bsize</span><span class=o>=</span><span class=m>4096</span>   <span class=nv>blocks</span><span class=o>=</span>2620923, <span class=nv>imaxpct</span><span class=o>=</span><span class=nv>25</span>
</span></span><span class=line><span class=cl>         <span class=o>=</span>                       <span class=nv>sunit</span><span class=o>=</span><span class=m>0</span>      <span class=nv>swidth</span><span class=o>=</span><span class=m>0</span> blks
</span></span><span class=line><span class=cl><span class=nv>naming</span>   <span class=o>=</span>version <span class=m>2</span>              <span class=nv>bsize</span><span class=o>=</span><span class=m>4096</span>   ascii-ci<span class=o>=</span><span class=m>0</span> <span class=nv>ftype</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>log</span>      <span class=o>=</span>internal               <span class=nv>bsize</span><span class=o>=</span><span class=m>4096</span>   <span class=nv>blocks</span><span class=o>=</span>2560, <span class=nv>version</span><span class=o>=</span><span class=nv>2</span>
</span></span><span class=line><span class=cl>         <span class=o>=</span>                       <span class=nv>sectsz</span><span class=o>=</span><span class=m>512</span>   <span class=nv>sunit</span><span class=o>=</span><span class=m>0</span> blks, lazy-count<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>realtime</span> <span class=o>=</span>none                   <span class=nv>extsz</span><span class=o>=</span><span class=m>4096</span>   <span class=nv>blocks</span><span class=o>=</span>0, <span class=nv>rtextents</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>data blocks changed from <span class=m>2620923</span> to <span class=m>7863803</span>
</span></span></code></pre></div><p>만약 EC2에 XFS 툴이 설치되지 않은 경우, 다음과 같이 <code>xfsprogs</code> 패키지를 설치하면 된다.<br><code>xfsprogs</code> 패키지에는 XFS 파일 시스템을 위한 관리 도구와 디버깅 도구가 포함되어 있다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ sudo yum install xfsprogs
</span></span></code></pre></div><p> </p><p><code>df -h</code> 명령어로 파일시스템 사용률을 확인한다.<br>루트 파일시스템(<code>/</code>)의 용량이 10G에서 <code>30G</code>로 증가했다.<br>루트 파일시스템(<code>/</code>)의 사용률도 16%에서 <code>6%</code>로 감소되었다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>ec2-user@test-ec2 ~<span class=o>]</span>$ df -h
</span></span><span class=line><span class=cl>Filesystem      Size  Used Avail Use% Mounted on
</span></span><span class=line><span class=cl>devtmpfs        474M     <span class=m>0</span>  474M   0% /dev
</span></span><span class=line><span class=cl>tmpfs           483M     <span class=m>0</span>  483M   0% /dev/shm
</span></span><span class=line><span class=cl>tmpfs           483M  436K  483M   1% /run
</span></span><span class=line><span class=cl>tmpfs           483M     <span class=m>0</span>  483M   0% /sys/fs/cgroup
</span></span><span class=line><span class=cl>/dev/xvda1       30G  1.7G   29G   6% /
</span></span><span class=line><span class=cl>tmpfs            97M     <span class=m>0</span>   97M   0% /run/user/0
</span></span></code></pre></div><p>이제 EC2 인스턴스의 디스크<sup>EBS Volume</sup> 증설 작업은 정상 완료됐다.</p><p> </p><h2 id=결론 class="relative group">결론 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b2%b0%eb%a1%a0 aria-label=Anchor>#</a></span></h2><p>EC2 디스크 증설 작업은 종종 발생하기 때문에 익혀두면 좋다.<br>EBS 볼륨의 파일 시스템 타입이 xfs인지 ext4에 따라 설정 방법이 살짝 달라진다는 점을 명심하자.</p><p> </p><h2 id=참고자료 class="relative group">참고자료 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ec%b0%b8%ea%b3%a0%ec%9e%90%eb%a3%8c aria-label=Anchor>#</a></span></h2><p><strong>AWS 공식문서</strong><br><a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html#extend-file-system>Extend a Linux file system after resizing a volume</a></p></div></section><footer class="pt-8 max-w-prose print:hidden"><script src=https://utteranc.es/client.js repo=seyslee/seyslee.github.io issue-term=pathname label=blog-comment theme=github-dark crossorigin=anonymous async></script></footer></article></main><footer class="py-10 print:hidden"><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Younsung Lee</p></div></div></footer></div></body></html>