<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Networker 서비스 포트 범위 변경 &#183; seyslee</title><meta name=title content="Networker 서비스 포트 범위 변경 &#183; seyslee"><meta name=description content="My awesome website"><link rel=canonical href=https://seyslee.github.io/posts/changing-networker-service-ports/><link type=text/css rel=stylesheet href=/css/main.bundle.min.39b7a5b20cc3e1243a974332de8d5e458dd9f15f0f8e06962e8afb4c2b9ce9805c65a0f9359b396ceb5d5f8c16f9ede5d854c208fb561f4fbc5b9a05f4c3cdec.css integrity="sha512-ObelsgzD4SQ6l0My3o1eRY3Z8V8PjgaWLor7TCuc6YBcZaD5NZs5bOtdX4wW+e3l2FTCCPtWH0+8W5oF9MPN7A=="><script type=text/javascript src=/js/appearance.min.12e98742cd283574d030a7fe55f29597df4ee214f7ff7075b4d19a64d046a602753c715295550be7899b661619cec89c679049d36c624681671a8013c1249896.js integrity="sha512-EumHQs0oNXTQMKf+VfKVl99O4hT3/3B1tNGaZNBGpgJ1PHFSlVUL54mbZhYZzsicZ5BJ02xiRoFnGoATwSSYlg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9ae0a991bb442898e9bc60cf318b4de3ff878325ff3821625a5564b32b2f66aec0e7f7d0e00ca3ac7df59d9f01c18c88b6bdd213184f86ac9ce06d7bdffbadf8.js integrity="sha512-muCpkbtEKJjpvGDPMYtN4/+HgyX/OCFiWlVksysvZq7A5/fQ4AyjrH31nZ8BwYyItr3SExhPhqyc4G173/ut+A==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Networker 서비스 포트 범위 변경"><meta property="og:description" content="EMC Networker 관리서버에서 제공하는 서비스 포트 범위를 확인하고 nsrports 명령어로 변경하는 절차를 소개합니다."><meta property="og:type" content="article"><meta property="og:url" content="https://seyslee.github.io/posts/changing-networker-service-ports/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-06T20:38:30+09:00"><meta property="article:modified_time" content="2022-01-06T21:26:35+09:00"><meta property="og:site_name" content="seyslee"><meta name=twitter:card content="summary"><meta name=twitter:title content="Networker 서비스 포트 범위 변경"><meta name=twitter:description content="EMC Networker 관리서버에서 제공하는 서비스 포트 범위를 확인하고 nsrports 명령어로 변경하는 절차를 소개합니다."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Networker 서비스 포트 범위 변경","headline":"Networker 서비스 포트 범위 변경","description":"EMC Networker 관리서버에서 제공하는 서비스 포트 범위를 확인하고 nsrports 명령어로 변경하는 절차를 소개합니다.","abstract":"개요 # 넷워커 백업서버에서 nsports 명령어를 통해 EMC Networker의 서비스 포트 범위를 변경할 수 있다.","inLanguage":"en","url":"https:\/\/seyslee.github.io\/posts\/changing-networker-service-ports\/","author":{"@type":"Person","name":""},"copyrightYear":"2022","dateCreated":"2022-01-06T20:38:30\u002b09:00","datePublished":"2022-01-06T20:38:30\u002b09:00","dateModified":"2022-01-06T21:26:35\u002b09:00","keywords":["storage","backup"],"mainEntityOfPage":"true","wordCount":"475"}]</script><meta name=generator content="Hugo 0.97.3"></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>seyslee</a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Post</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Tag</a></li></ul></nav></header><main id=main-content class="relative grow"><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Networker 서비스 포트 범위 변경</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-01-06 20:38:30 +0900 +0900">6 January 2022</time><span class="px-2 text-primary-500">&#183;</span><time datetime="2022-01-06 21:26:35 +0900 +0900">Updated: 6 January 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">3 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#개요>개요</a></li><li><a href=#발단>발단</a></li><li><a href=#환경>환경</a></li><li><a href=#해결방법>해결방법</a><ul><li><ul><li><a href=#networker-백업서버-접속>Networker 백업서버 접속</a></li><li><a href=#기존-networker-서비스-포트정보-확인>기존 Networker 서비스 포트정보 확인</a></li><li><a href=#networker-서비스-포트-변경>Networker 서비스 포트 변경</a></li><li><a href=#networker-서비스-포트-확인>Networker 서비스 포트 확인</a></li></ul></li></ul></li><li><a href=#결론>결론</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><h1 id=개요 class="relative group">개요 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b0%9c%ec%9a%94 aria-label=Anchor>#</a></span></h1><p>넷워커 백업서버에서 <code>nsports</code> 명령어를 통해 EMC Networker의 서비스 포트 범위를 변경할 수 있다.</p><br><h1 id=발단 class="relative group">발단 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%eb%b0%9c%eb%8b%a8 aria-label=Anchor>#</a></span></h1><p>Networker 백업을 받을 때마다 간헐적으로 <code>auth failed</code> 에러 메세지가 발생하며 백업에 실패하는 증상이 있었다.</p><p>이 이슈를 해결하기 위해서 나는 Networker 백업서버를 점검하던 중, Networker 서비스 포트의 설정값이 쓰던 값과 상이하게 달라졌음을 발견했다.</p><br><p>야간에 같은 시간대에 동시 구동되는 백업이 많을 경우, 백업 서버의 Service port 범위를 다 써버려서 auth failed와 함께 실패할 수도 있다.</p><p>백업을 정상화하기 위해 해당 Networker 관리서버에 접속한 후 networker service port 설정 범위를 변경해보자.</p><br><h1 id=환경 class="relative group">환경 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%99%98%ea%b2%bd aria-label=Anchor>#</a></span></h1><ul><li><p><strong>OS</strong> : Red Hat Enterprise Linux Server release 6.x</p></li><li><p><strong>Shell</strong> : Bash</p></li><li><p><strong>백업 솔루션</strong> : EMC Networker 9.1.1.1</p></li><li><p><strong>작업대상</strong> : Networker 백업 관리서버</p></li></ul><br><h1 id=해결방법 class="relative group">해결방법 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ed%95%b4%ea%b2%b0%eb%b0%a9%eb%b2%95 aria-label=Anchor>#</a></span></h1><h3 id=networker-백업서버-접속 class="relative group">Networker 백업서버 접속 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#networker-%eb%b0%b1%ec%97%85%ec%84%9c%eb%b2%84-%ec%a0%91%ec%86%8d aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ hostname
</span></span><span class=line><span class=cl>backup-server
</span></span></code></pre></div><p>Networker 백업서버는 Netwokrer 에이전트가 설치된 백업 대상(Target)이 아니라 Networker가 설치된 중앙 서버를 의미한다.</p><br><h3 id=기존-networker-서비스-포트정보-확인 class="relative group">기존 Networker 서비스 포트정보 확인 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b8%b0%ec%a1%b4-networker-%ec%84%9c%eb%b9%84%ec%8a%a4-%ed%8f%ac%ed%8a%b8%ec%a0%95%eb%b3%b4-%ed%99%95%ec%9d%b8 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ nsrports
</span></span><span class=line><span class=cl>Service ports: 7937-7999 
</span></span><span class=line><span class=cl>Connection ports: 0-0 
</span></span></code></pre></div><p>현재 설정된 Networker용 서비스 포트 범위가 <code>7937-9999</code>이다.</p><br><p>기본적으로 Networker 서비스 포트의 기본값은 <code>7937-9936</code> 이지만 현재 시나리오의 서버는 너무 포트 범위가 좁다. 정상적인 넓은 포트 범위인 기본값 <code>7937-9936</code> 으로 변경한다.</p><p>아래 사진은 nsrports 명령어에 대한 메뉴얼(man) 페이지이다.</p><p><figure><img class="my-0 rounded-md" src=./1.jpg alt></figure></p><br><h3 id=networker-서비스-포트-변경 class="relative group">Networker 서비스 포트 변경 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#networker-%ec%84%9c%eb%b9%84%ec%8a%a4-%ed%8f%ac%ed%8a%b8-%eb%b3%80%ea%b2%bd aria-label=Anchor>#</a></span></h3><p><strong>명령어 형식</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ nsrports -s &lt;백업서버의 Hostname&gt; -S &lt;서비스 포트 범위&gt; ... &lt;서비스 포트 범위&gt;
</span></span></code></pre></div><br><p><strong>실제 명령어</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ nsrports -s networker-server -S 7937-9936
</span></span></code></pre></div><br><h3 id=networker-서비스-포트-확인 class="relative group">Networker 서비스 포트 확인 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#networker-%ec%84%9c%eb%b9%84%ec%8a%a4-%ed%8f%ac%ed%8a%b8-%ed%99%95%ec%9d%b8 aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ nsrports
</span></span><span class=line><span class=cl>Service ports: 7937-9936 
</span></span><span class=line><span class=cl>Connection ports: 0-0
</span></span></code></pre></div><p>Networker가 사용할 서비스 포트 범위가 <code>7937-7999</code> 에서 <code>7937-9936</code> 으로 변경되었다.</p><p>Networker 서비스 포트 변경 작업은 생각보다 간단하다. 끝!<br></p><h1 id=결론 class="relative group">결론 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%ea%b2%b0%eb%a1%a0 aria-label=Anchor>#</a></span></h1><p><figure><img class="my-0 rounded-md" src=./2.gif alt></figure></p><p>사실 백업은 힘들고 지루하고 쓸쓸한 작업이다. (물론 난 파트 내에서 백업이 재밌어서 메인으로 담당하고 제일 잘 알고 있지만)</p><p>백업은 개발자와 서비스 자체와 전혀 동떨어진 작업이며, 평소에는 백업 해놓은 티가 하나도 나질 않는다.</p><p>그러나 사실 예고없이 장애가 발생했을 때 그 무엇보다도 중요한 게 백업이 아닐까. 몇 년간 (의미 없는 것처럼 보이는) 백업을 받아놓으면 반드시 언젠가는 쓸 일이 생기곤 한다.</p><p>그 상황에서 백업을 받지 않았다면 끔찍하게 많은 작업과 노력이 들어가게 된다.</p><br><p><strong>이슈 해결은 다방면 다각도로 보자</strong></p><p>트러블슈팅을 할 때 서버와 클라이언트만 생각하면 안된다. 이슈를 처리할 때 다양한 시각과 다른 분야의 담당자들과 협업해서 처리할 필요가 있다.</p><p>백업의 경우를 예로 들면 백업이 안되는 이유는 너무 다양하다.</p><p>방화벽이나 IPS 등의 보안 장비에서 트래픽 차단. 최근에 보안 정책을 잘못 입력한 네트워크 담당자의 인적 실수. 중앙 백업서버 자체의 설정 문제. 또는 네트워크 스위치의 이슈. 백업 대상(클라이언트)의 에이전트가 다운되는 등의 에이전트 문제. 클라이언트의 설정의 문제일 수도 있다. 심지어는 (최근에 직접 경험한 케이스다) 백업 대상의 호스트네임을 시스템 관리자가 잘못 설정해서 백업 실행이 안되는 일도 있었다.</p><br><p><u>백업 서버와 대상 클라이언트만 들여다봐서 해결 안되는 경우는 생각보다 많다. 빠른 문제해결을 위해서는 다각도로 다방면으로 봐야 한다.</u></p><p>트러블슈팅에 있어서 가장 중요한 것은 이슈와 관련된 정보와 흔적들을 수집해서 끈질기게 추적하는 거라고 생각한다. 클라이언트와 서버에서 발생한 에러 로그 정보를 읽고, 증상, 관련 팀들의 최근 작업 이력 등의 정보를 하나 둘씩 수집해서 찾아가다보면 결국 이슈는 해결하게 되어있는 것 같다.</p><br><p>어쩌다보니 잔소리가 길어졌다.</p><p>아무튼 이 글을 읽고 계실 시스템 엔지니어 분들, 다들 티는 안나지만 열심히 백업하시고 장애 없는 인프라를 기원합니다. 안녕!</p></div></section><footer class="pt-8 max-w-prose print:hidden"><script src=https://utteranc.es/client.js repo=seyslee/seyslee.github.io issue-term=pathname label=blog-comment theme=github-dark crossorigin=anonymous async></script><div class=flex><div class=place-self-center><div class="text-2xl sm:text-lg"></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group" href=/posts/resolving-space-utilization-issue-in-dd2500/><span class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">DD2500 용량 부족시 Filesystem cleaning</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-01-05 21:00:30 +0900 +0900">5 January 2022</time></span></span></a></span>
<span><a class="flex text-right group" href=/posts/replacing-failed-disk-in-dd4500/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">DD4500 디스크 교체와 spare disk 설정</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-01-08 07:22:30 +0900 +0900">8 January 2022</time></span></span>
<span class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div class="absolute top-[110vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-[-5.5rem]"><a href=#the-top class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div></div></footer></body></html>